<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Modern Investments: Theory, Data, and Practice - 2&nbsp; Diversification and Optimal Portfolios</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./input_sensitivity.html" rel="next">
<link href="./miracle.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        if (typeof require !== 'undefined') {
        require.undef("plotly");
        requirejs.config({
            paths: {
                'plotly': ['https://cdn.plot.ly/plotly-2.9.0.min']
            }
        });
        require(['plotly'], function(Plotly) {
            window._Plotly = Plotly;
        });
        }
        </script>
        

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Diversification and Optimal Portfolios</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modern Investments: Theory, Data, and Practice</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./miracle.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Miracle of Compound Interest</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./portfolios.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Diversification and Optimal Portfolios</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./input_sensitivity.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Portfolio Optimization Sensitivity to Inputs</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#portfolio-statistics" id="toc-portfolio-statistics" class="nav-link active" data-scroll-target="#portfolio-statistics"> <span class="header-section-number">2.1</span> Portfolio Statistics</a>
  <ul class="collapse">
  <li><a href="#two-asset-portfolios" id="toc-two-asset-portfolios" class="nav-link" data-scroll-target="#two-asset-portfolios">Two-Asset Portfolios</a></li>
  <li><a href="#portfolios-of-n-assets" id="toc-portfolios-of-n-assets" class="nav-link" data-scroll-target="#portfolios-of-n-assets"> <span class="header-section-number">2.1.1</span> Portfolios of N Assets</a></li>
  </ul></li>
  <li><a href="#sec-diversification" id="toc-sec-diversification" class="nav-link" data-scroll-target="#sec-diversification"> <span class="header-section-number">2.2</span> Diversification</a>
  <ul class="collapse">
  <li><a href="#sec-two-risky" id="toc-sec-two-risky" class="nav-link" data-scroll-target="#sec-two-risky"> <span class="header-section-number">2.2.1</span> Portfolios of Two Risky Assets</a></li>
  <li><a href="#sec-three-risky" id="toc-sec-three-risky" class="nav-link" data-scroll-target="#sec-three-risky"> <span class="header-section-number">2.2.2</span> Three Risky Assets</a></li>
  <li><a href="#sec-frontier" id="toc-sec-frontier" class="nav-link" data-scroll-target="#sec-frontier"> <span class="header-section-number">2.2.3</span> The Efficient Frontier</a></li>
  <li><a href="#sec-short-frontier" id="toc-sec-short-frontier" class="nav-link" data-scroll-target="#sec-short-frontier"> <span class="header-section-number">2.2.4</span> Short-Selling</a></li>
  <li><a href="#sec-n-risky" id="toc-sec-n-risky" class="nav-link" data-scroll-target="#sec-n-risky"> <span class="header-section-number">2.2.5</span> N Risky Assets</a></li>
  </ul></li>
  <li><a href="#capital-allocation-to-risky-assets" id="toc-capital-allocation-to-risky-assets" class="nav-link" data-scroll-target="#capital-allocation-to-risky-assets"> <span class="header-section-number">2.3</span> Capital Allocation to Risky Assets</a>
  <ul class="collapse">
  <li><a href="#sec-cal-1risky" id="toc-sec-cal-1risky" class="nav-link" data-scroll-target="#sec-cal-1risky"> <span class="header-section-number">2.3.1</span> A Single Risky Asset</a></li>
  <li><a href="#sec-multiple-cals" id="toc-sec-multiple-cals" class="nav-link" data-scroll-target="#sec-multiple-cals"> <span class="header-section-number">2.3.2</span> Multiple Risky Assets</a></li>
  </ul></li>
  <li><a href="#sec-preferences" id="toc-sec-preferences" class="nav-link" data-scroll-target="#sec-preferences"> <span class="header-section-number">2.4</span> Preferences and Optimal Portfolios</a>
  <ul class="collapse">
  <li><a href="#a-single-risky-asset-cal" id="toc-a-single-risky-asset-cal" class="nav-link" data-scroll-target="#a-single-risky-asset-cal"> <span class="header-section-number">2.4.1</span> A Single Risky Asset CAL</a></li>
  <li><a href="#the-tangency-cal" id="toc-the-tangency-cal" class="nav-link" data-scroll-target="#the-tangency-cal"> <span class="header-section-number">2.4.2</span> The Tangency CAL</a></li>
  <li><a href="#capital-allocation-with-differential-borrowing-lending-rates" id="toc-capital-allocation-with-differential-borrowing-lending-rates" class="nav-link" data-scroll-target="#capital-allocation-with-differential-borrowing-lending-rates"> <span class="header-section-number">2.4.3</span> Capital Allocation with Differential Borrowing &amp; Lending Rates</a></li>
  </ul></li>
  <li><a href="#sec-portfolio-class" id="toc-sec-portfolio-class" class="nav-link" data-scroll-target="#sec-portfolio-class"> <span class="header-section-number">2.5</span> Appendix: The Portfolio Class in Python</a></li>
  <li><a href="#sec-excel" id="toc-sec-excel" class="nav-link" data-scroll-target="#sec-excel"> <span class="header-section-number">2.6</span> Appendix: Portfolios in Excel</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Diversification and Optimal Portfolios</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Porfolios are combinations of underlying assets. In this chapter, we will explore the risk and return of portfolios and how we can form optimal portfolios. Our discussion will focus on the expected return and standard deviation of portfolio.</p>
<section id="portfolio-statistics" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="portfolio-statistics"><span class="header-section-number">2.1</span> Portfolio Statistics</h2>
<p>We will calculate portfolio statistics as a function of the portfolio statistics of underlying assets (which themselves may be portfolios). Assume that the distribution of each asset’s return is known. The return of asset <span class="math inline">\(i\)</span> has an expected value <span class="math inline">\(E[r_i]\)</span>. Assuming that the asset is risky, there is also some dispersion in potential realizations of the return above or below the mean. The variance <span class="math inline">\(\text{var}[r_i]\)</span> is the expected squared deviations of the possible deviations from the asset’s expected value: <span class="math inline">\(E\big[(r_i-E[r_i])^2\big]\)</span>. The standard deviation <span class="math inline">\(\text{sd}[r_p]\)</span> is simply the square root of the portfolio variance.</p>
<p>When measuring comovement across assets, we will use either the covariance, an absolute measure of comovement, or correlation, which is scaled by the product of each asset’s standard deviations. Recall that the covariance of two assets measures the expected value of the product of each asset’s return deviation from its expected value:</p>
<p><span id="eq-cov-defn"><span class="math display">\[ \text{cov}[r_i,r_j] = E\big[(r_i-E[r_i])(r_j-E[r_j])\big]\\,.  \tag{2.1}\]</span></span> If return <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span> both tend to have return realizations either above or below their expected values in the same underlying states of the world, then their covariance will be positive and the returns are said to comove. Alternatively, if one asset tends to have realizations above its expected value in states of the world when the other asset has return realizations below its expected value, their covariance will be negative. Comovement is also commonly measured using correlation: <span id="eq-corr-defn"><span class="math display">\[ \text{corr}[r_i,r_j] = \rho_{ij} = \frac{\text{cov}[r_i,r_j]}{\text{sd}[r_i]\cdot\text{sd}[r_j]}\,. \tag{2.2}\]</span></span></p>
<p>Correlations range between -1 (perfectly negatively correlated) and 1 (perfectly correlated). Covariances, on the other hand, can take any values.</p>
<section id="two-asset-portfolios" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="two-asset-portfolios">Two-Asset Portfolios</h3>
<p>The return of a two-asset portfolio is the weighted sum of the returns of the underlying assets:</p>
<p><span id="eq-2asset-return"><span class="math display">\[ r_p = w_1 r_1 + w_2 r_2\,,  \tag{2.3}\]</span></span> where <span class="math inline">\(w_1\)</span> and <span class="math inline">\(w_2\)</span> are the portfolio weights. Unless otherwise stated, we will assume that portfolios are fully invested; that is, that the sum of the weights equal 1. What is the expected return and riskiness of the portfolio of the two assets? The expected return is simply the weighted average of each assets expected return: <span id="eq-2asset-expret"><span class="math display">\[ E[r_p] = w_1 E[r_1] + w_2 E[r_2]\,.  \tag{2.4}\]</span></span></p>
<p>The riskiness of the portfolio return can be measured by its variance, which measures the expected (squared) magnitude of deviations in the portfolio return from its expected value. Specifically, the portfolio variance is:</p>
<p><span id="eq-2asset-variance"><span class="math display">\[
\begin{align}
\text{var}[r_p] =&amp; E\big[(r_p-E[r_p])^2\big] \\
=&amp; E\big[( w_1 r_1 + w_2 r_2-w_1 E[r_1] - w_2 E[r_2])^2\big] \\
=&amp; E\big[( w_1 (r_1 - E[r_1])+ w_2 (r_2-E[r_2]))^2\big] \\
=&amp; E\big[(w_1^2(r_1 - E[r_1]))^2 + w_2^2(r_2-E[r_2])^2 + 2 w_1 w_2 (r_1 - E[r_1])(r_2-E[r_2])\big] \\
=&amp; w_1^2 \text{var}[r_1] + w_2^2\text{var}[r_2]  + 2 w_1 w_2 \text{cov}[r_1,r_2]\,.
\end{align}
\tag{2.5}\]</span></span></p>
</section>
<section id="portfolios-of-n-assets" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="portfolios-of-n-assets"><span class="header-section-number">2.1.1</span> Portfolios of N Assets</h3>
<p>The return of a portfolio combining <span class="math inline">\(N\)</span> assets is simply the weighted average of the underlying asset returns:</p>
<p><span id="eq-n-asset-return"><span class="math display">\[ r_p = \sum_{i=1}^{N} w_i r_i\,,  \tag{2.6}\]</span></span> where the weights <span class="math inline">\(\{w_i\}_{i=1}^N\)</span> are the fractions of capital invested in each asset. The expected return of the portfolio is the weighted sum of the expected returns of each asset: <span id="eq-n-asset-expret"><span class="math display">\[ E[r_p] = \sum_{i=1}^{N} w_i E[r_i]\,. \tag{2.7}\]</span></span></p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Calculating Portfolio Returns in Python<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Given an array of returns (either expected or realized returns) and an array of weights, the portfolio return can be calculated using matrix multiplication in numpy. Note the inputs below are decimal notation. Multiply by 100 to get percents!</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode p code-with-copy"><code class="sourceCode pascal"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> numpy <span class="kw">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Expected returns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>mns = np.<span class="kw">array</span>([<span class="dv">0.10</span>, <span class="dv">0.05</span>, <span class="dv">0.07</span>])</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Portfolio weights</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>wgts = np.<span class="kw">array</span>([<span class="dv">0.25</span>, <span class="dv">0.5</span>, <span class="dv">0.25</span>])</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="st">#P</span>ortfolio expected return</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>port_expret = wgts.T @ mns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>The riskiness of the portfolio, as measured by the portfolio variance, is:</p>
<p><span id="eq-n-asset-variance"><span class="math display">\[
\begin{align}
\text{var}[r_p] =&amp; E\bigg[(r_p-E[r_p])^2\bigg] \\
=&amp; E\bigg[\left( \sum_{i=1}^{N} w_i r_i - \sum_{i=1}^{N} w_i E[r_i]\right)^2\bigg] \\
=&amp; E\bigg[\left( \sum_{i=1}^{N} w_i (r_i - E[r_i]) \right)^2\bigg] \\
=&amp; E\bigg[\sum_{i=1}^{N} w_i^2 (r_i - E[r_i])^2 + 2 \sum_{i=1}^{N} \sum_{j&gt;i} w_i w_j (r_i - E[r_i])(r_j-E[r_j])\bigg] \\
=&amp; \sum_{i=1}^{N} w_i^2 \text{var}[r_i] + 2 \sum_{i=1}^{N} \sum_{j&gt;i} w_i w_j \text{cov}[r_i,r_j]\,.
\end{align}
\tag{2.8}\]</span></span></p>
<p>Calculating each term in the last line of <a href="#eq-n-asset-variance">Equation&nbsp;<span>2.8</span></a> and adding them up can quickly become tedious. Given a covariance matrix <span class="math inline">\(V\)</span>: <span class="math display">\[\begin{equation*}
    V =
    \begin{bmatrix}
        \text{var}[r_1]     &amp; \text{cov}[r_1,r_2] &amp; \dots  &amp; \text{cov}[r_1,r_N] \\
        \text{cov}[r_2,r_1] &amp; \text{var}[r_2]     &amp; \dots  &amp; \text{cov}[r_2,r_N] \\
        \vdots              &amp; \vdots              &amp; \ddots &amp;  \vdots \\
        \text{cov}[r_N,r_1] &amp; \text{cov}[r_N,r_2] &amp; \dots  &amp; \text{var}[r_N] \\
    \end{bmatrix}
\end{equation*}\]</span> and a vector of portfolio weights</p>
<p><span class="math display">\[w'=[w_1\, w_2\,...\,w_N]\,,\]</span></p>
<p>we can calculate the portfolio variance as the matrix product</p>
<p><span id="eq-mmult-portvar"><span class="math display">\[ \text{var}[r_p] = w'Vw \,. \tag{2.9}\]</span></span></p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Calculating Portfolio Risk in Python<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Given an array of weights, calculating the portfolio variance in python is easy using matrix multiplication in numpy. Note the inputs below are decimal notation. Multiply the standard deviations and correlations by 100 to get percents! Two methods for creating a covariance matrix are demonstrated. The first demonstrates entry element-by-element, and the second more elegantly (and concisely!) uses matrix multiplication using the array of standard deviations and the correlation matrix.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode p code-with-copy"><code class="sourceCode pascal"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> numpy <span class="kw">as</span> np</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>Inputs</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Standard deviations</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sds = np.<span class="kw">array</span>([<span class="dv">0.20</span>, <span class="dv">0.12</span>, <span class="dv">0.15</span>])</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Correlations</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>corr12 = <span class="dv">0.3</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>corr13 = <span class="dv">0.3</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>corr23 = <span class="dv">0.3</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Portfolio weights</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>wgts = np.<span class="kw">array</span>([<span class="dv">0.25</span>, <span class="dv">0.5</span>, <span class="dv">0.25</span>])</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>Method <span class="dv">1</span> <span class="kw">to</span> calculate covariance matrix</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Covariances</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>cov12 = corr12 * sds[<span class="dv">0</span>] * sds[<span class="dv">1</span>]</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>cov13 = corr13 * sds[<span class="dv">0</span>] * sds[<span class="dv">2</span>]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>cov23 = corr23 * sds[<span class="dv">1</span>] * sds[<span class="dv">2</span>]</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Covariance matrix</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>cov = np.<span class="kw">array</span>([[sds[<span class="dv">0</span>]**<span class="dv">2</span>,  cov12,     cov13], \</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                [cov12,      sds[<span class="dv">1</span>]**<span class="dv">2</span>, cov23], \</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>                [cov13,      cov23,     sds[<span class="dv">2</span>]**<span class="dv">2</span>]])</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>Method <span class="dv">2</span> <span class="kw">to</span> calculate covariance matrix</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Correlation matrix</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>C  = np.identity(<span class="dv">3</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">1</span>] = C[<span class="dv">1</span>, <span class="dv">0</span>] = corr12</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">2</span>] = C[<span class="dv">2</span>, <span class="dv">0</span>] = corr13</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">1</span>, <span class="dv">2</span>] = C[<span class="dv">2</span>, <span class="dv">1</span>] = corr23</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Covariance matrix</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>cov = np.diag(sds) @ C @ np.diag(sds)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>Portfolio risk measures</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="st">#P</span>ortfolio variance</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>port_var = wgts @ cov @ wgts</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="st">#P</span>ortfolio standard deviation</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>port_sd  = np.sqrt(port_var)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="sec-diversification" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-diversification"><span class="header-section-number">2.2</span> Diversification</h2>
<p>Diversification is a foundational concept in forming portfolios. We will discuss the benefits of diversification repeatedly throughout this chapter. In the sections below, we will discuss diversification in the context of portfolios of two, three, or many risky assets. We discuss a special portfolio which offers the lowest risk possible by combining a set of risky assets. Finally, short-selling securities may allow for even greater diversification benefits.</p>
<section id="sec-two-risky" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="sec-two-risky"><span class="header-section-number">2.2.1</span> Portfolios of Two Risky Assets</h3>
<p>Consider forming a portfolio of two risky assets. To fix ideas, let’s consider these to be a US stock market fund and an international stock market fund. If we invest all of our capital in some combination of these two assets, what are the expected returns and standard deviations of all the potential portfolios? Assume for now that we cannot short sell either asset; that is, the fraction invested in each must be non-negative.</p>
<p>For some weight <span class="math inline">\(w_{\text{US}}\)</span> in the US stock fund, the expected return of the portfolio is:</p>
<p><span class="math display">\[ E[r_p] = w_{\text{US}} E[r_{\text{US}}] + (1-w_{\text{US}}) E[r_{\text{intl}}]\,,\]</span></p>
<p>and the portfolio’s variance is: <span id="eq-2asset-variance-corr"><span class="math display">\[  \text{var}[r_p] = w_{\text{US}}^2 \text{var}[r_{\text{US}}]+ (1-w_{\text{US}})^2 \text{var}[r_{\text{intl}}]+ 2 w_{\text{US}} (1-w_{\text{US}}) \rho_{\text{US},\text{intl}}\text{sd}[r_{\text{US}}]\text{sd}[r_{\text{intl}}]\,.  \tag{2.10}\]</span></span></p>
<p>Note that we have substituted out the covariance using the definition of correlation in <a href="#eq-corr-defn">Equation&nbsp;<span>2.2</span></a>. The correlation between US stocks and stocks from developed international economies was about 75% over the last thirty years. <a href="#fig-two-asset">Figure&nbsp;<span>2.1</span></a> plots the possible portfolios of the US and international stock funds. The US stock market fund is dominated by a combination of the two funds. There is a portfolio of the two funds that generates a higher expected return for the same level of risk! This is diversification in action.</p>
<p>Diversification benefits are greater when the assets are less correlated. This can be seen from visual inspection of <a href="#eq-2asset-variance-corr">Equation&nbsp;<span>2.10</span></a>. The portfolio variance is lower for lower levels of the correlation between two assets.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Based on French data library return series</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: US Equity</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 2: Developed International</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: Emerging Market</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>mn1<span class="op">=</span> <span class="dv">6</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>mn2<span class="op">=</span> <span class="fl">6.5</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>sd1<span class="op">=</span> <span class="dv">15</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>sd2<span class="op">=</span> <span class="fl">16.5</span> </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>corr12 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c):</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c,asset1_name, asset2_name):</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c)</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    string0 <span class="op">=</span> <span class="st">"Correlation = "</span> <span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(c,<span class="dv">1</span>)) <span class="op">+</span> <span class="st">"%"</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    trace0 <span class="op">=</span> go.Scatter(</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string0 <span class="op">+</span> <span class="st">"&lt;br&gt;"</span><span class="op">+</span>asset1_name <span class="op">+</span> <span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name <span class="op">+</span> <span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Frontier: "</span> <span class="op">+</span> asset1_name <span class="op">+</span> <span class="st">" + "</span> <span class="op">+</span> asset2_name, </span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"red"</span>), </span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    trace2 <span class="op">=</span> go.Scatter(</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace0)</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2)</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="fl">0.85</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">min</span>(), <span class="fl">1.15</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="fl">0.85</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">min</span>(), <span class="fl">1.15</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y<span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>figtbl(mn1,mn2,sd1,sd2,corr12,<span class="st">"US Equity"</span>, <span class="st">"Developed Intl"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-two-asset" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="14fdd3b6-9b3f-4778-af6d-87da9db9bb1b" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("14fdd3b6-9b3f-4778-af6d-87da9db9bb1b")) {                    Plotly.newPlot(                        "14fdd3b6-9b3f-4778-af6d-87da9db9bb1b",                        [{"customdata":[100.0,99.0,98.0,97.0,96.0,95.0,94.0,93.0,92.0,91.0,90.0,89.0,88.0,87.0,86.0,85.0,84.0,83.0,82.0,81.0,80.0,79.0,78.0,77.0,76.0,75.0,74.0,73.0,72.0,71.0,70.0,69.0,68.0,67.0,65.99999999999999,64.99999999999999,64.0,63.0,62.0,61.0,60.0,59.0,58.00000000000001,57.00000000000001,56.00000000000001,55.00000000000001,54.0,53.0,52.0,51.0,50.0,49.0,48.0,47.0,46.0,44.99999999999999,43.99999999999999,42.99999999999999,42.00000000000001,41.0,40.0,39.0,38.0,37.0,36.0,35.0,34.0,32.99999999999999,31.999999999999996,30.999999999999993,29.999999999999993,29.000000000000004,28.000000000000004,27.0,26.0,25.0,24.0,23.0,21.999999999999996,20.999999999999996,19.999999999999996,18.999999999999993,17.999999999999993,16.999999999999993,16.000000000000004,15.000000000000002,14.000000000000002,13.0,12.0,10.999999999999998,9.999999999999998,8.999999999999996,7.9999999999999964,6.999999999999995,5.999999999999995,4.999999999999993,4.0000000000000036,3.0000000000000027,2.0000000000000018,1.0000000000000009,0.0],"hovertemplate":"Correlation = 75%<br>US Equity: %{text:.0f}%<br>Developed Intl: %{customdata:.0f}%<extra></extra>","line":{"color":"red"},"mode":"lines","name":"Frontier: US Equity + Developed Intl","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0],"x":[0.165,0.16447799244883796,0.1639620077944888,0.16345210307609995,0.16294833537044803,0.1624507617710671,0.16195943936677482,0.16147442521959937,0.160995776342114,0.1605235496741833,0.16005780205913114,0.15959859021933745,0.1591459707312755,0.15869999999999998,0.1582607342331003,0.15782822941413235,0.15740254127554612,0.15698372527112484,0.1565718365479565,0.15616692991795672,0.15576905982896605,0.15537828033544457,0.15499464506878938,0.15461820720730143,0.15424901944582986,0.15388713396512393,0.1535326024009233,0.1531854758128198,0.15284580465292463,0.1525136387343768,0.15218902719972946,0.15187201848925297,0.15156266030919355,0.15126099960002906,0.15096708250476326,0.1506809543373017,0.15040265955095342,0.15013224170710301,0.1498697434440988,0.14961520644640372,0.14936867141405524,0.14913017803248274,0.1488997649427292,0.14867746971212553,0.1484633288054663,0.14825737755673407,0.14805965014142106,0.14787017954949538,0.1476889975590599,0.14751613471074954,0.14735162028291376,0.14719548226762938,0.14704774734758774,0.1469084408738994,0.14677758684485856,0.1466552078857072,0.14654132522943827,0.14643595869867482,0.1463391266886611,0.14625084615139838,0.146171132580958,0.1461,0.1460374609475254,0.1459835264678861,0.14593820610107552,0.1459015078743191,0.14587343829498228,0.14585400234481055,0.14584320347551338,0.14584104360570108,0.1458475231191809,0.14586264086461617,0.14588639415654908,0.14591877877778447,0.14595978898313056,0.14600941750448837,0.14606765555727935,0.1461344928481979,0.14620991758427335,0.14629391648322224,0.14638647478507022,0.14648757626501982,0.1465972032475381,0.14671533662163613,0.1468419558573094,0.14697703902310727,0.14712056280479627,0.14727250252508103,0.14743283216434527,0.14760152438237215,0.14777855054100375,0.1479638807276965,0.14815748377992924,0.14835932731041887,0.14856937773309814,0.14878760028980909,0.14901395907766493,0.149248417077033,0.14949093618009088,0.14974147721990724,0.15],"y":[0.065,0.06495,0.0649,0.06484999999999999,0.06480000000000001,0.06475,0.0647,0.06465,0.0646,0.06455,0.06450000000000002,0.06445000000000001,0.0644,0.06435,0.0643,0.06424999999999999,0.0642,0.06414999999999998,0.0641,0.06405000000000001,0.064,0.06394999999999999,0.06390000000000001,0.06385,0.06380000000000001,0.06375,0.06369999999999999,0.06365,0.06359999999999999,0.06355000000000001,0.0635,0.06344999999999999,0.0634,0.06334999999999999,0.0633,0.06324999999999999,0.0632,0.06315,0.0631,0.06305,0.063,0.06295,0.06290000000000001,0.06285,0.06280000000000001,0.06275,0.0627,0.06265000000000001,0.0626,0.06255,0.0625,0.06245,0.062400000000000004,0.062349999999999996,0.0623,0.06225,0.0622,0.06215,0.0621,0.06205,0.06199999999999999,0.061950000000000005,0.0619,0.06185,0.061799999999999994,0.061750000000000006,0.0617,0.06165,0.0616,0.06155,0.06149999999999999,0.06145,0.0614,0.061349999999999995,0.06129999999999999,0.06125,0.06120000000000001,0.06115,0.061099999999999995,0.06105000000000001,0.061000000000000006,0.06095,0.060899999999999996,0.06085,0.0608,0.06074999999999999,0.060700000000000004,0.060649999999999996,0.06060000000000001,0.06055,0.060500000000000005,0.06045,0.0604,0.06035,0.0603,0.06025,0.0602,0.06015000000000001,0.0601,0.06005,0.06],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"black","size":15},"mode":"markers","name":"US Equity","text":["US Equity"],"x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"blue","size":15},"mode":"markers","name":"Developed Intl","text":["Developed Intl"],"x":[0.165],"y":[0.065],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"range":[0.1275,0.18975],"tickformat":".1%"},"yaxis":{"title":{"text":"Expected Return"},"range":[0.051,0.07475],"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('14fdd3b6-9b3f-4778-af6d-87da9db9bb1b');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.1: Portfolios of two risky assets</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="sec-three-risky" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="sec-three-risky"><span class="header-section-number">2.2.2</span> Three Risky Assets</h3>
<p>Could we do better? Let’s consider adding another risky asset into the mix. In addition to US and developed international stocks, assume we also have access to an emerging market equity fund. The emerging market fund has higher expected return, but also higher risk than the other two funds. It also has a correlation of about 75% with each of the other two funds.</p>
<p><a href="#fig-three-asset">Figure&nbsp;<span>2.2</span></a> shows the investment opportunity set of investing in portfolios of these three funds. Each of the blue dots represent a different possible combination of the three portfolios. The lines connecting pairs of the assets show all possible portfolios of investing just in those two assets. The diversification benefits of adding a third asset to any of the pairs of assets can be seen by the fact that many of the blue three-asset portfolios lie to the left of the two-asset frontiers. That is, adding a third asset can produce a portfolio with the same expected return but lower portfolio risk than can be achieved with just two assets.</p>
<p>For example, Consider an investor targeting a 6.5% return, the assumed expected return of the domestic international portfolio. If the investor is restricted to hold only a single asset, they must hold the domestic international fund with risk of over 16% per year. If an investor can hold two assets, they could lower the amount of risk by holding a portfolio of the US stock fund and the emerging market fund and reduce the portfolio risk to below 16% per year. An additional diversification benefit is possible if the investor holds all three assets; an even lower standard deviation can be achieved for the same expected return.</p>
<p><a href="#fig-two-asset">Figure&nbsp;<span>2.1</span></a> above showed that we could earn a higher expected return for the same level of risk as the US stock portfolio by investing in a mix of the US and developed international stocks. <a href="#fig-three-asset">Figure&nbsp;<span>2.2</span></a> shows that an even higher expected return is possible for that same level of risk if emerging market stocks are added to the portfolio. A portfolio of approximately 50% US stocks, 35% developed international stocks, and 15% emerging market has about the same risk as being 100% in US stocks, but has a higher expected return.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> uniform</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Based on French return series</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: US Equity</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 2: Developed International</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: Emerging Market</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>mn1<span class="op">=</span> <span class="dv">6</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>mn2<span class="op">=</span> <span class="fl">6.5</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>mn3<span class="op">=</span> <span class="dv">8</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>sd1<span class="op">=</span> <span class="dv">15</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>sd2<span class="op">=</span> <span class="fl">16.5</span> </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>sd3<span class="op">=</span> <span class="dv">21</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>corr12 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>corr13 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>corr23 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> random_wts(num):</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    w <span class="op">=</span> uniform.rvs(<span class="dv">0</span>, <span class="dv">1</span>, num)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> w <span class="op">/</span> w.<span class="bu">sum</span>()</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>ports <span class="op">=</span> [random_wts(<span class="dv">3</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3000</span>)]</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>ports1 <span class="op">=</span> [(<span class="dv">0</span>, x, <span class="dv">1</span> <span class="op">-</span> x) <span class="cf">for</span> x <span class="kw">in</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">21</span>)]</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>ports2 <span class="op">=</span> [(x, <span class="dv">0</span>, <span class="dv">1</span> <span class="op">-</span> x) <span class="cf">for</span> x <span class="kw">in</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">21</span>)]</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>ports3 <span class="op">=</span> [(x, <span class="dv">1</span> <span class="op">-</span> x, <span class="dv">0</span>) <span class="cf">for</span> x <span class="kw">in</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">21</span>)]</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>ports <span class="op">=</span> ports <span class="op">+</span> ports1 <span class="op">+</span> ports2 <span class="op">+</span> ports3</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>ports23 <span class="op">=</span> ports1</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>ports13 <span class="op">=</span> ports2</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>ports12 <span class="op">=</span> ports3</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_pos_def(x):</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.<span class="bu">all</span>(np.linalg.eigvals(x) <span class="op">&gt;</span> <span class="dv">0</span>):</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'True'</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'False'</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, mn3, sd1, sd2, sd3, c12, c13, c23):</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> pd.Series(np.array([mn1, mn2, mn3]), index<span class="op">=</span>[<span class="st">"stock1"</span>, <span class="st">"stock2"</span>, <span class="st">"stock3"</span>])</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array([sd1, sd2, sd3])</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    C <span class="op">=</span> np.diag([<span class="fl">1.0</span>, <span class="fl">1.0</span>, <span class="fl">1.0</span>])</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">0</span>, <span class="dv">1</span>] <span class="op">=</span> c12 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">0</span>, <span class="dv">2</span>] <span class="op">=</span> c13 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">1</span>, <span class="dv">0</span>] <span class="op">=</span> c12 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">=</span> c23 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">2</span>, <span class="dv">0</span>] <span class="op">=</span> c13 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">=</span> c23 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    D <span class="op">=</span> np.diag(sds <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    C <span class="op">=</span> D <span class="op">@</span> C <span class="op">@</span> D</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Random investment opportunity set (3-asset)</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>        dtype<span class="op">=</span><span class="bu">float</span>,</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="bu">range</span>(<span class="bu">len</span>(ports)),</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>[<span class="st">"mean"</span>, <span class="st">"stdev"</span>, <span class="st">"wt1"</span>, <span class="st">"wt2"</span>, <span class="st">"wt3"</span>],</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"mean"</span>] <span class="op">=</span> [p <span class="op">@</span> mns <span class="op">/</span> <span class="dv">100</span> <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p <span class="op">@</span> C <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> [<span class="dv">100</span> <span class="op">*</span> p[<span class="dv">0</span>] <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> [<span class="dv">100</span> <span class="op">*</span> p[<span class="dv">1</span>] <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt3"</span>] <span class="op">=</span> [<span class="dv">100</span> <span class="op">*</span> p[<span class="dv">2</span>] <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df.sort_values(by<span class="op">=</span><span class="st">"mean"</span>)</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dataframes of 2-asset portfolios</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>    df12 <span class="op">=</span> pd.DataFrame(dtype<span class="op">=</span><span class="bu">float</span>,index<span class="op">=</span><span class="bu">range</span>(<span class="bu">len</span>(ports12)),<span class="op">\</span></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'mean'</span>,<span class="st">'stdev'</span>,<span class="st">'wt1'</span>,<span class="st">'wt2'</span>,<span class="st">'wt3'</span>])</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    df12[<span class="st">'mean'</span>] <span class="op">=</span> [p <span class="op">@</span> mns<span class="op">/</span><span class="dv">100</span> <span class="cf">for</span> p <span class="kw">in</span> ports12]</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    df12[<span class="st">'stdev'</span>] <span class="op">=</span> [np.sqrt(p <span class="op">@</span> C <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports12]</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    df12[<span class="st">'wt1'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">0</span>] <span class="cf">for</span> p <span class="kw">in</span> ports12]</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>    df12[<span class="st">'wt2'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">1</span>] <span class="cf">for</span> p <span class="kw">in</span> ports12]</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>    df12[<span class="st">'wt3'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">2</span>] <span class="cf">for</span> p <span class="kw">in</span> ports12]</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>    df12 <span class="op">=</span> df12.sort_values(by<span class="op">=</span><span class="st">'mean'</span>)</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>    df13 <span class="op">=</span> pd.DataFrame(dtype<span class="op">=</span><span class="bu">float</span>,index<span class="op">=</span><span class="bu">range</span>(<span class="bu">len</span>(ports13)),<span class="op">\</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'mean'</span>,<span class="st">'stdev'</span>,<span class="st">'wt1'</span>,<span class="st">'wt2'</span>,<span class="st">'wt3'</span>])</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>    df13[<span class="st">'mean'</span>] <span class="op">=</span> [p <span class="op">@</span> mns<span class="op">/</span><span class="dv">100</span> <span class="cf">for</span> p <span class="kw">in</span> ports13]</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>    df13[<span class="st">'stdev'</span>] <span class="op">=</span> [np.sqrt(p <span class="op">@</span> C <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports13]</span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>    df13[<span class="st">'wt1'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">0</span>] <span class="cf">for</span> p <span class="kw">in</span> ports13]</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>    df13[<span class="st">'wt2'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">1</span>] <span class="cf">for</span> p <span class="kw">in</span> ports13]</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    df13[<span class="st">'wt3'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">2</span>] <span class="cf">for</span> p <span class="kw">in</span> ports13]</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>    df13 <span class="op">=</span> df13.sort_values(by<span class="op">=</span><span class="st">'mean'</span>)</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>    df23 <span class="op">=</span> pd.DataFrame(dtype<span class="op">=</span><span class="bu">float</span>,index<span class="op">=</span><span class="bu">range</span>(<span class="bu">len</span>(ports23)),<span class="op">\</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'mean'</span>,<span class="st">'stdev'</span>,<span class="st">'wt1'</span>,<span class="st">'wt2'</span>,<span class="st">'wt3'</span>])</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>    df23[<span class="st">'mean'</span>] <span class="op">=</span> [p <span class="op">@</span> mns<span class="op">/</span><span class="dv">100</span> <span class="cf">for</span> p <span class="kw">in</span> ports23]</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>    df23[<span class="st">'stdev'</span>] <span class="op">=</span> [np.sqrt(p <span class="op">@</span> C <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports23]</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>    df23[<span class="st">'wt1'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">0</span>] <span class="cf">for</span> p <span class="kw">in</span> ports23]</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    df23[<span class="st">'wt2'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">1</span>] <span class="cf">for</span> p <span class="kw">in</span> ports23]</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>    df23[<span class="st">'wt3'</span>] <span class="op">=</span> [<span class="dv">100</span><span class="op">*</span>p[<span class="dv">2</span>] <span class="cf">for</span> p <span class="kw">in</span> ports23]</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>    df23 <span class="op">=</span> df23.sort_values(by<span class="op">=</span><span class="st">'mean'</span>)   </span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df, mns <span class="op">/</span> <span class="dv">100</span>, sds <span class="op">/</span> <span class="dv">100</span>, C, df12, df13, df23</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, mn3, sd1, sd2, sd3, c12, c13, c23, asset1_name, asset2_name, asset3_name):</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a>    df, mns, sds, C, df12, df13, df23 <span class="op">=</span> data(mn1, mn2, mn3, sd1, sd2, sd3, c12, c13, c23)</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>    cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(df.shape[<span class="dv">0</span>], <span class="dv">3</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>    cd[:, <span class="dv">0</span>] <span class="op">=</span> np.array(df.wt1).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>    cd[:, <span class="dv">1</span>] <span class="op">=</span> np.array(df.wt2).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>    cd[:, <span class="dv">2</span>] <span class="op">=</span> np.array(df.wt3).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span>  asset1_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> asset2_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> asset3_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[2]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>], y<span class="op">=</span>df[<span class="st">"mean"</span>], mode<span class="op">=</span><span class="st">"markers"</span>, customdata<span class="op">=</span>cd, hovertemplate<span class="op">=</span>string, name<span class="op">=</span><span class="st">"Random Portfolios"</span></span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>    trace2 <span class="op">=</span> go.Scatter(</span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds,</span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns,</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>[asset1_name,asset2_name,asset3_name],</span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Underlying Assets"</span></span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">#--------------</span></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 2-asset frontiers</span></span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">#--------------</span></span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>    <span class="co">#12</span></span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a>    cd12 <span class="op">=</span> np.empty(shape<span class="op">=</span>(df12.shape[<span class="dv">0</span>],<span class="dv">3</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a>    cd12[:,<span class="dv">0</span>] <span class="op">=</span> np.array(df12.wt1).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a>    cd12[:,<span class="dv">1</span>] <span class="op">=</span> np.array(df12.wt2).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a>    cd12[:,<span class="dv">2</span>] <span class="op">=</span> np.array(df12.wt3).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>    string12 <span class="op">=</span> asset1_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>    string12<span class="op">+=</span> asset2_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>    string12<span class="op">+=</span> asset3_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[2]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>    string12<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>    trace12 <span class="op">=</span> go.Scatter(x<span class="op">=</span>df12[<span class="st">'stdev'</span>],y<span class="op">=</span>df12[<span class="st">'mean'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>cd12,hovertemplate<span class="op">=</span>string12, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"red"</span>), </span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">"Frontier: "</span> <span class="op">+</span> asset1_name <span class="op">+</span> <span class="st">" + "</span> <span class="op">+</span> asset2_name)</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>    <span class="co">#23</span></span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>    cd23 <span class="op">=</span> np.empty(shape<span class="op">=</span>(df23.shape[<span class="dv">0</span>],<span class="dv">3</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>    cd23[:,<span class="dv">0</span>] <span class="op">=</span> np.array(df23.wt1).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>    cd23[:,<span class="dv">1</span>] <span class="op">=</span> np.array(df23.wt2).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>    cd23[:,<span class="dv">2</span>] <span class="op">=</span> np.array(df23.wt3).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>    string23 <span class="op">=</span> asset1_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>    string23<span class="op">+=</span> asset2_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>    string23<span class="op">+=</span> asset3_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[2]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>    string23<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>    trace23 <span class="op">=</span> go.Scatter(x<span class="op">=</span>df23[<span class="st">'stdev'</span>],y<span class="op">=</span>df23[<span class="st">'mean'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>cd23,hovertemplate<span class="op">=</span>string23, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>), </span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">"Frontier: "</span> <span class="op">+</span> asset2_name <span class="op">+</span> <span class="st">" + "</span>  <span class="op">+</span> asset3_name)</span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>    <span class="co">#13</span></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>    cd13 <span class="op">=</span> np.empty(shape<span class="op">=</span>(df13.shape[<span class="dv">0</span>],<span class="dv">3</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>    cd13[:,<span class="dv">0</span>] <span class="op">=</span> np.array(df13.wt1).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>    cd13[:,<span class="dv">1</span>] <span class="op">=</span> np.array(df13.wt2).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>    cd13[:,<span class="dv">2</span>] <span class="op">=</span> np.array(df13.wt3).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>    string13 <span class="op">=</span> asset1_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>    string13<span class="op">+=</span> asset2_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>    string13<span class="op">+=</span> asset3_name <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[2]:.0f}</span><span class="st">%&lt;br&gt;"</span></span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>    string13<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>    trace13 <span class="op">=</span> go.Scatter(x<span class="op">=</span>df13[<span class="st">'stdev'</span>],y<span class="op">=</span>df13[<span class="st">'mean'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>cd13,hovertemplate<span class="op">=</span>string13, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>), </span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">"Frontier: "</span> <span class="op">+</span> asset1_name <span class="op">+</span> <span class="st">" + "</span> <span class="op">+</span> asset3_name)</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2)</span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace12)</span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace23)</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace13)</span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="fl">0.85</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">min</span>(), <span class="fl">1.15</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="fl">0.85</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">min</span>(),  <span class="fl">1.15</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])    </span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y<span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return largefig(fig), is_pos_def(C)</span></span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>figtbl(mn1, mn2, mn3, sd1, sd2, sd3, corr12, corr13, corr23, <span class="st">"US Equity"</span>, <span class="st">"Developed Intl"</span>, <span class="st">"Emerging Mkt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-three-asset" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="5b3f9453-de63-4b5c-a787-8d0676d183e3" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("5b3f9453-de63-4b5c-a787-8d0676d183e3")) {                    Plotly.newPlot(                        "5b3f9453-de63-4b5c-a787-8d0676d183e3",                        [{"customdata":[[[100.0],[0.0],[0.0]],[[100.0],[0.0],[0.0]],[[97.21571570962982],[2.42850097175856],[0.35578331861162527]],[[95.0],[4.999999999999993],[0.0]],[[90.0],[9.999999999999998],[0.0]],[[90.49238658123095],[8.450403900556974],[1.057209518212077]],[[95.58601968211957],[1.0647868445720698],[3.349193473308353]],[[85.00000000000001],[14.999999999999991],[0.0]],[[88.627570830007],[10.15906683866711],[1.2133623313259079]],[[95.0],[0.0],[4.999999999999993]],[[80.0],[19.999999999999996],[0.0]],[[91.65875927833834],[4.2471610979993155],[4.0940796236623385]],[[81.59443979798812],[16.736800434454523],[1.6687597675573596]],[[92.44496204279943],[2.1808999188806037],[5.37413803831997]],[[75.0],[25.0],[0.0]],[[88.76668820002347],[6.588029621050703],[4.645282178925823]],[[77.97302830185701],[20.576329891531895],[1.45064180661109]],[[74.51538683005926],[25.05763064340988],[0.42698252653085883]],[[85.29686671967517],[10.658605747064984],[4.044527533259852]],[[78.18015116594061],[20.050337535056403],[1.769511299002983]],[[87.21491150671194],[7.848145771095329],[4.936942722192727]],[[82.34764091031553],[14.012668897637035],[3.6396901920474267]],[[70.0],[29.999999999999993],[0.0]],[[77.46433132478022],[19.657274839645403],[2.878393835574361]],[[70.88154846480265],[28.04752392193588],[1.0709276132614864]],[[87.88247193322579],[5.052578467729123],[7.064949599045085]],[[68.82329765270117],[30.28876203373072],[0.8879403135681058]],[[76.19574741526701],[20.34930557282182],[3.4549470119111754]],[[65.0],[35.0],[0.0]],[[68.77651825755294],[29.96244871336671],[1.2610330290803546]],[[71.43753057268154],[25.891563813526048],[2.6709056137924136]],[[64.24388373408075],[35.47909487876197],[0.27702138715727803]],[[69.73621703479432],[28.089012472847458],[2.1747704923582134]],[[73.52069213493802],[22.952845405425062],[3.5264624596369245]],[[69.93593912358091],[27.666506117414517],[2.397554759004579]],[[81.79446732061861],[11.824723817201017],[6.380808862180379]],[[65.58634414340517],[33.38381209180891],[1.0298437647859298]],[[74.3182166023832],[21.61057781513724],[4.071205582479554]],[[69.51900683365902],[27.962776428476786],[2.5182167378641886]],[[72.34485604012892],[24.193349638273258],[3.4617943215978246]],[[70.50727541224899],[26.60930010507847],[2.8834244826725466]],[[63.57619536387982],[35.70519619924396],[0.7186084368762101]],[[63.849028131828476],[35.18115934857957],[0.9698125195919532]],[[80.00677707152485],[13.63259538781655],[6.360627540658593]],[[61.68863798711751],[37.91326096111859],[0.39810105176389277]],[[73.95723511372859],[21.39944641362503],[4.643318472646404]],[[86.5749821548778],[4.574141153977017],[8.85087669114518]],[[90.0],[0.0],[9.999999999999998]],[[60.00000000000001],[39.99999999999999],[0.0]],[[85.57875886153532],[5.299236206794097],[9.122004931670588]],[[64.76317033138159],[32.98410948573271],[2.2527201828857155]],[[69.47367683207706],[26.58178282234529],[3.944540345577637]],[[62.16428122302755],[36.25148686514728],[1.5842319118251735]],[[57.54244104831763],[42.39043155812147],[0.06712739356091339]],[[62.40732405115421],[35.900267235714914],[1.6924087131308723]],[[59.48745831024779],[39.40344881178695],[1.109092877965265]],[[65.47696152891706],[31.369692243862367],[3.1533462272205783]],[[71.43389393262544],[23.262065750141268],[5.304040317233295]],[[59.85990568070875],[38.641910457054635],[1.4981838622366186]],[[55.00000000000001],[44.99999999999999],[0.0]],[[62.74796374750422],[34.65016857626712],[2.6018676762286566]],[[77.75888251302668],[14.627802617916707],[7.613314869056619]],[[74.30342608960852],[19.221996374111995],[6.474577536279499]],[[65.35000943863548],[30.944043280586698],[3.7059472807778215]],[[55.477554090604066],[44.05215459324978],[0.47029131614614383]],[[59.168703006165636],[39.10762054314244],[1.7236764506919175]],[[65.43799750637311],[30.699233226970506],[3.862769266656392]],[[69.93247494801594],[24.705244685071353],[5.3622803669127]],[[82.47602835124754],[7.924765473462907],[9.599206175289577]],[[54.33382269284244],[45.44730565630999],[0.21887165084757237]],[[77.53899561219495],[14.29086829442766],[8.17013609337739]],[[59.6305220884979],[38.02260692669693],[2.3468709848051805]],[[58.6611381639772],[39.1289342831927],[2.209927552830092]],[[65.56537050804187],[29.80691630428966],[4.627713187668474]],[[64.85178947636673],[30.486990199516327],[4.66122032411695]],[[57.64108394427544],[39.91346903105344],[2.4454470246711226]],[[50.0],[50.0],[0.0]],[[58.419295839192706],[38.682483029294865],[2.8982211315124284]],[[64.09482552459266],[31.064066932392375],[4.841107543014974]],[[55.84896715481666],[42.027331682287645],[2.1237011628956775]],[[50.2247895755167],[49.46043581735227],[0.3147746071310323]],[[50.75006667040311],[48.714239757968386],[0.5356935716285]],[[56.60822637491268],[40.8449242960885],[2.546849328998817]],[[67.43206006264167],[26.40968366545505],[6.158256271903307]],[[55.73320915495222],[41.93288122883362],[2.3339096162141426]],[[50.76023097776279],[48.56107075617502],[0.6786982660621954]],[[57.32915377998249],[39.549686033068426],[3.121160186949083]],[[78.69525097346788],[11.036026926306294],[10.268722100225816]],[[53.18103554675901],[45.0527870280432],[1.7661774251977906]],[[71.02302616965254],[21.247781720245666],[7.729192110101776]],[[67.1206780219976],[26.406867264500463],[6.472454713501931]],[[84.19669934464544],[3.6054382814596773],[12.197862373894887]],[[49.43514022472643],[49.94533724272688],[0.6195225325467093]],[[75.41677594977149],[15.293282713704906],[9.289941336523592]],[[86.15743818116484],[0.9713689523118583],[12.871192866523312]],[[58.10764824374959],[38.30864757445998],[3.5837041817904236]],[[63.874990001482736],[30.612796332010774],[5.512213666506501]],[[73.55662597948637],[17.678982244924274],[8.764391775589381]],[[78.00003735482541],[11.726341898125755],[10.273620747048847]],[[68.4014405735956],[24.469184090695244],[7.12937533570915]],[[72.85295654118619],[18.310415698085635],[8.836627760728168]],[[48.236611249373965],[51.12942346128876],[0.633965289337294]],[[58.481819200872984],[37.35104151129895],[4.167139287828051]],[[61.27778003940816],[33.610597008296],[5.111622952295846]],[[52.32525160761288],[45.49864837648428],[2.1761000159028465]],[[82.89816664578795],[4.733190406118284],[12.368642948093768]],[[68.27876434296144],[24.136211697952362],[7.5850239590862065]],[[51.63943478552815],[46.20401001380222],[2.156555200669629]],[[70.55663782285998],[20.931404267824586],[8.51195790931544]],[[45.0],[55.00000000000001],[0.0]],[[44.99471630393238],[55.00279538401123],[0.0024883120564008665]],[[61.51140291316357],[32.95097759856871],[5.537619488267719]],[[76.66579888565084],[12.740874514300948],[10.593326600048215]],[[50.62527827411623],[47.44281691901237],[1.9319048068713929]],[[54.49341319818243],[42.240605284035084],[3.2659815177825]],[[68.17024954615674],[23.927728872096075],[7.902021581747191]],[[78.91832023203162],[9.54032071298106],[11.541359054987323]],[[66.85104133062808],[25.47325415922889],[7.675704510143026]],[[76.08326685479845],[13.138719264249573],[10.77801388095199]],[[50.2710458537212],[47.4576593709912],[2.2712947752876085]],[[69.16480239248742],[22.18836688318567],[8.646830724326923]],[[43.58506233695222],[56.289957946325266],[0.12497971672252525]],[[46.516208435843495],[52.32973746581795],[1.154054098338548]],[[48.59305062759091],[49.55191310355152],[1.8550362688575621]],[[54.5090905060345],[41.65802422551064],[3.8328852684548713]],[[45.25498811599963],[53.87659188451275],[0.8684199994876249]],[[76.79495217708752],[11.761171160839123],[11.443876662073347]],[[45.02015464524954],[54.05931147636953],[0.9205338783809253]],[[50.805258537439194],[46.266486385298116],[2.9282550772626927]],[[45.175546564440374],[53.75202702865136],[1.0724264069082705]],[[48.32804756502029],[49.5219588913479],[2.1499935436318047]],[[50.31956364787903],[46.82638133912227],[2.854055012998698]],[[48.81019254442975],[48.82301685510203],[2.366790600468225]],[[53.78612030361929],[42.117096236038975],[4.096783460341722]],[[56.17290971566584],[38.91989737743799],[4.907192906896162]],[[47.42634586420356],[50.58061945046065],[1.9930346853357854]],[[48.832110354091945],[48.67346895122662],[2.494420694681422]],[[62.69029425136333],[30.18818767795086],[7.121518070685802]],[[81.86224979164295],[4.6149654560994735],[13.522784752257577]],[[48.94454081038658],[48.46051061097697],[2.594948578636454]],[[71.19868540661915],[18.696738923698636],[10.104575669682232]],[[75.58535060043678],[12.793940095429596],[11.620709304133618]],[[82.25266742450344],[3.855321929367481],[13.892010646129076]],[[45.34989188030543],[53.00631218028364],[1.6437959394109285]],[[63.52109387178617],[28.681687419739887],[7.797218708473941]],[[85.00000000000001],[0.0],[14.999999999999991]],[[40.0],[60.0],[0.0]],[[48.59252905967979],[48.53831950125026],[2.8691514390699733]],[[45.4772588476028],[52.55757741194369],[1.9651637404535085]],[[56.42337802916537],[37.96051879057954],[5.6161031802550845]],[[52.26980897298357],[43.459780179924905],[4.270410847091521]],[[79.12211395116228],[7.636548565428428],[13.241337483409302]],[[44.759881901922874],[53.387190013141115],[1.852928084935996]],[[84.37920780307292],[0.5227813943315803],[15.098010802595507]],[[47.32308271404948],[49.72122207857394],[2.955695207376591]],[[59.0767100457643],[33.99444909190935],[6.928840862326354]],[[71.53146416021153],[17.355928672308405],[11.112607167480066]],[[53.6474087074126],[41.156658666223684],[5.195932626363718]],[[40.74887417133877],[58.19569231169959],[1.0554335169616382]],[[40.83942953116534],[57.96508152409999],[1.1954889447346548]],[[64.20752124694862],[26.713613287282417],[9.078865465768972]],[[76.96254916548706],[9.692284867384087],[13.345165967128844]],[[39.58162728767369],[59.422499941649285],[0.9958727706770261]],[[42.50715733947405],[55.51702966723822],[1.9758129932877382]],[[45.18382959059984],[51.8838915072058],[2.932278902194354]],[[82.08636769823975],[2.6637892097126588],[15.249843092047588]],[[42.75396353155953],[55.10239521153578],[2.14364125690469]],[[54.09004133630163],[39.977089660948614],[5.9328690027497615]],[[45.49539157166626],[51.418592457493205],[3.086015970840535]],[[64.39263450729746],[26.171933259588638],[9.435432233113897]],[[75.27150609557557],[11.639192385882167],[13.089301518542259]],[[39.09714874505536],[59.799974719984704],[1.1028765349599412]],[[57.17392962653109],[35.68811771013948],[7.137952663329417]],[[73.22753557294986],[14.188056371999444],[12.584408055050677]],[[48.36741397411083],[47.316408871890296],[4.316177153998871]],[[38.479353522388024],[60.373129955031935],[1.1475165225800237]],[[35.0],[64.99999999999999],[0.0]],[[53.518931156248186],[40.20813339903681],[6.272935444715003]],[[63.79203768551594],[26.333085620989387],[9.874876693494665]],[[64.32160145484137],[25.32550222253097],[10.35289632262766]],[[59.68201489944413],[31.509393519539735],[8.808591581016135]],[[78.0711353065476],[6.968914811306057],[14.95994988214634]],[[75.54101441087431],[10.340098433396685],[14.118887155728995]],[[53.53120626107424],[39.634215874522134],[6.834577864403638]],[[48.1174539372017],[46.81807199029069],[5.064474072507603]],[[63.757052714483194],[25.922733338555453],[10.320213946961333]],[[36.11329584455079],[62.750099198177224],[1.1366049572719787]],[[72.9440200381628],[13.640179489836981],[13.415800472000223]],[[73.98666455780966],[12.192423595800046],[13.82091184639029]],[[53.05772094031992],[40.057186259068686],[6.8850928006113925]],[[38.16897812830843],[59.90123960100111],[1.9297822706904457]],[[32.812547244487114],[67.01146740671203],[0.17598534880085878]],[[59.703477235491995],[31.12311615063495],[9.173406613873048]],[[41.77754322143979],[54.98539540952218],[3.2370613690380337]],[[33.9613827201939],[65.38964931971918],[0.6489679600869338]],[[80.91792192819554],[2.7545182255696643],[16.327559846234806]],[[42.104535008801484],[54.41993412131843],[3.4755308698800897]],[[65.07027868745489],[23.61499256580838],[11.314728746736735]],[[34.51735843885402],[64.06164636519776],[1.4209951959482265]],[[44.59283505565407],[50.62266302461279],[4.78450191973314]],[[75.57868448318253],[9.297950461732555],[15.12336505508491]],[[52.452432112281556],[40.132139086114],[7.415428801604438]],[[30.000000000000004],[70.0],[0.0]],[[72.70614538447255],[12.986604928872527],[14.307249686654936]],[[40.4344024069243],[56.013262238386716],[3.5523353546889695]],[[63.969238107242866],[24.580990282170223],[11.449771610586911]],[[55.11238568123702],[36.31698258251287],[8.570631736250112]],[[43.157287866494435],[52.218131003582315],[4.624581129923263]],[[57.987336340149],[32.399054168488085],[9.613609491362912]],[[44.11270365359145],[50.84049128880056],[5.046805057607987]],[[45.97739381058707],[48.27186770976416],[5.7507384796487715]],[[48.406022583326234],[44.98850550384209],[6.605471912831683]],[[56.82607063692462],[33.74262188940544],[9.43130747366994]],[[74.42431496597173],[10.205533670805393],[15.37015136322287]],[[35.60507546617265],[61.87938769425274],[2.515536839574604]],[[51.27347602040966],[40.950606341588774],[7.775917638001559]],[[80.93659365161591],[1.3406046094121904],[17.722801738971896]],[[37.25440217128454],[59.55765020638455],[3.1879476223309062]],[[63.949115179904084],[23.85820542047077],[12.192679399625145]],[[30.813686486555913],[67.99114865284832],[1.1951648605957725]],[[45.78567765558574],[47.89860288885868],[6.31571945555558]],[[67.2694829210177],[19.250118085836235],[13.480398993146062]],[[29.421621608127037],[69.7065270670912],[0.8718513247817574]],[[53.900349991413435],[37.06580315601665],[9.03384685256992]],[[69.05643481535196],[16.850979987442518],[14.092585197205521]],[[38.61806094606328],[57.407699614658725],[3.974239439277992]],[[37.693528374598046],[58.51625476714724],[3.7902168582547113]],[[47.219842291192464],[45.699196700228256],[7.080961008579287]],[[37.105231834790644],[59.18096706163263],[3.7138011035767353]],[[50.07872082018828],[41.85278536761807],[8.068493812193646]],[[36.42111035579333],[60.047360298424046],[3.531529345782624]],[[38.0813309250989],[57.83153983248567],[4.087129242415446]],[[46.708964298369736],[46.28581883327097],[7.005216868359292]],[[72.58014976459721],[11.777485654952185],[15.642364580450607]],[[62.2584101143105],[25.50053640617469],[12.241053479514804]],[[77.90450807650558],[4.590433276360197],[17.50505864713422]],[[44.52191761767361],[49.09381546999692],[6.384266912329473]],[[81.27799144382557],[0.0844585456726637],[18.63755001050177]],[[68.36302661542409],[17.29272433308668],[14.344249051489221]],[[46.88637368463464],[45.879035483833306],[7.234590831532066]],[[48.93915605358303],[43.11960248723941],[7.94124145917756]],[[52.93668017181518],[37.77233318818462],[9.290986640000199]],[[74.82671281706207],[8.570460608563444],[16.602826574374475]],[[66.74601719965916],[19.343894309746666],[13.91008849059418]],[[59.11813370560846],[29.51411637310766],[11.367749921283869]],[[25.0],[75.0],[0.0]],[[59.75514932376094],[28.526684576476868],[11.71816609976219]],[[57.80135681015543],[31.05871650581185],[11.13992668403271]],[[37.992643211637564],[57.45987571249209],[4.54748107587034]],[[48.2638554552898],[43.75617001873996],[7.9799745259702375]],[[38.399436402033295],[56.90184130224413],[4.69872229572259]],[[52.65432852545793],[37.834708699733575],[9.510962774808492]],[[36.49577364243209],[59.377840832927],[4.126385524640917]],[[38.638440996915776],[56.494305670783454],[4.867253332300772]],[[27.514992547266083],[71.31615220250063],[1.1688552502332865]],[[26.29171701299881],[72.93855068337932],[0.7697323036218904]],[[28.26825231072178],[70.27200812653659],[1.4597395627416136]],[[73.09112716959712],[10.455458303742184],[16.453414526660698]],[[44.505248642627585],[48.52560178219096],[6.969149575181466]],[[58.819878964111496],[29.41643617607777],[11.763684859810734]],[[41.81749288859128],[52.059985318490554],[6.122521792918157]],[[61.615214813287466],[25.615048612157203],[12.76973657455533]],[[29.79951160192552],[68.02990510824623],[2.170583289828261]],[[39.268834197631854],[55.38063102674673],[5.350534775621414]],[[48.54494610932679],[43.012051067605704],[8.44300282306752]],[[56.54109754529606],[32.192592116304375],[11.26631033839956]],[[37.243787843895674],[57.91929792962216],[4.836914226482153]],[[38.50744326184498],[56.23261158228908],[5.259945155865932]],[[22.88509158816697],[77.0522563294024],[0.06265208243062206]],[[22.729659114896037],[77.23511930331476],[0.03522158178920592]],[[43.20995192843635],[49.90111898767991],[6.888929083883741]],[[58.914509349601516],[28.906364459717977],[12.17912619068052]],[[40.57526437624098],[53.350935081461756],[6.073800542297256]],[[42.48886825228232],[50.7952567323565],[6.71587501536119]],[[33.936910201384826],[62.18755549148772],[3.8755343071274555]],[[51.08862322824822],[39.293685888800354],[9.617690882951416]],[[23.668859418409703],[75.83610291578971],[0.49503766580058844]],[[62.51323486551754],[24.015806604759614],[13.470958529722843]],[[48.43165747314624],[42.78136843907098],[8.786974087782777]],[[50.389635557583354],[40.1624869445329],[9.447877497883734]],[[43.22889336433306],[49.68794363466915],[7.083163000997786]],[[51.22452068474793],[39.01224752000553],[9.763231795246522]],[[49.6577579820353],[41.08961270389059],[9.252629314074113]],[[25.189392997725058],[73.69870366337004],[1.1119033389049202]],[[39.587057278042856],[54.47269907547743],[5.940243646479719]],[[46.807383851311926],[44.65552040957749],[8.537095739110574]],[[24.94290104979576],[73.79085303191641],[1.2662459182878296]],[[47.760737453246826],[43.34245033499906],[8.896812211754119]],[[38.35435829474975],[55.863424704070965],[5.78221700117929]],[[79.87614253747503],[0.4816889130879866],[19.642168549436974]],[[38.83488329402362],[55.13325533651773],[6.031861369458666]],[[48.67070317320268],[41.996611435493705],[9.332685391303599]],[[40.64039760201666],[52.655114617688945],[6.70448778029438]],[[52.21906308695643],[37.18342948430078],[10.597507428742787]],[[48.89104333018466],[41.5314391715596],[9.577517498255734]],[[35.65917174808516],[59.148291864058734],[5.192536387856113]],[[74.61522082521203],[7.203403806940338],[18.18137536784763]],[[31.379430433547455],[64.84258396626979],[3.7779856001827525]],[[80.0],[0.0],[19.999999999999996]],[[20.0],[80.0],[0.0]],[[64.58784423962611],[20.54781255923352],[14.864343201140361]],[[36.67711494530517],[57.72031770700037],[5.60256734769446]],[[48.03303490869668],[42.54150199471549],[9.425463096587842]],[[50.24205388891095],[39.50449213183413],[10.253453979254907]],[[53.54354484045983],[35.098529224869765],[11.357925934670385]],[[52.51346839530405],[36.4610159992003],[11.025515605495652]],[[67.35490764722488],[16.619710822455172],[16.025381530319954]],[[55.20198918669187],[32.82196300252876],[11.976047810779372]],[[51.20665186580792],[38.00465793133759],[10.788690202854474]],[[48.92082923663402],[41.02501807764226],[10.054152685723713]],[[56.511203492328065],[30.88572740168513],[12.603069105986805]],[[34.19402195129997],[60.60745807359349],[5.198519975106535]],[[46.30108270425173],[44.45459695579124],[9.244320339957033]],[[67.8976512677096],[15.643261591049129],[16.459087141241284]],[[53.78739434463363],[34.4098143098454],[11.802791345520955]],[[42.13762525740172],[49.8822068421526],[7.9801679004456645]],[[27.783248957795724],[68.87893670367104],[3.3378143385332315]],[[47.470862442377566],[42.61741526081971],[9.911722296802708]],[[29.567549818715328],[66.46139817198585],[3.971052009298806]],[[56.4850972382179],[30.560781903997192],[12.9541208577849]],[[48.922677054624785],[40.6350044362385],[10.442318509136705]],[[32.2403477660114],[62.875549696848545],[4.88410253714005]],[[71.08434880240908],[10.951027836367755],[17.964623361223175]],[[35.25285676836557],[58.723121833138435],[6.024021398495994]],[[72.39901060904056],[9.157175767250157],[18.44381362370929]],[[37.869931255499125],[55.18075784657195],[6.949310897928947]],[[56.44261609075616],[30.398203713420635],[13.15918019582321]],[[42.522560065843564],[48.93030429101259],[8.54713564314385]],[[56.58519571198922],[30.14870503710681],[13.266099250903975]],[[48.42467710770114],[40.90692585359308],[10.668397038705796]],[[51.10220419396284],[37.33569889086404],[11.562096915173111]],[[37.26196261386512],[55.77621030254931],[6.961827083585562]],[[47.99006921616348],[41.36181980765225],[10.648110976184276]],[[30.25183410190968],[65.00360768839344],[4.744558209696876]],[[30.353246801590267],[64.86786250421142],[4.778890694198299]],[[77.48188622528404],[2.0185012210401303],[20.49961255367582]],[[17.714679482975043],[81.6752097586277],[0.6101107583972745]],[[41.24328980916873],[50.272312722291325],[8.484397468539957]],[[32.31549856894508],[62.173199281462466],[5.511302149592441]],[[46.04666413684511],[43.83521501716392],[10.118120845990981]],[[53.87757264714369],[33.371648264463964],[12.750779088392342]],[[57.142144641912175],[28.993900893170387],[13.863954464917441]],[[56.043190512022875],[30.431950064226708],[13.524859423750419]],[[37.36751341183643],[55.31707495061505],[7.315411637548536]],[[29.684488331098862],[65.5424800003696],[4.773031668531545]],[[46.32544630846248],[43.34829484458933],[10.326258846948177]],[[54.856183780942445],[31.96718718403281],[13.176629035024746]],[[49.736274821292966],[38.776733776378855],[11.486991402328183]],[[51.975807682166774],[35.78121849067941],[12.24297382715384]],[[37.55275767785127],[54.989933204521066],[7.457309117627663]],[[61.97126797011679],[22.43028618563795],[15.598445844245257]],[[39.597537853712936],[52.24489099994197],[8.157571146345095]],[[22.502246765812608],[75.03709810127145],[2.4606551329159365]],[[15.000000000000002],[85.0],[0.0]],[[42.38785332973339],[48.47488031797342],[9.137266352293187]],[[44.92137724787455],[45.08246826987067],[9.996154482254767]],[[40.24301492357243],[51.28150582799004],[8.475479248437548]],[[75.81948047348949],[3.845750320299316],[20.3347692062112]],[[35.590819067713525],[57.47897706385098],[6.93020386843551]],[[56.192875558903644],[29.986602339905318],[13.820522101191063]],[[74.01385395254174],[6.159398373772345],[19.82674767368591]],[[46.01925404851824],[43.47068883494118],[10.510057116540567]],[[52.91589929575557],[34.24635084699308],[12.83774985725136]],[[46.77783679344435],[42.42941113311965],[10.792752073435983]],[[45.923960619779166],[43.55637000874371],[10.519669371477129]],[[49.76075273445776],[38.350642024169545],[11.888605241372687]],[[36.591172392916896],[55.9052768980594],[7.503550709023705]],[[16.0266055864079],[83.31212517874259],[0.6612692348495103]],[[55.57144255110673],[30.53949376718343],[13.889063681709848]],[[65.71563828709192],[17.004012496279746],[17.280349216628338]],[[38.36299929121101],[53.44569103656366],[8.191309672225337]],[[39.032769582817764],[52.53089440110639],[8.436336016075838]],[[74.84173520124506],[4.745367560443007],[20.412897238311942]],[[53.38497998260845],[33.352969719558914],[13.262050297832648]],[[65.72307813984477],[16.781236883626416],[17.495684976528807]],[[54.70042095204886],[31.430120936530372],[13.869458111420776]],[[49.999614566344476],[37.667169514406226],[12.3332159192493]],[[52.7549097777239],[33.977749951489606],[13.267340270786496]],[[24.097912401057744],[72.18110660703417],[3.7209809919080876]],[[40.61141773602795],[50.15645373164076],[9.232128532331291]],[[41.49894118256864],[48.92899146989189],[9.57206734753946]],[[47.43185936344785],[41.01800005660222],[11.550140579949934]],[[49.40328975037918],[38.38592116332503],[12.210789086295797]],[[71.48875274594548],[8.929897821491629],[19.581349432562906]],[[55.849650179879674],[29.73814487830199],[14.41220494181833]],[[47.83441722817515],[40.392644364462846],[11.772938407362007]],[[55.00662074625383],[30.82421941329223],[14.169159840453938]],[[48.66517290976125],[39.25804943931697],[12.076777650921782]],[[37.57443271907633],[54.025600803618765],[8.399966477304906]],[[43.466515209852005],[46.14799700761925],[10.385487782528738]],[[23.648512513137046],[72.56645886281862],[3.7850286240443336]],[[46.4612103996397],[42.10600303778392],[11.432786562576377]],[[31.749483629496677],[61.70526642870531],[6.545249941798013]],[[39.248567647115856],[51.65146471323856],[9.099967639645575]],[[48.04300598526004],[39.893444029017125],[12.063549985722826]],[[54.0039599760422],[31.923941016244477],[14.072099007713323]],[[68.97305460798076],[11.957196539896552],[19.069748852122707]],[[52.38971981167021],[34.01239224925995],[13.59788793906985]],[[38.71814798327205],[52.21488025318203],[9.066971763545927]],[[43.35684874898486],[46.00343020586335],[10.639721045151777]],[[60.55247497134528],[23.05425451070364],[16.393270517951066]],[[54.21370699209367],[31.491872261262323],[14.294420746644018]],[[35.52644704042211],[56.390371814927065],[8.083181144650824]],[[61.553732230868064],[21.676489843699695],[16.769777925432237]],[[37.392552748707374],[53.85000080424965],[8.757446447042971]],[[60.8122612395787],[22.597060467253076],[16.590678293168224]],[[38.95107614418372],[51.70406102493894],[9.344862830877348]],[[39.5517631709433],[50.88207056421899],[9.566166264837694]],[[42.25706599988976],[47.26353147294497],[10.479402527165279]],[[68.07859350778125],[12.832158556708281],[19.089247935510485]],[[48.31463487227261],[39.18170793658946],[12.50365719113792]],[[51.94552663681403],[34.336922129406155],[13.717551233779817]],[[56.94716856533283],[27.663802615968137],[15.389028818699032]],[[58.36595685317063],[25.6682090005944],[15.965834146234984]],[[75.09297451600285],[3.332192058813183],[21.57483342518396]],[[30.322879711401768],[63.0232698482633],[6.6538504403349314]],[[54.246226249862936],[31.118925543760106],[14.63484820637696]],[[31.84287365602999],[60.96655989197083],[7.190566451999173]],[[66.97953778175459],[14.104576377651936],[18.915885840593468]],[[36.08773439149546],[55.28899852809253],[8.623267080412027]],[[40.38319917817344],[49.528247946846506],[10.088552874980056]],[[10.0],[90.0],[0.0]],[[11.7103690434046],[87.6802550885049],[0.6093758680905078]],[[48.66533632965026],[38.37200060005224],[12.9626630702975]],[[34.19101258141184],[57.64223163426604],[8.16675578432214]],[[44.22602088409264],[44.23765961346891],[11.53631950243844]],[[21.791527649953622],[74.11326015826437],[4.095212191782006]],[[26.351603214163028],[67.99498999972735],[5.65340678610963]],[[38.813131965058034],[51.37154537236298],[9.815322662578982]],[[53.82898355244402],[31.277053014145075],[14.893963433410908]],[[40.44271600328994],[49.12441290653156],[10.43287109017849]],[[44.388237950743395],[43.85624045465107],[11.755521594605534]],[[34.681773163048135],[56.79709336406611],[8.52113347288575]],[[47.484775526070194],[39.664132685096035],[12.851091788833777]],[[47.97932991345256],[38.98216231435452],[13.038507772192922]],[[36.73003088903894],[53.94701865557222],[9.322950455388833]],[[49.03865170942814],[37.50929535593783],[13.452052934634048]],[[34.28305280101162],[57.16421429217709],[8.552732906811286]],[[55.834957788795],[28.426747803695495],[15.738294407509487]],[[26.126211330991282],[68.00327951361655],[5.870509155392148]],[[71.88534548134137],[6.977452118614977],[21.13720240004365]],[[72.73831210580649],[5.770662926219643],[21.491024967973882]],[[40.051415987700594],[49.30489844869591],[10.643685563603485]],[[41.71287011117871],[47.06298952434055],[11.224140364480746]],[[50.0859644923276],[35.89417172262185],[14.019863785050568]],[[61.04977760905547],[21.21537514850304],[17.734847242441493]],[[50.5010671040543],[35.27437037166521],[14.224562524280488]],[[21.398416066587718],[73.96362193814596],[4.637961995266331]],[[45.9033130518768],[41.236773248957746],[12.859913699165443]],[[48.091395225726764],[38.31276788862937],[13.595836885643871]],[[58.06218217694637],[24.99046556168674],[16.94735226136687]],[[14.401687676290765],[83.18147982549735],[2.4168324982118863]],[[59.89940912834878],[22.504066142707018],[17.5965247289442]],[[70.77640220491271],[7.998114569810583],[21.225483225276705]],[[66.93709456193636],[13.11330483573096],[19.94960060233267]],[[52.829686147828546],[31.762508285714315],[15.407805566457144]],[[62.455174846603626],[18.91896218964996],[18.62586296374642]],[[47.58478231045198],[38.740867285073925],[13.674350404474097]],[[48.43452443149738],[37.597407300050726],[13.96806826845188]],[[50.65901725880673],[34.6034846973782],[14.73749804381507]],[[46.79104704766089],[39.745548224014385],[13.463404728324724]],[[47.997352700063864],[38.13155989860115],[13.871087401334997]],[[39.60848310154535],[49.304611886629765],[11.086905011824888]],[[48.85616832976687],[36.93848084607252],[14.2053508241606]],[[55.33335169372049],[28.278634398872754],[16.388013907406755]],[[60.24620611934125],[21.721048482225495],[18.032745398433274]],[[63.60068521591102],[17.24674681192708],[19.152567972161904]],[[57.93430783654655],[24.756052917894962],[17.309639245558483]],[[14.247855024782288],[83.0028915625584],[2.749253412659318]],[[46.066710905394416],[40.573986835225504],[13.359302259380085]],[[32.013408348849275],[59.28784550490703],[8.698746146243694]],[[59.627359337740614],[22.416010120581078],[17.95663054167831]],[[33.287235403122374],[57.508834025980626],[9.203930570896997]],[[39.54553387287042],[49.15330637132982],[11.301159755799747]],[[42.50782372150238],[45.15814164937775],[12.334034629119872]],[[40.32209646265199],[48.06882064960008],[11.609082887747935]],[[49.9536423735533],[35.209552454617956],[14.836805171828743]],[[51.29475122413593],[33.416298869071696],[15.288949906792388]],[[30.84588160903639],[60.65240024545735],[8.501718145506263]],[[73.54101246018992],[3.6952291088604277],[22.763758430949647]],[[17.198360246706397],[78.81785181594539],[3.9837879373482035]],[[72.08356560031483],[5.631560565083962],[22.28487383460121]],[[5.0],[95.0],[0.0]],[[48.80390248336915],[36.56183411826498],[14.634263398365865]],[[38.53956638073338],[50.18429101983206],[11.276142599434538]],[[45.77796529484888],[40.5247727437337],[13.697261961417412]],[[35.23689374100311],[54.54725600448926],[10.215850254507618]],[[28.056081241203724],[64.1026157502439],[7.841303008552371]],[[29.89931149692802],[61.63786868509856],[8.462819817973411]],[[43.882914812339564],[42.82217080484795],[13.294914382812486]],[[40.01112755974043],[47.93850475642184],[12.05036768383772]],[[47.116986260926566],[38.43981026488941],[14.443203474184024]],[[50.69485580483777],[33.66558703226452],[15.639557162897718]],[[36.57365651030624],[52.45452377650004],[10.97181971319372]],[[68.2277133706701],[10.246245827701426],[21.52604080162847]],[[51.22633353361218],[32.89815892977535],[15.875507536612481]],[[15.69597625169252],[80.10749860532955],[4.196525142977926]],[[53.53149774160298],[29.649027836314],[16.81947442208301]],[[36.707279605468294],[52.05469717284025],[11.238023221691451]],[[29.561929299009876],[61.57608785213796],[8.861982848852158]],[[43.64549410369582],[42.78994288537618],[13.564563010927994]],[[29.615873607870537],[61.49449263748782],[8.889633754641638]],[[44.55465637096483],[41.51541748445877],[13.92992614457641]],[[49.3611707032196],[35.09074760239324],[15.548081694387156]],[[72.65423720479266],[4.0167039287102515],[23.329058866497103]],[[36.24193865043017],[52.54166406106516],[11.216397288504666]],[[47.47644527667397],[37.55174389419259],[14.971810829133434]],[[13.776767817710908],[82.3223077241866],[3.900924458102505]],[[73.97467583506968],[2.009228050573396],[24.01609611435692]],[[35.41089856605645],[53.42160441337771],[11.167497020565824]],[[53.18477489685463],[29.717548644563273],[17.097676458582107]],[[20.934552622920133],[72.71430373773664],[6.35114363934323]],[[60.65599378253283],[19.744973073477322],[19.599033143989843]],[[52.02544756176925],[31.237092662693307],[16.737459775537445]],[[62.424356487493846],[17.371080313743942],[20.204563198762212]],[[13.470430110085296],[82.64119102784389],[3.8883788620708293]],[[63.21532887252458],[16.28513754518812],[20.499533582287317]],[[54.69567113988646],[27.619720562850663],[17.68460829726286]],[[55.44290148411638],[26.607878694845255],[17.94921982103837]],[[56.89816752942196],[24.658022364895952],[18.44381010568208]],[[39.428930185167424],[47.91768705101631],[12.653382763816273]],[[49.13164688620773],[34.969593699344315],[15.898759414447957]],[[45.10994635690578],[40.32069011678985],[14.569363526304377]],[[14.690519555250406],[80.79898988520284],[4.5104905595467475]],[[40.20039202416142],[46.76173280086894],[13.037875174969649]],[[62.04491192587962],[17.62712475673263],[20.327963317387745]],[[45.78947504586446],[39.24990886604184],[14.960616088093698]],[[36.0201080879436],[52.273535775224126],[11.706356136832282]],[[51.544693644804184],[31.50002299770815],[16.955283357487666]],[[45.42291155761375],[39.66086888184073],[14.916219560545526]],[[18.52276336286309],[75.52481407297786],[5.952422564159045]],[[38.84096415062716],[48.414115960120796],[12.74491988925204]],[[39.604741640667605],[47.392311370102576],[13.002946989229816]],[[47.07392277087995],[37.397354481902326],[15.528722747217715]],[[47.51571261500568],[36.78557119423136],[15.698716190762951]],[[42.92071860899364],[42.780271057666056],[14.29901033334031]],[[75.0],[0.0],[25.0]],[[0.0],[100.0],[0.0]],[[0.0],[100.0],[0.0]],[[65.28093499786019],[12.951959982655845],[21.767105019483967]],[[44.654932859645946],[40.35373509245822],[14.991332047895838]],[[46.05139113754368],[38.483243899623595],[15.465364962832723]],[[36.39973776188504],[51.30024348584465],[12.300018752270308]],[[45.414769738690396],[39.27154701043673],[15.313683250872886]],[[59.05138416637434],[21.0877538843165],[19.860861949309164]],[[54.954860392454954],[26.53389670552323],[18.511242902021817]],[[49.98303041081007],[33.110765468629225],[16.906204120560705]],[[54.46245001337289],[27.13708854165322],[18.40046144497391]],[[42.35316834154117],[43.225023220202836],[14.421808438255995]],[[60.94728560362701],[18.41822270428359],[20.63449169208941]],[[52.55299857788545],[29.586760398024637],[17.860241024089923]],[[41.01376734560911],[44.904904760595976],[14.081327893794906]],[[44.50189482366024],[40.17178008361484],[15.326325092724923]],[[65.32973530357401],[12.372516989670546],[22.297747706755437]],[[57.85781163424405],[22.326561010010348],[19.8156273557456]],[[58.22136868610512],[21.818465908755016],[19.96016540513986]],[[48.162283354744915],[35.19329813645326],[16.644418508801824]],[[25.14712758292403],[65.86023688049403],[8.992635536581925]],[[61.89052041796147],[16.866842341704917],[21.242637240333604]],[[70.34243459343094],[5.585781021076086],[24.071784385492982]],[[29.515758910602187],[59.99220159899613],[10.492039490401703]],[[37.87644793058472],[48.8140872529986],[13.30946481641669]],[[63.350453863121025],[14.773297074444955],[21.87624906243401]],[[51.76784937758102],[30.17010909198951],[18.062041530429465]],[[44.49816329366826],[39.78279184547676],[15.719044860854977]],[[42.627325859825085],[42.27029620655387],[15.102377933621055]],[[47.2416768383127],[36.110207824431356],[16.648115337255938]],[[43.039577628800096],[41.692100439988735],[15.268321931211185]],[[55.56090675806213],[24.996382056011715],[19.44271118592615]],[[45.238413137774],[38.64503551082436],[16.116551351401625]],[[42.87690675689361],[41.718908347565055],[15.404184895541336]],[[54.307670923356646],[26.468795254504794],[19.22353382213856]],[[66.87321734004273],[9.707302317059757],[23.419480342897515]],[[51.937439650451545],[29.61832032569279],[18.44424002385568]],[[57.96651252582392],[21.5780441217087],[20.45544335246738]],[[30.316054774611334],[58.43988020284828],[11.24406502254038]],[[27.874640615873453],[61.6089283385962],[10.516431045530341]],[[23.545574137917786],[67.37280785591278],[9.081618006169426]],[[29.24062266086318],[59.77094783670188],[10.988429502434938]],[[41.02209484638137],[43.980802584936214],[14.997102568682422]],[[47.957615514299846],[34.721901634462355],[17.320482851237802]],[[46.55583110849609],[36.50298527445667],[16.94118361704725]],[[48.025390721496244],[34.54351581723401],[17.431093461269732]],[[43.74536441798297],[40.210927111992575],[16.043708470024463]],[[46.46186382947771],[36.58726532521024],[16.950870845312043]],[[29.10872043768832],[59.64321740147047],[11.248062160841222]],[[65.33602711122184],[11.23198172159668],[23.431991167181465]],[[49.3448117156956],[32.54507122454972],[18.110117059754675]],[[55.90737818438938],[23.780056629023534],[20.31256518658709]],[[53.77673328681378],[26.615176399906943],[19.608090313279273]],[[63.92486586716984],[13.051858638539523],[23.02327549429064]],[[32.65632720269549],[54.73478437128422],[12.6088884260203]],[[35.344609746817035],[51.1500401535662],[13.50535009961677]],[[66.81833103875708],[9.176142291738765],[24.00552666950415]],[[36.25339464881686],[49.88711051975084],[13.85949483143231]],[[62.45661244775511],[14.94050700045456],[22.60288055179033]],[[51.08678869264507],[29.979921607852987],[18.93328969950194]],[[41.118673025749274],[43.24132733258946],[15.639999641661252]],[[38.93427805315643],[46.0227361273531],[15.042985819490468]],[[71.97941432300911],[1.9168716520631262],[26.103714024927765]],[[48.781120629470934],[32.82725741485365],[18.391621955675415]],[[35.39686996746821],[50.64427413849084],[13.95885589404095]],[[64.2964641375198],[12.02269533614234],[23.680840526337864]],[[46.39176447210734],[35.88209663069894],[17.726138897193724]],[[18.15899959232527],[73.51451277241024],[8.3264876352645]],[[44.8348330046972],[37.936904638292155],[17.228262357010646]],[[68.34213827526978],[6.555545957992577],[25.102315766737636]],[[57.27962430928935],[21.30437218354514],[21.416003507165506]],[[45.92050057766491],[36.433384351131906],[17.64611507120319]],[[31.958214794177316],[55.04272940413644],[12.999055801686248]],[[40.36058531272894],[43.82678557510252],[15.812629112168539]],[[41.36815053150886],[42.458792714530716],[16.173056753960438]],[[54.653107238005404],[24.73371691487431],[20.613175847120274]],[[25.555417581406104],[63.523370358672736],[10.921212059921158]],[[50.769758442478775],[29.792144822128385],[19.438096735392847]],[[44.72006513018752],[37.84429669134652],[17.43563817846595]],[[37.57303800676676],[47.345685397864386],[15.081276595368854]],[[39.58372350983054],[44.57409484873582],[15.842181641433639]],[[41.09566017355697],[42.55316384298953],[16.351175983453512]],[[42.65190450851002],[40.4614693907524],[16.88662610073759]],[[55.234712757974755],[23.682066527806526],[21.08322071421872]],[[41.61346910234575],[41.8387134955608],[16.547817402093436]],[[32.45498091116932],[54.01322736837712],[13.531791720453556]],[[53.88166060724935],[25.444177763053915],[20.674161629696723]],[[46.14402968283987],[35.76078515283378],[18.095185164326335]],[[71.5257345694695],[1.8958689815727732],[26.578396448957726]],[[12.031373915172052],[81.21433256585996],[6.754293518967983]],[[45.17989653878324],[37.01226693606967],[17.807836525147096]],[[39.45984051783665],[44.634757862779786],[15.905401619383557]],[[23.02980539645956],[66.51414769994545],[10.456046903594991]],[[64.40050936672114],[11.337983666382701],[24.261506966896178]],[[59.81821206492426],[17.355537495589274],[22.826250439486458]],[[50.66046102957772],[29.548507837568312],[19.79103113285398]],[[27.083617099157824],[60.98129266691089],[11.935090233931266]],[[45.35940650928582],[36.55837794479312],[18.082215545921056]],[[40.1712099438076],[43.47533689915541],[16.353453157037013]],[[22.64733259268298],[66.82664742253701],[10.526019984779998]],[[48.83060082048954],[31.914994489413374],[19.25440469009707]],[[18.22494664703173],[72.69819219484044],[9.076861158127837]],[[30.35394595266429],[56.51621370374337],[13.129840343592337]],[[44.31179926034504],[37.8897413900673],[17.79845934958766]],[[51.11948893752365],[28.796816853374462],[20.08369420910188]],[[71.328632666479],[1.8182853035857487],[26.853082029935255]],[[33.93317937787982],[51.67458843735251],[14.392232184767678]],[[52.00557706573241],[27.473818796174093],[20.520604138093482]],[[70.33672585015178],[3.0005813852713925],[26.66269276457683]],[[36.51986689378284],[48.084557177905765],[15.3955759283114]],[[13.994971799554733],[78.11159743267835],[7.89343076776692]],[[70.96852096575635],[2.1436250091387956],[26.887854025104847]],[[38.110348978354786],[45.942658413105136],[15.946992608540064]],[[49.64971710167958],[30.543539991935486],[19.806742906384926]],[[38.15840188194836],[45.84433033413503],[15.997267783916616]],[[40.38970308595373],[42.8605350527549],[16.749761861291375]],[[15.740864964286738],[75.70541064401701],[8.553724391696262]],[[46.20852999655448],[35.07547087195673],[18.715999131488775]],[[60.171178631703036],[16.41609417532966],[23.412727192967296]],[[40.46147737520783],[42.63288099561862],[16.905641629173555]],[[41.956287170692654],[40.62988304348507],[17.413829785822276]],[[8.992395578982356],[84.58149134368728],[6.426113077330357]],[[33.85832682803396],[51.41451735953713],[14.727155812428915]],[[65.93231743185535],[8.637160750051013],[25.43052181809362]],[[28.178164272652356],[58.97210471052385],[12.849731016823798]],[[38.64552678757683],[44.968282435460885],[16.386190776962273]],[[40.22629336384579],[42.85835371071299],[16.91535292544124]],[[32.37371617337825],[53.254009941788446],[14.372273884833309]],[[53.47715595056764],[25.088568620337075],[21.43427542909527]],[[55.54127126279186],[22.31282568418579],[22.14590305302235]],[[22.292029749358626],[66.62240046900867],[11.08556978163271]],[[45.99682601845277],[35.01320679896547],[18.989967182581772]],[[52.945391361306825],[25.64229876578294],[21.412309872910225]],[[43.13966337366553],[38.70936585856787],[18.150970767766594]],[[52.79249877415272],[25.763321593218635],[21.444179632628643]],[[59.011465586992315],[17.441997345997564],[23.54653706701012]],[[41.852635212731066],[40.320186489714175],[17.82717829755476]],[[42.87735140886174],[38.952535815923895],[18.170112775214356]],[[57.288027678937745],[19.72537019161837],[22.98660212944387]],[[57.382798022416594],[19.59683310361056],[23.020368873972846]],[[33.521561075906135],[51.403049026068835],[15.07538989802503]],[[1.0842825728249075],[94.6331577363886],[4.2825596907864965]],[[66.44893579221008],[7.462017328228872],[26.08904687956106]],[[43.84586762038497],[37.59264857479849],[18.561483804816532]],[[37.20452941725833],[46.36634817681488],[16.429122405926798]],[[39.06034976182477],[43.86710698287693],[17.072543255298314]],[[58.623402069906795],[17.724547834818182],[23.65205009527502]],[[2.6655613293294818],[92.28025834499903],[5.054180325671489]],[[39.81205738536572],[42.741351697220125],[17.44659091741416]],[[22.49715892852669],[65.82103191193104],[11.681809159542269]],[[28.905461439412004],[57.2746098856824],[13.819928674905588]],[[23.62350346323741],[64.29826796305478],[12.078228573707804]],[[40.18818145648479],[42.159879226880776],[17.651939316634426]],[[41.09954494663124],[40.92523274811056],[17.975222305258207]],[[42.94740832004501],[38.302942140369105],[18.74964953958588]],[[52.28938731493843],[25.82400283196164],[21.886609853099934]],[[62.244133364810374],[12.53850519049918],[25.21736144469045]],[[37.51952063034576],[45.499371697712874],[16.981107671941366]],[[53.937945189054446],[23.554933065788646],[22.507121745156905]],[[40.01827570961165],[42.10265915309858],[17.879065137289768]],[[54.268235249283016],[23.087377667973325],[22.644387082743663]],[[37.469216515157235],[45.46388026742727],[17.066903217415494]],[[58.23869103779962],[17.757400697741595],[24.003908264458772]],[[36.160686248510174],[47.18674006031999],[16.65257369116982]],[[48.93386251698455],[30.143659700098873],[20.922477782916566]],[[61.542871431969026],[13.330756758829576],[25.126371809201387]],[[34.411638122283726],[49.47891336513274],[16.10944851258353]],[[39.38854188410454],[42.838851587801415],[17.77260652809404]],[[54.49878450411243],[22.66017381595761],[22.841041679929948]],[[52.66688131007615],[25.071858315161517],[22.261260374762344]],[[41.10374474728077],[40.44285798869244],[18.453397264026812]],[[33.35879048062244],[50.69920214652346],[15.94200737285409]],[[14.074326272312012],[76.40254455905409],[9.523129168633893]],[[35.68420629848879],[47.538892464924146],[16.77690123658706]],[[40.60270441698775],[40.9703794599389],[18.426916123073365]],[[25.62652433946341],[60.90500115119413],[13.468474509342473]],[[30.011967792695067],[54.985457934666094],[15.002574272638846]],[[0.0],[95.0],[4.999999999999993]],[[43.15530669253751],[37.35463794372586],[19.490055363736634]],[[48.8769339682146],[29.69513096545615],[21.427935066329244]],[[43.77565925699874],[36.4909791105716],[19.73336163242966]],[[39.83003829374701],[41.710475627836125],[18.459486078416877]],[[59.86674238291283],[14.978513365430105],[25.154744251657068]],[[47.3821842787354],[31.576635250498054],[21.04118047076654]],[[68.99863902399943],[2.7229859984229137],[28.27837497757766]],[[30.074197414495384],[54.60600171193158],[15.31980087357303]],[[47.44330106876939],[31.434056431431507],[21.122642499799113]],[[57.14738493885354],[18.46110199478202],[24.39151306636444]],[[34.99582472478131],[47.99471470386633],[17.009460571352367]],[[18.793870215488017],[69.59410277583682],[11.612027008675174]],[[40.431505537919115],[40.73563684366835],[18.832857618412532]],[[41.89124565605226],[38.751897229748636],[19.356857114199094]],[[66.64565906818368],[5.7191583923526945],[27.63518253946363]],[[44.72142596893209],[34.88395018439265],[20.394623846675263]],[[63.117202110289874],[10.34360884641993],[26.5391890432902]],[[2.623577175146648],[90.98210516530864],[6.394317659544718]],[[6.434098000077978],[85.85974179870239],[7.706160201219638]],[[37.47611625046461],[44.44642563609335],[18.077458113442038]],[[12.74868902354289],[77.40446754964306],[9.84684342681405]],[[55.47804147878196],[20.424323515882595],[24.09763500533545]],[[31.14826446881429],[52.85123837537286],[16.000497155812855]],[[57.69661357017566],[17.434633477610216],[24.868752952214123]],[[31.500790598659016],[52.343401677194635],[16.155807724146353]],[[50.46930510402458],[27.02920598858376],[22.50148890739166]],[[28.514360860690747],[56.21926525167742],[15.266373887631834]],[[36.231753593579995],[45.91554750284354],[17.852698903576474]],[[43.14069566586613],[36.691593022316546],[20.167711311817328]],[[40.395623119064],[40.34223842118561],[19.262138459750396]],[[60.99995086374237],[12.809962751447465],[26.19008638481016]],[[27.37906267713473],[57.60754632161189],[15.013391001253378]],[[29.49477697169216],[54.77427703631478],[15.730945991993062]],[[62.14084394515255],[11.218756665739015],[26.640399389108442]],[[40.19494073063566],[40.47306743625674],[19.331991833107594]],[[28.584873050659382],[55.9202163698547],[15.494910579485918]],[[37.06134955504698],[44.61032290559237],[18.32832753936065]],[[30.689207564362487],[53.1064819219471],[16.204310513690416]],[[53.7592586322183],[22.337786418021636],[23.902954949760073]],[[45.90098299713478],[32.8133599516976],[21.28565705116761]],[[7.394671602941124],[84.13243834244078],[8.472890054618086]],[[31.9159482385946],[51.41744530102213],[16.666606460383285]],[[32.348982801690056],[50.8348084406027],[16.81620875770724]],[[38.29312127523817],[42.90454079342612],[18.8023379313357]],[[39.82165416809069],[40.814857210515],[19.363488621394318]],[[36.9708124659951],[44.58743199731725],[18.441755536687637]],[[39.622785939711555],[40.98333266525104],[19.393881395037404]],[[50.79166089298729],[26.087903889342666],[23.120435217670046]],[[57.641565212077204],[16.935362863050955],[25.42307192487185]],[[41.744123833161304],[38.09539500741219],[20.160481159426514]],[[50.78802615867225],[26.012994559529446],[23.198979281798294]],[[42.959124710547954],[36.409708219245005],[20.631167070207038]],[[52.47245301816134],[23.720296157977838],[23.807250823860812]],[[51.59356595121789],[24.86886967730625],[23.53756437147586]],[[17.39427525673672],[70.44638124438185],[12.159343498881436]],[[64.92982583366505],[7.057750011439383],[28.012424154895584]],[[46.12288831444325],[32.120266840270546],[21.756844845286214]],[[6.248557861611922],[85.26899471510107],[8.482447423287006]],[[38.91591478733428],[41.68423008242464],[19.399855130241075]],[[47.82757558753041],[29.796207479056154],[22.376216933413424]],[[38.954297978661],[41.59723277454368],[19.448469246795312]],[[36.65448369781992],[44.655193021296505],[18.69032328088358]],[[28.666126977824298],[55.29327315312528],[16.040599869050425]],[[47.71316495496746],[29.885964035129657],[22.400871009902882]],[[49.711281267772385],[27.201421419720646],[23.087297312506962]],[[63.60280180442322],[8.646272092585699],[27.750926102991073]],[[36.17787829240457],[45.211802853559],[18.61031885403643]],[[29.12571969319881],[54.54575399594299],[16.328526310858212]],[[35.27682748150795],[46.301760857931015],[18.421411660561027]],[[70.0],[0.0],[29.999999999999993]],[[33.642228348810605],[48.449245556769036],[17.908526094420377]],[[37.952810589732216],[42.70076017852139],[19.346429231746377]],[[43.60167951680535],[35.16836939907704],[21.229951084117612]],[[37.50293405820008],[43.237081774000465],[19.259984167799445]],[[34.731791483737425],[46.9315788885665],[18.336629627696077]],[[58.43368077823335],[15.327195199312365],[26.23912402245427]],[[33.51916833241609],[48.507864651371854],[17.972967016212042]],[[30.056614554099603],[53.109379958386185],[16.834005487514197]],[[41.05158830081499],[38.33969388831628],[20.608717810868722]],[[65.35979282714709],[5.847542108834013],[28.792665064018898]],[[54.74807956204497],[19.96868876295142],[25.28323167500361]],[[19.85351010110992],[66.47802981603378],[13.668460082856315]],[[37.956915942604354],[42.30141541577655],[19.741668641619096]],[[39.080532614105365],[40.782862129111415],[20.136605256783227]],[[38.52802760924039],[41.51704524192474],[19.954927148834873]],[[38.54062939523407],[41.48304183166038],[19.976328773105546]],[[41.86153215150319],[37.03752410998726],[21.100943738509553]],[[17.473423778890847],[69.51138287951338],[13.015193341595802]],[[24.560244213538333],[60.05954639307591],[15.380209393385758]],[[33.428611542485406],[48.22922412837924],[18.342164329135343]],[[40.293428180756344],[39.05226886575264],[20.654302953491015]],[[45.91499489643765],[31.53571010067117],[22.54929500289118]],[[54.24044415467423],[20.43349200047178],[25.326063844854]],[[67.59719051387584],[2.5973109397353],[29.805498546388858]],[[47.18023439271894],[29.753904284951943],[23.065861322329127]],[[29.422704333738537],[53.41327851800058],[17.16401714826089]],[[40.24502868970856],[38.92669799225354],[20.828273318037912]],[[44.12171657995597],[33.701981307565774],[22.17630211247825]],[[41.45438248971324],[37.254700320177015],[21.290917190109756]],[[35.815617879008194],[44.759287460879],[19.425094660112798]],[[61.97878037377889],[9.86308433077777],[28.158135295443355]],[[63.45548871604771],[7.879702496850954],[28.664808787101332]],[[16.531188582531048],[70.44173815010916],[13.027073267359773]],[[54.35228558385852],[19.963976343696764],[25.68373807244473]],[[53.13714485116653],[21.574241313646308],[25.288613835187157]],[[10.686240208431185],[78.09511009749656],[11.21864969407226]],[[42.496915585852555],[35.63061928077793],[21.872465133369516]],[[31.946902248359617],[49.6463146244986],[18.406783127141786]],[[21.348952084089273],[63.77563944154521],[14.875408474365523]],[[24.02002503935343],[60.18169807599254],[15.798276884654031]],[[41.02566575688639],[37.50321070368477],[21.47112353942883]],[[34.2391420832392],[46.50857728638894],[19.252280630371846]],[[1.0974732149363724],[90.68144429236386],[8.221082492699757]],[[23.268941298393397],[61.10663993091157],[15.624418770695039]],[[31.961995485159296],[49.51081161165543],[18.52719290318528]],[[55.7693883000251],[17.719283420417117],[26.511328279557784]],[[33.39973137255623],[47.45956033316298],[19.14070829428079]],[[49.09130341743519],[26.523245945897294],[24.38545063666751]],[[50.28885799501326],[24.924260953243742],[24.786881051743002]],[[52.65505682478678],[21.761450978557015],[25.58349219665621]],[[37.351986991299505],[42.16207749909561],[20.48593550960488]],[[67.51032100103626],[1.9460218103218803],[30.543657188641877]],[[45.334542006788055],[31.504270363513175],[23.161187629698755]],[[62.54030987360106],[8.447449942040269],[29.012240184358674]],[[57.25371000980487],[15.478293107812963],[27.267996882382178]],[[14.65764642250604],[72.23558306361858],[13.106770513875373]],[[62.90499691044015],[7.852660497818624],[29.242342591741227]],[[41.80510385949992],[35.982371541271526],[22.212524599228548]],[[38.138181478699615],[40.848624308993244],[21.013194212307123]],[[55.41229028239583],[17.812566299963517],[26.775143417640663]],[[18.514971693141117],[66.99906533043666],[14.485962976422226]],[[39.15700467020968],[39.42781219283724],[21.415183136953083]],[[36.06760825270812],[43.485115401718375],[20.447276345573517]],[[44.89584689607258],[31.681818490594978],[23.422334613332456]],[[55.15197533825178],[17.984266978959933],[26.863757682788286]],[[13.989326055890952],[72.81543934774962],[13.195234596359413]],[[40.77462288535194],[37.10037862879252],[22.12499848585555]],[[38.411547077739016],[40.15238542377559],[21.436067498485382]],[[39.87193869154438],[38.17599557819649],[21.95206573025913]],[[51.86491783029907],[22.142138802109393],[25.992943367591547]],[[32.16449442477193],[48.379073966672024],[19.456431608556038]],[[29.531613084327578],[51.88079600708372],[18.587590908588687]],[[51.5243839889335],[22.55002501835413],[25.925590992712362]],[[43.54533536028401],[33.17335039179651],[23.281314247919493]],[[38.35757095804529],[39.960257170998005],[21.682171870956697]],[[63.59461107437975],[6.196556968705311],[30.208831956914945]],[[29.093754679027867],[52.17931302862468],[18.72693229234746]],[[66.79092537905814],[1.9016766544111525],[31.307397966530704]],[[10.81531619633647],[76.52103368805717],[12.663650115606357]],[[57.264998138504],[14.524096457287058],[28.210905404208937]],[[19.116122965640063],[65.36239758300518],[15.521479451354752]],[[18.41666287434461],[66.28072900841146],[15.302608117243938]],[[58.501914117996904],[12.832838869066125],[28.66524701293699]],[[21.608997079801924],[62.01605763508594],[16.374945285112137]],[[19.82100817299879],[64.3995834007269],[15.779408426274303]],[[44.3456544707944],[31.67370748627136],[23.980638042934245]],[[21.979938339044576],[61.48774229719132],[16.532319363764106]],[[16.78802889729972],[68.40780823008691],[14.804162872613361]],[[47.216973333412994],[27.79967282500667],[24.983353841580332]],[[66.49222637725836],[2.0950117634900915],[31.412761859251553]],[[59.373904215317886],[11.583540103867076],[29.042555680815035]],[[55.41349638106996],[16.86060808126242],[27.725895537667615]],[[53.579594722142495],[19.25177443981958],[27.1686308380379]],[[52.48199763547784],[20.706016581842047],[26.811985782680114]],[[67.3226691350825],[0.9172407965864805],[31.760090068331014]],[[19.524632913031496],[64.63614362643285],[15.839223460535656]],[[32.780934949246344],[46.907026641514946],[20.31203840923871]],[[38.57772854244804],[39.13300244532139],[22.289269012230573]],[[39.14899903989252],[38.301537294178786],[22.549463665928688]],[[43.15575384544882],[32.957601096215306],[23.886645058335873]],[[17.997203191897118],[66.46492357340207],[15.537873234700808]],[[53.34021687263486],[19.31217982522209],[27.347603302143053]],[[28.80728728811587],[51.997192737708254],[19.195519974175856]],[[30.101868068060323],[50.26820984537713],[19.62992208656254]],[[36.59239041197737],[41.60485624814084],[21.802753339881786]],[[24.824242199566747],[57.28132123765993],[17.89443656277333]],[[23.167508097650543],[59.48076724041109],[17.351724661938363]],[[20.48173625290105],[63.04948763582763],[16.46877611127132]],[[10.114202775616796],[76.84076518381359],[13.045032040569618]],[[39.244513296071936],[37.968710256580955],[22.786776447347105]],[[44.71151513702144],[30.664053502708622],[24.62443136026992]],[[45.490480923531166],[29.586527938728835],[24.922991137739995]],[[56.425621786499704],[14.970833319947019],[28.603544893553266]],[[34.68064448547645],[43.94623921896839],[21.373116295555157]],[[34.174116860553546],[44.59469918175778],[21.23118395768867]],[[53.21078631985516],[19.20753256265838],[27.58168111748646]],[[59.75364568660464],[10.468270753967648],[29.778083559427728]],[[52.869255716476374],[19.627131925580763],[27.50361235794287]],[[59.806187651321],[10.315124113592617],[29.878688235086393]],[[29.270781349068603],[51.02487470535887],[19.70434394557253]],[[47.2289930233513],[27.076921472991728],[25.69408550365698]],[[34.27324236277685],[44.31833701821784],[21.408420619005323]],[[44.383889557651386],[30.82393946209529],[24.79217098025332]],[[0.0],[90.0],[9.999999999999998]],[[24.371963963557562],[57.44783572455713],[18.180200311885304]],[[38.433307741127464],[38.695997670766],[22.87069458810653]],[[26.30887808688664],[54.84082921854313],[18.850292694570218]],[[21.31783254014358],[61.46240521324341],[17.21976224661301]],[[46.21481424956685],[28.252270837390338],[25.532914913042816]],[[29.502251757540606],[50.53454141423892],[19.96320682822047]],[[45.23161919311114],[29.46629426809288],[25.302086538795976]],[[40.85488588950067],[35.250610497558135],[23.89450361294119]],[[34.5542828215694],[43.635520139680814],[21.810197038749777]],[[28.852737500446406],[51.22675597755809],[19.920506521995506]],[[55.74436340237724],[15.324801729890527],[28.930834867732237]],[[49.53742999235396],[23.577912971039144],[26.884657036606903]],[[15.351633756482252],[69.15286526148601],[15.495500982031732]],[[2.867893871474299],[85.78511464469814],[11.346991483827557]],[[33.90141019927243],[44.3951200198337],[21.703469780893865]],[[49.82734720040545],[23.09856954746644],[27.074083252128116]],[[36.927680071353016],[40.28881294131055],[22.783506987336427]],[[59.430757105343076],[10.221739705994302],[30.347503188662618]],[[54.88932767402005],[16.214052091267973],[28.89662023471197]],[[52.717151868774415],[19.094747207187226],[28.188100924038373]],[[8.77632333326559],[77.64687688463536],[13.576799782099041]],[[38.682087166735684],[37.677959600597504],[23.639953232666812]],[[40.963143514551284],[34.61965340707479],[24.417203078373927]],[[7.734288771360111],[78.88056427483421],[13.385146953805682]],[[25.489827192368125],[55.16674673862044],[19.34342606901144]],[[35.8524087528019],[41.338441284887445],[22.80914996231066]],[[16.197134473710072],[67.54477609662135],[16.25808942966858]],[[33.187401906251424],[44.8850255349975],[21.92757255875107]],[[24.08151749678362],[57.020076828879695],[18.898405674336686]],[[41.53645665457877],[33.729754055387815],[24.733789290033418]],[[47.13686505252418],[26.24521587682868],[26.61791907064714]],[[41.62180305335434],[33.59185302700529],[24.786343919640366]],[[17.159602706338433],[66.17989067161704],[16.660506622044515]],[[29.679875185599556],[49.4751885935657],[20.844936220834732]],[[43.49434995261884],[31.041254779632105],[25.464395267749058]],[[60.28895335515922],[8.646852651680414],[31.064193993160355]],[[23.806011514531793],[57.27354432927992],[18.920444156188296]],[[58.841950807849685],[10.530327309414522],[30.62772188273579]],[[32.45750932770369],[45.670513823845766],[21.871976848450547]],[[54.8535116442597],[15.77589330558202],[29.370595050158286]],[[37.30573453107096],[39.17260540557107],[23.52166006335795]],[[31.969867674831132],[46.277272537020394],[21.75285978814848]],[[37.57857472354544],[38.772844199787635],[23.648581076666936]],[[43.512017111562244],[30.80530284974938],[25.68268003868838]],[[55.7913126132641],[14.369964272776103],[29.83872311395979]],[[39.60375675136673],[35.94927739780127],[24.446965850832]],[[43.588474629120626],[30.623012451391546],[25.78851291948782]],[[45.828574861864745],[27.631834989600947],[26.53959014853431]],[[38.32467502773457],[37.62037862416406],[24.05494634810137]],[[33.66279317500287],[43.835118539282306],[22.502088285714823]],[[33.63302956396265],[43.84151752737357],[22.52545290866377]],[[26.164221087253893],[53.788221785479294],[20.047557127266828]],[[41.235873434523526],[33.67805005065701],[25.086076514819457]],[[48.19426879683391],[24.392557913032277],[27.413173290133823]],[[47.77133826169088],[24.95568565840441],[27.27297607990472]],[[34.32339782820312],[42.870437398671584],[22.806164773125282]],[[27.174039886164998],[52.3902204020104],[20.435739711824606]],[[45.688307916335155],[27.689617655410814],[26.622074428254017]],[[31.459029432454827],[46.62523452980034],[21.915736037744825]],[[13.483715308294583],[70.56463835980028],[15.951646331905136]],[[65.14789964961444],[1.6279607608323046],[33.22413958955325]],[[37.773616723296406],[38.115760318710045],[24.11062295799354]],[[19.038775857047458],[63.07388146125419],[17.88734268169835]],[[20.425105505771114],[61.21839065453045],[18.35650383969843]],[[16.448090952810457],[66.51902773258567],[17.032881314603866]],[[42.368129088746834],[31.927028910192796],[25.704842001060378]],[[27.38136515788045],[51.89306284549193],[20.725571996627608]],[[65.03120552762776],[1.6728591648855367],[33.295935307486715]],[[41.02658515676205],[33.67134374191114],[25.3020711013268]],[[35.688294396750585],[40.75544933790212],[23.556256265347304]],[[46.64084110129072],[26.122135931493144],[27.23702296721614]],[[25.9829614211913],[53.65107313103735],[20.36596544777136]],[[7.698197381916912],[78.01941753687399],[14.282385081209089]],[[34.47735184564192],[42.29141036796075],[23.231237786397326]],[[26.643856770934143],[52.73503976269609],[20.621103466369764]],[[20.79909243088953],[60.50690849841938],[18.693999070691095]],[[31.689127042562003],[45.98220402499144],[22.328668932446554]],[[27.596619003105566],[51.42434846254266],[20.979032534351784]],[[46.3030818543526],[26.45699388981771],[27.239924255829695]],[[14.990278761823461],[68.14904463418165],[16.860676603994893]],[[27.552521509877632],[51.383184702860085],[21.064293787262272]],[[39.38645672949347],[35.58984569867012],[25.023697571836422]],[[37.88534201024496],[37.52284239229219],[24.591815597462848]],[[45.77620890443899],[26.99228627482923],[27.23150482073178]],[[63.15263846861906],[3.742014608867951],[33.10534692251299]],[[65.39954011309615],[0.7415530420682827],[33.858906844835566]],[[50.97041452166814],[19.96092415302212],[29.068661325309748]],[[50.2515753371638],[20.91222317047419],[28.83620149236201]],[[18.186722784986785],[63.65426661425915],[18.159010600754073]],[[11.811776802001878],[72.15400470333861],[16.0342184946595]],[[55.24056971189527],[14.22199454861718],[30.537435739487563]],[[28.247058928665318],[50.209401489594164],[21.54353958174052]],[[35.33100440348331],[40.76284195652576],[23.906153639990922]],[[65.41521510577145],[0.601406599187892],[33.98337829504066]],[[14.600781986727343],[68.31748483580351],[17.081733177469147]],[[44.05896457687559],[29.033193887255614],[26.907841535868783]],[[42.28229409647573],[31.395913809355708],[26.321792094168543]],[[36.11318304473382],[39.600819945252],[24.285997010014174]],[[24.766191409862472],[54.71828949314026],[20.515519096997263]],[[59.497220045430055],[8.389994604272742],[32.11278535029721]],[[57.44108499272862],[11.128577776056552],[31.43033723121482]],[[40.227381081639514],[34.06200977571805],[25.710609142642443]],[[27.609435782042812],[50.88522157697505],[21.50534264098214]],[[32.33726955168728],[44.5489540613051],[23.113776387007633]],[[62.210063725175615],[4.656700655493559],[33.133235619330826]],[[59.11758164207252],[8.744891688670114],[32.13752666925735]],[[19.547669556764188],[61.44849158156417],[19.003838861671632]],[[24.174573151103434],[55.27090332610398],[20.55452352279259]],[[45.760262660494085],[26.48868875381219],[27.751048585693738]],[[38.865915908828406],[35.674548727426334],[25.459535363745267]],[[42.136635226790595],[31.30626437422992],[26.55710039897948]],[[36.585420403730794],[38.67930172013582],[24.735277876133388]],[[37.66211100642043],[37.23803583300343],[25.099853160576135]],[[24.28711000085372],[55.04334098727759],[20.669549011868686]],[[41.48405541377135],[32.10773235020984],[26.40821223601881]],[[46.99400792746528],[24.759553475703918],[28.246438596830792]],[[14.530322907624335],[68.03986592122338],[17.42981117115228]],[[42.74403408630208],[30.395111008868227],[26.860854904829694]],[[16.965223674006708],[64.76022230432513],[18.27455402166817]],[[23.339544449016174],[56.22971805658239],[20.430737494401434]],[[60.39980757796863],[6.79615184956265],[32.80404057246872]],[[31.336150459455816],[45.49036190974407],[23.173487630800125]],[[30.042660526036556],[47.17182301824286],[22.78551645572058]],[[36.32190900455417],[38.76641074154153],[24.911680253904304]],[[37.80464100141081],[36.76935547584381],[25.426003522745383]],[[0.4580198549276348],[86.54225013290771],[12.999730012164665]],[[27.915698386774395],[49.919735958564274],[22.16456565466133]],[[49.636539326244225],[20.957990814239675],[29.405469859516103]],[[53.49717409544945],[15.777356142118537],[30.725469762432013]],[[19.48836328154686],[61.115739485077256],[19.395897233375877]],[[33.10537514765427],[42.937002714247456],[23.957622138098277]],[[38.51849612480394],[35.68034838705359],[25.801155488142452]],[[42.41802883203815],[30.476293862292103],[27.10567730566975]],[[41.71071686542467],[31.40032279555227],[26.888960339023065]],[[27.665334282992177],[50.10857747324021],[22.22608824376761]],[[18.101055791331707],[62.820738543495935],[19.078205665172366]],[[56.08169838558117],[12.147900059464915],[31.77040155495392]],[[52.802452300883],[16.476613531844244],[30.720934167272755]],[[39.64990587049779],[33.993209859386766],[26.356884270115437]],[[39.82183536269137],[33.75740587457841],[26.420758762730234]],[[36.33634298758054],[38.37368159247615],[25.289975419943307]],[[19.667000980933473],[60.58150000434055],[19.75149901472599]],[[37.18367643996422],[37.212682362668986],[25.603641197366787]],[[31.85654507622313],[44.314344937046876],[23.829109986729986]],[[11.455678971239891],[71.51379513481136],[17.03052589394874]],[[38.64820069423836],[35.24882700194212],[26.102972303819527]],[[39.78542376339412],[33.70998219739442],[26.504594039211455]],[[24.53124815968251],[54.022086370476075],[21.44666546984142]],[[38.813770032985154],[34.962870158891505],[26.22335980812336]],[[23.846387463504403],[54.90849176181396],[21.24512077468163]],[[24.004508833482735],[54.691649647439256],[21.303841519078013]],[[65.0],[0.0],[35.0]],[[53.90982972147906],[14.761435844617177],[31.328734433903747]],[[38.629250374098206],[35.133404996409965],[26.237344629491837]],[[61.65399361804634],[4.4303451611532125],[33.915661220800445]],[[18.86614690900795],[61.46551786583876],[19.66833522515329]],[[37.80756176381721],[36.186958685752515],[26.005479550430273]],[[2.084148011886805],[83.7811323360296],[14.134719652083582]],[[34.58443488135447],[40.414856008208105],[25.00070911043742]],[[34.21104492984567],[40.84970563542257],[24.939249434731757]],[[41.457331599817685],[31.17494427260139],[27.367724127580928]],[[47.339837144959624],[23.329537821051588],[29.330625033988788]],[[22.14316908824617],[56.89477995671874],[20.96205095503509]],[[34.66132039208977],[40.20227290320235],[25.1364067047079]],[[29.484991175430764],[47.05768387803474],[23.4573249465345]],[[51.83159350589713],[17.194559866191973],[30.973846627910902]],[[36.06672502530748],[38.210476752690056],[25.722798222002474]],[[31.417625914519085],[44.40897710088862],[24.173396984592273]],[[39.79801000903851],[33.18746914904512],[27.014520841916358]],[[32.964764696248125],[42.29396315318485],[24.741272150567013]],[[48.14891823624352],[22.034672064653492],[29.81640969910299]],[[26.60747574362235],[50.7465936792874],[22.645930577090255]],[[33.09135398670588],[42.09665769047076],[24.811988322823357]],[[32.235737476686225],[43.229198527791915],[24.53506399552186]],[[43.66805194719296],[27.97641264368596],[28.35553540912108]],[[29.202763144529502],[47.26036676356674],[23.53687009190374]],[[31.37625351695522],[44.360231140263316],[24.263515342781464]],[[39.94239591528536],[32.92430212724275],[27.133301957471883]],[[10.920359879604367],[71.58534041884508],[17.49429970155055]],[[44.666546507655916],[26.585704575195646],[28.747748917148446]],[[50.26180808636498],[19.11953052667518],[30.618661386959843]],[[50.49497798316522],[18.770956849448012],[30.73406516738676]],[[14.450327437462592],[66.81390467190712],[18.73576789063029]],[[63.74741856663802],[1.0569945666767635],[35.19558686668522]],[[48.22365797093415],[21.73385339853987],[30.042488630525995]],[[42.40089144460361],[29.47986475904718],[28.119243796349195]],[[41.952078664959515],[30.063476527736256],[27.984444807304232]],[[39.41206969253342],[33.44238727065248],[27.1455430368141]],[[47.27890788624688],[22.948360921985046],[29.77273119176808]],[[64.02033066221678],[0.599245065198813],[35.380424272584406]],[[32.37583187714863],[42.79025268760501],[24.833915435246354]],[[29.291383780565607],[46.89717243523919],[23.811443784195216]],[[27.150107270246483],[49.74244094418265],[23.107451785570866]],[[22.67145860457078],[55.702721971107074],[21.62581942432215]],[[45.22960023390048],[25.59166434148687],[29.17873542461267]],[[47.027481629579945],[23.191184718498175],[29.781333651921877]],[[33.414854249379935],[41.29122807472941],[25.293917675890658]],[[42.02716411664238],[29.7842151857497],[28.188620697607913]],[[33.32601289178652],[41.37638611360296],[25.297600994610512]],[[34.143400847836965],[40.27236156535675],[25.584237586806292]],[[26.58894940706414],[50.306089176850655],[23.104961416085217]],[[41.33382240684755],[30.607304292070115],[28.058873301082343]],[[60.98416026561625],[4.401345723135512],[34.61449401124824]],[[26.02861177359656],[50.93621887717219],[23.03516934923126]],[[34.024982288776485],[40.24405337759872],[25.730964333624794]],[[33.6761730862293],[40.69760391697825],[25.626222996792453]],[[47.485183086330984],[22.281097555869913],[30.23371935779911]],[[0.247923995461302],[85.24751331191447],[14.504562692624233]],[[61.59737152704413],[3.4296473109419736],[34.972981162013895]],[[46.17677427376536],[23.98688977421438],[29.83633595202026]],[[32.00574976132136],[42.871523173888704],[25.122727064789924]],[[41.18686990066877],[30.605100629118343],[28.208029470212875]],[[63.18864182767662],[1.2214215655573557],[35.58993660676603]],[[40.80971881732573],[31.05649287458146],[28.13378830809281]],[[46.202429904571495],[23.85549080361201],[29.942079291816498]],[[21.53746642069186],[56.74023270144147],[21.722300877866648]],[[44.54644806992671],[26.034430555003585],[29.4191213750697]],[[37.112473993418256],[35.94515369840502],[26.942372308176726]],[[16.308483048066375],[63.68130503352033],[20.010211918413297]],[[23.993219542917018],[53.398935844037176],[22.6078446130458]],[[26.689960035780064],[49.72832214557973],[23.581717818640197]],[[38.82594486175152],[33.541923290195705],[27.632131848052772]],[[32.33737469647741],[42.181609680800605],[25.481015622721987]],[[19.61755444146861],[59.13925565410345],[21.243189904427933]],[[28.50651594419252],[47.28316782770993],[24.210316228097543]],[[37.668636155786984],[35.013755232053065],[27.317608612159944]],[[42.48886321976355],[28.551406325653357],[28.959730454583095]],[[37.76088598698279],[34.84610812796745],[27.393005885049764]],[[38.164359742808806],[34.28480617341329],[27.550834083777904]],[[51.19786807438841],[16.90415256376801],[31.89797936184357]],[[58.76867101081217],[6.801649594142889],[34.429679395044936]],[[30.880508404834956],[43.97668479359776],[25.142806801567296]],[[30.943724103266913],[43.87764088157468],[25.178635015158402]],[[12.890307374214474],[67.93389986635195],[19.175792759433584]],[[47.777206215845354],[21.40040301872674],[30.822390765427905]],[[17.444909763377183],[61.80215868603207],[20.75293155059075]],[[30.653134020242472],[44.19002161899013],[25.156844360767405]],[[48.62194075821147],[20.201263127055984],[31.17679611473254]],[[15.743895443043593],[64.03786521529975],[20.21823934165666]],[[41.41072952762702],[29.809654579449518],[28.779615892923466]],[[26.791036595873134],[49.28017125866755],[23.928792145459305]],[[0.0],[85.00000000000001],[14.999999999999991]],[[25.718416851806126],[50.684327428774],[23.597255719419874]],[[50.300331194050244],[17.889529154010003],[31.810139651939767]],[[48.38445623226134],[20.417426229215078],[31.198117538523572]],[[10.83925605001361],[70.47270828328695],[18.68803566669946]],[[36.171898424226065],[36.632274612589015],[27.195826963184917]],[[15.927505169402068],[63.60696288104318],[20.465531949554748]],[[47.07086133540813],[22.060400482426555],[30.868738182165313]],[[5.0610012616215485],[78.03689553069012],[16.902103207688317]],[[20.68251866946734],[57.18271871109055],[22.134762619442103]],[[38.49956493964019],[33.38594607370046],[28.114488986659346]],[[42.67247748995256],[27.820588556527092],[29.506933953520342]],[[49.26471421968491],[19.00216260026622],[31.73312318004887]],[[56.47969918134616],[9.362576924200726],[34.157723894453106]],[[48.96737004537638],[19.36238769593344],[31.67024225869018]],[[43.89892454730499],[26.104889332225483],[29.99618612046952]],[[45.442571024084025],[24.032712718902747],[30.524716257013218]],[[11.010813861345298],[69.93459990006642],[19.05458623858827]],[[25.586472186386334],[50.48926906877701],[23.924258744836653]],[[59.07707345066526],[5.816742297720371],[35.10618425161437]],[[26.745122181839253],[48.922205317849325],[24.33267250031141]],[[22.418284240095833],[54.677835961732],[22.903879798172174]],[[61.91476190241906],[2.0147436578497175],[36.07049443973122]],[[31.991868076856278],[41.905900230326424],[26.102231692817295]],[[37.22916523168003],[34.91881836269459],[27.852016405625392]],[[12.386343009264401],[68.04057498352186],[19.573082007213742]],[[28.530586670254728],[46.49678393504461],[24.97262939470066]],[[32.356315816653165],[41.34623395691771],[26.29745022642913]],[[62.18321735733402],[1.5395192804320221],[36.27726336223397]],[[37.60480457539812],[34.28508770627547],[28.11010771832641]],[[48.769714067314645],[19.39256874196642],[31.837717190718944]],[[52.61298233143792],[14.2524880067721],[33.13452966178998]],[[46.35224865312259],[22.597133411106597],[31.050617935770823]],[[17.748195960605806],[60.72472274558718],[21.52708129380701]],[[36.783144231433184],[35.33273034228881],[27.88412542627802]],[[30.20111811288698],[44.09784726010462],[25.701034627008408]],[[50.287454815153055],[17.313255795964313],[32.39928938888262]],[[45.99656485331553],[23.025004448741644],[30.978430697942816]],[[17.72727622547936],[60.66680408020147],[21.605919694319166]],[[26.59389279960529],[48.748501458114895],[24.65760574227981]],[[35.89291376155215],[36.32711018505378],[27.779976053394062]],[[36.33956994162619],[35.703190573718985],[27.95723948465482]],[[29.854151824289865],[44.349032119678725],[25.796816056031396]],[[39.89430893496919],[30.946122324342085],[29.15956874068872]],[[33.01687889636482],[40.070394334828016],[26.91272676880716]],[[57.875514234904976],[6.916167499058415],[35.20831826603661]],[[36.54535569967112],[35.34925537395242],[28.105388926376452]],[[39.068011373403834],[31.975189417168288],[28.95679920942787]],[[41.08807907589212],[29.2113111266158],[29.70060979749207]],[[52.78967254692256],[13.601427232474247],[33.608900220603196]],[[20.50226743430455],[56.64483704533857],[22.85289552035688]],[[35.73024314054524],[36.33842045749523],[27.931336401959527]],[[34.92375531279986],[37.37678309058918],[27.699461596610963]],[[3.60738534215703],[79.11525910063007],[17.277355557212907]],[[33.57592780265971],[39.13232752284771],[27.291744674492595]],[[50.15129022207076],[17.007205007937102],[32.84150476999213]],[[34.623970191055534],[37.69800886570842],[27.678020943236053]],[[40.99224107834802],[29.20118923871648],[29.80656968293549]],[[34.02722538895909],[38.46118465633853],[27.511589954702387]],[[49.552661186626096],[17.74136618544343],[32.70597262793047]],[[52.17451558447507],[14.233215327152756],[33.59226908837217]],[[35.9063429790532],[35.91479176701111],[28.17886525393569]],[[35.95421120792212],[35.7955008722235],[28.250287919854365]],[[30.89172759748745],[42.54250873057331],[26.565763671939237]],[[30.039813282103644],[43.67173108544154],[26.28845563245481]],[[52.358979614423596],[13.89082603934638],[33.750194346230025]],[[25.197948089565337],[50.090507543009636],[24.711544367425034]],[[14.386363725020724],[64.49477580737295],[21.118860467606325]],[[35.516126044075214],[36.31791788899098],[28.165956066933813]],[[41.46335149176391],[28.374157684323553],[30.162490823912535]],[[43.673657315843705],[25.41813998842783],[30.90820269572847]],[[32.013512775390794],[40.958516528933885],[27.02797069567533]],[[29.482310257431955],[44.32617268780854],[26.191517054759505]],[[33.315834083196364],[39.201438618307805],[27.482727298495842]],[[54.22903555337507],[11.293892139363226],[34.4770723072617]],[[1.270418434849762],[81.89132680055981],[16.838254764590435]],[[31.238605496312054],[41.912885848971605],[26.84850865471634]],[[42.78838003861923],[26.479093267854548],[30.73252669352623]],[[40.53963481038339],[29.462613578947366],[29.997751610669233]],[[44.34999993000942],[24.37192988312974],[31.27807018686084]],[[31.018537300175748],[42.14173565206503],[26.839727047759226]],[[36.05716909149989],[35.415246741357514],[28.52758416714261]],[[16.72348953125248],[61.157207748746224],[22.11930272000131]],[[29.58852014340264],[43.916426548329625],[26.495053308267728]],[[59.445643832055275],[4.094974468078404],[36.45938169986632]],[[43.42973695265634],[25.44382004762957],[31.126442999714094]],[[16.879159917132743],[60.83776654904275],[22.28307353382451]],[[45.143867942600885],[23.109649291026855],[31.746482766372253]],[[18.650811680692367],[58.42752154417457],[22.921666775133062]],[[50.412138211667354],[16.069690961418477],[33.51817082691417]],[[11.551745762835425],[67.87958279913569],[20.56867143802886]],[[24.749336230356914],[50.28198353759661],[24.968680232046474]],[[59.529818264383515],[3.8857942789038993],[36.584387456712584]],[[32.97161190509015],[39.25400489531556],[27.774383199594293]],[[29.732469423613495],[43.57139953840131],[26.69613103798519]],[[12.914111419856175],[65.97402277688005],[21.11186580326378]],[[46.52492099831954],[21.159355638132645],[32.31572336354784]],[[48.7919069259609],[18.124141908348793],[33.08395116569031]],[[12.131799670272716],[66.99813029104735],[20.87007003867994]],[[26.06344223816696],[48.39273862800286],[25.54381913383019]],[[52.38933093652349],[13.267523878922601],[34.343145184553904]],[[2.9108868238651677],[79.21678215158397],[17.87233102455086]],[[30.99992183484263],[41.72409814308076],[27.275980022076617]],[[39.13758641093089],[30.8446046788635],[30.017808910205606]],[[34.28664160695326],[37.29201997779787],[28.421338415248883]],[[53.05697117573717],[12.211578479175202],[34.73145034508763]],[[28.92919679008944],[44.36027378239795],[26.710529427512615]],[[36.92872594459547],[33.68081023375272],[29.390463821651807]],[[57.87583304861646],[5.739483214341426],[36.38468373704212]],[[49.56931230893175],[16.79385335210859],[33.63683433895965]],[[37.69024461401888],[32.630025664025894],[29.679729721955226]],[[23.06715554393767],[52.095231218819436],[24.837613237242884]],[[35.88720150741871],[34.99686488962488],[29.115933602956407]],[[59.51554283227605],[3.4806790105688816],[37.00377815715507]],[[40.235801726821855],[29.120875066419828],[30.64332320675832]],[[43.63076696723367],[24.516476458419383],[31.852756574346948]],[[22.003052452221738],[53.247798637738],[24.749148910040276]],[[23.03475201851209],[51.85978679255358],[25.10546118893433]],[[10.467366746487343],[68.55545426405142],[20.97717898946124]],[[38.47815695739513],[31.190462660094358],[30.33138038251052]],[[40.64849264610612],[28.293982730695085],[31.057524623198802]],[[35.916048280045395],[34.60298958407166],[29.480962135882944]],[[42.439148506004116],[25.895628652240898],[31.665222841754986]],[[35.558192042893126],[35.02933723806535],[29.41247071904153]],[[34.05477631197692],[37.01287434573234],[28.932349342290724]],[[28.549336871428377],[44.277986732839615],[27.172676395732008]],[[43.06731861420578],[24.91713993813322],[32.015541447661]],[[34.541242115895855],[36.24781701899673],[29.210940865107414]],[[13.731552186119158],[63.9930710665189],[22.275376747361932]],[[40.21843522096987],[28.677041104161717],[31.10452367486841]],[[45.448776927747375],[21.696573585722142],[32.854649486530484]],[[31.7725863222027],[39.9265137905627],[28.300899887234603]],[[18.43668467460366],[57.70082192008687],[23.862493405309472]],[[41.438534799525364],[27.028977780925413],[31.53248741954922]],[[15.665473142218083],[61.38701500883764],[22.94751184894427]],[[45.861527253280855],[21.02551791160722],[33.11295483511192]],[[24.396763787102955],[49.628868457826535],[25.974367755070503]],[[38.726689401168244],[30.513268577723757],[30.760042021107996]],[[9.682169330502235],[69.22675810657763],[21.091072562920132]],[[32.30864845260156],[39.04746173231335],[28.643889815085092]],[[42.79351865223761],[25.050479629401178],[32.156001718361225]],[[13.498517039760868],[64.10228314791377],[22.399199812325367]],[[41.03761419639151],[27.349559838081213],[31.612825965527275]],[[24.00342562405263],[50.060569033419966],[25.93600534252742]],[[34.57868017911142],[35.958975403043894],[29.462344417844665]],[[40.84542634888397],[27.595693213200196],[31.558880437915832]],[[15.043417991244675],[61.994973671454964],[22.96160833730037]],[[51.70190950586954],[13.115230980374296],[35.18285951375616]],[[21.289805894379104],[53.65139781396956],[25.05879629165133]],[[28.783119433426407],[43.64624497311071],[27.57063559346289]],[[43.90578740596498],[23.461390489333407],[32.63282210470162]],[[59.74060857624196],[2.33040169096384],[37.9289897327942]],[[27.805376046425472],[44.90361090572893],[27.291013047845592]],[[26.651252511422758],[46.44179679396991],[26.90695069460734]],[[46.17801045534126],[20.40452407207604],[33.41746547258269]],[[50.20901324866253],[15.009506229757891],[34.78148052157958]],[[4.022564544444966],[76.58276606644887],[19.394669389106166]],[[33.45161043799417],[37.32881324691022],[29.219576315095612]],[[52.35644064298709],[12.118608921207477],[35.52495043580544]],[[34.73093008143154],[35.6051782579013],[29.66389166066716]],[[49.20153520274024],[16.30241591094466],[34.49604888631511]],[[34.437435239574874],[35.96626320055826],[29.596301559866863]],[[30.68778120487404],[40.96437610592566],[28.3478426892003]],[[6.34602868739733],[73.39159877930408],[20.2623725332986]],[[57.82197008195262],[4.747344751935104],[37.43068516611227]],[[29.046251248330123],[43.015498662433124],[27.938250089236742]],[[21.68666531485348],[52.82579669006162],[25.487537995084896]],[[46.84799551041439],[19.209557063456895],[33.942447426128716]],[[15.830321296009126],[60.56231607066734],[23.60736263332355]],[[38.01768786599939],[30.976745644859953],[31.00556648914067]],[[35.692098884951164],[34.05858558954008],[30.249315525508752]],[[33.085936374044934],[37.525593699070896],[29.38846992688418]],[[31.422217438794277],[39.7400111888533],[28.837771372352428]],[[57.17967772071286],[5.388857562679207],[37.431464716607934]],[[12.120032744466167],[65.40790194290634],[22.4720653126275]],[[32.90324227172346],[37.69373808162516],[29.403019646651394]],[[37.09263730958448],[32.07311341707788],[30.834249273337644]],[[40.5143306952109],[27.489859943450533],[31.995809361338566]],[[30.366327518351977],[41.020522242160794],[28.61315023948724]],[[31.710057346093546],[39.14895473610281],[29.140987917803642]],[[38.57392823477323],[29.980613995064353],[31.445457770162417]],[[38.08744687832463],[30.623057171602504],[31.289495950072872]],[[20.479264355504377],[54.09098493849368],[25.429750706001936]],[[35.92717154302228],[33.490585529603145],[30.58224292737457]],[[42.58589268992423],[24.60426851085921],[32.80983879921656]],[[28.408680222042832],[43.49925742211971],[28.09206235583745]],[[43.473109099650635],[23.296678115956976],[33.230212784392386]],[[35.51115161434756],[33.905089713081345],[30.583758672571093]],[[45.03151075333066],[21.21043359278372],[33.75805565388562]],[[32.78655207358573],[37.531584632364236],[29.681863294050025]],[[35.85385842570337],[33.350941869454175],[30.795199704842457]],[[56.886707829231355],[5.268313603416651],[37.84497856735201]],[[39.3401137144872],[28.652860435391474],[32.00702585012132]],[[49.346400542576035],[15.2924673552898],[35.36113210213417]],[[12.287483480003912],[64.69984419289936],[23.01267232709672]],[[20.18321051473478],[54.15208594150012],[25.6647035437651]],[[39.028540432861064],[29.01502497821297],[31.95643458892596]],[[11.158791667486746],[66.17002308783094],[22.671185244682306]],[[21.701513746481208],[52.112032351020545],[26.186453902498247]],[[42.60079273698749],[24.24593507557247],[33.153272187440045]],[[56.79647948022447],[5.284030899952522],[37.919489619823004]],[[6.422515006906136],[72.41816933151367],[21.15931566158021]],[[51.69184674340689],[12.056726093109207],[36.25142716348391]],[[15.113457703677607],[60.81309854825284],[24.07344374806954]],[[33.77361279645573],[35.91315696524099],[30.313230238303284]],[[35.88427339253361],[33.09513344110839],[31.02059316635802]],[[4.879199121400131],[74.43474147266433],[20.686059405935534]],[[36.719100889511424],[31.975779635290348],[31.30511947519823]],[[25.63340530056467],[46.73328582693043],[27.6333088725049]],[[16.509552873358636],[58.89818987054688],[24.59225725609448]],[[30.397406027356293],[40.33746143399678],[29.26513253864693]],[[41.07734318006615],[26.091657855443028],[32.83099896449082]],[[35.54702227850443],[33.42742610175436],[31.025551619741226]],[[13.959337301677834],[62.19901461382017],[23.841648084501994]],[[34.20037650977673],[35.2096126837817],[30.59001080644157]],[[40.37407895258836],[26.948197439432338],[32.677723607979296]],[[33.28370768124883],[36.39997798810108],[30.3163143306501]],[[33.49430865205789],[36.115537195702245],[30.390154152239862]],[[45.55445860316001],[20.034667125807253],[34.41087427103274]],[[22.122427290527476],[51.24233137979194],[26.635241329680582]],[[34.6987323971526],[34.47236356882453],[30.828904034022877]],[[38.280809545366324],[29.687880588320958],[32.03130986631272]],[[39.88683640699313],[27.53950526926906],[32.57365832373782]],[[44.444637506184925],[21.460803940126574],[34.09455855368851]],[[30.00391665530082],[40.689405292768384],[29.306678051930795]],[[43.16847908502071],[23.13407392036853],[33.69744699461077]],[[13.679297141801378],[62.45229505792561],[23.868407800273015]],[[21.197242961518263],[52.41024731996706],[26.392509718514674]],[[12.150588970771098],[64.42884041131211],[23.420570617916788]],[[53.812216393360934],[8.877590707341696],[37.31019289929737]],[[38.65790452096381],[29.060710957754672],[32.28138452128152]],[[40.07929721181238],[27.156176792897256],[32.76452599529037]],[[36.09385392592568],[32.417597906901904],[31.488548167172414]],[[32.47093213926669],[37.24499540668394],[30.284072454049376]],[[33.87086532865011],[35.373829303303125],[30.75530536804677]],[[33.82555717623863],[35.40669351373765],[30.767749310023714]],[[26.027903149104603],[45.80344366824186],[28.16865318265353]],[[51.92819360355985],[11.258058889191075],[36.813747507249076]],[[37.96643927656637],[29.85368573704977],[32.17987498638386]],[[8.787679204951818],[68.72299633930977],[22.489324455738423]],[[27.91675172278247],[43.193702164027094],[28.889546113190423]],[[33.66009697889174],[35.532525366164634],[30.80737765494363]],[[28.93774727317951],[41.79302046043631],[29.269232266384186]],[[30.901281344993674],[39.16525975345565],[29.93345890155068]],[[31.88628823755934],[37.80005809757458],[30.313653664866074]],[[42.19037228731054],[24.02779269397639],[33.78183501871309]],[[30.98050939667596],[38.958253992836525],[30.061236610487523]],[[21.020958123662417],[52.22784990161061],[26.751191974726986]],[[56.31816918384677],[5.155450167349146],[38.52638064880409]],[[37.16038664821078],[30.682346733621525],[32.15726661816768]],[[43.537788059815185],[22.16651986149305],[34.29569207869177]],[[35.45150940188746],[32.93330120206805],[31.615189396044478]],[[34.968536853876806],[33.54222756521416],[31.489235580909032]],[[49.558735780594574],[14.082898618747992],[36.358365600657436]],[[47.02693796248535],[17.428772432922397],[35.544289604592244]],[[39.054944870015476],[28.05768608281221],[32.88736904717231]],[[28.739199096445617],[41.770788429931855],[29.490012473622528]],[[56.14150491998571],[5.232246877606891],[38.626248202407396]],[[32.220241090922954],[37.11767756758178],[30.662081341495263]],[[20.915234420223634],[52.15245142173942],[26.932314158036952]],[[36.25448174833052],[31.697593552629925],[32.047924699039555]],[[45.8650022491569],[18.859578756139832],[35.275418994703266]],[[8.429434574677863],[68.7655988370578],[22.80496658826434]],[[60.00000000000001],[0.0],[39.99999999999999]],[[0.0],[80.0],[19.999999999999996]],[[31.09195423983442],[38.54153964782297],[30.366506112342602]],[[14.049843152366421],[61.25900243861223],[24.69115440902135]],[[41.63560227253858],[24.41732382745525],[33.94707390000618]],[[25.978806910182694],[45.286255479740085],[28.73493761007721]],[[47.361396124484315],[16.758289796126014],[35.88031407938968]],[[29.68571476046204],[40.304207518722876],[30.010077720815087]],[[30.33818271628485],[39.400414095691964],[30.261403188023195]],[[32.31374542631491],[36.757578150696624],[30.92867642298847]],[[49.03012784493261],[14.467702601038003],[36.50216955402939]],[[36.057428107638955],[31.76291561365406],[32.17965627870699]],[[15.88438929710779],[58.650071657616444],[25.465539045275765]],[[45.344950627433214],[19.367427258054786],[35.287622114512004]],[[48.275511966949196],[15.401041052960313],[36.32344698009047]],[[58.46404474066902],[1.8083054420682716],[39.7276498172627]],[[38.53959065594882],[28.370727436486852],[33.08968190756432]],[[40.8795349965849],[25.2472507339161],[33.873214269498995]],[[42.32393099727313],[23.319426289927577],[34.3566427127993]],[[36.338552148906786],[31.258110113744568],[32.40333773734865]],[[39.29415389683209],[27.305541495136776],[33.400304608031135]],[[25.148800546174364],[46.15173092499478],[28.699468528830856]],[[40.90467269084812],[25.07481648210545],[34.02051082704642]],[[24.2578136057024],[47.26593876337163],[28.476247630925982]],[[41.570487099011984],[24.170030523496674],[34.25948237749134]],[[36.177785298748],[31.321262701845182],[32.500951999406816]],[[25.357551513809778],[45.738375149064076],[28.904073337126153]],[[20.902868320499064],[51.63687287793206],[27.460258801568887]],[[24.179261008831013],[47.264601596806045],[28.556137394362942]],[[23.60847029296822],[47.93748896388397],[28.454040743147814]],[[15.946482753286325],[58.15153998204015],[25.901977264673537]],[[51.87874673641846],[10.23155184744897],[37.88970141613257]],[[24.67105356878346],[46.49243844523646],[28.836507985980077]],[[32.114812440363764],[36.5666750524975],[31.318512507138735]],[[15.18609910525332],[59.118276970121805],[25.695623924624872]],[[35.269787349754566],[32.33677023547265],[32.393442414772785]],[[28.8032278716618],[40.924465822726766],[30.272306305611423]],[[45.9682352796609],[18.01635048662386],[36.015414233715234]],[[16.239396235906298],[57.64401097234182],[26.11659279175188]],[[30.944877230992873],[38.03527079625063],[31.019851972756502]],[[49.35507731903068],[13.47720753424606],[37.16771514672326]],[[31.639437748643285],[37.0677414151117],[31.292820836245028]],[[36.092455607557376],[31.112033526672768],[32.795510865769856]],[[32.484709947496526],[35.902827096458225],[31.61246295604524]],[[29.56970565854408],[39.771995450884276],[30.658298890571633]],[[16.721407373848347],[56.90233512913174],[26.37625749701991]],[[32.719742172557076],[35.551782840723],[31.728474986719924]],[[29.992385509709095],[39.175340132852526],[30.832274357438383]],[[27.884084766285085],[41.9517428048414],[30.164172428873528]],[[34.918238139507146],[32.556824004650224],[32.52493785584262]],[[38.22413676768534],[28.12126984791934],[33.65459338439531]],[[40.6546375073495],[24.870033282019683],[34.47532921063081]],[[22.38773929088696],[49.21575700273523],[28.396503706377814]],[[30.53335398903787],[38.33726169390461],[31.129384317057518]],[[13.471330671005141],[61.03499650129446],[25.493672827700415]],[[5.6949030548421],[71.372860819408],[22.932236125749903]],[[38.73839734291196],[27.312366829348466],[33.94923582773958]],[[44.815147072877195],[19.20966636492572],[35.975186562197095]],[[41.64142106100577],[23.425005779640603],[34.93357315935363]],[[9.189020474735988],[66.67397076295636],[24.137008762307644]],[[7.790814690472825],[68.52561997591289],[23.683565333614297]],[[21.283492512802972],[50.50892916726206],[28.20757831993496]],[[17.514074020501553],[55.533645561423725],[26.952280418074732]],[[25.824539245991524],[44.44916061449657],[29.726300139511913]],[[48.10113400974044],[14.737570907120864],[37.1612950831387]],[[49.163496961947644],[13.281312350409685],[37.555190687642664]],[[24.337362388417546],[46.38207092531839],[29.28056668626407]],[[37.288974064575804],[29.10408943281103],[33.606936502613166]],[[31.752215642661046],[36.45538575090634],[31.79239860643261]],[[32.77273887484979],[35.027000213913304],[32.2002609112369]],[[26.086987770326104],[43.921362694758756],[29.991649534915137]],[[33.94928411234946],[33.429622265969535],[32.62109362168101]],[[36.298786509441506],[30.285083831197735],[33.416129659360756]],[[37.22128868627135],[29.038279184292737],[33.7404321294359]],[[20.752642412717467],[50.98969324842745],[28.257664338855083]],[[39.32663233401305],[26.222744448090907],[34.45062321789606]],[[55.77746761712613],[4.281681570256522],[39.94085081261735]],[[32.67820371839486],[35.03781791864306],[32.283978362962074]],[[36.12847696585099],[30.433864206168202],[33.437658827980805]],[[37.877115479912476],[28.094187141455635],[34.028697378631904]],[[29.977041632008692],[38.61433895426124],[31.408619413730065]],[[43.16201672077787],[21.007465447730254],[35.83051783149189]],[[31.033315129205995],[37.17380785456073],[31.792877016233273]],[[31.01638586473175],[37.15942245451818],[31.82419168075007]],[[12.296106878054514],[62.10073141734834],[25.603161704597156]],[[42.37515750784064],[21.97903653569134],[35.64580595646803]],[[28.887439859966957],[39.93640822144809],[31.17615191858496]],[[33.44091649212509],[33.840977442053095],[32.718106065821814]],[[43.001661799019516],[21.08452845740853],[35.913809743571946]],[[52.23402498145856],[8.772732258709723],[38.9932427598317]],[[17.226170773705608],[55.44524940181106],[27.328579824483345]],[[27.72464526098888],[41.44690510517287],[30.828449633838268]],[[36.60084270478109],[29.59960228427863],[33.79955501094027]],[[35.0077290998269],[31.71224824397525],[33.28002265619784]],[[55.623316965244605],[4.219447928949081],[40.157235105806315]],[[25.46989114256462],[44.41668694049788],[30.113421916937504]],[[26.325121988774985],[43.267661533831806],[30.407216477393206]],[[32.84012801136827],[34.566734071874784],[32.59313791675693]],[[9.860931398722315],[65.19750762353799],[24.941560977739687]],[[46.8388340668546],[15.86699471393817],[37.294171219207236]],[[49.06092090531827],[12.898640315638518],[38.040438779043214]],[[12.249188040268239],[61.98011653011674],[25.77069542961502]],[[32.273484301512966],[35.27784685658361],[32.44866884190342]],[[36.8563815530357],[29.150507908599693],[33.993110538364604]],[[32.762360952812216],[34.601576814543684],[32.6360622326441]],[[37.02274103760467],[28.90782367836202],[34.069435284033304]],[[22.619996050769057],[48.089165655873245],[29.29083829335769]],[[37.137033384558485],[28.703359081096803],[34.15960753434473]],[[28.83499390599722],[39.70059482563185],[31.464411268370924]],[[36.78537350439512],[29.07117622696192],[34.14345026864296]],[[28.218473992781302],[40.485255558554364],[31.296270448664327]],[[51.83925887012217],[8.977431066633766],[39.183310063244065]],[[48.56334371021936],[13.334692502994248],[38.1019637867864]],[[31.78286657583743],[35.69524853750675],[32.521884886655826]],[[35.199114386334124],[31.101299868001025],[33.69958574566486]],[[55.261776544756145],[4.346325259229681],[40.391898196014175]],[[2.1340127922469914],[75.16094948927645],[22.705037718476557]],[[23.466203530140064],[46.68082705677058],[29.852969413089358]],[[14.061547999466505],[59.21037769101367],[26.728074309519833]],[[53.342259255679515],[6.822926000186554],[39.834814744133936]],[[6.174920576094688],[69.7026654481821],[24.122413975723198]],[[30.863062378365886],[36.779843169134516],[32.3570944524996]],[[39.32765898642144],[25.489746279107422],[35.18259473447114]],[[44.47166084322301],[18.603466572829376],[36.92487258394762]],[[44.56449491081051],[18.452894658743],[36.9826104304465]],[[31.0159329596721],[36.51056034777332],[32.47350669255458]],[[17.595528885422397],[54.384688102046354],[28.019783012531253]],[[29.91788100119554],[37.93299853054759],[32.14912046825686]],[[29.04288109142946],[39.07059423003077],[31.886524678539757]],[[31.46669943088035],[35.83703484296552],[32.69626572615411]],[[29.519118631829528],[38.37780494558956],[32.103076422580905]],[[33.80161004134065],[32.667746942552505],[33.530643016106836]],[[47.552932116492414],[14.325185718717579],[38.12188216479001]],[[26.962777657468102],[41.7653152261441],[31.271907116387798]],[[53.27535428193724],[6.644879196076777],[40.07976652198598]],[[52.68045871620481],[7.432880031023265],[39.88666125277193]],[[36.609173778477036],[28.860648240835463],[34.53017798068749]],[[15.310163832647369],[57.252540238963235],[27.43729592838939]],[[56.014008910193894],[2.973702836428588],[41.01228825337753]],[[35.03381666196148],[30.945118517615995],[34.021064820422524]],[[39.662546074902416],[24.768118756112187],[35.56933516898542]],[[49.34667158530968],[11.836852777069513],[38.816475637620805]],[[53.173310982033954],[6.731947512649748],[40.09474150531631]],[[37.75990301047444],[27.278922657082493],[34.961174332443065]],[[44.972680769510326],[17.65047780505384],[37.37684142543583]],[[38.50662119878224],[26.266547854146893],[35.22683094707087]],[[37.902394361706115],[27.07077409124972],[35.02683154704417]],[[33.06303349431574],[33.50353055477221],[33.43343595091204]],[[34.35569127774512],[31.778917002520686],[33.865391719734184]],[[24.799503492048196],[44.519999226910834],[30.680497281040985]],[[6.981203675168081],[68.27568261620725],[24.74311370862469]],[[23.580068145399423],[46.121664856895514],[30.29826699770506]],[[49.76951963310214],[11.189306318489596],[39.04117404840826]],[[23.937110268940597],[45.62858344586126],[30.434306285198147]],[[23.535363358219268],[46.16276772622872],[30.301868915552006]],[[53.92332438855823],[5.544130903094892],[40.53254470834689]],[[24.429839266061453],[44.86828399412322],[30.701876739815333]],[[33.03997639336716],[33.352602069224574],[33.60742153740827]],[[33.28456478172427],[32.98629563685372],[33.72913958142201]],[[15.959408953540757],[56.076941901113784],[27.963649145345453]],[[36.413225495681154],[28.788429730134514],[34.79834477418433]],[[25.570187317436748],[43.23014516535025],[31.199667517213005]],[[27.89369789241861],[40.11847164212464],[31.98783046545674]],[[44.187188651963766],[18.319568617537463],[37.493242730498785]],[[28.66567124043104],[39.002167792793074],[32.33216096677589]],[[31.65345183675525],[34.9920250056145],[33.35452315763026]],[[48.24585781333025],[12.86800843424976],[38.88613375242]],[[42.9990690957267],[19.847076564530532],[37.153854339742765]],[[27.380864391873228],[40.66271211411514],[31.956423494011656]],[[52.806965685697236],[6.740563752061717],[40.45247056224105]],[[36.32965094218512],[28.67589849700632],[34.99445056080857]],[[33.95830687314305],[31.83411205743602],[34.20758106942093]],[[8.722636573029195],[65.46087226074147],[25.816491166229326]],[[40.992917099899834],[22.430918775159054],[36.5761641249411]],[[42.61195168489372],[20.272118766051257],[37.115929549055025]],[[45.83009695676383],[15.968555496898531],[38.20134754633763]],[[34.74445726948526],[30.743903361276686],[34.511639369238054]],[[47.29202425595314],[13.99063091524105],[38.717344828805814]],[[12.552924794179493],[60.30939404513368],[27.13768116068683]],[[52.12763372359852],[7.51020043404044],[40.362165842361044]],[[27.75601028797155],[40.00560986193516],[32.23837985009329]],[[30.697142574653043],[36.07936949957833],[33.22348792576862]],[[35.83124014912254],[29.208718571002013],[34.96004127987543]],[[29.12794137329509],[38.13338756222179],[32.738671064483114]],[[19.776854588955256],[50.5967139322072],[29.62643147883754]],[[39.03132606841791],[24.921172045872755],[36.04750188570934]],[[55.128941398239284],[3.4394555536760385],[41.43160304808467]],[[38.78522004203225],[25.223019287660076],[35.99176067030768]],[[37.34865210814202],[27.133733867365883],[35.5176140244921]],[[27.424804307079203],[40.328159811232375],[32.24703588168841]],[[40.06276043465214],[23.47137430122472],[36.46586526412314]],[[44.759699233242685],[17.202392710548477],[38.03790805620883]],[[56.075529262745974],[2.0954098270251946],[41.82906091022884]],[[35.254745049729834],[29.835513348590364],[34.90974160167979]],[[50.63238675528403],[9.306577137218113],[40.06103610749785]],[[28.648992638888842],[38.60340329705568],[32.74760406405549]],[[39.43423863112632],[24.209672164939775],[36.356089203933905]],[[0.28865195773405283],[76.38904797184613],[23.322300070419825]],[[32.24037027011285],[33.77340746179288],[33.98622226809428]],[[5.487663649084944],[69.43680075000312],[25.075535600911948]],[[27.506542138092684],[40.068673505382],[32.42478435652532]],[[52.566137010178295],[6.63046525723709],[40.80339773258463]],[[38.48861355308281],[25.378209844809906],[36.133176602107284]],[[35.68451283592234],[29.10930865832962],[35.20617850574804]],[[55.42340114591347],[2.7884830197368826],[41.78811583434964]],[[24.25035757958738],[44.32293216951439],[31.426710250898243]],[[22.09861136346671],[47.191007322962044],[30.71038131357125]],[[49.8769297048845],[10.144963417224224],[39.97810687789127]],[[30.465108537930302],[36.02600505576118],[33.50888640630851]],[[33.61996872979],[31.808209216743126],[34.57182205346687]],[[29.538191658105127],[37.23986426958567],[33.2219440723092]],[[38.12273049625122],[25.7335282699595],[36.14374123378928]],[[30.98392317706457],[35.22944166496579],[33.78663515796963]],[[33.96902226990822],[31.237614953037827],[34.79336277705396]],[[20.129025345130003],[49.68990294202753],[30.18107171284246]],[[35.700077178291195],[28.905785068974055],[35.39413775273476]],[[34.296254263721956],[30.772347926443462],[34.931397809834586]],[[32.50910544166138],[33.14051743530778],[34.35037712303084]],[[33.21863828771928],[32.16567827933769],[34.61568343294303]],[[37.14959199926226],[26.89048369117735],[35.95992430956038]],[[40.50954099602421],[22.36774647054406],[37.122712533431724]],[[33.44855615528973],[31.775414634169017],[34.776029210541246]],[[52.71017338606387],[6.0932126037639724],[41.19661401017215]],[[9.976972574286751],[63.049952356001086],[26.973075069712177]],[[33.712133119632476],[31.397225045897976],[34.89064183446955]],[[49.472737759319266],[10.37482879142861],[40.15243344925212]],[[30.050177179329363],[36.264560130681],[33.685262689989635]],[[50.89009026114669],[8.475565760871252],[40.63434397798205]],[[54.70279403011522],[3.387157708592546],[41.91004826129223]],[[17.127871290105585],[53.45218727789505],[29.41994143199937]],[[21.432855391779285],[47.70497337999294],[30.86217122822777]],[[12.326475754708424],[59.84423182024504],[27.829292425046546]],[[32.47928976915024],[32.943383586961325],[34.57732664388843]],[[34.07639027306425],[30.81348249416807],[35.11012723276768]],[[24.68093365774942],[43.321362053669674],[31.99770428858091]],[[22.630803255136282],[46.045195281286325],[31.324001463577396]],[[35.27624612150672],[29.183186905415333],[35.540566973077944]],[[26.411028224538786],[41.000227649689336],[32.588744125771875]],[[7.22488924234304],[66.57280323288704],[26.202307524769925]],[[56.18337794587839],[1.277629656479039],[42.538992397642566]],[[27.9747593176288],[38.81679393557697],[33.208446746794216]],[[32.09180751098984],[33.28414396672136],[34.6240485222888]],[[29.290725567733407],[37.00725024858368],[33.7020241836829]],[[36.00146310753853],[28.048935436113],[35.94960145634847]],[[35.673799707358256],[28.48390051928821],[35.84229977335353]],[[28.990479753618096],[37.39279481962324],[33.61672542675866]],[[52.75943159306527],[5.670683692811016],[41.5698847141237]],[[25.188033852560725],[42.42215701743806],[32.38980913000122]],[[45.256082835185126],[15.654309884059034],[39.08960728075584]],[[42.50889573497215],[19.297281715007454],[38.19382255002039]],[[0.37287113598190363],[75.44682848401946],[24.18030037999862]],[[41.51670432264419],[20.582239435527264],[37.90105624182854]],[[27.373926859943342],[39.43287861025595],[33.193194529800714]],[[42.89837485690755],[18.717854518749157],[38.38377062434329]],[[38.17851771868817],[25.002034331105005],[36.81944795020682]],[[21.945777195325554],[46.64160127921138],[31.412621525463063]],[[17.929194023633393],[51.96475940019233],[30.106046576174283]],[[27.024922929602273],[39.82831369288483],[33.14676337751288]],[[45.22706069637323],[15.549758041170103],[39.22318126245668]],[[35.57578566809601],[28.403876169875698],[36.02033816202829]],[[13.738479463629934],[57.50369038308655],[28.75783015328352]],[[32.990707754585465],[31.79344990391665],[35.2158423414979]],[[34.770788171664805],[29.416747144274968],[35.81246468406023]],[[45.508615580659566],[15.088914571537245],[39.40246984780318]],[[50.38507771268305],[8.579122531446538],[41.0357997558704]],[[34.96014505318435],[29.143471691830147],[35.89638325498552]],[[44.098829114380905],[16.945702976996373],[38.95546790862273]],[[40.652706985867944],[21.529818268276834],[37.817474745855215]],[[30.46236451454321],[35.10383230391296],[34.43380318154383]],[[21.71419926836241],[46.74120477012219],[31.54459596151542]],[[31.477234858622932],[33.716250953112244],[34.80651418826481]],[[20.718608809757676],[48.054161015783194],[31.22723017445913]],[[27.844763869280865],[38.55078376866052],[33.6044523620586]],[[26.565774987267293],[40.22096119524486],[33.21326381748784]],[[48.42150556266157],[11.074268199864486],[40.504226237473944]],[[3.4630764812986525],[71.01336155556398],[25.523561963137382]],[[30.195072067883334],[35.35775794211755],[34.44716998999912]],[[28.557898440352723],[37.463036929890706],[33.979064629756564]],[[50.501925056668085],[8.193520132154054],[41.30455481117786]],[[42.61262291941692],[18.71235394691606],[38.675023133667025]],[[42.41351264569169],[18.94670683105127],[38.63978052325703]],[[37.12217799305482],[25.955695071395784],[36.9221269355494]],[[42.789110050343794],[18.335823533876916],[38.875066415779294]],[[22.01845760329822],[46.023798388821795],[31.957744007879985]],[[17.653281201538285],[51.817160332254474],[30.529558466207245]],[[42.45641775057011],[18.732690676265822],[38.81089157316406]],[[48.55670022442455],[10.557835097352804],[40.88546467822265]],[[52.09480823336521],[5.810453823918063],[42.09473794271672]],[[1.4117724907929416],[73.3470356385626],[25.241191870644435]],[[28.89319979931405],[36.67955196603441],[34.427248234651536]],[[42.05511457721797],[19.107093485303384],[38.83779193747865]],[[19.916477294351882],[48.623694497449186],[31.459828208198935]],[[8.847050269194428],[63.35730618302877],[27.7956435477768]],[[25.068261864850705],[41.72417207720307],[33.20756605794623]],[[21.736980637121743],[46.150593136963764],[32.11242622591449]],[[24.43490756595244],[42.546180550421035],[33.01891188362653]],[[40.86302822786138],[20.63125583034182],[38.505715941796794]],[[29.241161031725625],[36.10387095278243],[34.65496801549194]],[[4.9963739000312515],[68.41557337309708],[26.58805272687167]],[[31.38899279292895],[33.22496556642548],[35.38604164064557]],[[28.587992152279718],[36.93890503235068],[34.473102815369586]],[[10.365872193597438],[61.18173048621085],[28.452397320191718]],[[0.0],[75.0],[25.0]],[[34.87499034955704],[28.48641208261243],[36.63859756783053]],[[24.96737730178193],[41.695338202974966],[33.33728449524309]],[[43.16416627243033],[17.390946801281476],[39.44488692628819]],[[21.525537027011957],[46.21599399286014],[32.258468980127894]],[[31.928142184478137],[32.342324554057704],[35.729533261464155]],[[52.48747953409526],[4.884496686615293],[42.62802377928945]],[[12.983720306422988],[57.54072601512258],[29.475553678454425]],[[36.752985794538354],[25.842939044464654],[37.404075160996996]],[[28.388987076248494],[36.98179046657922],[34.62922245717229]],[[22.548129323532415],[44.7691465279142],[32.68272414855338]],[[31.365708370698442],[33.00558268954698],[35.62870893975455]],[[29.662469598585268],[35.21806000924463],[35.11947039217011]],[[37.97387311530423],[24.10226786814112],[37.92385901655466]],[[42.35928252939139],[18.229916441508017],[39.410801029100604]],[[32.48088872403291],[31.389244802984756],[36.129866472982336]],[[33.347017205676714],[30.215378191564003],[36.43760460275927]],[[16.713500017720385],[52.36153431445829],[30.924965667821336]],[[43.82986823110153],[16.17858910634793],[39.991542662550536]],[[33.81790734585768],[29.461464183761283],[36.72062847038105]],[[16.269441992253025],[52.84414197342221],[30.88641603432477]],[[29.671431934260674],[34.939480538500405],[35.389087527238914]],[[22.939284432456574],[43.88262120516961],[33.17809436237382]],[[43.30687463823295],[16.710864845555108],[39.98226051621195]],[[25.9347009217099],[39.861832880979804],[34.2034661973103]],[[30.498054070414494],[33.74528986587256],[35.756656063712946]],[[52.777367170092035],[4.033363219263888],[43.189269610644075]],[[40.70241165069098],[20.056977819684395],[39.24061052962462]],[[24.254870575923466],[41.98628380055443],[33.75884562352211]],[[31.572671093966857],[32.16541170126534],[36.261917204767805]],[[32.43564809270219],[31.002662414510123],[36.56168949278768]],[[32.42847191818012],[30.95918651747944],[36.61234156434043]],[[19.008845306724854],[48.842917108447054],[32.148237584828095]],[[24.771629523782167],[41.14909855290456],[34.07927192331327]],[[47.105105000484414],[11.363537979716783],[41.531357019798804]],[[0.7484349739839519],[73.16025321283139],[26.091311813184664]],[[25.992732766769794],[39.50083419456524],[34.50643303866496]],[[12.369147251222007],[57.59687559391232],[30.033977154865667]],[[12.257767612036934],[57.733423250492635],[30.008809137470433]],[[50.61313974863598],[6.582091892275992],[42.80476835908804]],[[36.1989550625532],[25.683089776543866],[38.11795516090293]],[[11.114807004341449],[59.11219782187963],[29.772995173778927]],[[24.42868150599325],[41.29785784250965],[34.27346065149712]],[[31.35520838076013],[32.043484257413496],[36.60130736182637]],[[1.7022353413260058],[71.56602361979783],[26.731741038876145]],[[36.442570777346326],[25.223753447729553],[38.333675774924124]],[[48.964511412877265],[8.494046186093575],[42.541442401029165]],[[12.890071361389996],[56.55918352407217],[30.550745114537843]],[[43.98940705691779],[15.07546173053125],[40.935131212550964]],[[34.87016533876584],[27.233993101979497],[37.89584155925468]],[[28.395129146514254],[35.86253396443881],[35.74233688904692]],[[20.658248346261164],[46.15639428748434],[33.1853573662545]],[[30.28103945123199],[33.273988339717654],[36.44497220905036]],[[43.31125175965156],[15.888799849649402],[40.79994839069903]],[[51.9599194963396],[4.335066847041615],[43.70501365661879]],[[29.315500611228224],[34.51686294043384],[36.16763644833793]],[[44.680908807808905],[13.982684009384977],[41.33640718280612]],[[33.78779503379947],[28.475342045547315],[37.73686292065322]],[[44.801004012011525],[13.783271828448008],[41.41572415954047]],[[46.9507159407364],[10.90232744872679],[42.14695661053682]],[[24.406631178182195],[40.95201723969578],[34.64135158212203]],[[10.231314536795193],[59.84392520485291],[29.924760258351895]],[[39.38173829688058],[20.94385661989232],[39.6744050832271]],[[37.13258353336123],[23.9410988647626],[38.92631760187618]],[[36.51305651719095],[24.766132923266902],[38.72081055954214]],[[41.32458120579475],[18.326028780101662],[40.349390014103584]],[[13.847196106536822],[54.960639316002755],[31.192164577460424]],[[33.620349003054486],[28.588367856504114],[37.7912831404414]],[[29.516735955816713],[34.03222281673995],[36.45104122744332]],[[55.00000000000001],[0.0],[44.99999999999999]],[[28.812350043308644],[34.89527051025949],[36.292379446431866]],[[40.21235264531574],[19.69309007332213],[40.09455728136213]],[[32.734699650160714],[29.66246815525872],[37.602832194580564]],[[51.63432673579149],[4.4590010561446185],[43.90667220806389]],[[31.17517610376167],[31.72879410977042],[37.09602978646791]],[[44.270546488348614],[14.256887978007235],[41.47256553364414]],[[23.250172934554122],[42.268860680387455],[34.48096638505844]],[[24.50661387753804],[40.58998970119667],[34.903396421265306]],[[25.73462373484255],[38.947512984585494],[35.31786328057196]],[[31.26465694109154],[31.563163928274356],[37.172179130634106]],[[15.196602201867588],[52.9864099460074],[31.816987852125024]],[[18.25090579140577],[48.865264455820096],[32.88382975277413]],[[53.85180185394224],[1.3414499600280667],[44.8067481860297]],[[36.46022053607243],[24.51172159703262],[39.028057866894954]],[[35.89504717783269],[25.24929670899297],[38.85565611317434]],[[34.85860102711166],[26.623753540771972],[38.51764543211638]],[[43.84268597035498],[14.642638075025193],[41.514675954619825]],[[32.0288033463691],[30.39191009740075],[37.57928655623015]],[[32.64308336635872],[29.51221675535797],[37.844699878283315]],[[24.148066268103356],[40.82424918122402],[35.02768455067262]],[[45.95433585711516],[11.717738779938637],[42.3279253629462]],[[42.01485263511639],[16.967505703187477],[41.01764166169613]],[[19.04257572552587],[47.5950280731607],[33.36239620131342]],[[41.560036478047664],[17.565397921828723],[40.87456560012362]],[[35.71450716241683],[25.356207436988576],[38.92928540059458]],[[17.99178135697558],[48.949357043784175],[33.058861599240245]],[[30.501990210110492],[32.26526872958168],[37.23274106030783]],[[46.45491182130891],[10.958309177228038],[42.58677900146306]],[[6.712058166873371],[63.94413814424341],[29.34380368888322]],[[47.53672132355084],[9.477106720895039],[42.98617195555412]],[[24.956251100679854],[39.56673744015814],[35.47701145916201]],[[25.63394571339816],[38.65944534260639],[35.70660894399546]],[[44.89037568463026],[12.963275514707842],[42.14634880066189]],[[31.071630758750207],[31.344550925818425],[37.583818315431365]],[[32.381881692092215],[29.59653151434134],[38.021586793566456]],[[11.582025872060838],[57.32246556411381],[31.09550856382534]],[[44.79640612943256],[13.027867593209166],[42.175726277358265]],[[12.060823666126758],[56.673931185191016],[31.26524514868223]],[[10.280539371258355],[58.989842921330435],[30.72961770741121]],[[37.39007105198231],[22.778587773251573],[39.83134117476613]],[[44.47181642226861],[13.32695978655478],[42.20122379117661]],[[28.42872909529495],[34.70389042689213],[36.867380477812915]],[[28.3833907897902],[34.76274962171744],[36.85385958849237]],[[19.830751553407055],[46.13670671449114],[34.0325417321018]],[[28.601477084978043],[34.4119213277154],[36.98660158730657]],[[46.19479847119963],[10.948603069506508],[42.85659845929386]],[[5.88098314903365],[64.66989801871075],[29.449118832255593]],[[13.602039129075797],[54.36004711257038],[32.037913758353824]],[[23.999003797742894],[40.48245101079929],[35.51854519145782]],[[54.15930182431201],[0.2639036405452422],[45.57679453514275]],[[21.61808119118435],[43.62305903961125],[34.758859769204406]],[[47.076478545854776],[9.602734074307461],[43.320787379837746]],[[26.683339729314966],[36.793511068795354],[36.52314920188968]],[[32.45069432295111],[29.08097783325812],[38.46832784379076]],[[40.51760788825373],[18.323142025949906],[41.15925008579635]],[[35.676797519618475],[24.773893823498234],[39.549308656883284]],[[28.582803924572396],[34.21052284383027],[37.206673231597335]],[[11.767462521491998],[56.62610287528352],[31.60643460322447]],[[21.570666112597433],[43.549918597944114],[34.87941528945845]],[[39.4133966658113],[19.701835598334338],[40.884767735854375]],[[37.02132751522675],[22.86424775694747],[40.11442472782577]],[[38.165525756054016],[21.31692857607406],[40.51754566787192]],[[45.42540142291068],[11.569140921204875],[43.005457655884456]],[[27.61752783975876],[35.30422118858605],[37.078250971655194]],[[19.884700538645003],[45.56499382831916],[34.55030563303583]],[[48.6332447931621],[7.227531823954796],[44.13922338288312]],[[8.098951869812625],[61.254568717787365],[30.646479412400023]],[[37.78265176221271],[21.647311937850375],[40.57003629993692]],[[18.78272449626589],[46.97898839134411],[34.23828711238998]],[[46.657675925766554],[9.802539510772036],[43.53978456346142]],[[31.417162719757503],[30.104398518154785],[38.4784387620877]],[[28.467561457810532],[34.03595977559811],[37.49647876659136]],[[45.24029708326329],[11.665440900235277],[43.09426201650144]],[[27.421605381849375],[35.40122415675623],[37.1771704613944]],[[38.272837829689585],[20.92168479429028],[40.80547737602013]],[[17.56382295542778],[48.51604320706584],[33.920133837506384]],[[31.81760544092928],[29.492430678421606],[38.689963880649096]],[[31.534979173225125],[29.868284621258944],[38.59673620551593]],[[16.703461508452673],[49.63641993584684],[33.66011855570049]],[[23.237650669370204],[40.89938105581406],[35.862968274815735]],[[40.84183433892469],[17.398767018813615],[41.759398642261694]],[[6.7202621953571535],[62.87577433796309],[30.403963466679766]],[[29.67107441195993],[32.26843000398913],[38.06049558405094]],[[39.19411270378405],[19.55945023250123],[41.246437063714716]],[[18.876938303066584],[46.63095258726482],[34.49210910966859]],[[48.154985967250155],[7.591302754212148],[44.25371127853769]],[[23.79259541410362],[40.041689884588585],[36.165714701307785]],[[28.74163925761733],[33.42055908519583],[37.837801657186844]],[[46.02970274241163],[10.357838971630203],[43.612458285958176]],[[20.594956679725936],[44.26506384101474],[35.139979479259324]],[[32.51616544008476],[28.36377449026281],[39.12006006965243]],[[14.039437217640199],[52.99892674610667],[32.961636036253154]],[[21.78984438712145],[42.66398378466658],[35.54617182821197]],[[44.14190407296298],[12.843941651329374],[43.01415427570765]],[[46.04335187942868],[10.302989799481903],[43.65365832108941]],[[45.804402058968705],[10.61810039283522],[43.57749754819608]],[[29.58200463374494],[32.233720099791476],[38.18427526646358]],[[32.021657615373925],[28.979988065304774],[38.9983543193213]],[[29.81404850283767],[31.893282863342858],[38.292668633819474]],[[28.111885261678882],[34.15602195523652],[37.732092783084596]],[[5.065271656697192],[64.87000294558102],[30.06472539772179]],[[23.002172874663895],[40.94980019961641],[36.04802692571968]],[[12.104021221060913],[55.46867672769067],[32.42730205124842]],[[50.2641271568521],[4.585654634833756],[45.15021820831414]],[[49.21823771124586],[5.9762789244941095],[44.805483364260034]],[[26.08444325100025],[36.80746246710258],[37.108094281897166]],[[52.793206128268096],[1.1950841413971793],[46.01170973033472]],[[26.781294031285434],[35.876776633576064],[37.3419293351385]],[[15.455786284882977],[50.95898201587797],[33.58523169923906]],[[29.13941471733519],[32.68436215536368],[38.176223127301135]],[[37.439454703875676],[21.59591281085215],[40.964632485272176]],[[27.33905637216461],[35.02040094982266],[37.640542678012736]],[[14.704148611891505],[51.86664662241564],[33.42920476569285]],[[18.05303411953963],[47.401235150550534],[34.54573072990985]],[[46.699437470694626],[9.201904321681528],[44.098658207623856]],[[3.630993300659259],[66.62005816053399],[29.748948538806747]],[[43.67103777183356],[13.213673557371807],[43.115288670794634]],[[27.097178989902872],[35.2968632917154],[37.605957718381724]],[[38.174379834968825],[20.51487477246138],[41.3107453925698]],[[35.63141027415483],[23.901149912145105],[40.467439813700075]],[[7.303393354163851],[61.66766249730558],[31.028944148530574]],[[36.42117467703522],[22.825122517293124],[40.75370280567165]],[[41.007607997131004],[16.709022224173406],[42.28336977869559]],[[36.92730669016239],[22.146407961449732],[40.92628534838788]],[[10.715462361966676],[57.08426860086377],[32.20026903716954]],[[13.35176369182982],[53.5691718237247],[33.07906448444549]],[[34.91462994413777],[24.816391645920937],[40.26897840994128]],[[23.388800975054927],[40.17718407478351],[36.43401495016156]],[[27.15196029660406],[35.130109399963786],[37.717930303432155]],[[16.62844539832174],[49.14554702824768],[34.22600757343058]],[[40.225536183478575],[17.648774344118674],[42.12568947240275]],[[15.184822586132086],[51.03297686670886],[33.78220054715905]],[[38.7668870433637],[19.58865769532698],[41.64445526130933]],[[24.689919542099187],[38.34939673166298],[36.96068372623784]],[[34.025936636404936],[25.8954061778032],[40.07865718579187]],[[26.02467878680969],[36.56173436149529],[37.413586851695015]],[[52.17883224705269],[1.6170785729723296],[46.20408917997499]],[[40.83276191441482],[16.744166308630795],[42.42307177695439]],[[30.835627303029057],[30.0434877220986],[39.12088497487235]],[[6.3549470357962115],[62.64326344080603],[31.001789523397765]],[[22.184583205084316],[41.528019376076706],[36.28739741883897]],[[22.114233115056393],[41.59433717768385],[36.29142970725977]],[[46.39828853218838],[9.205636173215227],[44.39607529459638]],[[13.286806300531515],[53.30726019904011],[33.40593350042838]],[[22.623845553442344],[40.84037259575027],[36.53578185080739]],[[39.377236742853086],[18.49996629400429],[42.12279696314262]],[[29.062906381439056],[32.2065911041542],[38.73050251440674]],[[40.925603683004944],[16.38161619005786],[42.69278012693721]],[[28.998014244304294],[32.24487733685646],[38.75710841883925]],[[8.29035751749349],[59.83889752675464],[31.870744955751874]],[[40.88604551744554],[16.361655691401925],[42.75229879115254]],[[31.66821491043621],[28.648101022608724],[39.683684066955074]],[[45.57376800879615],[10.08739994275597],[44.338832048447884]],[[36.663977809739265],[21.963954565006254],[41.372067625254466]],[[35.117156091017186],[24.020923328174508],[40.8619205808083]],[[31.190454918846157],[29.234616595183038],[39.574928485970815]],[[21.721731913301042],[41.853794050050766],[36.424474036648185]],[[17.87829424757629],[46.96051177549701],[35.16119397692669]],[[32.11260964756433],[27.93061618763909],[39.95677416479657]],[[23.74338455856726],[39.07292906269312],[37.18368637873963]],[[40.6505089431009],[16.507181759908683],[42.84230929699041]],[[25.111527590591898],[37.218120894862814],[37.670351514545295]],[[24.2930473486205],[38.251592571266904],[37.45536008011259]],[[33.016360380819535],[26.592716142634053],[40.39092347654641]],[[29.033785356211204],[31.882525600893384],[39.0836890428954]],[[42.873587396540586],[13.428125198087356],[43.698287405372064]],[[33.81164586587514],[25.49282879259469],[40.695525341530164]],[[28.6957557790181],[32.27329716357698],[39.030947057404916]],[[12.527261469847387],[53.828342142846644],[33.644396387305974]],[[38.35774263559875],[19.377246582709727],[42.26501078169153]],[[3.505651809032136],[65.83205165324358],[30.662296537724277]],[[24.428486982872194],[37.917987946205756],[37.65352507092206]],[[42.80655413176633],[13.406019501214942],[43.78742636701873]],[[22.29288655685439],[40.74631336938276],[36.96080007376283]],[[21.58119880848322],[41.688679838026204],[36.730121353490574]],[[16.72105795132917],[48.14112731223034],[35.13781473644049]],[[23.28113310596104],[39.39279821287931],[37.32606868115964]],[[8.619727638255778],[58.932252857102995],[32.44801950464122]],[[34.390695078317194],[24.54971909780846],[41.05958582387435]],[[35.17919190275372],[23.477507329238332],[41.34330076800794]],[[26.983726449456256],[34.37352098073753],[38.64275256980621]],[[22.80693470609327],[39.92251813153856],[37.27054716236818]],[[16.2217017422387],[48.69010742764556],[35.088190830115735]],[[27.960957277143322],[33.03652053347288],[39.0025221893838]],[[24.059588232170174],[38.206639873997965],[37.733771893831864]],[[16.199986389287517],[48.65484949294538],[35.1451641177671]],[[28.511069496298656],[32.23574190030124],[39.25318860340009]],[[17.402861491192926],[46.98155094604953],[35.61558756275755]],[[49.87041914024501],[3.68240815761732],[46.44717270213767]],[[21.434970384188393],[41.59612258960042],[36.968907026211184]],[[47.94191318100969],[6.222149288585383],[45.835937530404934]],[[23.548616300462204],[38.74631723300578],[37.705066466532]],[[37.80232553951912],[19.72032159587935],[42.477352864601556]],[[33.486430588679696],[25.458687881423998],[41.05488152989632]],[[18.586829357062005],[45.320861262809345],[36.09230938012864]],[[50.6871298755366],[2.498240218551068],[46.814629905912334]],[[35.215899519058276],[23.11353581782639],[41.670564663115336]],[[2.359294026751983],[66.92127081734982],[30.7194351558982]],[[28.96184125318809],[31.44941410904274],[39.588744637769175]],[[10.182377856955542],[56.484650503329306],[33.33297163971515]],[[31.117858548226778],[28.547539643281645],[40.33460180849157]],[[23.29597989107299],[38.93877670354171],[37.7652434053853]],[[0.0],[70.0],[29.999999999999993]],[[28.21415090847619],[32.340987428005924],[39.444861663517884]],[[46.301861460159316],[8.220749471461925],[45.47738906837874]],[[44.40977447854475],[10.709777129632107],[44.880448391823144]],[[39.26643540701475],[17.558342418848543],[43.17522217413672]],[[49.86581456969096],[3.4034170185393626],[46.730768411769674]],[[28.314869331858173],[32.132532887350344],[39.55259778079148]],[[20.98817815024557],[41.88382224505284],[37.127999604701586]],[[34.22995434783774],[24.207087988339218],[41.562957663823056]],[[7.492735390707258],[59.85582335991973],[32.651441249373]],[[36.794026667888716],[20.781530914531345],[42.42444241757995]],[[20.484856095368865],[42.515989203890996],[36.999154700740135]],[[36.681117937688995],[20.903359496825257],[42.41552256548575]],[[24.045520207319804],[37.718558250188835],[38.23592154249136]],[[19.48426587524611],[43.765084266072996],[36.75064985868089]],[[30.747698339054185],[28.696932320721736],[40.555369340224075]],[[18.971399465505716],[44.38521464814556],[36.64338588634873]],[[32.711910082407364],[26.061355748334634],[41.22673416925801]],[[36.01305093291623],[21.632662384957555],[42.354286682126215]],[[9.454499784639241],[57.04373069297942],[33.50176952238133]],[[29.759609277612615],[29.962297300654477],[40.27809342173291]],[[46.25483114909773],[7.949234363592771],[45.795934487309495]],[[30.27636577022251],[29.24493072867555],[40.47870350110193]],[[30.082327545159952],[29.488875479778137],[40.42879697506191]],[[41.62250811750934],[14.065915590126785],[44.311576292363874]],[[23.423682945456783],[38.32409615904812],[38.2522208954951]],[[30.879875637817257],[28.36306804802369],[40.75705631415906]],[[19.65485902280278],[43.32836626006214],[37.01677471713508]],[[21.59244139644983],[40.73555385335188],[37.67200475019828]],[[46.501395876336254],[7.50852110164997],[45.99008302201376]],[[43.86350340059613],[11.024305974431835],[45.11219062497203]],[[43.33579914506033],[11.709084252039489],[44.95511660290019]],[[15.939517920397087],[48.23167170607851],[35.828810373524405]],[[22.514157596047113],[39.46332957182074],[38.022512832132136]],[[18.575467589779844],[44.71432020961018],[36.71021220060997]],[[37.43428616630143],[19.56024136411547],[43.0054724695831]],[[22.0212299177427],[40.11062850364647],[37.86814157861083]],[[41.009981669661165],[14.789292466745724],[44.20072586359311]],[[13.172252671449183],[51.88194637750697],[34.94580095104386]],[[35.660367153024566],[21.870328663974288],[42.46930418300116]],[[27.621213227008955],[32.560196644161785],[39.81859012882925]],[[15.423311489095227],[48.81701710142956],[35.75967140947521]],[[38.448226038339975],[18.102574790778487],[43.44919917088154]],[[44.29329095271475],[10.299800107579788],[45.40690893970547]],[[43.716107032143285],[11.066279707455339],[45.21761326040137]],[[33.860389438906054],[24.192409089223865],[41.947201471870066]],[[40.13423208319635],[15.805924263188183],[44.05984365361546]],[[34.43680155969238],[23.383730474681705],[42.179467965625925]],[[49.09662389256788],[3.8345086846138883],[47.068867422818236]],[[45.42690966528035],[8.72720869236018],[45.845881642359466]],[[21.488068330511656],[40.64007864597169],[37.87185302351665]],[[38.035662099518184],[18.545640320762082],[43.418697579719726]],[[35.291129120007284],[22.203970766578394],[42.50490011341433]],[[33.11758873998793],[25.10017624273849],[41.782235017273585]],[[43.43006979826436],[11.349374930253873],[45.22055527148177]],[[17.94927741077813],[45.31191672131875],[36.73880586790311]],[[21.064203082538153],[41.146076567537],[37.789720349924856]],[[18.3743192808191],[44.720241675868934],[36.905439043311965]],[[44.66127715115496],[9.604482065982028],[45.734240782863004]],[[22.123038248450868],[39.641643259118865],[38.235318492430274]],[[19.75591382152671],[42.77382191694229],[37.470264261531]],[[19.2375669292001],[43.45260217376813],[37.30983089703176]],[[43.28187111700311],[11.374877265764923],[45.343251617231964]],[[24.828463087332768],[35.97886206139982],[39.192674851267405]],[[40.81641101936956],[14.656214642257789],[44.52737433837265]],[[42.21779038041387],[12.76095732758602],[45.02125229200011]],[[0.25196952841100106],[68.67166764645891],[31.07636282513009]],[[37.77843123679823],[18.6066537134002],[43.614915049801574]],[[37.63983194095018],[18.732195262344952],[43.627972796704874]],[[44.52410760214474],[9.45421714443418],[46.02167525342108]],[[43.1685864658214],[11.231241593162077],[45.600171941016534]],[[43.918395305664376],[10.229315042531887],[45.85228965180374]],[[47.25467318708449],[5.769148172873315],[46.976178640042185]],[[31.210475023617533],[27.14043409224952],[41.64909088413295]],[[45.68156176373603],[7.8455813844037685],[46.4728568518602]],[[42.582539622982665],[11.974185298339362],[45.44327507867797]],[[3.1542958288198633],[64.53341542676682],[32.312288744413316]],[[14.161372961716664],[49.8079668827667],[36.03066015551663]],[[48.6342321645558],[3.826582839989779],[47.539184995454434]],[[17.735135810782758],[45.00766930137509],[37.25719488784216]],[[18.47120856072425],[43.94964411359434],[37.57914732568141]],[[19.741977594341037],[42.2401707227007],[38.01785168295827]],[[40.92175852483554],[13.995492717978369],[45.082748757186096]],[[16.50877964338197],[46.50953136027853],[36.98168899633949]],[[49.29742810387302],[2.7874356833356835],[47.915136212791296]],[[23.72307519148044],[36.85557215701798],[39.42135265150159]],[[37.11231645436581],[18.959914550123322],[43.92776899551087]],[[41.22972835307222],[13.416820781229385],[45.353450865698406]],[[41.25069030339393],[13.387861091498227],[45.36144860510784]],[[48.52989941619052],[3.6745199129859665],[47.795580670823526]],[[24.005562701200216],[36.36044467509538],[39.6339926237044]],[[28.485378336635815],[30.384115900942838],[41.13050576242136]],[[25.025181053650776],[34.94156495972989],[40.033253986619336]],[[49.37041467897302],[2.446547049772671],[48.18303827125431]],[[49.009940367989415],[2.9186125335420816],[48.071447098468504]],[[36.291178857893115],[19.856279757349874],[43.85254138475702]],[[4.927652216576335],[61.670572990399194],[33.40177479302447]],[[35.64800699076095],[20.700925169807334],[43.651067839431725]],[[43.35307486317004],[10.404859896948416],[46.24206523988155]],[[20.08100675402627],[41.432759373148706],[38.48623387282502]],[[33.06968938772807],[24.089118195626657],[42.84119241664528]],[[13.70017973560528],[49.91104110150887],[36.38877916288585]],[[30.034018582316076],[28.122908931731814],[41.843072485952106]],[[31.680273420113775],[25.91462512147789],[42.40510145840833]],[[48.19253254970005],[3.8252016256871406],[47.98226582461282]],[[37.33865293162306],[18.268527853704597],[44.39281921467234]],[[15.871502047248697],[46.88266653435011],[37.24583141840119]],[[44.2593478976649],[9.02164111609807],[46.719010986237016]],[[43.6388910065596],[9.8137298560629],[46.54737913737749]],[[49.23977995146187],[2.32384593347305],[48.43637411506508]],[[38.94252118601817],[16.00931619827378],[45.04816261570805]],[[3.1754037619974973],[63.690488699641904],[33.13410753836061]],[[43.20147062190069],[10.311793008148594],[46.48673636995072]],[[22.222554496661317],[38.28177452195725],[39.49567098138144]],[[17.051085360000247],[45.1668709236757],[37.78204371632404]],[[6.364334267262612],[59.33562964422735],[34.30003608851004]],[[29.17573312558667],[28.910424020354974],[41.913842854058345]],[[47.48018321094157],[4.477848246953883],[48.04196854210455]],[[22.455662873170105],[37.84355621298143],[39.70078091384847]],[[29.700638486328078],[28.157907186401776],[42.14145432727015]],[[25.36304704674533],[33.86987370057917],[40.7670792526755]],[[40.99525773796077],[13.015044939943415],[45.989697322095815]],[[21.396781720074106],[39.14605441677105],[39.45716386315485]],[[10.214096981667204],[54.036282911911805],[35.749620106420984]],[[1.5844902860850898],[65.48033735801295],[32.93517235590197]],[[1.2299095573130987],[65.9390417675203],[32.831048675166606]],[[24.743201920623328],[34.561736720781255],[40.69506135859543]],[[24.009608922672403],[35.49235609776427],[40.49803497956332]],[[13.749224413283331],[49.17161662724156],[37.07915895947511]],[[22.63571611881546],[37.29286978489212],[40.07141409629242]],[[32.89595246204368],[23.59643104095551],[43.507616497000804]],[[17.497650935597743],[44.00881283864415],[38.49353622575811]],[[10.04580325577241],[53.91853853007756],[36.03565821415003]],[[42.14871467807787],[11.10144937569322],[46.74983594622891]],[[12.134791420833448],[51.10247290459584],[36.76273567457072]],[[23.296025242221635],[36.175657701625816],[40.52831705615255]],[[14.574200497271494],[47.79716791813116],[37.62863158459735]],[[15.096382173521791],[47.099348500058966],[37.804269326419245]],[[37.965690251489825],[16.56604956119763],[45.46826018731254]],[[46.50095287693733],[5.175189173507504],[48.323857949555155]],[[26.054690480052756],[32.4249798093772],[41.52032971057004]],[[11.83150091402372],[51.372454749150606],[36.79604433682567]],[[49.186049865510746],[1.5657954173164952],[49.24815471717276]],[[23.83574096525363],[35.30880967669432],[40.85544935805206]],[[19.375340484460605],[41.24467476409782],[39.379984751441576]],[[41.345557713332454],[11.91914951942329],[46.73529276724426]],[[9.074054407920338],[54.942860284732035],[35.983085307347636]],[[21.26650539693481],[38.68613636145382],[40.04735824161136]],[[37.953373010329514],[16.399844212188206],[45.64678277748229]],[[7.48610493624909],[57.012089343865426],[35.501805719885475]],[[8.818693413053325],[55.2133351875146],[35.96797139943206]],[[23.28475366313142],[35.90390217163813],[40.81134416523045]],[[29.552668687442125],[27.473614845200917],[42.97371646735695]],[[6.880243093347523],[57.68909520847516],[35.43066169817732]],[[21.198417589857637],[38.58497621205122],[40.21660619809113]],[[6.376342410957707],[58.317856202333004],[35.30580138670929]],[[45.818655095586],[5.719599856977118],[48.461745047436885]],[[49.5886867232971],[0.6824104998347706],[49.728902776868125]],[[29.753457007517664],[27.109861933525494],[43.136681058956846]],[[33.08460760074592],[22.64768959297221],[44.26770280628186]],[[15.591409342115501],[45.949562901660215],[38.45902775622427]],[[29.357067211152994],[27.552557388870813],[43.090375399976196]],[[9.063302830191883],[54.58480798056791],[36.351889189240204]],[[24.919882076940887],[33.442010666497566],[41.63810725656153]],[[50.0],[0.0],[50.0]],[[20.21823493577517],[39.70466161450672],[40.07710344971812]],[[22.47373000784725],[36.681966309220236],[40.84430368293251]],[[22.797653100297033],[36.24719617000474],[40.95515072969823]],[[28.232896827197678],[28.991416337672682],[42.77568683512964]],[[7.536125280546142],[56.57851748961098],[35.88535722984288]],[[47.878110468890924],[2.718185871860362],[49.40370365924872]],[[36.55698235381742],[17.81139103614234],[45.631626610040236]],[[42.65902915820845],[9.675006614969485],[47.66596422682207]],[[40.318622868039995],[12.788508562786879],[46.89286856917313]],[[35.73538061510311],[18.899495466740408],[45.365123918156485]],[[28.150290670947037],[28.946448283040887],[42.903261046012084]],[[25.55016058923192],[32.390150372869854],[42.05968903789823]],[[20.327141717136772],[39.34848557155246],[40.324372711310765]],[[47.86282905365836],[2.6174887686548733],[49.51968217768677]],[[13.011417776559],[49.058501459979894],[37.9300807634611]],[[4.433104399386475],[60.46414637299278],[35.10274922762075]],[[6.537166124126652],[57.656426002127304],[35.80640787374606]],[[33.541485682216795],[21.642055729341],[44.816458588442195]],[[29.289731965330162],[27.286137741455608],[43.424130293214226]],[[38.954053067389474],[14.385674584033776],[46.66027234857676]],[[7.082343498411617],[56.86617998712599],[36.05147651446241]],[[29.725167012058673],[26.654575281298605],[43.62025770664271]],[[18.93686629657229],[41.03324165347327],[40.029892049954434]],[[21.209232876953905],[37.97390072891117],[40.81686639413491]],[[48.375332056186394],[1.6949049793611264],[49.929762964452486]],[[29.04578420584484],[27.428336399587316],[43.525879394567845]],[[34.312794845814814],[20.358490378813524],[45.32871477537166]],[[19.790059909802252],[39.71170932263664],[40.4982307675611]],[[23.132264666672082],[35.2312775913322],[41.636457741995706]],[[38.77115957556893],[14.372748033850746],[46.85609239058032]],[[20.984724292511217],[38.05957353004872],[40.95570217744006]],[[31.722918047325845],[23.730083332141913],[44.54699862053224]],[[11.754482814439832],[50.34633977370687],[37.89917741185328]],[[35.04599073519099],[19.284331161588895],[45.66967810322012]],[[19.563763033469673],[39.91815430033678],[40.51808266619356]],[[16.743734658135836],[43.665996706189794],[39.59026863567436]],[[19.03834509835511],[40.585266903509854],[40.37638799813504]],[[10.789801463163498],[51.53467148174641],[37.675527055090086]],[[25.69033571622819],[31.656771111234683],[42.65289317253713]],[[20.760323867101413],[38.2078219411713],[41.031854191727305]],[[37.51871569538414],[15.858629579325278],[46.62265472529059]],[[28.17384514238222],[28.310695775223316],[43.51545908239446]],[[22.250980340984487],[36.16423397507179],[41.58478568394373]],[[28.28012520575305],[28.121929057947607],[43.59794573629934]],[[35.981162018788574],[17.847135892368247],[46.17170208884318]],[[19.703201593126575],[39.52259805222414],[40.77420035464929]],[[35.038013418010465],[19.051651896813],[45.91033468517653]],[[21.592481688464424],[36.97261076316562],[41.434907548369964]],[[38.18695297813679],[14.845288241664756],[46.96775878019846]],[[46.76170767784535],[3.410399290565966],[49.82789303158869]],[[42.998223114687114],[8.417721498684001],[48.58405538662888]],[[43.329377018615425],[7.975635660863564],[48.69498732052103]],[[34.72716782940089],[19.43443651641327],[45.83839565418584]],[[5.166985669534875],[58.84109924205556],[35.99191508840956]],[[13.696206257234463],[47.424021481840825],[38.87977226092471]],[[14.83269842723402],[45.882343258068744],[39.284958314697235]],[[4.361830067002422],[59.807527565168805],[35.83064236782878]],[[23.81344250849835],[33.86396507696847],[42.322592414533176]],[[16.850143493619083],[43.14688341500103],[40.00297309137989]],[[21.70324701606572],[36.67581101037216],[41.620941973562125]],[[25.496964013793878],[31.549526616889533],[42.95350936931658]],[[38.98410978883244],[13.544354939030226],[47.47153527213733]],[[22.0409496083628],[36.11772705200857],[41.84132333962864]],[[48.10836315987051],[1.287663422385894],[50.603973417743596]],[[41.706920834715646],[9.821622642817001],[48.471456522467356]],[[25.561652015743498],[31.335198794888136],[43.103149189368374]],[[25.204474815073652],[31.80883798585826],[42.986687199068086]],[[43.506356218249046],[7.3893957719783225],[49.10424800977263]],[[30.641979653010036],[24.492107320747696],[44.86591302624226]],[[48.03791005544245],[1.2772096020819517],[50.6848803424756]],[[32.89943882975221],[21.45849289622512],[45.64206827402267]],[[42.884736735841365],[8.139014598907261],[48.97624866525137]],[[12.208671678625379],[49.01638841111045],[38.77493991026418]],[[24.20395062732954],[33.01346808830932],[42.78258128436114]],[[17.80020158321612],[41.5297986986931],[40.66999971809079]],[[17.385825968354542],[42.0692167469788],[40.544957284666644]],[[30.969386156673067],[23.883001418172608],[45.14761242515432]],[[30.505487292390278],[24.479568068042553],[45.01494463956717]],[[17.463100149309525],[41.832391906014216],[40.70450794467625]],[[34.98206119498913],[18.41953515850261],[46.59840364650826]],[[37.46607383523426],[15.09995588577955],[47.433970278986195]],[[20.128504972013967],[38.177749925588685],[41.69374510239735]],[[24.84284212109259],[31.879400730437464],[43.27775714846995]],[[0.0],[65.0],[35.0]],[[42.55224070739128],[8.25034356904796],[49.19741572356075]],[[11.27510797063403],[49.939782830257954],[38.785109199108014]],[[23.71411255078408],[33.32423367925974],[42.961653769956186]],[[20.267909036518823],[37.850712787588535],[41.88137817589263]],[[15.114826952921707],[44.71874442720551],[40.166428619872775]],[[4.444383649971411],[58.93096551146086],[36.624650838567725]],[[4.088253359610498],[59.40176037612942],[36.50998626426009]],[[0.7309990855997784],[63.86947286497093],[35.39952804942929]],[[31.082380884233444],[23.387922531285746],[45.5296965844808]],[[43.778204927719884],[6.428246092304415],[49.793548979975704]],[[29.41078476800425],[25.569191124805705],[45.020024107190046]],[[46.79642489533038],[2.3833705932797007],[50.82020451138993]],[[22.89782803827705],[34.22114742443958],[42.88102453728337]],[[22.256615167638845],[35.053394662884315],[42.68999016947683]],[[40.74839223525375],[10.396390415871238],[48.85521734887501]],[[11.725677340688707],[49.06039108773396],[39.21393157157732]],[[46.906661389824414],[2.1361457669289883],[50.9571928432466]],[[29.41882099810968],[25.447291849346428],[45.133887152543885]],[[38.634266061260185],[13.101157696286794],[48.264576242453025]],[[20.514951673999118],[37.20174480576715],[42.28330352023373]],[[32.42951891989433],[21.31058250283207],[46.2598985772736]],[[22.853391405922693],[34.077780050204076],[43.06882854387323]],[[8.118920679340434],[53.675951738826036],[38.20512758183353]],[[35.12921471763968],[17.657831886034877],[47.21295339632545]],[[15.758355783355979],[43.45087347277742],[40.790770743866595]],[[20.863449164057258],[36.61097054393512],[42.52558029200762]],[[8.98477949129371],[52.404198145457656],[38.61102236324862]],[[30.20667260360997],[24.100710147277056],[45.692617249112985]],[[28.70592800709723],[26.094312250485125],[45.19975974241765]],[[36.48683950105275],[15.691079633454502],[47.822080865492744]],[[5.187772171156216],[57.39802680131725],[37.41420102752654]],[[44.19764645883693],[5.383753056386036],[50.41860048477703]],[[34.17753803258433],[18.722979147857107],[47.09948281955856]],[[32.471322253905335],[20.960530912342275],[46.56814683375238]],[[35.37123402505161],[17.08934971338661],[47.539416261561776]],[[30.807976667564425],[23.169270903909172],[46.022752428526395]],[[27.51852724408642],[27.554493807885738],[44.92697894802784]],[[31.298562104314957],[22.471303777020573],[46.23013411866446]],[[34.12845396694513],[18.697641610105904],[47.173904422948965]],[[3.6131529261834925],[59.35260324666034],[37.03424382715616]],[[36.500935941910996],[15.495221097409503],[48.0038429606795]],[[2.31087325343627],[61.08145332739373],[36.607673419170006]],[[46.16598230730631],[2.5776528352302503],[51.256364857463446]],[[11.244099403887908],[49.12224073127904],[39.63365986483304]],[[17.000089048579788],[41.44156369833974],[41.558347253080456]],[[32.9475979313631],[20.165094955434874],[46.88730711320204]],[[31.55746569984899],[22.002807029945266],[46.439727270205736]],[[43.1650276125547],[6.515398638374551],[50.31957374907074]],[[21.57285816447904],[35.267659406222194],[43.15948242929877]],[[8.571725556640574],[52.588438709889],[38.83983573347043]],[[39.530125688003025],[11.288798133997501],[49.18107617799948]],[[23.58556958178503],[32.51233918214614],[43.90209123606883]],[[38.93538308043347],[12.0277556710265],[49.036861248540035]],[[21.78840801388912],[34.870938119661346],[43.34065386644954]],[[9.240755600453559],[51.595540694615075],[39.16370370493138]],[[44.90432912807107],[4.027532183433704],[51.06813868849523]],[[14.287492186763984],[44.845314522257695],[40.867193290978335]],[[16.476571816566217],[41.906725549074366],[41.61670263435942]],[[47.1746302925779],[0.9214149731967207],[51.90395473422539]],[[12.317933733870207],[47.39647614798071],[40.28559011814908]],[[26.589691364414175],[28.360314978197355],[45.04999365738848]],[[27.77205633819572],[26.781699398235233],[45.44624426356905]],[[1.3906001921882576],[61.9350450155124],[36.67435479229933]],[[35.46763425625262],[16.475271049947775],[48.05709469379961]],[[47.388805857608645],[0.5688669390894183],[52.042327203301944]],[[11.846800513953871],[47.88547603192338],[40.267723454122745]],[[29.059614271266888],[24.902565146378937],[46.03782058235418]],[[17.642946832653013],[40.112489416465195],[42.244563750881795]],[[40.462279262706154],[9.613738484671318],[49.92398225262254]],[[31.993873627548346],[20.85577731798017],[47.15034905447148]],[[32.30125764894854],[20.39371652321886],[47.30502582783258]],[[43.77915055061879],[5.0868348534363586],[51.134014595944855]],[[40.809789642309475],[9.043592655548618],[50.14661770214192]],[[29.50501865786842],[24.066329376372465],[46.428651965759116]],[[20.839968680605693],[35.600731852132014],[43.55929946726229]],[[21.399676037836194],[34.83419641831386],[43.76612754384995]],[[23.17767237419539],[32.461893916715894],[44.36043370908872]],[[26.573672548797656],[27.914888398340633],[45.51143905286171]],[[13.718132351300588],[44.99906716516018],[41.28280048353922]],[[4.501326251761335],[57.27277061484808],[38.22590313339059]],[[36.24253946205781],[14.948099160296143],[48.80936137764605]],[[41.52884682472362],[7.881485522286515],[50.58966765298988]],[[7.874173297171791],[52.719355750053666],[39.40647095277454]],[[33.56252348455171],[18.425523329849998],[48.01195318559828]],[[25.21872341613769],[29.53131538292447],[45.24996120093784]],[[37.537558576916894],[13.009586745533056],[49.45285467755004]],[[20.881100208122984],[35.17502407789866],[43.94387571397836]],[[27.062853826047622],[26.82058834665239],[46.11655782729999]],[[36.1848930887094],[14.649449970324538],[49.165656940966066]],[[39.05350122306583],[10.810725278544105],[50.13577349839006]],[[26.206922209172166],[27.93494503587994],[45.858132754947896]],[[28.257040671952204],[25.193124761141927],[46.54983456690587]],[[21.338729955245448],[34.40646255706214],[44.2548074876924]],[[36.56669573813803],[14.0813607205758],[49.351943541286175]],[[31.733640628867672],[20.52048333721601],[47.745876033916325]],[[46.808024195546174],[0.4106008512671804],[52.78137495318664]],[[15.8472668345597],[41.64655947244205],[42.50617369299825]],[[10.977851808184552],[48.12484840782047],[40.89729978399498]],[[32.04909165948655],[19.978563018106573],[47.97234532240687]],[[25.853742263672824],[28.20383408443919],[45.942423651887985]],[[31.796122777568804],[20.244107398639084],[47.959769823792115]],[[11.348169549147794],[47.47724216902994],[41.17458828182226]],[[13.741453716573371],[44.194156575465406],[42.06438970796122]],[[24.46313222373318],[29.74586257328433],[45.79100520298249]],[[34.03171588632673],[16.954564149088053],[49.01371996458522]],[[25.709360275965032],[27.982979815070095],[46.30765990896486]],[[18.294671423373543],[37.862724805258445],[43.84260377136801]],[[35.48556251126728],[14.92661305130078],[49.58782443743194]],[[44.90704486747291],[2.3548472264927156],[52.73810790603437]],[[21.723733554998958],[33.26425023724014],[45.0120162077609]],[[29.43960658731552],[22.973468161836948],[47.586925250847536]],[[8.239567861159314],[51.20176284534045],[40.558669293500245]],[[8.384378801845452],[50.970144414337824],[40.64547678381672]],[[5.879066228724467],[54.24426555846211],[39.87666821281342]],[[13.186651540561087],[44.48240279474363],[42.33094566469529]],[[31.113962039303612],[20.501774496600785],[48.38426346409561]],[[32.095778103466074],[19.1804789155343],[48.72374298099962]],[[2.100189851871299],[59.153916946867334],[38.74589320126136]],[[11.785799168070419],[46.211233725199904],[42.002967106729685]],[[21.627150215359112],[33.058482516896206],[45.314367267744686]],[[14.657247547617589],[42.29667532634432],[43.04607712603809]],[[14.399307250480367],[42.64020684916405],[42.96048590035557]],[[20.1901240796412],[34.912206947240044],[44.897668973118755]],[[13.219373950248652],[44.198641290264774],[42.581984759486566]],[[23.95040029116314],[29.77854493658897],[46.2710547722479]],[[17.918388499851964],[37.809260815722276],[44.272350684425774]],[[25.562429684760062],[27.59984265368009],[46.83772766155983]],[[20.426957394692742],[34.42313293637178],[45.14990966893549]],[[19.679793593343508],[35.40624390334066],[44.91396250331583]],[[34.29318900578378],[15.907966918467167],[49.79884407574905]],[[23.450652020673466],[30.355607556092373],[46.19374042323416]],[[29.03717378718136],[22.873197197596898],[48.08962901522174]],[[12.209612130629166],[45.27218505250942],[42.51820281686141]],[[44.93966427712224],[1.592632283117506],[53.467703439760264]],[[29.28573534280914],[22.44981940626308],[48.26444525092777]],[[25.695721336172717],[27.226897136415147],[47.07738152741214]],[[18.207427696506976],[37.19797608376716],[44.594596219725865]],[[24.276936732537248],[29.1023290365707],[46.620734230892054]],[[44.187155388848225],[2.512317603080046],[53.30052700807172]],[[15.131418736514702],[41.21140275050701],[43.657178512978284]],[[22.284597460351343],[31.64383999107441],[46.07156254857424]],[[6.096660409420076],[53.22522696872012],[40.67811262185981]],[[2.439077024055655],[58.061539536584604],[39.499383439359754]],[[39.50712962865084],[8.582329612476594],[51.91054075887257]],[[31.74886598289794],[18.91748592707576],[49.333648090026294]],[[36.20605238699833],[12.90644059406835],[50.88750701893332]],[[32.20419825260048],[18.225441856433346],[49.57035989096618]],[[3.110012399446431],[56.98662053125443],[39.90336706929914]],[[41.76696515670803],[5.4136087357745115],[52.81942610751745]],[[34.223909816047694],[15.468251878168063],[50.307838305784244]],[[20.801439806214443],[33.340212565636946],[45.85834762814861]],[[24.536115392065415],[28.357380485365084],[47.10650412256949]],[[30.474199429538125],[20.43557588739498],[49.09022468306691]],[[27.504852738200782],[24.19036048766498],[48.304786774134236]],[[39.60840235509216],[8.047513916071686],[52.344083728836154]],[[20.82619515291103],[33.071222055189786],[46.10258279189918]],[[39.30090376048554],[8.431494586209737],[52.267601653304716]],[[1.7022386508596845],[58.56203017429872],[39.7357311748416]],[[14.884877648972909],[40.930698619320175],[44.184423731706914]],[[18.782629345693135],[35.70759064734886],[45.509780006957996]],[[41.21272769373977],[5.7573828747564795],[53.02988943150374]],[[29.157203502871674],[21.768855376878214],[49.07394112025011]],[[32.90289262254388],[16.73139204577657],[50.36571533167955]],[[21.86444545621371],[31.44058558982261],[46.69496895396368]],[[15.927716917423544],[39.33840789829018],[44.73387518428628]],[[34.79504046505537],[14.115282330000428],[51.08967720494421]],[[42.60771222720531],[3.690972564399661],[53.70131520839503]],[[13.639365553954924],[42.310209686337544],[44.05042475970753]],[[27.652911962932038],[23.615875263946123],[48.73121277312183]],[[18.849183865722665],[35.34594326909398],[45.80487286518336]],[[15.086576860438702],[40.331343667628786],[44.5820794719325]],[[26.65169723441878],[24.89715371265289],[48.45114905292833]],[[43.58939696991338],[2.294660649316859],[54.115942380769766]],[[20.384506940205647],[33.19709933655491],[46.41839372323944]],[[24.57345585931854],[27.603446846056517],[47.82309729462496]],[[14.437521553187157],[41.113072919994934],[44.4494055268179]],[[28.933351258670122],[21.781431747243403],[49.28521699408649]],[[2.2791619079767624],[57.29241541018341],[40.428422681839834]],[[11.766255030108717],[44.61622828016234],[43.61751668972894]],[[1.7486408315517936],[57.93286075168781],[40.3184984167604]],[[17.221918774924106],[37.27908812893075],[45.498993096145156]],[[7.870517912151151],[49.71359145586487],[42.41589063198398]],[[13.539593325242219],[42.145265148506425],[44.31514152625135]],[[1.9469225420758636],[57.5952545135056],[40.45782294441853]],[[12.61166035166143],[43.27380597551952],[44.11453367281905]],[[29.58072020348444],[20.637752544134973],[49.78152725238059]],[[17.17496261329165],[37.17737194066271],[45.64766544604564]],[[8.885610793681705],[48.17995416128357],[42.93443504503473]],[[42.60032086552125],[3.200813710485353],[54.198865423993404]],[[0.0],[60.00000000000001],[39.99999999999999]],[[45.0],[0.0],[55.00000000000001]],[[16.134114017338376],[38.48571573900155],[45.380170243660075]],[[34.057668222026095],[14.585677881967737],[51.35665389600616]],[[43.85731207320171],[1.4613865108593755],[54.68130141593891]],[[25.18153865035162],[26.3026851243783],[48.51577622527009]],[[11.705271714626676],[44.17049978385157],[44.124228501521756]],[[23.14377932141333],[28.895167238854103],[47.961053439732574]],[[15.087751700021727],[39.60246188258379],[45.309786417394484]],[[33.94129084835365],[14.452732597317222],[51.605976554329125]],[[31.187377236811148],[18.103660443510012],[50.70896231967884]],[[25.89232243525224],[25.160524385475153],[48.947153179272604]],[[19.9729698617312],[33.00498631941619],[47.0220438188526]],[[43.54171816279159],[1.5176408684449216],[54.940640968763496]],[[23.527207208300847],[28.16649254062518],[48.30630025107398]],[[42.472064207242695],[2.8560627032481136],[54.67187308950919]],[[6.192014754486164],[51.20492944094161],[42.603055804572215]],[[40.256016973102234],[5.777562564616785],[53.966420462280986]],[[16.121935514556444],[37.89084619554621],[45.987218289897335]],[[21.502510609238016],[30.709604128141038],[47.78788526262094]],[[12.948112636716408],[42.090778333477964],[44.96110902980563]],[[14.755293699024028],[39.543688605638735],[45.701017695337235]],[[7.782331086393224],[48.7992086658617],[43.41846024774508]],[[7.856182853851612],[48.676190355064804],[43.46762679108359]],[[7.973000176423352],[48.51509123132472],[43.51190859225193]],[[20.114635887030037],[32.31388505715545],[47.57147905581452]],[[39.144913566102645],[6.91784518308365],[53.937241250813706]],[[24.646242748610163],[26.180715337873583],[49.17304191351624]],[[16.62132411034256],[36.84971294037399],[46.52896294928346]],[[43.07925208824835],[1.5542796823099059],[55.366468229441736]],[[26.854942361286106],[23.17616802090172],[49.968889617812174]],[[17.63071746085648],[35.379911703736],[46.98937083540752]],[[8.699860841401751],[47.17816962739375],[44.12196953120449]],[[1.7125412942239433],[56.485808906779255],[41.801649798996806]],[[4.595236578686359],[52.61340629407839],[42.79135712723525]],[[12.955490799365077],[41.452844562327925],[45.59166463830701]],[[32.95946974813536],[14.761837417731675],[52.278692834132954]],[[30.984220770265807],[17.384238345177412],[51.631540884556784]],[[20.863727644972823],[30.87410426382396],[48.262168091203215]],[[3.7017723466563055],[53.753822431799556],[42.54440522154413]],[[10.926836631263589],[44.10729608993974],[44.96586727879668]],[[11.723289217481025],[43.03437133030029],[45.24233945221869]],[[16.02016368466877],[37.30283003052563],[46.677006284805614]],[[13.143017810896177],[41.0933149452333],[45.76366724387053]],[[25.36911802002677],[24.757907677946008],[49.87297430202722]],[[22.755802669900056],[28.23725958812981],[49.006937741970134]],[[17.69334783585221],[34.94566280060827],[47.36098936353952]],[[37.951027464667334],[7.913650279338366],[54.1353222559943]],[[39.72698353458355],[5.506560584311925],[54.76645588110451]],[[41.86932725056966],[2.640620875804362],[55.49005187362599]],[[22.669631899822253],[28.238689669483836],[49.09167843069391]],[[18.189033655209037],[34.1866725245372],[47.62429382025376]],[[4.274651700173171],[52.73818218833425],[42.987166111492584]],[[5.1891579276440964],[51.468802797482894],[43.34203927487301]],[[26.209812185207436],[23.437811045292197],[50.35237676950036]],[[35.911174749645305],[10.485599237051781],[53.60322601330291]],[[18.723610108372917],[33.38401085320999],[47.89237903841709]],[[27.198268129267994],[22.07777069919603],[50.72396117153596]],[[2.991908701959218],[54.307340186781786],[42.700751111258995]],[[21.57948744579632],[29.453098347341356],[48.96741420686232]],[[13.130231695440106],[40.68318615476849],[46.186582149791406]],[[41.85995361819981],[2.364213087713447],[55.77583329408673]],[[14.153209796878356],[39.2947206273908],[46.55206957573084]],[[21.628315456355534],[29.29979794584056],[49.07188659780391]],[[42.77288961031806],[1.097959898333525],[56.12915049134841]],[[42.614471062296055],[1.2923484608661395],[56.0931804768378]],[[21.593358451931586],[29.235759356127826],[49.17088219194059]],[[16.602179131759915],[35.87328245541694],[47.52453841282315]],[[14.557370888971027],[38.58679391714098],[46.855835193888]],[[37.543850163208496],[7.930770038068964],[54.52537979872254]],[[40.81425558728882],[3.5548216972182045],[55.63092271549297]],[[17.12232812981791],[35.10627388103985],[47.77139798914224]],[[9.17024155694388],[45.693048165427044],[45.13671027762908]],[[7.468893456640988],[47.93955414302173],[44.5915524003373]],[[20.852673717808475],[30.083813050035808],[49.06351323215572]],[[34.490660198249955],[11.897922808674675],[53.611416993075366]],[[13.76532992186509],[39.50260814875301],[46.7320619293819]],[[6.518112361090813],[49.160758350140924],[44.321129288768276]],[[23.450508922532165],[26.54831458508939],[50.00117649237845]],[[12.926491551591141],[40.55271829568113],[46.520790152727734]],[[12.121217372466939],[41.48658881290386],[46.39219381462921]],[[18.47571482541949],[32.977443751925215],[48.546841422655284]],[[12.646734323623871],[40.70340676241291],[46.64985891396323]],[[11.434192764118519],[42.315764057761015],[46.250043178120464]],[[9.358027545496931],[45.01481072186895],[45.62716173263412]],[[18.193534957504166],[33.22830903219728],[48.57815601029855]],[[13.262314397503571],[39.77753948285841],[46.96014611963802]],[[40.59136242026073],[3.2715252696533885],[56.13711231008589]],[[34.351725734870556],[11.587839996214951],[54.06043426891449]],[[13.126175417712926],[39.849650510139206],[47.024174072147865]],[[29.769143911186756],[17.65726101447177],[52.57359507434148]],[[26.992009170826915],[21.310900691161724],[51.69709013801136]],[[31.381693359895436],[15.398497498175646],[53.21980914192892]],[[13.246191145133771],[39.54501144250018],[47.208797412366046]],[[8.77456967695264],[45.48890893122246],[45.7365213918249]],[[41.36490100373659],[2.023596009475565],[56.61150298678784]],[[13.795551596752869],[38.77548519659242],[47.428963206654714]],[[24.57902940411141],[24.392622036937514],[51.028348558951066]],[[19.32450406594931],[31.39348471824096],[49.28201121580973]],[[33.242146805523184],[12.819125729925801],[53.938727464551015]],[[12.872400441061025],[39.961762483244286],[47.16583707569469]],[[11.819047496648905],[41.34410899352928],[46.83684350982181]],[[26.17024305506383],[22.161922484050155],[51.66783446088602]],[[4.614500509730352],[50.85140051918523],[44.53409897108442]],[[14.24970492978535],[37.993721586404384],[47.756573483810264]],[[25.97189403071954],[22.355574879401843],[51.67253108987862]],[[15.121615051309833],[36.81047255030908],[48.06791239838109]],[[22.80711898264298],[26.523594370180415],[50.66928664717661]],[[39.58909776401116],[4.1441993145258404],[56.26670292146301]],[[35.64665563840877],[9.383801107948138],[54.9695432536431]],[[16.098836190847045],[35.424978623362584],[48.47618518579037]],[[12.615569692426673],[40.06605851381517],[47.31837179375815]],[[13.210859724264717],[39.24792895393051],[47.541211321804774]],[[23.17171308352558],[25.929403033971845],[50.898883882502574]],[[25.567117487912927],[22.73483170693701],[51.69805080515006]],[[39.01289130109007],[4.802493809628952],[56.18461488928098]],[[40.619724317112876],[2.6411117596797884],[56.739163923207336]],[[8.59818128129642],[45.334465781474904],[46.06735293722867]],[[28.323062522473037],[19.00234617942537],[52.6745912981016]],[[24.988964108370553],[23.37722027083787],[51.63381562079158]],[[19.472853977421792],[30.700839972548405],[49.826306050029814]],[[40.29591801719101],[2.8876195708063825],[56.81646241200261]],[[36.78264476816683],[7.522985766355984],[55.69436946547719]],[[1.2147391862006736],[54.944935952266185],[43.840324861533155]],[[10.056975276292002],[43.1112743795952],[46.831750344112784]],[[2.2111935736061614],[53.5713533424191],[44.21745308397474]],[[13.521658499662973],[38.47838848408666],[47.99995301625038]],[[30.152936003159773],[16.249062007526277],[53.59800198931395]],[[40.5779714627633],[2.2278349269245],[57.194193610312205]],[[24.450211971306494],[23.685692133303345],[51.86409589539017]],[[0.7028420853355897],[55.31656112783484],[43.980596786829565]],[[32.802032468630635],[12.516731799225242],[54.68123573214413]],[[37.74882786213637],[5.901397184209474],[56.349774953654155]],[[22.28725442195372],[26.43642178271936],[51.2763237953269]],[[6.458428097857769],[47.50433732490508],[46.03723457723716]],[[28.765039660273604],[17.7464456578252],[53.48851468190119]],[[39.98370889948999],[2.751214850439926],[57.26507625007009]],[[22.05630891305985],[26.61545037394007],[51.32824071300007]],[[1.167962833507165],[54.379416429987955],[44.452620736504876]],[[2.0467126093251578],[53.20408785222622],[44.74919953844862]],[[17.175425304548614],[32.98912193535609],[49.83545276009531]],[[6.950097303950617],[46.606670647121895],[46.443232048927484]],[[2.5784849843648265],[52.43404549388367],[44.9874695217515]],[[9.12509566353318],[43.64817682503049],[47.22672751143634]],[[30.518394692106586],[15.103745942496497],[54.377859365396915]],[[11.259103119584262],[40.76346319332668],[47.977433687089075]],[[2.4276279495091124],[52.478998441062885],[45.093373609428006]],[[20.784167573663705],[28.001141036530953],[51.214691389805346]],[[9.289018681804768],[43.319380271835364],[47.39160104635987]],[[22.258037605072623],[26.024635569737708],[51.71732682518966]],[[17.63831072690882],[32.161391209440666],[50.200298063650514]],[[33.86381865282926],[10.503020810599804],[55.63316053657095]],[[21.783111890286445],[26.55975553381465],[51.6571325758989]],[[19.146763098297935],[30.017867759210485],[50.83536914249157]],[[2.6773750097838893],[51.95615977742843],[45.36646521278767]],[[24.917670259808762],[22.301668589316336],[52.7806611508749]],[[10.912069486492433],[40.94297486110987],[48.14495565239769]],[[2.8601754210993002],[51.66945630544749],[45.470368273453204]],[[5.5610528333221305],[48.02608552615873],[46.41286164051914]],[[39.35247452556702],[2.9662248735950723],[57.6813006008379]],[[30.845304002652323],[14.209018388836645],[54.94567760851103]],[[9.653353033259982],[42.433147194804924],[47.9134997719351]],[[5.870390989542812],[47.45858375026896],[46.67102526018823]],[[12.34742839763673],[38.76825804400526],[48.88431355835801]],[[9.06055924259702],[43.139844163055564],[47.79959659434742]],[[24.871225355656765],[22.020338101086796],[53.10843654325645]],[[6.616908253828828],[46.29384618861959],[47.089245557551585]],[[8.721486677904702],[43.474809549257685],[47.8037037728376]],[[5.503862753506737],[47.75460603268245],[46.7415312138108]],[[21.396566850268126],[26.50207314010093],[52.10136000963095]],[[0.0],[55.00000000000001],[44.99999999999999]],[[5.2063508730919095],[48.05111279465163],[46.742536332256456]],[[30.160635386239587],[14.758484383227085],[55.080880230533324]],[[22.273337729712107],[25.243023266237447],[52.48363900405045]],[[16.221150585681297],[33.29370267234336],[50.48514674197536]],[[0.5613803394046358],[54.155885542718316],[45.28273411787705]],[[6.1650565533880135],[46.662766595378535],[47.17217685123345]],[[7.92456417565601],[44.31379191060691],[47.76164391373708]],[[25.54581632979014],[20.784730433332403],[53.66945323687746]],[[15.320251564535573],[34.409361763865846],[50.27038667159859]],[[4.198177118695539],[49.21748506979735],[46.58433781150711]],[[15.514459399624588],[34.0496922211515],[50.43584837922391]],[[5.460672397035882],[47.4164336707906],[47.12289393217351]],[[29.677514390550513],[15.111097438464647],[55.21138817098484]],[[14.347912407410396],[35.5103256547938],[50.14176193779579]],[[36.53728154974734],[5.920684459287124],[57.54203399096555]],[[5.644929106717442],[47.099156806406384],[47.255914086876174]],[[10.764196225186657],[40.26950191158306],[48.96630186323028]],[[40.39184530498329],[0.6810721809993099],[58.92708251401741]],[[10.407204090901926],[40.64850027345751],[48.944295635640565]],[[5.797172413821735],[46.769035601806216],[47.43379198437205]],[[11.024009207404017],[39.71279170154966],[49.26319909104631]],[[6.8049359631650335],[45.3101905777616],[47.884873459073354]],[[12.109137781399115],[38.2194387750551],[49.671423443545784]],[[5.600131730108863],[46.86513840954244],[47.5347298603487]],[[26.176408705609262],[19.41507401878619],[54.40851727560454]],[[37.31437636272607],[4.554341212445059],[58.13128242482887]],[[14.87744278629694],[34.45312020786736],[50.669437005835704]],[[16.00025467647833],[32.9428438557413],[51.05690146778036]],[[19.9363587965929],[27.670140176367347],[52.39350102703977]],[[9.935457251880136],[40.99296915140702],[49.071573596712845]],[[10.95877463485043],[39.501540789723094],[49.53968457542647]],[[6.261727429456681],[45.73808284962132],[48.000189720922]],[[19.47243814611661],[28.107817538918372],[52.41974431496502]],[[6.26014024398526],[45.6974390893938],[48.04242066662094]],[[37.183027263180655],[4.448573580777468],[58.368399156041875]],[[26.070614494804158],[19.26406661985772],[54.66531888533813]],[[10.602723436710683],[39.88408408559445],[49.51319247769486]],[[28.827860079642253],[15.527293840325559],[55.64484608003218]],[[9.430566105595942],[41.36500244890111],[49.204431445502955]],[[28.472544392973088],[15.932921000411463],[55.59453460661546]],[[6.7920695532441],[44.739861280198284],[48.46806916655761]],[[32.49013610510572],[10.41853781179585],[57.09132608309842]],[[23.725467117374667],[22.033105951188624],[54.241426931436706]],[[28.751479326782047],[15.30796821700556],[55.94055245621239]],[[33.16285455148119],[9.315339599623847],[57.52180584889496]],[[19.00532698870448],[28.172726466037695],[52.82194654525782]],[[3.8923451671406624],[48.31787309610536],[47.78978173675397]],[[11.443825875091806],[38.2170668689504],[50.33910725595779]],[[9.738621750934232],[40.461197594196655],[49.800180654869116]],[[32.59576730475789],[9.915850465691285],[57.488382229550815]],[[3.8834548084389855],[48.19162886561042],[47.92491632595059]],[[40.0],[0.0],[60.0]],[[3.2040319372634825],[49.04027731003778],[47.75569075269874]],[[12.26182525776329],[36.94747650354282],[50.790698238693885]],[[28.47736409967625],[15.280482594932682],[56.24215330539107]],[[12.537954239040372],[36.473778675086116],[50.98826708587351]],[[14.507767018264436],[33.828198819031954],[51.66403416270361]],[[30.864109041464015],[11.989770667200727],[57.14612029133526]],[[3.5728265583699006],[48.347944216009395],[48.079229225620715]],[[1.174542390770695],[51.47999717969811],[47.3454604295312]],[[8.433126091229742],[41.78149112827757],[49.78538278049268]],[[13.470693569798286],[35.04130364770302],[51.48800278249869]],[[5.563071392441418],[45.57248363342662],[48.864444974131956]],[[1.5571118511720023],[50.90297607856971],[47.539912070258296]],[[4.406182795260995],[47.05471923818533],[48.539097966553676]],[[26.665924241184047],[17.333502738584507],[56.00057302023145]],[[21.45164649247772],[24.262279343186947],[54.28607416433533]],[[5.904215723067665],[44.970079311876326],[49.125704965056016]],[[3.261226063506452],[48.46716088721427],[48.27161304927929]],[[25.413006616930623],[18.89000820992036],[55.69698517314903]],[[2.841128755296398],[48.97865245224176],[48.18021879246184]],[[8.465873304488989],[41.460895216672995],[50.07323147883802]],[[8.864822618226105],[40.92304449008589],[50.212132891688]],[[19.734825991658926],[26.424187485291533],[53.84098652304954]],[[26.989815866309492],[16.684224127286303],[56.32596000640421]],[[27.882346217922098],[15.478624281503055],[56.639029500574836]],[[29.090775769198054],[13.827946052126208],[57.081278178675745]],[[7.3134739826864665],[42.81408401298714],[49.87244200432638]],[[22.424395153767605],[22.618649995665667],[54.95695485056673]],[[10.576177043171654],[38.307750256072545],[51.1160727007558]],[[10.157004981127722],[38.83628461702479],[51.0067104018475]],[[24.980896030535956],[18.934717784047578],[56.08438618541647]],[[8.112762534242888],[41.38381740568638],[50.50342006007074]],[[19.994341644643363],[25.521956763713945],[54.4837015916427]],[[12.198299009776099],[35.86259047642456],[51.93911051379935]],[[1.986628196416928],[49.442130153873684],[48.57124164970939]],[[8.438878172195242],[40.79084906645143],[50.77027276135333]],[[5.361099533371043],[44.845843607845175],[49.793056858783785]],[[10.463477654856923],[38.040750495618184],[51.4957718495249]],[[11.513379958134955],[36.59510094210978],[51.89151909975527]],[[11.207441183217098],[36.90619696368233],[51.886361853100574]],[[6.494471313938288],[43.121036885601676],[50.384491800460026]],[[2.4236843329017415],[48.51210342406277],[49.064212243035485]],[[6.104688760790694],[43.59496227084059],[50.300348968368716]],[[2.28272930474399],[48.61273662029294],[49.10453407496306]],[[21.595977287607983],[22.85469889360153],[55.5493238187905]],[[27.268024246233875],[15.277314618670367],[57.454661135095755]],[[33.735551707705454],[6.6310089427373695],[59.63343934955717]],[[33.06105461092524],[7.465698072906828],[59.47324731616792]],[[10.240691610553549],[37.85844155324081],[51.90086683620564]],[[19.252562485072005],[25.816017363203354],[54.93142015172463]],[[16.684216893959338],[29.20719122931245],[54.108591876728205]],[[8.1799729508744],[40.52053983307962],[51.29948721604599]],[[2.1911791318238643],[48.50467916345638],[49.304141704719754]],[[9.159021250041812],[39.1213676633994],[51.71961108655879]],[[23.496162508272267],[19.973652306031862],[56.530185185695856]],[[31.765886452172765],[8.939336819883346],[59.29477672794389]],[[6.144496756480581],[43.04621601022689],[50.80928723329252]],[[26.986220544694817],[15.03790716573464],[57.97587228957054]],[[32.70059326553421],[7.370505261468674],[59.92890147299711]],[[15.233732299293182],[30.60462044656751],[54.16164725413931]],[[28.768818246409396],[12.504571909728455],[58.72660984386216]],[[10.317657308266645],[37.09353735964243],[52.58880533209093]],[[5.366736829253856],[43.6766271760904],[50.95663599465574]],[[4.879606287036714],[44.274885486539176],[50.845508226424116]],[[25.830365925836734],[16.338638926010663],[57.83099514815262]],[[16.563458687537626],[28.609710432681172],[54.826830879781205]],[[33.44130037907063],[6.03546447502252],[60.52323514590685]],[[29.546193526435573],[11.221002017049045],[59.232804456515375]],[[13.810898738863523],[32.16680596072417],[54.0222953004123]],[[4.2495987105662945],[44.90735390078952],[50.84304738864418]],[[18.709675862219992],[25.564472388619446],[55.72585174916056]],[[15.315346589616697],[29.988499065259226],[54.69615434512407]],[[0.07545172115102755],[50.28187583160969],[49.64267244723929]],[[0.975037119968423],[48.966305980642176],[50.0586568993894]],[[25.34734015505457],[16.4308913963613],[58.22176844858412]],[[5.545897773901166],[42.79489300000192],[51.65920922609691]],[[0.0],[50.0],[50.0]],[[16.357458152646],[28.12453545705379],[55.51800639030022]],[[25.44600637144574],[15.914329033310748],[58.6396645952435]],[[2.05252706938686],[46.973797154627604],[50.97367577598554]],[[3.262680333614005],[45.34834268914282],[51.388976977243175]],[[33.73864136559259],[4.672456911736966],[61.58890172267043]],[[17.48808671635265],[26.313407610538054],[56.1985056731093]],[[31.53777146215696],[7.57197343231117],[60.890255105531864]],[[4.961465587984754],[42.97810017584826],[52.060434236166984]],[[36.80303212471261],[0.45094188952233877],[62.74602598576505]],[[25.580997465782186],[15.341802356373769],[59.07720017784405]],[[22.928803707274795],[18.833869718077757],[58.23732657464744]],[[10.876673403184828],[34.80839388059241],[54.31493271622275]],[[5.000044338731178],[42.62304431644978],[52.376911344819035]],[[14.351713388016213],[30.148010983259017],[55.50027562872478]],[[19.591031522533182],[23.122386712960168],[57.286581764506636]],[[5.474182357475392],[41.878611005057095],[52.64720663746751]],[[25.860755064904208],[14.656822114989348],[59.48242282010645]],[[0.20103062665809884],[48.866288264292415],[50.93268110904948]],[[12.580949310742346],[32.26696992718119],[55.15208076207646]],[[34.08377261867931],[3.5307786828729393],[62.385448698447746]],[[5.753278840696339],[41.29624833597105],[52.9504728233326]],[[29.215351771329008],[10.010573731847169],[60.77407449682383]],[[21.868903083493077],[19.796608435453],[58.33448848105392]],[[24.61470168598006],[15.928016247624067],[59.45728206639589]],[[19.466561668307715],[22.77422246484154],[57.759215866850745]],[[0.40498015326869236],[48.18904630518851],[51.40597354154281]],[[3.4675535247673075],[44.06296111516385],[52.469485360068845]],[[33.713875226395814],[3.732333301096471],[62.55379147250771]],[[17.566966370353295],[25.17915392070522],[57.25387970894149]],[[14.73876334270414],[28.880362723297935],[56.38087393399792]],[[1.3413642028650836],[46.74109552691196],[51.917540270222965]],[[30.283792901397938],[8.12126661600277],[61.59494048259929]],[[15.802311118607026],[27.367922748242417],[56.82976613315055]],[[20.465477935692128],[21.133376923280967],[58.4011451410269]],[[12.803236579295953],[31.340671868799824],[55.85609155190422]],[[17.154278119446356],[25.504857934760523],[57.34086394579312]],[[34.3577492063938],[2.4746684834082604],[63.16758231019794]],[[34.1641817868128],[2.720213551490671],[63.11560466169652]],[[0.46875808363213056],[47.497728019568704],[52.033513896799164]],[[2.9133654095140833],[44.235213672739526],[52.851420917746395]],[[17.71118202598482],[24.488699144496774],[57.80011882951841]],[[29.265264505344607],[9.024562595113444],[61.710172899541945]],[[5.148015194081658],[41.088294151017564],[53.763690654900785]],[[32.355512895844264],[4.801561327806185],[62.84292577634956]],[[31.114546054662977],[6.364053811942329],[62.52140013339469]],[[1.8199587376188886],[45.39522512789701],[52.7848161344841]],[[31.06669726446271],[6.372650868430438],[62.560651867106856]],[[6.763117180999911],[38.76580150465885],[54.47108131434123]],[[8.38983169768169],[36.5700766483373],[55.04009165398103]],[[2.0415532791265045],[45.01033308875511],[52.94811363211838]],[[16.376717726116954],[25.758188338225374],[57.865093935657676]],[[6.879078774999738],[38.38026996313197],[54.7406512618683]],[[6.333373698299913],[39.10158764671622],[54.565038654983866]],[[28.569054658403548],[9.433507429305308],[61.99743791229114]],[[23.755113401492263],[15.79017398775085],[60.45471261075688]],[[22.086156854264946],[17.955632697954634],[59.958210447780424]],[[15.464795837860839],[26.76216919202593],[57.77303497011324]],[[23.223748413268787],[16.309872477928877],[60.46637910880235]],[[4.684233994687815],[41.02514326461091],[54.29062274070128]],[[4.678721000367632],[41.00202209142388],[54.31925690820848]],[[33.00629472362383],[3.1868234175754386],[63.806881858800736]],[[27.493020153585917],[10.32600043214628],[62.1809794142678]],[[22.326286912516068],[17.192391214928037],[60.4813218725559]],[[23.70417575876811],[15.244699574246459],[61.05112466698544]],[[2.6902505982599045],[43.20498443911981],[54.10476496262028]],[[27.536828827710497],[10.060961400605578],[62.40220977168393]],[[35.0],[0.0],[64.99999999999999]],[[27.23972402470647],[10.205299829398593],[62.55497614589493]],[[16.492748153906827],[24.526927694899108],[58.98032415119406]],[[9.990059852067718],[33.16300252806166],[56.846937619870616]],[[17.5405060088169],[23.087243841438422],[59.37225014974467]],[[6.732883857824],[37.46420985228587],[55.80290628989013]],[[8.142888351066922],[35.55140776540291],[56.30570388353016]],[[22.716377579520017],[15.939730903735219],[61.34389151674476]],[[0.6428648961426034],[45.3528486902678],[54.0042864135896]],[[31.24467971840771],[4.498982641061882],[64.25633764053042]],[[10.490138045413607],[32.15479283251386],[57.35506912207254]],[[33.80802066503562],[1.0518416320929738],[65.14013770287141]],[[25.005332106235308],[12.786784890299915],[62.20788300346477]],[[29.156159280246403],[7.17422466674419],[63.669616053009406]],[[6.184930501836608],[37.74911200338267],[56.06595749478072]],[[16.41873494390658],[24.007988441322166],[59.57327661477125]],[[5.112184230979653],[39.009461622701814],[55.87835414631853]],[[11.393293955836082],[30.62383463050361],[57.982871413660305]],[[4.056579798300968],[40.333130170001525],[55.61029003169751]],[[23.104042329392737],[14.91622063392713],[61.97973703668013]],[[34.22164513712902],[0.07948562148872852],[65.69886924138224]],[[2.2342793651628403],[42.7263062049699],[55.03941442986727]],[[4.1419541152440305],[40.17696687911418],[55.681079005641784]],[[3.222207477621771],[41.38986847941891],[55.387924042959334]],[[4.579832880600939],[39.55030652740675],[55.869860591992314]],[[7.794105266292906],[35.22270067735796],[56.98319405634914]],[[25.11547151660949],[11.95926679398185],[62.92526168940867]],[[28.318468594700985],[7.6429995600496685],[64.03853184524935]],[[13.850645846454594],[26.808196004479463],[59.34115814906594]],[[1.2645383116410922],[43.55009915054015],[55.18536253781876]],[[26.918675081391356],[9.329862574884192],[63.75146234372444]],[[4.084092025710506],[39.70216897156148],[56.21373900272801]],[[31.10215375349818],[3.5931505204907044],[65.3046957260111]],[[32.943498650505965],[1.1332120788727302],[65.9232892706213]],[[2.3789753569389958],[41.85113399684603],[55.76989064621497]],[[0.0],[45.0],[55.00000000000001]],[[25.62063448588493],[10.83243643118537],[63.5469290829297]],[[2.6661327741008924],[41.35724106486141],[55.97662616103769]],[[21.936659778438425],[15.622256476020462],[62.441083745541114]],[[13.132607083574127],[27.23734896092669],[59.63004395549919]],[[32.230508687756135],[1.731267134367746],[66.03822417787613]],[[19.460862944242997],[18.594361243251605],[61.94477581250539]],[[0.06593170905546065],[44.39726618619321],[55.536802104751324]],[[0.6981657695375798],[43.49642440005062],[55.805409830411804]],[[22.872852114181175],[13.900149093485393],[63.22699879233345]],[[13.7389248484218],[25.988281627189245],[60.27279352438896]],[[24.200229904947328],[12.018414862499043],[63.78135523255363]],[[8.405423337900302],[33.037110696527684],[58.55746596557201]],[[21.52697729967357],[15.541372534723166],[62.931650165603244]],[[24.73826472997849],[11.220780494213912],[64.0409547758076]],[[17.252922113586298],[21.11328737985118],[61.63379050656251]],[[28.53495869931482],[6.0554420499566195],[65.40959925072856]],[[8.855629028208007],[32.25325263237973],[58.89111833941227]],[[0.4823875233903032],[43.33687915202102],[56.18073332458867]],[[1.6855069940117429],[41.717303686095356],[56.597189319892905]],[[12.798252021675511],[26.850368973265876],[60.351379005058625]],[[23.442381276836127],[12.464349630219544],[64.09326909294433]],[[21.29979515538491],[15.309004646698678],[63.39120019791641]],[[12.799300484666029],[26.609181452737936],[60.59151806259604]],[[11.72323951003821],[27.953900937355648],[60.32285955260615]],[[17.203750875453462],[20.618747011873175],[62.17750211267335]],[[29.398166395014574],[4.339889058100269],[66.26194454688516]],[[1.226025543306599],[41.878977506172305],[56.89499695052109]],[[3.475666365657089],[38.860776286885894],[57.663557347457015]],[[8.792584815789176],[31.696953812462787],[59.510461371748036]],[[30.72333207451897],[2.1662686481154587],[67.11039927736556]],[[4.00226401992748],[37.78157018440778],[58.21616579566473]],[[15.763075646336041],[21.98287304156204],[62.25405131210192]],[[13.538845308071556],[24.9343002246384],[61.52685446729005]],[[25.891083539927102],[8.404092489985592],[65.70482397008732]],[[11.275269730577769],[27.870576915605987],[60.85415335381625]],[[6.49164719153148],[34.19758223754666],[59.310770570921854]],[[3.167188007066999],[38.54352826174707],[58.289283731185925]],[[7.634753217509001],[32.5244228527143],[59.8408239297767]],[[10.60036557056787],[28.47504550430657],[60.924588925125555]],[[26.647813407328957],[6.8981586561959505],[66.45402793647509]],[[3.544363882127787],[37.4967543942385],[58.958881723633716]],[[5.5513949307670085],[34.68913995076106],[59.75946511847193]],[[21.220025744439805],[13.76884194285404],[65.01113231270615]],[[7.531523165724286],[32.004602371038864],[60.463874463236856]],[[6.6758942556763055],[32.933274561668675],[60.39083118265501]],[[2.337794161366866],[38.706401026284674],[58.955804812348454]],[[3.6160072228923243],[36.99171766302325],[59.39227511408443]],[[12.703554679650466],[24.801427673536665],[62.49501764681287]],[[12.979605653569712],[24.402804397017338],[62.61758994941295]],[[6.714542558799453],[32.62028579158951],[60.665171649611025]],[[11.623852442687783],[25.922455096125784],[62.453692461186435]],[[12.570273473618634],[24.612158931193843],[62.817567595187526]],[[13.32179807552544],[23.481945263574723],[63.19625666089984]],[[1.6253571409177845],[39.056300478883756],[59.318342380198466]],[[15.392773060681208],[20.5535926989984],[64.05363424032039]],[[26.326036461225822],[5.895121236412808],[67.77884230236137]],[[23.777250102390465],[9.284593076222903],[66.93815682138664]],[[21.239853185487313],[12.650214544819486],[66.1099322696932]],[[25.490578898976523],[6.9816482735682435],[67.52777282745524]],[[1.384255353038683],[39.00431800248316],[59.61142664447815]],[[12.266646791186053],[24.3900206779651],[63.34333253084885]],[[3.5817169694788182],[35.90485413872013],[60.513428891801034]],[[14.194607268124008],[21.69002944241752],[64.11536328945849]],[[4.0587323113879314],[35.12842370569053],[60.812843982921535]],[[1.4197889560433008],[38.48379905693247],[60.09641198702423]],[[19.145847538855616],[14.829076656516055],[66.02507580462834]],[[2.452646429286539],[37.06552517722791],[60.481828393485536]],[[3.010417883965584],[36.30174549268966],[60.68783662334475]],[[7.857987077419466],[29.799577824785082],[62.342435097795445]],[[15.806293617299119],[19.188787981704472],[65.00491840099642]],[[11.954598576195162],[24.1478689694767],[63.89753245432813]],[[22.79811839075081],[9.668965877818728],[67.53291573143046]],[[0.0],[40.0],[60.0]],[[30.000000000000004],[0.0],[70.0]],[[16.729878907172182],[17.61353780880508],[65.65658328402274]],[[3.259701434818797],[35.57050560907993],[61.16979295610127]],[[29.165502345460148],[0.9379030657294056],[69.89659458881044]],[[16.2796874182955],[18.015825528921553],[65.70448705278295]],[[8.717829570508126],[28.059697290463554],[63.222473139028324]],[[21.330137371671825],[11.045522255346812],[67.62434037298135]],[[10.517479850626005],[25.373488906602574],[64.10903124277142]],[[12.38200095114783],[22.848227233809805],[64.76977181504236]],[[8.15369015323083],[28.2477013939923],[63.59860845277686]],[[13.853764131607917],[20.582778515250904],[65.56345735314117]],[[14.165027786388466],[19.902719109509714],[65.93225310410182]],[[15.680818910551231],[17.712334209610976],[66.6068468798378]],[[1.825888556537741],[36.11790269988897],[62.05620874357328]],[[24.93655501788391],[5.29033413049617],[69.77311085161992]],[[8.114182051487596],[27.7144437181143],[64.1713742303981]],[[12.735522396553788],[21.47262329071864],[65.79185431272757]],[[25.33729232554174],[4.629405911405721],[70.03330176305253]],[[11.98212935109864],[22.353700043821345],[65.66417060508]],[[26.14282533034037],[3.403944652203692],[70.45323001745594]],[[6.381183716667118],[29.679368661420774],[63.9394476219121]],[[20.689114078596933],[10.589582387881146],[68.72130353352193]],[[17.420284324549485],[14.846941613365946],[67.73277406208457]],[[11.069925277035138],[23.290127305489854],[65.63994741747501]],[[8.44786621859319],[26.625536882234297],[64.92659689917251]],[[8.243382036450884],[26.859599815768632],[64.89701814778049]],[[12.18634009066839],[21.390201651588917],[66.4234582577427]],[[19.21907962257264],[11.925561339818662],[68.85535903760871]],[[27.711137096815886],[0.5663858984366926],[71.72247700474742]],[[22.188840295411165],[7.733291808051063],[70.07786789653777]],[[23.485287832567174],[5.995797165131914],[70.51891500230091]],[[11.24692354934919],[21.883707766102987],[66.86936868454782]],[[24.891925168370538],[3.558462166221067],[71.54961266540839]],[[8.25588216225737],[25.12932442010384],[66.6147934176388]],[[7.597187603776972],[25.979134765097516],[66.42367763112553]],[[9.96851739762667],[22.66164035221052],[67.36984225016283]],[[22.636096468113404],[5.7276314458022535],[71.63627208608433]],[[20.5763272631541],[8.255235128934524],[71.16843760791139]],[[18.351322647489752],[10.560535595128906],[71.08814175738135]],[[18.891169540143462],[9.812033806222187],[71.29679665363436]],[[0.0],[35.0],[64.99999999999999]],[[12.169353432480605],[18.736879846588042],[69.09376672093136]],[[20.524938070588455],[7.593792914378608],[71.88126901503293]],[[13.798884703507413],[16.421787023722597],[69.77932827276999]],[[7.668581619241596],[24.575112219893345],[67.75630616086507]],[[1.840206650336395],[32.246989282216724],[65.91280406744687]],[[20.896533199444704],[6.716855480814781],[72.3866113197405]],[[10.119696113222005],[20.975957737303244],[68.90434614947475]],[[5.952929804861433],[26.48075691688637],[67.5663132782522]],[[21.29400430553179],[6.0113109098945925],[72.69468478457361]],[[23.211982955424453],[3.191448205929585],[73.59656883864596]],[[4.869506855301669],[27.55269966959371],[67.57779347510463]],[[14.807702834505385],[14.16719530245039],[71.02510186304423]],[[20.423343949971414],[6.589674969297896],[72.98698108073069]],[[19.286484551720786],[8.086347381651644],[72.62716806662756]],[[9.930219438120622],[20.459486391831764],[69.61029417004761]],[[3.851259167432052],[28.392222342959094],[67.75651848960885]],[[25.0],[0.0],[75.0]],[[6.661774199879197],[24.26231124419072],[69.07591455593008]],[[12.005081858290216],[17.124300734303652],[70.87061740740613]],[[0.5109699237631901],[32.395087473654456],[67.09394260258236]],[[16.534124552159142],[10.81177660647107],[72.6540988413698]],[[11.29346560677037],[17.788111712116365],[70.91842268111327]],[[2.194400329399127],[29.89128044419059],[67.91431922641029]],[[19.413021215079876],[6.553767589386338],[74.0332111955338]],[[18.129625139084812],[7.852454674651159],[74.01792018626402]],[[7.2041093549631725],[22.378379477305582],[70.41751116773123]],[[2.962819152661982],[27.982810326289492],[69.05437052104853]],[[21.943952203756314],[2.600113003679642],[75.45593479256404]],[[12.413149946366417],[15.300821239462357],[72.28602881417122]],[[11.116180408021306],[16.525130354169594],[72.3586892378091]],[[17.769671844649313],[7.399980263850536],[74.83034789150015]],[[7.985600635246601],[20.433294534153145],[71.58110483060025]],[[6.574583987559682],[22.291864909834494],[71.13355110260584]],[[15.697100543393894],[10.114369477678785],[74.18852997892733]],[[4.417317482023667],[25.06145132106439],[70.52123119691196]],[[14.309530045941028],[11.711748096385808],[73.97872185767316]],[[9.157553484701065],[18.509926871584685],[72.33251964371425]],[[8.470716897372162],[19.304177898969705],[72.22510520365815]],[[22.576240265412682],[0.27904900776431074],[77.144710726823]],[[19.360252975855975],[4.495466587785163],[76.14428043635887]],[[1.1400990116544127],[28.52981132174655],[70.33008966659904]],[[10.552828833591127],[15.937238471180553],[73.50993269522831]],[[0.0],[30.000000000000004],[70.0]],[[20.380093270305913],[2.6897423032157692],[76.93016442647831]],[[16.20555859680651],[8.1456220949901],[75.64881930820339]],[[5.224214444134924],[22.755029834613204],[72.02075572125187]],[[11.573332319999015],[13.79260356883065],[74.63406411117035]],[[8.54281259531319],[17.63372190993733],[73.82346549474947]],[[18.60756773265651],[4.05375467682069],[77.3386775905228]],[[12.016996978827132],[12.776007601604464],[75.2069954195684]],[[6.786769337203228],[19.631553863178922],[73.58167679961784]],[[8.796554444041671],[16.88800679697936],[74.31543875897897]],[[5.770922967596077],[20.724161521469483],[73.50491551093444]],[[6.236079898531118],[20.043150859655814],[73.72076924181307]],[[13.501361605464957],[10.308417784634067],[76.19022060990098]],[[5.105971502654667],[21.225039551019016],[73.66898894632632]],[[10.669913176397326],[13.619515377482694],[75.71057144611999]],[[14.985185957145616],[7.4705373984596],[77.54427664439478]],[[4.1910251403308845],[21.78725848747475],[74.02171637219436]],[[6.370171173184613],[18.818760284633314],[74.81106854218207]],[[2.8577300295765213],[23.2598022229261],[73.88246774749739]],[[12.251463154032209],[10.47738710291926],[77.27114974304854]],[[19.8568964920059],[0.30144989221207663],[79.84165361578202]],[[8.325414129734868],[15.57364792855474],[76.10093794171038]],[[20.0],[0.0],[80.0]],[[8.478435056697393],[15.12214391448405],[76.39942102881857]],[[7.395772062923202],[16.302426314672335],[76.30180162240447]],[[2.96798543399077],[22.102575290288325],[74.92943927572091]],[[2.378540645201867],[22.636921478209775],[74.98453787658836]],[[9.927802769316948],[12.500426150245826],[77.57177108043723]],[[13.042467390279997],[8.280302954887905],[78.67722965483209]],[[15.477654166968962],[4.94673163544919],[79.57561419758184]],[[15.386872700636815],[5.0496307036467485],[79.56349659571643]],[[3.626574295374765],[20.540773195778687],[75.83265250884654]],[[7.993726587934358],[14.567187434547685],[77.43908597751795]],[[11.342177751573443],[9.90990057612857],[78.74792167229799]],[[0.0],[25.0],[75.0]],[[17.418536293314986],[1.5703112499839564],[81.01115245670107]],[[9.343628087293904],[12.13374549624355],[78.52262641646254]],[[17.60964859663199],[0.8016527235033241],[81.58869867986469]],[[15.399248819536956],[3.597622586354338],[81.0031285941087]],[[9.772444455378542],[11.083791058641781],[79.14376448597967]],[[12.228150538762787],[7.763583201492476],[80.00826625974474]],[[1.371128766512474],[22.19281834313231],[76.43605289035523]],[[7.6398493606777755],[13.7755549148689],[78.58459572445332]],[[2.2069442713555496],[20.923361893499486],[76.86969383514497]],[[3.8839559089942433],[18.455857096039182],[77.66018699496658]],[[11.225340129218297],[8.507230353942642],[80.26742951683904]],[[9.07376867658841],[11.338978191097462],[79.58725313231413]],[[8.777192616314599],[11.45432280051952],[79.76848458316587]],[[1.2562494370130428],[21.22206787586805],[77.52168268711891]],[[13.735414291867157],[4.473322653134509],[81.79126305499832]],[[10.426640426062118],[8.46542169308027],[81.1079378808576]],[[2.046745712715392],[19.590276456528557],[78.36297783075605]],[[9.445422729414586],[9.702970515434497],[80.85160675515091]],[[11.308529146020227],[6.235927387706954],[82.45554346627281]],[[3.1491743242561814],[17.0925089350257],[79.75831674071814]],[[7.735366691037712],[10.32442806524229],[81.94020524372]],[[0.0],[20.0],[80.0]],[[15.000000000000002],[0.0],[85.0]],[[12.97614966421239],[2.131439222415522],[84.89241111337209]],[[12.136317753670346],[3.0717888395724335],[84.79189340675721]],[[3.5700789860193005],[12.96659165456803],[83.46332935941267]],[[0.9117883989230657],[15.849016223252496],[83.23919537782444]],[[2.516104932505716],[13.486736226593434],[83.99715884090085]],[[1.2684809691539143],[14.701650419943462],[84.02986861090262]],[[10.819610386214947],[1.4262489019277553],[87.7541407118573]],[[0.0],[15.000000000000002],[85.0]],[[2.288849007117279],[10.36648647389704],[87.34466451898568]],[[10.0],[0.0],[90.0]],[[5.130156008475741],[6.481179786318782],[88.38866420520549]],[[4.558845785452617],[6.681346555308974],[88.7598076592384]],[[5.525306488054159],[4.76174481533601],[89.71294869660983]],[[0.4418647967238528],[11.331059625264626],[88.22707557801152]],[[0.0],[10.0],[90.0]],[[4.733701018283176],[3.1794732037668743],[92.08682577794995]],[[0.012838623646835806],[9.329341360419754],[90.65782001593341]],[[5.0],[0.0],[95.0]],[[0.0],[5.0],[95.0]],[[1.7008108107213582],[0.8943497425493363],[97.40483944672931]],[[0.1971343697406181],[0.7205374279594683],[99.08232820229992]],[[0.0],[0.0],[100.0]],[[0.0],[0.0],[100.0]]],"hovertemplate":"US Equity: %{customdata[0]:.0f}%<br>Developed Intl: %{customdata[1]:.0f}%<br>Emerging Mkt: %{customdata[2]:.0f}%<br><extra></extra>","mode":"markers","name":"Random Portfolios","x":[0.15,0.15,0.14941728571895357,0.1487876002898091,0.14777855054100375,0.1481948482221222,0.15006375947037603,0.14697703902310727,0.14790434360364443,0.15053529486469278,0.14638647478507022,0.14944806402755992,0.14701379461260253,0.15008603670256704,0.1460094175044884,0.14906613629492646,0.14658581288468106,0.14608657481622497,0.14825906570854083,0.14669067066006758,0.1488846187742635,0.14770138239444305,0.14584752311918087,0.14693860086576088,0.14610480886654176,0.14978249783715988,0.14603454029648621,0.14699887734644415,0.1459015078743191,0.1461187111048843,0.14651533205268655,0.14598230030155857,0.146346079382908,0.14683892347781086,0.14640477316649836,0.14853417513878817,0.14609521165013178,0.14704128298186456,0.14642677931455975,0.14676130989244238,0.14654114193333476,0.14609598821977574,0.14613567028336952,0.14829449635424688,0.1461292426561259,0.14718419274532976,0.15022612676373795,0.15138857288448163,0.146171132580958,0.15015070650494067,0.14638117735573372,0.14679224691254245,0.14633493913265086,0.14639335145928845,0.14634532869767056,0.14640933672824838,0.14657550618497148,0.14723847542398613,0.1464560521605162,0.1466552078857072,0.14652417960851832,0.14846361312081527,0.14776814604743113,0.14671094506070603,0.14667362590535016,0.14654962756533613,0.14674847116582299,0.14719617042391017,0.14981717994761914,0.1467687021557088,0.14863387753243024,0.14663977092618172,0.14668291439450057,0.1469405317612679,0.14695658625674055,0.14681171478632601,0.14735162028291376,0.146839566811615,0.1470147389504452,0.146917837890444,0.14735760370736298,0.1473068907508677,0.1469233067248759,0.1473632202396657,0.14696834257250377,0.14732552037590688,0.14697257500443597,0.1495401261508179,0.14715847685557695,0.14795951875221822,0.14744875046400668,0.15116289287191975,0.14752487968237224,0.14881324308343508,0.15182429188885102,0.14700604067817413,0.14719198159410551,0.14846769004433596,0.14945566125416404,0.1476686679120689,0.14843950983239543,0.14772730425480038,0.14710509534846866,0.1471686004142663,0.14733709256191602,0.15100851206652294,0.14780377635585182,0.14742579637336609,0.14818871382149362,0.1482573775567341,0.14825871226127296,0.1472651440986073,0.1494213657818235,0.14753334387322128,0.14727417060926457,0.14789842861127786,0.1500651418879245,0.14779934650541282,0.14942740036336938,0.14763949540112373,0.14816870599643336,0.14856398322052952,0.14810150369120345,0.14783706500755622,0.1473834284795948,0.14830561419269886,0.14976175890790241,0.14835807485915617,0.14767138318383735,0.14834591008754763,0.14792455651196687,0.14772815531964484,0.14787942028862133,0.1475140318746228,0.147449332144886,0.1480537326519385,0.14789584903921701,0.1476489197323085,0.1513279474697929,0.14789391372823465,0.1487650874135154,0.1496957592476741,0.15155397275289528,0.14838441862912913,0.147826602782103,0.1525544984587475,0.14936867141405522,0.14799352978669605,0.14840287900338345,0.14758822256502535,0.14772469987953585,0.1507869668529327,0.14852601686056846,0.1524792077962911,0.14821607135729387,0.1477315154891934,0.14914680964587407,0.14775583438480178,0.1492905687610418,0.14928417667981334,0.14820531655571875,0.1505421848229711,0.1495609236104952,0.1490025226755678,0.14859439259841506,0.152129787035555,0.1489709572623782,0.14787136407311993,0.14855928943550345,0.14831633959741047,0.1502401374259816,0.14968909920461226,0.14790035411336608,0.14983621242349923,0.14827427633484197,0.14984614628095247,0.1506809543373017,0.14800583667441364,0.14845373401668574,0.14860840274830633,0.14821493087496163,0.1513717401522684,0.15069102609798712,0.1481336574231966,0.14844948464995714,0.14859566190545181,0.15045834413207818,0.1501364740916585,0.15039968379202356,0.14819383306661946,0.1500004488536925,0.1513268055872385,0.1483189887409754,0.14932097935584232,0.151019756292846,0.1524222094799944,0.14928443997633262,0.14893607837704045,0.15091928798953994,0.14899507688173802,0.15111827756477503,0.14838179797845796,0.1521890271997295,0.1504723234188801,0.1496570914085725,0.14896807232374165,0.14842184435375902,0.1492421390198681,0.1485220225716103,0.14912824924053325,0.14892201734584098,0.14871058473334978,0.14853504747184107,0.15108986419552292,0.15072022971372614,0.14859770238422296,0.15307896869403298,0.15036563621784885,0.1492209748734845,0.15199494719106302,0.14906115647105217,0.14977608680484675,0.15241592200529597,0.14864465531857504,0.15010450488518604,0.15013030810344327,0.1503290013719218,0.14898545035986785,0.15046489870145313,0.1488092002655693,0.15061613654448958,0.15027283050297216,0.14904866905204917,0.15101271270981892,0.1492309157413889,0.1524896807196591,0.14929216714347565,0.15358002595497708,0.15016130329352656,0.14906861257832116,0.14892685487590837,0.14879986904910797,0.15167027007508235,0.14991517293917142,0.14900300545023032,0.15388713396512393,0.14909538350059134,0.148984244024148,0.1503551336841973,0.1490279470486634,0.15027959237538893,0.1488845209842953,0.15066825581228468,0.1502475164636066,0.15305613086713896,0.15345532084561372,0.15282137108421923,0.15141057397918692,0.14940706224099687,0.1491383296536682,0.14975674371173905,0.14941397020505337,0.15237461320147594,0.1501744122967294,0.1490950025557481,0.1490863621025218,0.15057489583941133,0.15033464000986313,0.1546619473899254,0.15471971133954515,0.14962558369720222,0.149268521046018,0.15000439570189336,0.14973003635121143,0.15131243628202684,0.14907250640283623,0.15438013567734007,0.1496573963535503,0.14919063053576123,0.1491074223299561,0.14965889450118783,0.14909555164004312,0.14914556379292457,0.1538524539983132,0.15019550066097676,0.14936339070735938,0.15394514563750974,0.14930835781384752,0.15044819120916947,0.15382711442796798,0.15037748210632662,0.1492897052742135,0.15009822934707517,0.14921847630573726,0.14932146717295788,0.1510172026811784,0.15235435913250994,0.1520285629018763,0.1540259718359212,0.15576905982896605,0.15020210571812406,0.15081989747044675,0.14939672771706305,0.14933148208822705,0.14931731665387574,0.1493102963894465,0.1507724021211511,0.14938176650167637,0.149370735210101,0.1494371431878718,0.14950277261498685,0.1513992128327978,0.1496007492414556,0.15098135898756412,0.14942877051976322,0.1500376568040863,0.1531011130307007,0.14959177008965716,0.1525914032853372,0.14961660117885664,0.1495363039392264,0.15189712678179865,0.15187256288084988,0.15123500933895903,0.15221877929475872,0.15074510210793302,0.1496850655416825,0.15008003642631573,0.14971316021655215,0.14965688331591787,0.14959590163893358,0.15088788427859673,0.14970730730301748,0.15245972830803242,0.15243308491668406,0.15385937703671448,0.1566862158050313,0.1503099407411046,0.1519503982653897,0.1498455987681308,0.14970918709997905,0.1498875939639535,0.14982402410610632,0.15092177780718127,0.1526332485334094,0.14985538786046138,0.14977767515354065,0.14971951824895524,0.14970929391187188,0.15090308873895608,0.1504332473337267,0.15057965963209613,0.15487113854440504,0.15782822941413238,0.1502284890652621,0.14998900438870763,0.1505073337326944,0.15353168300237618,0.15128493917978222,0.14991425824391638,0.15304695986764502,0.1499453007634445,0.1498083784484451,0.1499074031453342,0.14996169751244617,0.14982831075978267,0.15113502284729213,0.15738442516418855,0.14996797126682465,0.15120217422971374,0.15085099438555177,0.15075172487379135,0.15343502206053125,0.14990385444117454,0.15129175648932466,0.15001037554521557,0.14992860676705147,0.1499534116937783,0.15436777244049166,0.15058557207511183,0.15048630512712174,0.15001570975836365,0.14995846145102065,0.1526436558793105,0.1501287251543751,0.15002372726462873,0.15009115686363883,0.15000552520155416,0.15106443973616906,0.1503178218311938,0.15452953791686738,0.15011573770714667,0.1522407924978642,0.15083496683893813,0.150076903481359,0.15011975416346046,0.15217939159520155,0.15008541180596988,0.1509401878286294,0.1503959924534534,0.1507289705395111,0.1501792530588273,0.1514877053684314,0.1508791789627366,0.15117120641419357,0.15080499520176302,0.15094602574821492,0.15086673635174108,0.15054896585113378,0.15211906618789736,0.1501663936751321,0.15015917352730007,0.15042156096701198,0.15059094389459704,0.15403989229820042,0.15266077274742815,0.15029006311935827,0.15230365665797702,0.15196732462463877,0.15144733671561958,0.15081116290483504,0.16005780205913114,0.1592595167901987,0.15025634584694975,0.15183259768570817,0.15047320418758214,0.15521434657903843,0.15376661037092632,0.15107040458815613,0.15040227784540264,0.15087481466094707,0.15050337244074977,0.15176926513576275,0.15036525096555367,0.15035824844772927,0.15142750365163987,0.15035786630349252,0.15187391822345553,0.15058779260999455,0.15386138351195924,0.1534203606772676,0.15369136667142147,0.15099732011330902,0.15081941683943648,0.15042128448907982,0.15125515423276578,0.15044512427557602,0.15539160524582368,0.15057466965092275,0.1505067935680469,0.1509622813074364,0.158071453742936,0.15119501550492945,0.1533427034243125,0.15242239942421296,0.15064043229606672,0.1516426678315048,0.1505895778025305,0.15057826914690745,0.15059258118862381,0.15062662796500229,0.15059898337221322,0.15118305962481846,0.15060392954420365,0.1508409290890353,0.15136852337558396,0.1518997687204254,0.1511020808400931,0.1581400573303803,0.15069163124350832,0.15248607429865363,0.1513372979493242,0.15223753971532888,0.15124391087056988,0.15095344579244174,0.15116567323377467,0.1506893737157051,0.15071658788814907,0.15277326379250236,0.15442497579475212,0.15696021990585746,0.15400312967947238,0.16245076177106713,0.15074125704404073,0.15143981337682821,0.15082619280484513,0.15194519554024183,0.15348675336806067,0.15303363856005406,0.15098595919410895,0.15132890944708574,0.15087357049156833,0.1508823216128127,0.15179271190574012,0.15324573285056534,0.15091686700608542,0.15757315021692497,0.1510858642317393,0.15181971700627683,0.1531902133394605,0.1510956691885319,0.15317903745883385,0.15106247453513102,0.15097407189397244,0.15459657379937095,0.1519180482552828,0.15099194820654957,0.1583601422135942,0.15512600486155215,0.15209604954608094,0.15120534004767927,0.15568776297822176,0.1520136976482453,0.1511521267836148,0.15231212511776712,0.15848941101893155,0.1524687718566005,0.15134279646820717,0.15141239275645316,0.1515603474059654,0.1515851201035166,0.1511103011250873,0.15116854775222655,0.15799687100733864,0.15153603186811945,0.15235427404839674,0.15119441322594268,0.1520724682876943,0.1512624756477273,0.15122900127473837,0.15655154741556554,0.1517210180274432,0.15163787913115162,0.15121135843176356,0.15121466460167154,0.1514105919441023,0.15579433558380743,0.165,0.165,0.15314439596435267,0.1513551430499169,0.15131467793613262,0.15212040150043218,0.15134957141349575,0.1521101739196272,0.15164431612328966,0.15136929739227048,0.15162178056449657,0.15153424654132955,0.15245991105342957,0.1515187515984048,0.15166311164069265,0.15147592393200937,0.15339463168003342,0.15209520651957634,0.15215244629756508,0.15145217665235217,0.15454417624330571,0.15275069442257422,0.15469875447841697,0.15346860089011724,0.1520495930050267,0.15309167049470604,0.15164195446690576,0.1515948625486876,0.1516840713765745,0.15155082148090038,0.15166945076450308,0.15198714278436834,0.15161932915993184,0.1517336701869771,0.15194423434710244,0.15404207873165798,0.15177111389807776,0.1523596067019286,0.15338388437678954,0.15394093615051546,0.15507583501064773,0.1536323780653733,0.15191267848641046,0.15169934976411245,0.15172348882004494,0.15173008931665818,0.15179798213427945,0.151737406542758,0.15371565939369797,0.15393408886794518,0.1518433210517199,0.15232818649662344,0.15211608456804826,0.15365267828844612,0.1530535268015938,0.15262934368612927,0.15432504969299887,0.15251846800607094,0.15338620592847585,0.1520078963002263,0.15207912250858127,0.1522930373941788,0.1559569600684104,0.15199248353124353,0.15272626764224367,0.15398702436124254,0.15200275192920645,0.15688538494009976,0.15202420998074082,0.1550140016984925,0.15276905455865641,0.1520296558339654,0.1533094593750033,0.1522551922163797,0.15219424686815347,0.15248415023564102,0.15470151275149382,0.1522181173822164,0.1521060961262405,0.1525617169826243,0.15239769111081172,0.15229069717744573,0.15221392354428298,0.1526607053534508,0.15226732612262253,0.1533040415625454,0.15253536526977074,0.15215532200008464,0.1561526144791092,0.15920569476480995,0.15217143683290804,0.15243743074444133,0.1554333556944281,0.1542743274346549,0.15340711994061798,0.152358884891958,0.15441674435151218,0.15224157727316853,0.15244380684558875,0.15556942447548322,0.15229889848553446,0.15693706513545913,0.1537461377495938,0.15227685969024046,0.152440825291734,0.15627538808355262,0.15315635697084226,0.1525594738556526,0.1560492026027599,0.15285425838387307,0.15846622372983082,0.15624820168825523,0.15269433134244434,0.15243748134524648,0.15269936977315432,0.15252437944482453,0.157827797160834,0.15236155739299684,0.15368321589564374,0.1525592290684367,0.1524809817417741,0.1605073986147506,0.15325455094080626,0.15496499447306225,0.1542766192026681,0.1527198259193461,0.1526008891626184,0.15351562800901603,0.15286007093539966,0.15310150555403015,0.1557685413182522,0.1524802292885921,0.15287223297973934,0.15254779496872478,0.15289175084636725,0.15372014068377945,0.1526268053953774,0.15259014428417084,0.1534529581823624,0.15346804518892018,0.15341653612587408,0.16423755771729218,0.15534431690553832,0.15259001716857568,0.15300066895248446,0.15284595352602193,0.15376248028449416,0.16344251951871547,0.15283002538204277,0.15579201827856015,0.15427491181953445,0.15549360318779457,0.15283094272563705,0.15278757896196174,0.15277177061654912,0.1530951954727299,0.15461877690970177,0.15309777459098486,0.1532930490695731,0.15292883983093677,0.15334247856977776,0.15313194951546544,0.1539187992230362,0.15326742506566052,0.1529167501868961,0.15454168872706708,0.15348342548264005,0.15300047625967322,0.15342129002293395,0.15323401760346192,0.15293947573909097,0.1536717779993438,0.1585713709883933,0.1533977775463334,0.15300806301142136,0.1551296986452564,0.15424612085630807,0.16477143259679453,0.15299471323637828,0.1531173352356667,0.15299985019536075,0.15314123919353356,0.15449352314724815,0.1530912585912092,0.15676590016001976,0.154304097572302,0.15311684190638752,0.1540876756389576,0.15360334075530108,0.15704298190528537,0.15316518297469844,0.15312131575535234,0.1561714757325274,0.15312189689128927,0.15532591498652365,0.16346600054706695,0.16170686257734723,0.1534289011199134,0.15913251831877498,0.153958387267311,0.1542024004420118,0.15431326975358736,0.1541564926845366,0.1534415650244201,0.15469640562325546,0.15359615660316855,0.15323195322024902,0.1533106423764031,0.1550394502981323,0.15494704699621054,0.15454860632923895,0.15532026783924932,0.15336459198945288,0.15472998785792683,0.1535808040183095,0.15436459169708214,0.15390176866646108,0.15332416079836517,0.1613100279585377,0.15418904965600033,0.1541281468759796,0.15350652493424607,0.15343337776759186,0.1536318965715362,0.1534748874892969,0.1536804015383954,0.15457322126061274,0.15341565473938423,0.15371352083651,0.1534189700336966,0.15389900001202145,0.15381807189454288,0.15762077104467898,0.15622016236091435,0.1534812680693937,0.16182615249053564,0.1535915870207288,0.1535727170169757,0.153601000211113,0.15376623733628197,0.1548361791073404,0.15359170079086543,0.15372812809544054,0.1559813912146244,0.1538318071451858,0.15478645819656348,0.15395071062486465,0.15784961197291553,0.15413963693588037,0.15373734834329927,0.1535559208619753,0.15378872593906176,0.15403531322118277,0.15497849780855422,0.15418416950315883,0.15467775463835912,0.15366833675387437,0.15667391516356202,0.15450512765699434,0.15699414353008545,0.15386347295220712,0.15380658335431813,0.1538366780407059,0.1538416200285912,0.15372959638566974,0.15771694957513674,0.1558300259128541,0.15430850232428808,0.15379447399016574,0.15380793274129334,0.15453142404103085,0.15745195737371573,0.1539011253447558,0.1549188691895308,0.15386173925949764,0.1538485925958132,0.1538524126548065,0.1541499273505017,0.1560883476310356,0.1564518934509388,0.15805887454393344,0.1546945464409284,0.1545360164020419,0.16010754099202965,0.15392696057551375,0.1546516077457279,0.1567186137138908,0.1560787669121349,0.15397581305902694,0.1544068443097176,0.16424084789101742,0.15626783972670888,0.1546820761460407,0.15507621631030075,0.1545470079961769,0.15431120391119146,0.15441800374866022,0.15468216525398149,0.15421045668394806,0.15785701716941117,0.15410432887967979,0.15657254129337145,0.1554575093756881,0.15876507720155564,0.15672023950989591,0.15414058407416376,0.15425419854118985,0.15520192600531243,0.15759021017172237,0.1542301322596354,0.15442652797779483,0.15425083203823672,0.15524449307685276,0.15903096633284683,0.15424638727383397,0.1543545810110137,0.1543123144430904,0.15489164947836678,0.1549048386505051,0.15526639154963634,0.1548723158352323,0.1543371374873432,0.15444852155679453,0.15729523387100935,0.15541117413735028,0.15821134118108926,0.16021263419321188,0.15592632407777215,0.1575736030173973,0.1577692863669881,0.1561901491731639,0.1569363296872259,0.15738922024881444,0.1545287170678943,0.15685425268436412,0.15824796624414036,0.15469172035242726,0.15823918491605932,0.15641712406346098,0.15566231141860795,0.15540121599855125,0.15525280492240887,0.15853067903809534,0.15749850430270804,0.15502990438872324,0.15462761280242687,0.1546340450085531,0.15461772818987118,0.15795580993567204,0.1554896956668388,0.1556097700784447,0.1554216094966557,0.15478359884303663,0.1563236990070089,0.1566753578083813,0.15731284193545764,0.16054367997629984,0.15470606935730302,0.15475377919325517,0.15480576807309446,0.15610805874612613,0.1549868921911762,0.15503808400702804,0.1556033834588336,0.15681935982789255,0.15557144642404921,0.15687510920250985,0.15563964988104545,0.15499565672849513,0.15507651431095149,0.15485418088632166,0.16483628241379383,0.15652115971632666,0.15485872032611947,0.15615697962714742,0.1572081450715385,0.15500240608319438,0.1556585101487968,0.15498715905226737,0.1548980294418528,0.1551552031790675,0.15580184385528667,0.15626336954356074,0.1553894569126434,0.1588807969856193,0.16354756158700873,0.1552452543976429,0.15546303709541714,0.15506810681180586,0.15710646960362895,0.15623913875442447,0.15590255959778743,0.161159356951034,0.1551036749022396,0.1550869715053647,0.16157426796136468,0.1565058169708541,0.15526017180304394,0.15871448382507203,0.155459491881086,0.15678122887302925,0.1551409654250662,0.15540655007025686,0.15515162422638926,0.1584552996545856,0.15587587134415354,0.15521991026259394,0.1575369869671374,0.15686500439060427,0.15722943481947774,0.15558907628371865,0.15647710509413915,0.15527202046168032,0.15565190172129686,0.15527528320826076,0.15530882742265076,0.1567259136593771,0.15527789777386589,0.1553453716390065,0.1554673249689149,0.15531199107684912,0.15555709609833882,0.15557071273143241,0.1565152289239152,0.1553178181219579,0.15569916468865058,0.15565972753623372,0.15553508563917004,0.15636346038943347,0.15551436395989915,0.15581199334446558,0.15964524755525691,0.15914385945649348,0.15541623685586248,0.15807831160405725,0.15774066137238968,0.15877362614973559,0.1554382621792269,0.15639409481852032,0.15917382498465377,0.15542990386911043,0.1555531302466043,0.1557159677249903,0.15665048665021905,0.1616963756012835,0.1556536931112841,0.15655077011251048,0.15770252527475942,0.15589674418901342,0.15641402254949238,0.155740927448565,0.1592554923836113,0.15644980825163834,0.1555316921246274,0.15558053512054573,0.15577593304000337,0.15888552490849975,0.15954338206673957,0.1563659286425047,0.15627482832688286,0.15841607458996548,0.16029245551368446,0.1570784567450374,0.1564231006197707,0.15574065372896453,0.15961875229787373,0.1594368512692523,0.15577705011079276,0.15570387712149408,0.15574631507207368,0.15701575591800424,0.15806779672014343,0.15760421769414745,0.15569373187793256,0.15656597914075995,0.15602442115899712,0.1588231021792654,0.15806140437794,0.15816562408849005,0.1571877618107138,0.15600926158238246,0.15577446961875235,0.1558183382398322,0.15583650203167398,0.1558082011523347,0.1571882000245935,0.15582831454062454,0.15615127777566576,0.15952810479711696,0.1558834412337466,0.15884893130066666,0.15738694386358787,0.15850633968662065,0.1562492159521724,0.15639860962120478,0.15594519106685628,0.15591315932540975,0.16479888559803554,0.15669125044451176,0.15657040478636705,0.15716250567348145,0.15827620591710714,0.15616473949498474,0.1559578981592959,0.15602148449084893,0.156004626267849,0.15677022818494318,0.15864760788440127,0.15774512516441427,0.15716150965645462,0.15602936413213936,0.15603348574103185,0.15608613348845815,0.1583051958373845,0.15607496937685766,0.15636498197833118,0.16059638076478544,0.15606012569071903,0.1560724379558943,0.15733825443324517,0.15608581229694285,0.1574674840332702,0.15744058410433687,0.16018075727127773,0.15747655624199455,0.15611662665005224,0.15922953739300563,0.1585377154617555,0.15614003729680978,0.16414406005568663,0.15627036847848969,0.1563135381948974,0.15623580976724166,0.15663763110043188,0.15786953931603495,0.15630729488014494,0.1567410200600112,0.15729848758029202,0.1562948652880753,0.15657255780389365,0.1562813659333938,0.1564699194967899,0.1568294180744049,0.15715709024246943,0.15647161236748,0.15653621840435658,0.15644930297182957,0.15682991896871404,0.15661219233247672,0.15631300499732748,0.16088271306170704,0.15654362794315999,0.1571481700559553,0.15720030093719436,0.15981628376806964,0.16016830307588134,0.1569354285702151,0.15646287086626598,0.1564492258306356,0.1563843625118303,0.1568513436490351,0.16030664025164254,0.15661543984016768,0.15690100032031132,0.15716807480858896,0.15789959364652567,0.15669949916401327,0.156869002187481,0.1565874500266213,0.15653081431263877,0.1566050540924492,0.15656477992436638,0.15730367078750926,0.1565467940459538,0.15958394622996516,0.1574206741372405,0.1566406264997332,0.15666331051069904,0.15706264146957447,0.16502956556684453,0.15984203288073653,0.15694465798586354,0.15679071532338282,0.15662749383616328,0.1603502239561634,0.15663674207219694,0.15699331754357423,0.15824980948945044,0.1568613904022933,0.15661530795107437,0.1594534249425609,0.1578177918813517,0.15742925153275644,0.15666245388694391,0.1568568497418359,0.15869374262887487,0.15720914350383014,0.15668823674426208,0.15682773799710964,0.15670630874299768,0.1567161540932453,0.15778078579637841,0.15933031120743288,0.1570214454309601,0.15702136195643684,0.1604664606494108,0.157336175893521,0.15925457337274404,0.15707277252108331,0.1574775866188881,0.1596914040584309,0.15685454722493333,0.15751604896954843,0.16519420389347808,0.15767309112906755,0.15775042249052643,0.15749705934402214,0.16113231354918772,0.15685776362897605,0.1596867204909631,0.15739229588943743,0.1631646501818495,0.15861205601500133,0.15690761422433055,0.15705831957597505,0.15773662779241027,0.15906699729485713,0.1577137556679057,0.15717982367603867,0.15731893626131652,0.16113797218945053,0.1578091529882061,0.15973893762117608,0.15765820578342818,0.1583333677566729,0.16052164425058402,0.15715121461548953,0.1569701670751056,0.16073184381831188,0.1574614050670231,0.15715540065783243,0.160670143916586,0.15702529949178035,0.15780485139976091,0.1584252402406143,0.15751890945510974,0.1593497428788197,0.15704717924413297,0.15735937915236334,0.15805450322631,0.1575038564064274,0.1593764478485202,0.15780100878797357,0.15713656845973578,0.15714213638293348,0.1574654634971713,0.1571878614858841,0.15726854056969256,0.15972884226398992,0.1571730657673881,0.15719683510918717,0.15729944125121276,0.15868164354249764,0.1588644825926074,0.15722307278913186,0.15725525082217628,0.16384426917618627,0.15731754998250658,0.1582872406457233,0.15729499793569854,0.1573571453413071,0.1573273107158133,0.15822859975985312,0.15867005994725658,0.15729788745188933,0.1573201594562007,0.15753591059639596,0.1576047040549872,0.15875585747687573,0.1581583695570512,0.16036361670589044,0.15735181447814728,0.15747182859382686,0.15762693331910263,0.15749544015107386,0.15768483238198422,0.15743741407838088,0.1591783541818921,0.16482040119626037,0.15757406907255858,0.15761543963491378,0.157490788126998,0.1577543887025361,0.157613350175348,0.15741982724455392,0.1598293068506656,0.15777282571174311,0.1605592515560227,0.1577497308051064,0.1598213617300568,0.15793001392101774,0.1594366464924989,0.15863992706837465,0.16124746645327576,0.15835392049021968,0.16063974037248632,0.15761214600065038,0.15781680042326993,0.16087642864980364,0.15813672670772425,0.1584439087703437,0.16110216802629265,0.15822338666859556,0.1590787651319213,0.16423353419154132,0.1577816008137336,0.15765571806870282,0.1576499570755934,0.15929917894438028,0.15798915556073248,0.15766096800000434,0.1604149087817655,0.15871600080617665,0.15768477203951226,0.15874486822727,0.1576914670629679,0.16088998863446557,0.15781661053252677,0.1580839975963142,0.15900253922951454,0.15883853518592406,0.1617360296341483,0.15787400120773462,0.15796516026162213,0.15784214445880768,0.15808702859252063,0.1578652650055186,0.15789680648533336,0.15823861957233823,0.1582053270753428,0.15793503186670438,0.16086580870715866,0.15803076350261255,0.15846331322431736,0.1580339276506156,0.15976448907480054,0.1581117148740209,0.16038739500473093,0.1585723550255511,0.15877431120985344,0.15803732920339028,0.1620547186138398,0.15807439744591867,0.15829476887880273,0.1609763679854061,0.15818711469229013,0.1588600110339876,0.15803449102882483,0.158180089440863,0.16059577442389486,0.1595372467303704,0.15929442742469344,0.15833694632068598,0.15844702063413943,0.16146765626879547,0.15844160559321233,0.15855960372507785,0.1587124779819513,0.1593207446287557,0.16399578564923786,0.15811364583337686,0.15973250927231492,0.15809605133013793,0.1591804183848631,0.15811277779090424,0.15825424565462495,0.16319086470000907,0.1610331492155089,0.15842081927500354,0.15932048633590848,0.15895514912610206,0.16050899314681413,0.15823281075088788,0.15820480190924052,0.15824402804927118,0.15831095384646013,0.16099608807991087,0.16147584287642824,0.1582806591032571,0.15827171587471547,0.1584184923859589,0.15841942523850036,0.15838078551686727,0.15836765793726423,0.15835332326141627,0.15963559210354797,0.15831685090303946,0.15863023411291285,0.1586108142929954,0.1587736258868977,0.15837623803644832,0.1589446877295028,0.1584155929498994,0.1584206827741452,0.16122720193509188,0.15854348098045784,0.15964618911001993,0.16154843924975243,0.15979220438890207,0.15855341845992818,0.1618667230014149,0.1595413125825264,0.1587984725247211,0.16126694508864592,0.1633344429639891,0.16013423488608433,0.16086765392883018,0.1585204237125759,0.15851607273547302,0.1638684850862711,0.15853121943951096,0.15905366023998688,0.1605655957806009,0.15867162032775897,0.15876642502326593,0.15856523328227332,0.16118696431775612,0.15857280334901266,0.1587574195587603,0.15859984453381062,0.15859745019150212,0.1592550469833045,0.15957728509585598,0.15860135295707192,0.15867203991644177,0.1587551676204328,0.15914980247685753,0.15876287286967686,0.15902889561877753,0.16128812395618197,0.15974438217325104,0.16169795567800854,0.16078131868732096,0.15874625227949252,0.15882756841706763,0.15869636413024715,0.15871999300322587,0.15869481234964478,0.1587072035421438,0.1591579295453819,0.16045577521083296,0.158777454629632,0.1626988078046273,0.1590174093597285,0.15875005549103904,0.15895637877093483,0.15884873634812013,0.15883177589936076,0.1591425025840457,0.15888681346655892,0.15990958839979025,0.16160658686402032,0.15886356292260537,0.1593077371511647,0.15884085567761289,0.15885272200549272,0.16019370638153033,0.15979738677013985,0.15899009332696537,0.15908302990768466,0.16165762884018509,0.15892148342622342,0.15999796257530574,0.15892829344759007,0.1596957923154661,0.16290564608463975,0.16277591959500642,0.16584329953302304,0.1589929160876496,0.16138544415764058,0.15926856356008903,0.15937900184036255,0.15996934823196016,0.15910604065133588,0.15908616438126963,0.15901912593226036,0.16027889073130122,0.15901423495748987,0.16101299284250792,0.15972484147854532,0.16019113726207093,0.1624810450523137,0.15914157003710933,0.15929484536570596,0.15942182594439275,0.15908024110659416,0.15921189338064565,0.15955486829631457,0.15936578358673606,0.15968231008332484,0.1594302598180486,0.15914589481451757,0.15958290069800096,0.16017747464979895,0.15973011577098348,0.15983091141342007,0.1611218685042375,0.16107480879409106,0.15971657767953457,0.15921911622536317,0.16130066737536083,0.1592174124156782,0.1593826611815537,0.16008754091309893,0.1610950954227444,0.15929223040960674,0.16064882117830762,0.159287911452573,0.15929299098461663,0.15928558607825774,0.15939255737723265,0.16102614792706166,0.15929840085882868,0.15938562163972148,0.15952302654890047,0.15932576882523652,0.15944658168799752,0.15961416425361985,0.16011361587461254,0.15941149350505096,0.1617996296414354,0.16399327330834554,0.15953502923832333,0.16011461128575982,0.15976593903354588,0.16293798582371732,0.1633505505126832,0.16033192412925537,0.16096745811449448,0.1597892528785673,0.16065937342290051,0.1608692597570298,0.15995946724503832,0.15952847487523272,0.15948404466986635,0.1594975135296603,0.159834130657182,0.15950748614243263,0.15955686842268754,0.15960010560209667,0.16048942061917634,0.1597226715740464,0.16244049422987974,0.1595494419188362,0.15958828187648397,0.15966506786719725,0.1596295605944593,0.16012657416818898,0.15960609535034354,0.1596224936782312,0.16222402116476312,0.16008021888530405,0.15973595196472287,0.15962644925159175,0.16018010843095581,0.1617300174157796,0.16117195952153876,0.15982224656714328,0.15970155822904644,0.15966062031296385,0.16256559577233323,0.16001721944863098,0.15994525542627983,0.15966175816536335,0.16289699420495413,0.16075981415472843,0.16114623346970072,0.16228644608249282,0.15968658928899163,0.15976369561770626,0.1596930046202549,0.15978094858366568,0.1603770485676879,0.15981122850775525,0.1598657700669034,0.15984423410651577,0.15991522234521752,0.1618341498359119,0.16118488135129963,0.15979822754474068,0.15983088898926406,0.16269145852943728,0.16540148122307063,0.16037955298659642,0.16196405072624986,0.1622669755188163,0.16407269562661858,0.1598796951079559,0.16008772995573448,0.1606414011545939,0.16066854150096418,0.159904519427796,0.16128725186326184,0.1599552971267032,0.16000373124063286,0.1599271748222293,0.16000771398656358,0.15994436068018433,0.16120912608818105,0.16015751805086348,0.16241328458160534,0.16227679560134192,0.16005151703711806,0.1617861307114013,0.16311987019499247,0.16000395341709786,0.1602527389353061,0.16159265186123642,0.16241881059376062,0.1601337321156871,0.1608665260321165,0.16018891198753094,0.16015114453564983,0.16000777803076513,0.1600220523923102,0.1603874990627916,0.16391101391500726,0.16052085563496665,0.16172444760933763,0.16048930710918066,0.1605327682067948,0.16271521777119044,0.16047941400208474,0.1600909085587379,0.16011081411025282,0.16175375754383695,0.1602046293749209,0.160422490527259,0.1602661879400377,0.16096382535442408,0.1602635484808776,0.16019046523502567,0.1616375026126647,0.1608400944045607,0.1603543600158259,0.16262415390750146,0.1603099658388815,0.16023728734765239,0.1635362608313324,0.16066398807160065,0.1608420823578387,0.16129399933314423,0.16027458396139513,0.1615523227808083,0.16257724310806354,0.16254859785720296,0.1603982556629074,0.16028923764537267,0.16035267990961843,0.16035228146843922,0.16122926817418615,0.16055331340841295,0.16333214683039382,0.16054775382839911,0.16045349770807477,0.16046702180262767,0.16067910682194647,0.16123962410713683,0.16363900071559218,0.16039962515699582,0.16233556225269974,0.1604445119710795,0.16067552811578723,0.166309516839463,0.1603856551347962,0.16456507764082307,0.16052565867749952,0.1628306575317363,0.1606478524965342,0.1604902211882569,0.16357336629149696,0.160804639610541,0.16103326428700984,0.16227726047749233,0.1604555674000412,0.16045592627156816,0.16048904738239492,0.16068873208775564,0.1604939737125235,0.16051260517398974,0.16133581176659084,0.16058015182265634,0.1605343194819813,0.1605132041270958,0.16053341164554796,0.1606958325119033,0.1609877554306929,0.16057647283199936,0.16307714446918314,0.1634050409914536,0.16059413108834342,0.16237783217102617,0.1606049945847894,0.16268451737109682,0.16361018483178236,0.16189136124311054,0.16125508830104882,0.16285863585565657,0.1606233557335352,0.16064935315922874,0.16093735339468052,0.16113988955044728,0.16070342942347354,0.16081395146891114,0.16418762446617138,0.16409923992504005,0.16076996419003756,0.16070337845976762,0.16074486325353726,0.1608184386254229,0.16080370293915203,0.16076073737784952,0.16330976659221877,0.16098719482170268,0.16181225791403567,0.1614319920996366,0.16644771658657018,0.16133262022733827,0.16087860404913445,0.1615152598972964,0.16102884015810107,0.16133892182767756,0.16190315011837758,0.16092693954648715,0.16188898592544282,0.16090344124735223,0.16269281971912275,0.16084992555612904,0.16089947048176112,0.16198298899036678,0.16291850591461354,0.16091699398649853,0.16177768749432905,0.16134661508900766,0.16087369263557602,0.16144622984810475,0.16088271607897486,0.1615722505368043,0.1609664874613332,0.16104647315282253,0.1625838159080827,0.16547010723813751,0.16092416561020462,0.16099917068187955,0.16308390766623226,0.16169086372820615,0.1616821377415262,0.16118616660103943,0.16179246871591463,0.16153338397856434,0.1621302692538485,0.1617742867512098,0.16281100745788518,0.16361245850287073,0.1662405635757652,0.16113912476402112,0.1618112791751669,0.16186483688158843,0.16403581803008213,0.16135223543767932,0.1616617843063113,0.161409269780069,0.16170331123398282,0.16118098332341918,0.16513043480516235,0.16116751078206226,0.16121408297095396,0.16370210439653968,0.16678016968452816,0.16129509018886332,0.1614280461323969,0.16209274552939137,0.16177027224871035,0.161248861182408,0.16396058300809846,0.16316190260333796,0.16147168949248156,0.1613199401266261,0.16169623902706134,0.16128562065397392,0.16132129885169463,0.16162255340079615,0.16211289440377966,0.16136082464095441,0.16139099571131107,0.16253539975489104,0.1623744627322647,0.1614684537440173,0.16264834779239215,0.16144431609948565,0.16180735616327072,0.16239023261239377,0.16159878663468935,0.16148130809303912,0.16432741428129582,0.16211583953035016,0.16175759272993462,0.1615564961622222,0.1615768970221393,0.16160262295949043,0.16236120117766797,0.16178388424437845,0.1632008603856874,0.16670977246788912,0.1617192513769493,0.16353901461941184,0.16356633183291577,0.16401144643459042,0.16189895032242915,0.16386074010064056,0.16193921547496015,0.16175245861662382,0.166469777041555,0.16198623598075704,0.1638181823044836,0.1635458229674828,0.16291170629033,0.16193128857739172,0.1618258734975912,0.16234867021025803,0.16184191385695432,0.16285800097516412,0.16462222865186438,0.16186690642124257,0.1631253699325166,0.16198100630677129,0.16316890081916113,0.16357185207787717,0.16210208885054475,0.16420180524047265,0.16244635876080507,0.1622311627677423,0.16218250182087754,0.16269563742178406,0.16347002906731195,0.16202957910328858,0.16196749149898418,0.16562268866311763,0.16200992934093486,0.16262066260082447,0.1620500020865245,0.16473850081321958,0.1620194420545882,0.1632165981009418,0.1622816782782624,0.16219482204389976,0.16212849692267436,0.1620434439893859,0.16329042165889163,0.16284183246511166,0.16542462343809092,0.1623502877975508,0.16231667168701913,0.16225300810613258,0.16325431265981252,0.1621346948382331,0.16218341571896916,0.16232391512552638,0.16368996489877843,0.16303959166228157,0.1628228838593937,0.16298061890206386,0.16237433613359176,0.16297777732607094,0.16218718026359805,0.1638412010243005,0.16524816786017105,0.1640818487049811,0.16235460087707362,0.16232207557208117,0.16359935649595733,0.16227381263399204,0.16230731385599265,0.16414207048173857,0.1636189011401162,0.16404740368478302,0.1644439158093121,0.162693905558594,0.1636416275673374,0.16234603129528674,0.16234734216888633,0.1628926924552483,0.16237341717528067,0.16400706684706723,0.16558134349821996,0.1638409285624469,0.16256985212300754,0.16595001017392877,0.1627662432731389,0.16428707797447836,0.1624943200556069,0.16252381639368388,0.16320069674426027,0.1627064747523761,0.16248144319720378,0.16425630379214415,0.16282796284961948,0.16311617120049002,0.1628806400157941,0.16300430536511118,0.16410611370436937,0.16258566176184813,0.1630906642157117,0.16480791843849488,0.16515479372717748,0.1630643636649766,0.1632379449499097,0.16442244741166478,0.16266972184043185,0.16263951687094064,0.1641626291765148,0.16266678631800016,0.16315542751390674,0.16342664820080005,0.16272127040881326,0.1627129357404302,0.16355540162738366,0.16288218640692098,0.16352574707270448,0.16556353134459334,0.16271974344201479,0.16333477360080936,0.16331671919333426,0.16487352617217868,0.16289936255730364,0.16275903136088915,0.1644701195386035,0.16316520532610063,0.16284839257057915,0.1640445666695962,0.16306208914553355,0.1641356174148268,0.16449533900565028,0.1644504557693304,0.1627944616507206,0.16285082157902908,0.1628121454915338,0.1628124226171248,0.16606194810901778,0.16301403901732836,0.16443619787874858,0.16548930148975774,0.16524060300584392,0.16287686030655632,0.16615889894503005,0.1628586252071412,0.16387100797062373,0.16286002758375626,0.1633109836378209,0.16290119471642195,0.16402529137733057,0.16354816823140794,0.16476812862555792,0.16650775889295696,0.1642083337798015,0.16292722975357687,0.16344506025293784,0.1632040847981845,0.16555202964441457,0.1632842838802479,0.16382027700911378,0.16333361973782143,0.1647948252002541,0.16429102427554315,0.1631706802968016,0.16310337696240193,0.16297089066302578,0.1637962743335978,0.16377124032849497,0.16402223558219442,0.16358950355061277,0.16307663792921492,0.16316651116565936,0.1630307205067672,0.1662544921501974,0.1639105185881371,0.16307638338154312,0.16587822320701218,0.16329669415534817,0.16331391267873346,0.16495334733522773,0.1644303508645362,0.16331113181387566,0.16382104022181218,0.16314538430056263,0.16406326036540572,0.16316877086502227,0.16548376620313604,0.16410007567497534,0.1632501713602591,0.1649214467623662,0.16360332187140644,0.1634698016878075,0.1632586917534731,0.16345909676729875,0.1638426287637547,0.16333381713983422,0.16336853880420318,0.16416469223240193,0.16332302474562355,0.1633826809180729,0.16344980562087008,0.163325648223498,0.164582058294814,0.16351980369770652,0.16335244996268236,0.1647454311571462,0.1639712518137796,0.16682002082047445,0.16344765918748855,0.1646378795570506,0.16357188492511374,0.16362493189516317,0.1641343502258265,0.16352828334269748,0.16556535192260408,0.16365273007963127,0.16372633326577218,0.16344537630158987,0.16360189375983072,0.16424747639661522,0.1634568590772538,0.163557824193868,0.16427612161547098,0.16349242564922717,0.16415092350723526,0.16631932330518162,0.163763094688403,0.1658757084001376,0.16364721494202372,0.1641328676062635,0.16374959780327092,0.1640510197540154,0.16659106662158746,0.16390274942928365,0.16727315303655418,0.1635901800424074,0.16536069179592877,0.16366156094080986,0.16372639109733514,0.168,0.163635464813335,0.165632193718517,0.1652699311130417,0.16443660139064328,0.16650525104476402,0.16367327582649494,0.16393335079715027,0.1639438279383942,0.1660141291793423,0.16418195131679605,0.16399048354610002,0.1641862670786324,0.16379462710171705,0.16411514323331308,0.16382678181268895,0.16419163357921335,0.16393181475596882,0.16420922656062836,0.1656542970509658,0.16382208235667914,0.16583405158249634,0.16385206269611646,0.16385356998989078,0.16499500021065824,0.16392605635633029,0.16391437266722633,0.1641905233583663,0.16404333981990396,0.1659587653682792,0.16542239449044704,0.1653358836719428,0.16462194993175283,0.1640064365079247,0.16431637633992294,0.16446266579081947,0.1640399443939406,0.1649531057953588,0.16504440389227656,0.1643055089621714,0.16391822751640894,0.16473283391727223,0.16464791325786213,0.16559907128785512,0.16549044055453188,0.1641935435652845,0.16490979847650453,0.16426157074847866,0.16670324268706097,0.16586571558442836,0.16415650501604004,0.16465792811874574,0.16435953754732258,0.16418506521624168,0.16549785516361765,0.16448276339465293,0.16421226789451,0.1644492288763661,0.16580001018047544,0.16418648992632548,0.16436599042825856,0.16441687849211029,0.16557697799458476,0.16409925611276668,0.16515786930783014,0.16540616282294415,0.16819887038920062,0.16478981344888274,0.16480718435594272,0.16598232995828288,0.16573888372603618,0.16588296189495513,0.16660173857128602,0.16434332538832824,0.16626434263735781,0.16565549364880439,0.16745163628495505,0.16518901202635797,0.16699999379497193,0.1647577506930078,0.16471755156202353,0.16461256312819827,0.16548963836181602,0.16495032401799983,0.16726967938772863,0.16441966685567655,0.1650197168993937,0.16564290224883324,0.16564702646974977,0.16716662708717833,0.16446763335358652,0.164450683596313,0.1644722441303949,0.16745098403233613,0.16736427993888955,0.16503944496165954,0.16715684158285948,0.16497707201900708,0.1661366238076747,0.1647464920988463,0.1647720653738768,0.165462037081827,0.16460226556796953,0.16469257943936016,0.1672812359834466,0.16527522565292307,0.1652271340723295,0.16642656373102346,0.16632465544918443,0.1676159691861489,0.16556343952353328,0.16770343909143687,0.16629323617400463,0.16475431029320847,0.165154558670281,0.16696124163718523,0.1647593427773411,0.16730413831396773,0.1648043659461867,0.1648067555828958,0.1647759048712935,0.16604239137154672,0.16490785590714063,0.16623821789063553,0.16823555683667496,0.1683384298550172,0.16485053696920457,0.1648880736126542,0.16572915148815132,0.16494583856462192,0.16516232223579982,0.1653555190117044,0.1663992135811925,0.16648086872758477,0.1660588900285624,0.16503831903981733,0.1657321057596816,0.16566705390760267,0.16587242746290312,0.16747297318782636,0.16503827002639504,0.16616048229324357,0.1681610531161744,0.16509693449928647,0.16531401245069413,0.16649382569483853,0.16668201730250257,0.1652140885342904,0.1659804382657946,0.1670140041917667,0.16675701863949466,0.16517931903378616,0.16527389973374143,0.1671883780312826,0.16530889340659666,0.16731210106909017,0.1675555596365022,0.16850427563482634,0.16533536005284924,0.16557144816768746,0.16581860592431355,0.16536352525961345,0.1668254446921432,0.16529282010494287,0.1687083281880299,0.165451660323818,0.16535288854005142,0.16534385777428318,0.16535282605574766,0.1671386447444384,0.16822260216494261,0.1660633008221421,0.16705088574750868,0.16662719669053155,0.1659667319320145,0.16543296424375076,0.16539976932818526,0.16554494735720585,0.16830038854159438,0.16628597090195485,0.16790866655672043,0.1674391394821277,0.16583965585723373,0.1655537946702965,0.16654232284903167,0.1673486251154929,0.16560298383034713,0.1657137609971802,0.16559464902931406,0.16859452304725397,0.16564229288817844,0.16606469542801938,0.16574367124822473,0.16561742028696824,0.16667189782765962,0.16570819062958536,0.16587622964763374,0.16662912954224432,0.1662018746419431,0.16580262991771763,0.1660291289930905,0.16585261354890013,0.1668194165439031,0.16568353732771635,0.16579169779964315,0.16659739178104455,0.1657585057138839,0.16576095266171825,0.16578799234253147,0.16642746604348374,0.16589357712045386,0.1663448107290973,0.16581752839656264,0.16677073403223117,0.1684802175279263,0.16763716616433236,0.16770608669554454,0.1663280044182712,0.16796908810375352,0.16649982018485907,0.16637502478859084,0.16818923622640877,0.16583793311552725,0.16619012637560474,0.16588691669109748,0.16587249973223897,0.16704309229224812,0.16592933089579853,0.1690457113136294,0.16758518417865895,0.16594027702934347,0.16593852610560586,0.167972161820712,0.16618116762504836,0.16909873830424157,0.16638005899339328,0.16789334826848856,0.16686434520774157,0.16600424471595393,0.1662723719856381,0.16631112978122298,0.1663023396622815,0.16628155289883578,0.16636703664886973,0.16675905572997182,0.16709764834248853,0.16624527021417287,0.16615158341870012,0.16949668138344184,0.16804126868385236,0.16713358209209203,0.16618340190542907,0.1663076924613256,0.16669393450201253,0.16844606033237786,0.16852754112889076,0.16935257416124086,0.16650736372263367,0.16842546769108582,0.16641942562797424,0.16915391901204274,0.16629038641978774,0.16631354669032142,0.1678547308234175,0.16718580571227512,0.1692504301216261,0.16648228190051434,0.16755522149199994,0.16645443314673528,0.16678685424058584,0.1663947796319961,0.16784247129650667,0.16711755019895452,0.1668164481344275,0.166503961018209,0.16773880629034368,0.1667017760652717,0.16661144557254817,0.1673955757100645,0.16848544498419876,0.16884259856369818,0.167124646567731,0.16696352336688636,0.1672978396198834,0.16682141780519616,0.1666225348161028,0.16688707413052348,0.16717340755504767,0.16888278358595776,0.16750685379661565,0.16918940873496582,0.16943666477132513,0.16750042061055678,0.16687547738307013,0.1671064744285745,0.16698130533883082,0.16877564710484233,0.1666830838413283,0.16795754303195679,0.16810126073265108,0.16669527874556112,0.16803125844685907,0.16673397580727553,0.16788752854928674,0.16928629879098392,0.16722091234839934,0.16702630919614408,0.16991037814686283,0.1674832972741558,0.1668249981976939,0.16687505249701348,0.1695454954974544,0.16760765617072107,0.17001360455166828,0.16760492177823105,0.16703856588489804,0.1670548405874512,0.1685532804186191,0.1673540561532526,0.16741572977716718,0.16932126233666783,0.16869053384631952,0.16720707296759907,0.16702962398555057,0.1670264668634504,0.16700810591070883,0.16708161093872695,0.16755604632637022,0.16902322023200694,0.1680230606951632,0.16896902637031352,0.16840245135401813,0.16772639246493676,0.16714404089819945,0.16835759627729044,0.1672181357020778,0.16734865033584637,0.1682495276505825,0.16873263379640496,0.16732766006769978,0.16743267359584213,0.16729026602915886,0.16834456220845176,0.16773352375039075,0.17050932721692474,0.1675968915815246,0.16812162533727262,0.16783830842387418,0.16742697601523165,0.16785516635813438,0.16814089714316247,0.167908453409444,0.1675597084837969,0.16830162765002446,0.16765159121142906,0.16769643508726953,0.1685576619781372,0.1704302231378748,0.16761404540474106,0.16788646152817607,0.1687701691420452,0.1687635143576958,0.16921992542561387,0.16817401843821123,0.16817704381663903,0.16828721366934712,0.17004463344207255,0.16839277918244522,0.16779168419550475,0.16814101482972507,0.168163540912844,0.16784582982261512,0.16828214674963238,0.16790577163131248,0.16799306169134365,0.1679700499742531,0.1679312651553177,0.16795524026899633,0.16877027599692115,0.16794565145489274,0.1682284823334296,0.16851524047876817,0.1709381846049671,0.1683027145361101,0.16808539165249398,0.16809432655066198,0.16804627590850504,0.17080785810193744,0.16832057942515954,0.16807878085468764,0.16947904294426092,0.1702136789338056,0.1698838877191393,0.16869057884652305,0.16934216244078035,0.168794751136139,0.17014168862697082,0.17046340391454956,0.1690947291676017,0.16823370340511365,0.16827628711480208,0.16866682017394613,0.16854241388076383,0.1701707244638171,0.1683592687474018,0.17012677487544867,0.1705600514335975,0.16863600296050316,0.16844509456052204,0.17061004253176182,0.1687985878297805,0.1692296294410902,0.16849081397224386,0.16866516794548764,0.16955316654491348,0.1710693982407451,0.16887248694802143,0.1687737151993915,0.1685854010566181,0.16878395321986422,0.16873916524729285,0.17136720295406113,0.16861081753224616,0.1686743858353132,0.16887237959943083,0.16895029971290754,0.17063074746565637,0.16914303908773728,0.17076987727261614,0.1687660473883138,0.1696808649464711,0.1690250734322069,0.1707561570024074,0.16916057990192832,0.1691784022180518,0.16885243777771963,0.16961728624305836,0.17141470231492012,0.171262955714305,0.17201998430414997,0.1689437472208645,0.16977149832497823,0.17176833179112944,0.168980534867165,0.1693981695397894,0.16897577319009346,0.16914588750447787,0.16993877509884028,0.1695895139298301,0.16913077670411844,0.16901273770851122,0.17194580114203772,0.16910973650931427,0.17174389655409963,0.17026616916103074,0.17125894468397115,0.16925583844839598,0.1691542506679907,0.1694854688719531,0.16941941185650294,0.17015274184247567,0.1701534369372404,0.17013959895740602,0.16928439166445777,0.1712559556971243,0.16943794211131188,0.1694269143778342,0.1722395332129276,0.16960730733735088,0.16945645247554442,0.17021078627405828,0.1713732262776423,0.1708430169322752,0.16979363145902104,0.17043825422414519,0.17018456510424682,0.16952918902784456,0.1710227995934728,0.17000286391563943,0.16993040698341214,0.1696339769152538,0.16983322451244773,0.16974544498803457,0.16963045072421443,0.16964099467062232,0.17141855951148563,0.17181549559674159,0.17231406167815988,0.16969258856460917,0.16968232803158126,0.17102841548537007,0.17089627400526586,0.16991842582162814,0.17113418919876328,0.1697222925463324,0.17001900855528101,0.17131914929353828,0.16980091060435784,0.1700475080365589,0.17251563457521088,0.1699902402975348,0.1698518210461597,0.1727767142445995,0.17274877492823978,0.1699137857879707,0.16995365934821144,0.17005277217125736,0.17169499362972754,0.17241023204393896,0.1699768115644407,0.1705544817416202,0.17077725462049925,0.16997924235823644,0.1712101549238076,0.17017239077249016,0.17093087533997967,0.17009621369750466,0.170264594350819,0.17039667845395856,0.17012699056654515,0.17039723808100973,0.1704977793669338,0.17073705649825674,0.17019873756162762,0.17040703584009692,0.1727664707397146,0.1715150819368828,0.17047193447105663,0.17088946730573187,0.17063646232849258,0.17116292615378678,0.170537864034408,0.1709479133797427,0.17310491862647545,0.17052295365473166,0.1705397072717739,0.17037417070742802,0.17149943778906182,0.17060453726123845,0.17069397071935272,0.17071762405910443,0.17160052578716434,0.17058926945885775,0.17074514217722425,0.17055887137827133,0.17058418680838136,0.17286176467632358,0.17206284311965123,0.17056699611391987,0.17074375436623154,0.17071688847829258,0.1706644149512744,0.1708118447967876,0.1728098226472081,0.1731925465647227,0.17115457199185855,0.17109581127558537,0.1708481362433239,0.17065282191253942,0.17324719726528412,0.17251674583922946,0.17238758145368946,0.17113822476943605,0.17222126231230275,0.17088231804045936,0.1715084273532602,0.17351643843822914,0.17105942261279522,0.1726184821892211,0.17201785511297854,0.1729457130801721,0.17102067992876602,0.17174089985086213,0.17156598111699747,0.17356635185437125,0.1710868936136012,0.17266503268961994,0.1725061279254211,0.17109011493278048,0.17179272944248888,0.17244003981717607,0.17157762524933334,0.1719827553440505,0.17140981686027193,0.17253510691488014,0.17122350009595902,0.17161606766126583,0.1712861615232938,0.1712036922986765,0.1725942802590777,0.17132345013713213,0.1712847208787199,0.17257709894947015,0.1715565479103206,0.17158115055461967,0.1725658580651153,0.172178088421416,0.17386462266491295,0.1723288640199998,0.17178207775101664,0.17220994974695855,0.17161752031399372,0.1718791486267656,0.17176440915536104,0.1721963694629946,0.1719705521118344,0.1723497871332466,0.17164694540251843,0.1732905796631773,0.17243729279376496,0.17247145668718267,0.17174167929640347,0.17164031069646538,0.17322583050768298,0.1723644519075133,0.17216290404412551,0.17202971169798903,0.17170517066020327,0.1726628865964017,0.17175636218853635,0.17254345173504598,0.17259678925947144,0.1718401977401979,0.17380687123135835,0.17255371685628293,0.17204026291277955,0.17476405166829365,0.17211693453889484,0.1725953571508836,0.17213137484864496,0.17253027672543356,0.17208855640744683,0.17270046704315148,0.1724220271358257,0.17420637202228384,0.17201753351412621,0.17200396291877829,0.17205501138554735,0.1723002260803446,0.17229187499539997,0.17273835900568285,0.17214806400257476,0.17275945939781062,0.17437706032110542,0.17259706504167538,0.17236444649945612,0.17295406696217505,0.1724959654157649,0.17295292190497982,0.1728213481961052,0.17365856693929088,0.17261478188969184,0.17315509698869327,0.1739183548291216,0.17246439272196248,0.1733222344682689,0.17259972703265217,0.17272730569115177,0.17392461214824345,0.1733893290558367,0.17554486605993352,0.17351267740104254,0.1726540878252253,0.17337796246792803,0.17269926264267157,0.1726479063207506,0.1737962192846556,0.1735555872829761,0.17395113681538643,0.1730504205398775,0.17276902484746523,0.1733596728342754,0.1739198886257663,0.17353147395833218,0.17339237470444835,0.17295792709795835,0.1733938325775101,0.1737407944424788,0.17333071842654993,0.1738238811891624,0.17319091284237986,0.17316155596482144,0.17295138811571367,0.17357214097788667,0.1736933866139227,0.17388387329503685,0.1733880434696054,0.1732350862111091,0.17322105744623265,0.17326253180534487,0.17362902471990235,0.17350529032509007,0.17329980114576557,0.1732972252577879,0.17427053025557843,0.17356170678454483,0.17387902760217597,0.17345262424271754,0.1734249976617268,0.17349204914171626,0.17386904375335205,0.17437348679425463,0.17393126075504192,0.17443554946692724,0.1737202611650384,0.17429055664124798,0.1753691798340951,0.17528299738870573,0.1737250487927978,0.17369024094542052,0.1736337022824454,0.17390634432802332,0.1745596224406603,0.17388693913213912,0.1740918338854394,0.17521965797942338,0.1741816305681633,0.1746642354597589,0.17562025023572786,0.17393549526767996,0.17502106039779514,0.1740835850995667,0.17446856339945577,0.17454594227575104,0.17467941181430618,0.17408303489373372,0.1760132463180457,0.17531169045355163,0.17413427379407598,0.17472089112154843,0.17426411918466386,0.17423490461357957,0.175375604609307,0.17529597002888544,0.17498799583035235,0.17478338423863488,0.17557049866079438,0.1745351926551883,0.17525641401129666,0.17542142817125309,0.1752784508368027,0.17677025376775313,0.1747547299224552,0.17635522481949076,0.17515081660251672,0.17756801514101656,0.17553635796956757,0.17526791917952522,0.17492345109830368,0.17530617877906776,0.17489545848728127,0.17510254904016337,0.17532188812443392,0.1757829352456895,0.1759607817757574,0.17504236746488566,0.17734086581684677,0.17540961396579086,0.1764052526224682,0.1754624164212816,0.17588899512498882,0.17542082838647968,0.1761316498852966,0.17577590227664242,0.17747359135875487,0.17539539748877075,0.1753505570400335,0.1761059975474837,0.17692087394254216,0.1754314765739242,0.17569096268267445,0.17541103407147932,0.17551704481601788,0.1779100783648544,0.17787568960206074,0.17642549246681002,0.1761302730013483,0.1757146940085764,0.17706178885218254,0.1760050279993357,0.17772691490891174,0.17754353096017703,0.17640819996800172,0.17757404699956977,0.17597805427093124,0.175902417974872,0.17642864263017718,0.17597335492457927,0.1760987474320934,0.1761374187699478,0.17730939849267505,0.17665129045521855,0.17650519501084083,0.17607220910806826,0.17671613079123225,0.17641201454923425,0.1764289933946982,0.1784144038990511,0.1775130925710888,0.17682686504721581,0.1770617236716994,0.1768522409523665,0.17766628887946648,0.17927039632912065,0.17779571845132164,0.1766564662651811,0.17658331118727041,0.1767413218981404,0.17672986500907345,0.1766819642562824,0.17736600305254,0.1773827446644342,0.17880325527820065,0.1767771996493573,0.1793912227335925,0.17773318877383654,0.17847165718424002,0.17701246569921822,0.17704625257503767,0.1771750882471267,0.1769674113426402,0.17729865625805047,0.1777593511359285,0.17980732337216615,0.1774787012710231,0.17731539177865602,0.17739812090516294,0.17730646977797326,0.1771541580270203,0.1782252526949373,0.17878644580020314,0.17733546889481233,0.17782834300126033,0.17867042209081455,0.17762601418327145,0.1795843031088093,0.17999738311556146,0.17783484650620368,0.17809302344561398,0.17862218904103694,0.17787008376606983,0.17820107727644643,0.1776465677856927,0.18009991932562341,0.17816085405160664,0.17835877194311198,0.1783216928518292,0.17864559712412822,0.17794293043655565,0.17890830102376132,0.17794304166316835,0.17858361512935092,0.1790454025126883,0.1782580132097311,0.17977444839457712,0.17804501835508701,0.17858551245204776,0.17847760548643296,0.1781612512907445,0.17919752317066406,0.17892591485478057,0.17831290220540758,0.1783433231179722,0.1786255118543852,0.18036378609007492,0.17876772223568163,0.1785985954438809,0.17843289949723387,0.18095122243594935,0.17878049955803146,0.17889107461304907,0.1787797351371815,0.1801524962519012,0.17876212274627878,0.17882250959368198,0.1790343853975125,0.17888378287282766,0.17893648884049493,0.1806509508964814,0.17932425803697372,0.17930774510865088,0.18006488581750274,0.1792848793706092,0.17942941531681375,0.17963022121890249,0.17955847310217848,0.17955057927316426,0.17958257152762494,0.1795873205309393,0.17971583032093286,0.17978347966171168,0.17990336620246566,0.18002418105049828,0.18014654858609747,0.18165174728099276,0.18120936068151355,0.1808413963579519,0.1815175487002697,0.18025605875206158,0.18017944640541322,0.18022693330549314,0.18037149960721435,0.18028999143772947,0.18052725180716228,0.18100765440429656,0.18048814950596637,0.1804706841404873,0.18037798674467717,0.18073110028248848,0.18059719838147903,0.18172381894459394,0.1808480024772184,0.1831843333912592,0.1810513692993888,0.18069644299919477,0.1831284546454397,0.18114524516839414,0.18076077428478282,0.18192153227732727,0.18099140398219948,0.18110218037209905,0.18111355745655222,0.18140053312046187,0.18160457511959235,0.18185207709793594,0.18158021611544511,0.18323148203999157,0.18148905568067142,0.18173087640779495,0.18340452170768742,0.18176763256312878,0.18368066243973757,0.18169514701148098,0.18278074252038115,0.18241950717458566,0.18190560846168877,0.1819132084731707,0.18193352595980028,0.18224746775356343,0.18302428932608675,0.1845930701357077,0.18365334005292258,0.1838889548411568,0.18270420324747272,0.18458692591991419,0.1830612186273,0.18305951438900125,0.18326025839031,0.1847945697898966,0.18460226043338732,0.1847507767156511,0.18485209814522052,0.18382498470012174,0.18409296039200146,0.1851424669309379,0.18434277751845402,0.18393384817286493,0.18395255270221994,0.18549466958272962,0.18428513626354656,0.1841372009359029,0.1856984638411601,0.18626384094804033,0.18436374567113276,0.18510637717105138,0.18598906349486177,0.18581237937336215,0.18480577440237175,0.1846936885067648,0.18727486483775657,0.18501288076745903,0.18537394628586018,0.1850135545643171,0.18610335284856636,0.18551270842424272,0.18515586382152194,0.18687075240949622,0.18697124938533974,0.18583213117877886,0.18573773530705776,0.1877919984317555,0.1863356736604651,0.1865707899520243,0.18762419109751982,0.18650766668540125,0.18644086353514305,0.18734252151729977,0.18642591285819377,0.18734114783152747,0.18684861746532466,0.1868823511011698,0.18909463525464384,0.18850737678388788,0.1869775626885517,0.18748673748621372,0.18701336850610437,0.18905227712757722,0.18839894629223564,0.1873037136716793,0.1881708238244805,0.18801589638266855,0.18950033559409876,0.18853889582101244,0.18812735574828895,0.18833338174334285,0.18824754001079147,0.18832023970752276,0.1890993562489448,0.18848172493875343,0.1890912566116178,0.18997908468696095,0.18889723352809773,0.18907933516763153,0.18905040736843443,0.19006703238966538,0.1914109793294351,0.18971300863168092,0.1915306763941484,0.18991131463260144,0.19000175089813628,0.18976698157700458,0.18991785657939603,0.1905866506847233,0.19105827268524395,0.19152199000321718,0.19152049875813082,0.1902900928434814,0.19075583406390856,0.19130561223740586,0.19040253412179156,0.1925136752506172,0.19138457843647916,0.19296782528561035,0.19266361601596366,0.1918027479335339,0.19218209461491506,0.1911419913341883,0.1916666620520822,0.19129514434084377,0.1915705143155204,0.19249569529410232,0.1922326329665595,0.19241038909671185,0.19194266472468552,0.19343999983921847,0.1932436223128011,0.1924075093065458,0.19316109851303478,0.1942085138752156,0.19324504825717878,0.19422365411031417,0.19398195792392653,0.1959409987725897,0.1960126191491521,0.1960050731570463,0.1959890945209191,0.19624142624298455,0.19656262075324032,0.1967864299133586,0.19855337296464065,0.19774130827927683,0.19921713022247192,0.20049563586272892,0.19967569243192917,0.20004731404306209,0.2007088999890919,0.20019057379970748,0.2016705233790997,0.20276091308507863,0.20219771870778144,0.2051849775202853,0.20575987218114222,0.20758288734561142,0.2091882150688192,0.21,0.21],"y":[0.06,0.06,0.060192581712310254,0.06025,0.060500000000000005,0.06063396209867026,0.06072307803689027,0.06075,0.060750625808198545,0.061,0.061000000000000006,0.06103117397963243,0.0611705919752342,0.06118387260360803,0.06125,0.06125845791683769,0.06131894485589881,0.06133827803747667,0.06134183579400523,0.06135641913655341,0.061379795832993314,0.06142857148329134,0.06149999999999999,0.06155854250909713,0.061616561718749095,0.06166561884319547,0.06169202616440015,0.06170845468102334,0.061750000000000006,0.061750329041484406,0.06182875931343479,0.06182935902136956,0.061839404722114015,0.06185293476219864,0.061862836257671645,0.06186739796329612,0.06187515935754764,0.06189477000725277,0.06190178216899667,0.06190202634623322,0.06190714990178844,0.06192898149733743,0.06195302047134737,0.061953755277522546,0.0619752832584087,0.06199863601521054,0.061998882395927886,0.062,0.062,0.06208936279667383,0.062099749510863785,0.062117997210232784,0.06212942072562241,0.06213294705661827,0.06213349510441193,0.062191991016182405,0.062199153857637225,0.062223911350953724,0.06223173229530006,0.06225,0.062252881964059086,0.06225405310470715,0.06225601532596151,0.0622883916201849,0.062296665992891714,0.0623001163172955,0.062307515514679813,0.06230771830763611,0.06231607950873107,0.062316139612985016,0.06234857063339686,0.06237050454329589,0.06239843222472565,0.062415888452748175,0.06245659357479921,0.062484762856486895,0.0625,0.06251376837776722,0.06252142485522262,0.0625261068166935,0.06253597671229383,0.06254285070222412,0.06255161608060418,0.06255213543765342,0.0625634259846845,0.06256379319102119,0.06260171633904324,0.06260554576636047,0.06260587483644171,0.06260822750803262,0.06261483430592542,0.06261984438885196,0.0626211713686457,0.06262265240298995,0.06262280702092025,0.06263217321508108,0.06263308254990185,0.06263682746736411,0.06264104124431606,0.0626493342716766,0.06268284633704992,0.0626832642309319,0.06270097993313055,0.06270285444087396,0.06271015242200478,0.06271038810992467,0.06272381537671487,0.06274151154082404,0.06274896179525431,0.06275,0.06275063743161186,0.06275507277758198,0.0627557090457247,0.06275852180732489,0.06276522656775826,0.06277679075995424,0.06278528784664653,0.06280880360999004,0.06281253873940287,0.0628271419236071,0.06283878448902466,0.06283949384066077,0.06284729769295862,0.06284860290894907,0.06284947826496651,0.06286751359412317,0.06287683389045663,0.06288707234949466,0.06289897533471746,0.06290208663281421,0.06290609665329375,0.06291213006955586,0.06291450896284875,0.06292521150387029,0.06292743345025112,0.06292763790959018,0.0629325575864976,0.0629337129980347,0.0629353052232565,0.06294201524627614,0.06295575208012139,0.0629638388655982,0.0629711682256942,0.06297907479689636,0.06299352811268179,0.063,0.063,0.06300074626287652,0.06302091161868789,0.06302124657557999,0.06302707117841455,0.06303009492495329,0.06303994511764426,0.06304574123023568,0.06307720014540402,0.06308549062706074,0.06309031786711145,0.06309701945858393,0.06312087131897731,0.06313735186515193,0.06315145375751792,0.06315364743679497,0.06317029955121788,0.06317101408201946,0.06318065035579916,0.06318315807889516,0.06318384801195773,0.06318542828359738,0.06318813281704277,0.0631956831096022,0.06319981992300255,0.06321057404299121,0.06321199641817285,0.0632262844296101,0.06322905587439429,0.0632481598022676,0.06324999999999999,0.06326499375889484,0.06329162961974841,0.06333685437565208,0.0633371879921802,0.06334043571699458,0.06334078235281564,0.06334862636660683,0.06335379841401606,0.06336017945632003,0.06336482595136325,0.06336516906889189,0.06337380354906806,0.06337987787307571,0.06338101843418814,0.06338577044009577,0.06339083713030635,0.06339668204428371,0.06339927605800336,0.06340323788052545,0.06341610288004194,0.06344369537763776,0.06348728135744953,0.06348803353517728,0.0634895705341036,0.0634896927146266,0.0635,0.06351078018377461,0.06351113018285712,0.0635190038362259,0.06352997547637566,0.06353582277616378,0.06354267460669698,0.06355138557596163,0.06356374108141796,0.06357051965775845,0.06357339258920426,0.06358430695618485,0.06359707675262755,0.06360271384467975,0.06361159057826499,0.06361547203478542,0.06363144615094857,0.06363859040476158,0.06365807403555404,0.06365858570292102,0.0636596966183109,0.06366005952831481,0.06366106603881323,0.06366523286858854,0.0636838561100083,0.06370115203672727,0.06370180857379698,0.06370633803081963,0.06370867388407774,0.06370900284010739,0.0637153343153354,0.06371734719883773,0.0637232375162117,0.06373053339324485,0.06373154415596574,0.063731732929384,0.06373348602695218,0.06374086994049807,0.06374422841619748,0.06374681398740928,0.06374908834530307,0.06374921241360618,0.06374925580291214,0.06375,0.06376996744877628,0.06378092116209713,0.06378249000079866,0.06378380340613105,0.06378483652425673,0.06379392798994837,0.06379416914657454,0.06379816594999933,0.06379957866017168,0.06380087399489336,0.06380554831887514,0.06381345582051924,0.06382011000414584,0.06382355878076602,0.06382750362450815,0.06383469974551893,0.06383561191337797,0.06383913850646163,0.06383920311799379,0.06386289167349511,0.06386334774177753,0.06386361961028764,0.06386514323295624,0.06386880028152357,0.06387284176616075,0.063881143461122,0.06388230686253255,0.06388293783969008,0.06388448463599988,0.06388822247103029,0.06389081267894961,0.06389498203618255,0.06389646323951009,0.0638976998468034,0.06390102978193302,0.06390325873504957,0.06390500649800936,0.0639073158509495,0.06391168368306982,0.06394019516830098,0.06394279183525339,0.06394648495910078,0.06394961463543941,0.06395251815554179,0.06396303504071763,0.0639663676500354,0.06397365328694332,0.0639786729599636,0.0639920754582291,0.06399592187077416,0.06399644526391654,0.06399772631835003,0.064,0.064,0.06400025926818975,0.06400652935488892,0.06401216771905335,0.06402591540244268,0.06402651164817756,0.06402815392105915,0.06403606184718676,0.06403630771228232,0.06405797093713776,0.06406208144102686,0.06406490019128162,0.06407007689870098,0.06407159391578097,0.06407398050780072,0.06408104898459646,0.06409014392219677,0.0641115097028902,0.06411321522240152,0.06411728031045905,0.06411886326675682,0.06412021392363926,0.06412059799227043,0.06414047606406303,0.06414096037135612,0.06414662151310438,0.0641489000719144,0.06415174622483567,0.0641559423431794,0.06416065510203614,0.06417902570042083,0.06417920432757782,0.06418117593184458,0.06419771318561947,0.06419909202635905,0.06419917126405021,0.06420084757178718,0.06420578263961085,0.06421049512982256,0.06421092039399161,0.06421538492005639,0.06421873823090166,0.06422248593764202,0.06422656938796141,0.06422893607504047,0.0642317303337248,0.0642326665116191,0.06423368516620659,0.06423623496928459,0.06423765568996476,0.0642409584837516,0.06424120347813095,0.06424375877926612,0.06424398593164676,0.06425,0.06425119728635731,0.06425335430994449,0.06425917114108701,0.0642592413572572,0.06425998962687966,0.0642634345372335,0.06427331945342579,0.06427554586505517,0.06427986751379992,0.06428002097134317,0.0642817523747326,0.064295253149483,0.06429597398670772,0.06429786010590703,0.06430478742470115,0.06430627046813965,0.06431054648627325,0.06431381192327047,0.06431984782568453,0.06432005854554448,0.06433819883948708,0.06434539766911067,0.06435000165957018,0.06435235555173179,0.06435325152873334,0.06435424839304829,0.06436086304300248,0.0643609281188201,0.06436145387542541,0.06436276477758715,0.06436934823227877,0.06437421989969555,0.0643750429387554,0.0643782580021502,0.06438127333564192,0.0643844974068867,0.0643853286679498,0.06439185746440447,0.06439431330979487,0.06440256676359103,0.06440738219859542,0.0644106168523549,0.06441180959741938,0.06442019720027697,0.06442413836536828,0.06442811571932351,0.06443136682912538,0.06443347776239193,0.06443615481967652,0.06443778007727144,0.06444398932962107,0.0644479886819963,0.06445417561742244,0.06445733678117847,0.06445905707908031,0.06445945751493751,0.06445981683505705,0.06446035635322628,0.06446099589453821,0.06447657727927672,0.06448157628797745,0.06448193358048014,0.06448291591846339,0.06448644128499838,0.06448840598700128,0.06448910334248704,0.06449412297233834,0.06450000000000002,0.06450588792804335,0.06451113264406211,0.06451546273857774,0.06451914688116113,0.06452470544626962,0.06453043085720829,0.06453164180113395,0.06454264533738945,0.06454279486336227,0.06454391634165366,0.06454408136278046,0.06455342499202156,0.0645568096701563,0.06456194102385637,0.06456587535472372,0.06456875729597111,0.06456899627168666,0.06457426580675923,0.06457631308593947,0.06458673813990576,0.0645939820351555,0.06459797754911319,0.06459868134314121,0.06460773820591345,0.06460863102343936,0.06462577349596056,0.06463382140228097,0.06463480577156025,0.06463899373035771,0.06464244049091725,0.06464450825292418,0.06464500237354587,0.06464558536225308,0.06466968652757715,0.06467112070223179,0.06467191344514851,0.06467348401869291,0.06467767384363192,0.06467995835686566,0.06468079547519706,0.06468261159669647,0.06468799420713574,0.064691534501425,0.06469260150379794,0.06469285093502875,0.06469973049500645,0.06469999526065978,0.0647005597936373,0.0647041415044941,0.0647121266143647,0.06471622781547844,0.06471789726972643,0.06472471400829286,0.06472525761002959,0.06472783865709665,0.06472860492481207,0.06473296364137412,0.06473751314163294,0.06473765017826691,0.06473855279517444,0.06475,0.06475494438558642,0.0647644430708785,0.06476569102947016,0.06477053285112598,0.06477339138922267,0.06477445739784962,0.0648000914168049,0.06480699877458862,0.06481063120808127,0.06481119078419277,0.06481709013146375,0.06481752045171077,0.06482000945381128,0.06484467995886206,0.0648463462762323,0.0648503395029803,0.06485120096237733,0.06485240974645441,0.0648526513828027,0.06486175610313823,0.06486415371899708,0.06486664696973495,0.06487036266075419,0.06487194936053632,0.06489630027782983,0.06490368062540006,0.06490457962478204,0.0649054127239446,0.06490594391475547,0.06490705528247183,0.06490934658824216,0.06490946665543965,0.06490973532380637,0.06491416359371688,0.06491790768759509,0.06492023789894993,0.0649216631393812,0.06492656090531407,0.0649282315678568,0.06492990721110037,0.06494204760616949,0.06494566167503737,0.06494694890131418,0.06495461866092082,0.06495494801612767,0.06496605782138294,0.06496628735620115,0.0649667252164807,0.06496968977585645,0.06497020496635109,0.06497561227353865,0.06497902179786415,0.06499881561955137,0.065,0.065,0.065,0.06500101900302958,0.0650159531642021,0.06501723518754772,0.06502501592474629,0.06502631400069642,0.06502656008407766,0.06502894341568052,0.0650367790975436,0.06503694671607745,0.06504561284866135,0.06504780947363206,0.06505138622471922,0.06506151081678878,0.06507385402272572,0.06507817539083462,0.06507945352164964,0.06508295637646572,0.06508854860858303,0.06509153895134108,0.06509186956515196,0.06509364592815241,0.06509801797803016,0.06510259732593328,0.06511391466620906,0.06512091376068536,0.06513294856444483,0.06513399039705192,0.06513513345867276,0.06513826940824168,0.06513836133998581,0.06515556204582154,0.06516678239648652,0.06516814652715296,0.0651692611844325,0.06516976402105579,0.06516999087657892,0.06517080701465049,0.06518373262603588,0.06518496399402952,0.06518623329232208,0.06519846064298329,0.06520019165197068,0.06521338598713229,0.06521339448311564,0.06521928804960453,0.06521953743532291,0.06523177330224178,0.06524799731951612,0.06524927697317842,0.0652515158687686,0.0652523768826512,0.0652572480307851,0.06525851690376828,0.06525857202760166,0.06525991244848778,0.06526625449227401,0.06526760146038078,0.06528565402029303,0.06529006629496172,0.06530973397026575,0.0653165863875887,0.06531968726187776,0.06532398488573272,0.06533730287207469,0.06533933261097369,0.06534102316567342,0.06534249770331674,0.06534824045124715,0.06534841931061036,0.06535089223179724,0.06535194763054408,0.06535386510118883,0.06535755098651863,0.06535932101516777,0.06536041092991787,0.06537722658818498,0.06537934247026052,0.06538353958896699,0.06539714107072352,0.06539789338884018,0.06540039868968514,0.06540074746923408,0.06540149915519672,0.06540701971250958,0.06540704121409203,0.06540707629050695,0.06541047273887018,0.06541157533208658,0.0654121806518329,0.06541281821701571,0.06541691676571627,0.06541920057669838,0.06543302696267675,0.06543563161844922,0.06543608268013179,0.06544436200642387,0.06544445747636518,0.06544653636808284,0.06544663066249008,0.0654502818413676,0.06545177875390563,0.06545417893942089,0.06545657968448909,0.06546153067116635,0.06546217585882116,0.0654778117674274,0.06548256762217892,0.06548334304455757,0.06548426602518731,0.06548475205547791,0.06548653144236326,0.06548852558087374,0.06549167007349008,0.06549297912489602,0.0654960154105401,0.06549697336989559,0.06550335014735995,0.06551277237561565,0.06551426010933871,0.06551429718265042,0.06551615703046264,0.06551796240112127,0.06551855143889095,0.06552565227716549,0.0655259882706239,0.06553715527405608,0.0655412835168359,0.06554482189481377,0.06554823397977698,0.06554865377646464,0.0655645769128712,0.06556566244648171,0.06557700200618666,0.0655814072807019,0.06558144498399666,0.06558164934583906,0.06558358893546969,0.0655839154299751,0.06558523043090844,0.06558816982497673,0.06559091024232366,0.06559192918970322,0.06560414189002611,0.06560786400020352,0.06561663741079592,0.06562484898238426,0.06562638576834384,0.06562741342750501,0.06562771622926523,0.0656305591128943,0.06563838182467091,0.06564130609845717,0.06566507701493564,0.06566852211221808,0.06567039754846306,0.06567119011927391,0.06567917100232082,0.06568094598511288,0.0656832462999474,0.06568657465685447,0.06568865168777883,0.06568985174124994,0.06569167854158825,0.06569181219978175,0.06569583537077334,0.06569646388500888,0.06570121702678387,0.06570584499071055,0.06571282235224,0.06572336158189698,0.06572475306167949,0.06573232487056362,0.06573390219761162,0.06573894495942821,0.06574978775126109,0.06575,0.06576574296993364,0.06577034356153864,0.06577122128201451,0.06577742099707519,0.06577987451860291,0.0657870678566782,0.06579182429543667,0.06579426026031118,0.0657962313215314,0.06580135771301199,0.06580162784946379,0.06580211054052688,0.06580335336586593,0.06580896628432725,0.06581299442751036,0.06582312227855469,0.06582501825097903,0.06582796879017438,0.06583421913017905,0.06583781290449307,0.06583959206284495,0.06584074317686123,0.0658426613499312,0.06584548226432334,0.065848331628689,0.06585175808090751,0.06586423804011024,0.06586631715585747,0.0658681219134793,0.06586953961300937,0.0658785154145344,0.06588305551633127,0.06588490305021436,0.06588901771110864,0.06589005173843435,0.06589499293438993,0.06589618165315175,0.06589618619883544,0.0658974803108531,0.0658977994078184,0.06590119992804566,0.06590419355712776,0.06590498217357159,0.06590569462593844,0.06591344058480461,0.06591772270720339,0.06592794291227003,0.06592848223800114,0.06593138252812693,0.06593686598225593,0.06594044558433612,0.06594671882500365,0.06594746497267105,0.06595095635816048,0.0659541877619954,0.06595537233155109,0.06595738231107078,0.06595993922041245,0.06596418253016945,0.0659650537606355,0.06596955548808625,0.06597082430724155,0.06597278363146634,0.06597447240373705,0.06597753053348741,0.0659824988252275,0.06598265391348523,0.06599299296196881,0.06599937037500875,0.066,0.06600416749672253,0.06600432385527534,0.06600440868677737,0.0660138509222599,0.06601390486996754,0.06601418456445646,0.06601998663581099,0.06602227009542214,0.06603872825658956,0.06605091011824549,0.06605508077314828,0.06605759350737296,0.06606340449911265,0.06606646415781221,0.06606683769186321,0.06606941784620413,0.06607206495320128,0.06607860781229484,0.06607901919833095,0.06607989407224603,0.06608347403398585,0.0660866445056118,0.0660868873689944,0.06609096525626454,0.06610086747871342,0.06610346735555221,0.06611198956322027,0.06612035948787394,0.06612091845403081,0.06612298330506651,0.06612478127562756,0.06612694688226281,0.0661275015609774,0.0661349464316738,0.06613643483271975,0.06614848544368927,0.0661560239907128,0.0661636723566533,0.06616386366695037,0.06616874028073044,0.06616938524306999,0.06617588499039381,0.06617828871315815,0.06618021575068458,0.06618097916121983,0.0661882298269324,0.0662011196755143,0.06620325242462836,0.06620358925801079,0.06620477098825911,0.06620529097687576,0.06620603252824449,0.0662074510441154,0.06622482053397376,0.0662275140318671,0.06623313325595599,0.06624110154323917,0.06624162349690928,0.06624507005791108,0.06624565699852632,0.06624714586180627,0.06625442723703247,0.06626371103920063,0.06626855784719625,0.06627196488550564,0.06627981888665936,0.06628001862861074,0.06629483277088585,0.06629921292496165,0.06630569561362379,0.0663102400200448,0.06631155798207192,0.06631261944946017,0.06631493036917373,0.06633444723274123,0.06635159423981825,0.06635435210990073,0.0663565634260267,0.06635878170752413,0.06636838590370614,0.06637241576942123,0.06637455807386936,0.06637469134604071,0.06637579193877671,0.06637586085529121,0.06637981298290041,0.06638085098761239,0.06638122298602701,0.06638665440956641,0.06638730296002482,0.06638768814135636,0.06638820951159664,0.06639631488959855,0.06639769798562813,0.06639788005349552,0.06639965187342878,0.06640775901392348,0.06641450392471218,0.06642496959789466,0.06642520906647795,0.06643082082561025,0.06643512965168971,0.06643896363172057,0.06643939490958135,0.0664407934803834,0.06644295337443767,0.06644438329440822,0.06644622960404564,0.0664510446673046,0.06645579080229848,0.06645808894718941,0.06646392462448443,0.066469250644708,0.06647193522005945,0.06647597175062563,0.0664767128516302,0.06647903024958395,0.06648207906786763,0.06649149385269691,0.06649211252438246,0.06649266317438098,0.06649760097471197,0.06649963116915543,0.0665,0.06650843184860493,0.0665089388011596,0.06651209999984119,0.06651707270998478,0.06651919652447807,0.06651936843635604,0.06653373202116385,0.06654143124746614,0.06654381541473399,0.06654543910327701,0.06655240706004098,0.06655582705587333,0.06655674345948065,0.06655865402900042,0.06656044995717045,0.06656974512779895,0.06657114204453281,0.06658058762303223,0.06659002665150579,0.06659235754516704,0.06659770380065158,0.06661188862656324,0.06661442328602854,0.06662105760450285,0.06662702255073331,0.06662875205670651,0.06662885669076479,0.06662976578850008,0.06663068497631132,0.06663324556077607,0.06663584460797085,0.06663686143527833,0.06664109585798976,0.06664274667384523,0.06664494179253141,0.06664518143121607,0.06664776604770166,0.06665206074201788,0.0666579210608824,0.06666291367531076,0.06666296228295013,0.06666443558448072,0.06666835842532277,0.06667680115022515,0.06668624283643076,0.06668685704005646,0.06668885320646714,0.0666895097791869,0.06669200820082848,0.06669217358410709,0.06669716645810142,0.06669892251472734,0.06670111780549674,0.06670226255367838,0.06670237949890116,0.06670475482455862,0.06670665896246544,0.06670889576842134,0.06671440893403897,0.06671856118437104,0.06672622595595228,0.0667279126075342,0.06673116260940237,0.06673222030066621,0.06673252764955005,0.06673731984572172,0.06673976754160012,0.06674283001974163,0.06674398140736092,0.06674902371996458,0.0667535113900179,0.06675574674610614,0.0667574478930855,0.0667608180756775,0.06676097268140875,0.06676414523905919,0.0667648439877389,0.06676702392999749,0.06677083454565683,0.06677958755250807,0.06678201799259545,0.06678423179930079,0.06679450523910718,0.06679591527788782,0.066808170114946,0.06680885902107052,0.06681177847271305,0.06681285145699611,0.06681451545086377,0.06681454393409883,0.06681858687532838,0.06681917799082782,0.06681937282582447,0.06682674598896753,0.06683222087728401,0.06683322800153652,0.06683415410930149,0.06683724039926543,0.06683901829405646,0.06684205680027308,0.06684249633504578,0.0668452223173144,0.06684532960704517,0.06685020298046679,0.06685948215664084,0.06686474991828498,0.06687319235141252,0.06687444987086373,0.06687464415482937,0.06687563450912036,0.0668767332985074,0.06688102066123347,0.06688187242376539,0.0668860768517376,0.06688702906471425,0.06688726539315135,0.06688795553029162,0.06689192653140935,0.06689292191954989,0.0668976334017094,0.06690061570697187,0.06690921562164723,0.06691569444205625,0.06692065658785795,0.06692366847834126,0.06692705850907832,0.06692889992886047,0.0669289935126152,0.06693396175959233,0.06693496642092904,0.06693837456333203,0.06694424851698116,0.06694495015424855,0.06694780820758224,0.06695064652241553,0.06695667806020927,0.06696147531396403,0.06696801751004676,0.06697103734699242,0.06697202204627498,0.06697667916361247,0.06697937480316224,0.06698136235760681,0.06698153924419832,0.06698179493553032,0.06698303581086101,0.06698641791771202,0.0669904374124921,0.06699281546956926,0.06699444874302703,0.06699535078618757,0.067,0.0670038186790116,0.06700413917571886,0.06700464950221775,0.0670069429383226,0.06701044384437368,0.0670160005472182,0.06702088462249789,0.06703033516871748,0.06703229203914626,0.06703260189785035,0.06703714918884296,0.0670373949861017,0.06704434918320863,0.06705449731889178,0.067055083482035,0.06705512825196287,0.06706227762583553,0.06706295258777263,0.06706501554305327,0.06706651579938243,0.0670672305490882,0.06706847272549396,0.0670699277140085,0.06707039235655908,0.06707071462556946,0.06707287549785651,0.06707812696125236,0.06707883501218947,0.06707970880372574,0.06708536087594974,0.06708784881172142,0.06709196710167088,0.0670951903960322,0.0670978419972222,0.06710006278784766,0.06710122797089545,0.06710196428445288,0.06710604710777682,0.06710629572142951,0.06710714737860102,0.06710861240432331,0.06711029998341977,0.06711533030199689,0.06711582596630927,0.06712334493891461,0.06712693489880907,0.06712833950460224,0.0671304655956291,0.06713629674205958,0.06714213987481998,0.06714296608840642,0.06715384481370487,0.0671583955356049,0.0671601247952074,0.06716079874935332,0.06716328820412057,0.06716607859794987,0.06716661167911477,0.06716812157165242,0.06717186092549848,0.06717905839963106,0.06717958230534764,0.0671811903985439,0.06718147181064539,0.0671855458027641,0.0671857321465556,0.06718610763535868,0.06719151571481102,0.06720275967100703,0.06720352253412035,0.06720528360858441,0.06720560076359075,0.067206221637005,0.06721420948403464,0.0672195164071993,0.06722090658340832,0.06722440712542625,0.06722480350055711,0.06722601835871612,0.06722739559999336,0.06722960904711041,0.06723185354520432,0.06723449830402192,0.06724069424441975,0.067240869953103,0.06724542237929931,0.06724554112909631,0.06724640590755718,0.06724976699202523,0.06724999999999999,0.06725366751532268,0.06725650438808847,0.06726049481916546,0.06726124254750424,0.06727077912326644,0.0672734545339631,0.06727676766055439,0.06728226541807215,0.06728608845944295,0.06729219510101689,0.06729241621853042,0.06729673276602308,0.06729967362510066,0.0673021678365347,0.06730448169070517,0.06730657888734778,0.06730764724272097,0.06730931520240618,0.0673120739652089,0.06731264476595475,0.06731466775772103,0.06731483607083873,0.06731574135007978,0.0673163441992598,0.06731664515061885,0.06731936507569236,0.06732680174313171,0.0673324286364684,0.06733627592897905,0.06733717187524212,0.0673395303326966,0.0673399802577095,0.06734165239604076,0.06734346160237005,0.06734509928840693,0.06734552066757474,0.06734693636202564,0.0673545241428739,0.0673689462213617,0.0673723507199315,0.06737660742561691,0.06737681481719021,0.06737921986435484,0.06738606507050283,0.06738747202816026,0.0673885405539729,0.06739011931274398,0.0674006875158292,0.06740185140574434,0.0674028209563383,0.06740318830326666,0.06740873147385165,0.06741123406647408,0.06741496531104092,0.06741866120439528,0.06742050463193264,0.06742137339852292,0.06742537722375741,0.06742826283485825,0.06743011458403207,0.0674315126391377,0.06743983262758203,0.06744027817091651,0.06744127768076304,0.06744458017121334,0.0674468342506355,0.06744851088388991,0.06744908710783631,0.0674512060489987,0.0674525475385671,0.06745351996558177,0.06745461204534232,0.06745661739061455,0.06746010906842051,0.06746221729294608,0.06746534602339184,0.06747046000209797,0.06747268100108121,0.06747421053152865,0.0674750321921551,0.06747627917049641,0.06748172093143757,0.06749483198907003,0.06749662506337718,0.0674974796023243,0.06749850303421705,0.06750477901782578,0.06750570943223534,0.06750711871345377,0.06750771342756255,0.06750783522328913,0.0675111672052877,0.06751757688468464,0.0675177961845171,0.06752107429949676,0.06752111245461621,0.0675229973285555,0.06752392052228835,0.06752840075816618,0.06753200523085691,0.06753530531248937,0.06754140091156936,0.0675457920159843,0.06754886868193967,0.06755686899297629,0.06756011957462242,0.06756213327601798,0.0675639109081255,0.06756705953539735,0.06756744722759234,0.06757228420838954,0.06757302996507253,0.06757478958195945,0.06758470839467265,0.06759637513779035,0.06761221971389496,0.06761408157741455,0.06762320851109482,0.06762579920950683,0.0676262040611745,0.06762634190638016,0.06762782600096305,0.06763396100571158,0.06763711358574476,0.06764843461578839,0.06764896528643886,0.06765457902397132,0.06765472890279833,0.06765475679018176,0.0676557585765922,0.06765650566697506,0.06765753977706623,0.06765794637295612,0.06765885312023073,0.06767386686260274,0.06767631697390543,0.06767767183310779,0.06767955241791292,0.0676811510496327,0.0676837243251423,0.06768495411986077,0.06769004318500951,0.06769022952017649,0.06769041765372111,0.06769156074824317,0.06769207035103282,0.06769233345176995,0.06769432914902873,0.06769643936734812,0.067699633945407,0.06770231803110702,0.06770338315485555,0.06770347997861997,0.06770371929812033,0.06770677141580381,0.06770807218114368,0.06771035592536463,0.06771092053322146,0.0677130372450285,0.06771433057281026,0.06771757347200129,0.06771778734313634,0.06772205444562492,0.06772350427081922,0.067738424950969,0.06773879743352007,0.0677489673383986,0.06774958833019809,0.06774995058007115,0.06775279238457875,0.06775397367033038,0.06775455483391316,0.06775573582145555,0.06776480815967081,0.06776529083341154,0.06777050552552141,0.06777365486944024,0.06777365616000548,0.06778564532036586,0.0677881222537857,0.0677890520485947,0.06779049938812508,0.06779097786195507,0.06779218118538627,0.06779337534227346,0.06781087646267632,0.06781200622016828,0.06781213281041631,0.06781295189042821,0.06782658703444121,0.06783241139364124,0.06783404819179382,0.06783684978819132,0.0678375266750643,0.06784054500582802,0.06784203816669583,0.06784273820332802,0.06784289239805068,0.06784295119126664,0.06784809946896223,0.06785277159889173,0.06785312173735225,0.06785534367702654,0.0678583038959227,0.06785887530532703,0.06785894895482031,0.06785981287680416,0.0678633260658475,0.06786336094474624,0.06786989957942924,0.06787078268567032,0.06787648162903598,0.06787828034759141,0.0678784827954774,0.06788295459356748,0.06788326176553508,0.0678838076902331,0.0678839082104969,0.06788916483492571,0.0678893989852458,0.06789065600267859,0.06789170692821102,0.06789195190774404,0.06789580587502458,0.06789619309494058,0.06789629631295088,0.0678990143097013,0.06790555614414898,0.06790591811522656,0.06790931245214404,0.06791071403870294,0.06791858952877958,0.06791906426114407,0.06791975253877451,0.06792388453769162,0.0679239028199428,0.06792565244590937,0.06792865928412926,0.06793401470811318,0.06793759433083943,0.06793810179929696,0.06794349747629866,0.06794495476798292,0.06795273363785194,0.06795775663844145,0.06796016002173934,0.06796163089002594,0.06796304863812828,0.06796557066031461,0.067967464408813,0.0679697029393123,0.06797495849444252,0.06797581805106889,0.06798029654256457,0.06798035811357506,0.0679865419162211,0.06798686198436182,0.06798830014667814,0.06799408540269437,0.06799446461743941,0.06799806273674765,0.06799927325950576,0.068,0.068,0.06800037820485967,0.06800118100373488,0.06801028097137402,0.06801130029600244,0.06801397730568423,0.06801722592009915,0.06802230134238924,0.06802361419213251,0.06802381904085777,0.0680240770364241,0.06802561139193597,0.06802589578580515,0.06803474144866611,0.06803594523555595,0.0680364727533372,0.06803700539059561,0.06803729985705624,0.06804357305315696,0.06804533799636307,0.0680474802520159,0.06805784298951456,0.06805854646435378,0.0680603980016731,0.06806625353497361,0.06806773342487844,0.06807389540421038,0.06807445755871289,0.06808768259682377,0.06808797245203672,0.06808951787559896,0.06809192351945784,0.06809203625405262,0.06809503863343107,0.06809552699472819,0.06810068455225862,0.06810390037107425,0.06810551910696745,0.06810573393436384,0.06810740340605696,0.06811195123800459,0.0681147038494876,0.06811763394603196,0.06812025955065854,0.06812036825586057,0.06812328413938014,0.0681252218781303,0.06813042162601678,0.06813282877140103,0.06813698216927502,0.06813856750622714,0.06814008859141232,0.06814273994810673,0.06815048439060481,0.06815509026612038,0.06815546550701534,0.06815552063068571,0.06815796492085276,0.06816110029060934,0.06816299406551851,0.06816696212235009,0.06816713836168614,0.06816771805862722,0.06816913756198378,0.06817510375504901,0.06817521688351874,0.06817659177216319,0.06818124900883184,0.06819140219294305,0.06819439804172096,0.06819569983763468,0.06819748012343202,0.06820000038510181,0.06820101753019239,0.06820126186598377,0.06820225424103629,0.06820868656852457,0.06820922497590458,0.06821044883279917,0.06821244083045908,0.0682164768386849,0.06821726579597469,0.06822280945887592,0.06822566891178686,0.06822811301807817,0.0682320507947894,0.06823567008526701,0.0682369883715848,0.06823728516490181,0.06823797843498723,0.06823803518202631,0.06823989111640198,0.06824161694343832,0.06824241941760872,0.0682435187304124,0.06824482637217023,0.06824696428694513,0.06824818757672484,0.06825218397953836,0.06825301977159057,0.06825314491242884,0.06825362611120987,0.0682561475031029,0.068257291287256,0.06825927824072475,0.06826262594146519,0.0682670894609238,0.06827791199495577,0.06828224886507668,0.06828351686766057,0.0682855335659805,0.06828712738250699,0.0682891394042065,0.06829498214253303,0.06829569590216432,0.06829905501815914,0.0683046352354564,0.06830613374645465,0.06830810924883611,0.06830961606755374,0.06831041104895665,0.0683110062608496,0.068315147845431,0.06831916681902646,0.06832022935589958,0.06832319100760857,0.06832647402017875,0.06833083464720949,0.06833110488737909,0.06833950553179566,0.06833951595034898,0.06834063571889387,0.06834264718458476,0.06834819726420104,0.06834897625210555,0.06834906800817926,0.06835008619762604,0.06835114279249695,0.06835146888996531,0.0683522729716027,0.06835513776637764,0.06835554567669576,0.06835618099934274,0.06835789217533984,0.06835869358212152,0.06835890501397132,0.06836186371792102,0.06836202419407286,0.06836209941755374,0.06836240687253531,0.06836573664238578,0.06836770012560614,0.06836829042933269,0.06836851216942183,0.06838371548682413,0.06838378954766922,0.06838911441094289,0.06839514269812709,0.06839657692412478,0.06839909044134358,0.06840144076171012,0.06840348967519758,0.06841462697697663,0.06841654058299483,0.06842050588180677,0.06842062717219649,0.06842312469617508,0.0684244203045081,0.06842752230005131,0.06843268503701204,0.06843322181675598,0.06843634184628293,0.06843677876374617,0.06843679184811358,0.06843869728411246,0.06843952304191145,0.06844300051152322,0.06844300593439406,0.06844794319017423,0.06844795646311541,0.06844866606013263,0.06845244418452517,0.06845440359100771,0.06845512199237787,0.06845555897943552,0.06845829338730074,0.06845950309844455,0.06846020949826671,0.0684658151668993,0.06846674176788586,0.0684677012467692,0.06847058267339703,0.06847372398776547,0.06847753607836048,0.06847969097766388,0.06848170144903377,0.06848391241267628,0.0684859148267085,0.06848694715768255,0.06848839054657416,0.06849220280937879,0.06849554581266196,0.06849670113406608,0.06849704731785676,0.06850148865865538,0.06850162662886236,0.06850286954643947,0.06850307753404977,0.06850477487153053,0.06850638202794113,0.06851542466025583,0.06851879911484221,0.06852055330306268,0.06852070948966986,0.06852411680399566,0.06852489695828909,0.06852710129637156,0.06853142060055548,0.06853650904647095,0.06854292983021354,0.0685439765738167,0.06854398343222262,0.0685471126317425,0.06854798961918881,0.06854922812942185,0.06855028054453198,0.06855064708363998,0.06855136753768808,0.06855659765029463,0.0685576829146452,0.06855807007602156,0.06856263450812575,0.06856269957126193,0.06856560896039968,0.0685670600567798,0.06856727273988636,0.06856776020763884,0.06856910166659834,0.06857167996235246,0.0685825290461377,0.06858901690279383,0.06859076734916576,0.06859236706307534,0.0685926549806351,0.0685929848263329,0.06859751112746529,0.06859906967687217,0.06860063695035412,0.06860362859575446,0.0686084015002007,0.06860932322014207,0.06861028283647293,0.06861264685080612,0.06861399130659661,0.06861460436905319,0.06861944728524447,0.0686207683601468,0.06862212415454984,0.06862426144089945,0.06862675054981103,0.06863284096349542,0.0686333302940258,0.0686349396981375,0.0686361160777464,0.06863645023558862,0.06863837873057436,0.06863998586258488,0.0686419522515044,0.0686459794308092,0.06864711538530857,0.06864815408568098,0.06864842966084474,0.0686537008232598,0.06865455865748801,0.06865538047040567,0.0686573218951057,0.06866896477244584,0.06867058696884328,0.06867062232407921,0.06867529144620396,0.06868221014067967,0.06869180445984972,0.06869273872101708,0.06869676970985417,0.06869881284844609,0.06870498469051217,0.06870947027973924,0.06871559015605701,0.06871942724523203,0.0687229130617609,0.06872315036651225,0.0687269940187068,0.06872772181544941,0.06873001490203108,0.06873109140424637,0.06873270597987644,0.06873618715073751,0.06873838921402918,0.0687384566064504,0.06874156581469144,0.06874956598834889,0.06875,0.06875204011769673,0.06875222380919736,0.0687585247253217,0.06876249349566858,0.06876302287999572,0.06876982959018865,0.06877214703644702,0.06877296198442263,0.06877493401476342,0.06877500215610638,0.06877602092242824,0.06878479707889626,0.06878988519671798,0.06879365602789553,0.06879543553474571,0.06879828983013005,0.06880306984928718,0.0688072379878275,0.06881719890326428,0.06881949030553607,0.0688247915323728,0.06882974993273323,0.06883199534552015,0.06883378488351105,0.06883859570603622,0.068839522083092,0.06885097099690915,0.06885108331473216,0.06886065402601683,0.06886247101928304,0.06887042763874206,0.06887179337238797,0.06887330931230788,0.0688744483029456,0.0688762750232785,0.06887632831746127,0.06888663921066875,0.06888843299001872,0.06889005826643141,0.06890774552100778,0.06891020892584977,0.06891958502242491,0.06892243568523596,0.06892464938876511,0.06892792282737131,0.06893299078951051,0.06893810819911117,0.06894079932903675,0.06894086796694993,0.06894159407603132,0.06894489118762512,0.06895269385879596,0.06895442967062226,0.06895775607367584,0.06895937043668927,0.06896641563703047,0.06897113968640801,0.0689723084233305,0.06897450769454372,0.06897587117840918,0.06897714831191301,0.06898207384764003,0.06898231846361337,0.06898246875807176,0.0689861794418258,0.06898646488129223,0.06898767502091348,0.06899181938632566,0.069,0.06900323941479936,0.06900356595993853,0.06900368984667905,0.06900428449442,0.0690056456627821,0.0690073575056292,0.06900963631103106,0.0690101787693129,0.06901094830534367,0.06901259402254055,0.06901271806772538,0.06902002917334583,0.06902842213520735,0.06903119765323062,0.06903359605808451,0.06903471676346187,0.06903506709467522,0.06903545281611606,0.06904455081342456,0.0690467493691957,0.06905147201158618,0.06905190361749859,0.06905223064392071,0.06905318301611615,0.06905366745196834,0.06905924017203727,0.06905981164854065,0.06906527125915402,0.06906596764498882,0.06907108972715557,0.06907373916384031,0.06907429405592941,0.06907743353586776,0.0690839912093772,0.06908414393443035,0.06908522499097076,0.0690865386351321,0.069086745588996,0.06909541568754878,0.0691051976236158,0.06910659274756306,0.0691086706169072,0.06910890939878435,0.06911334368214492,0.0691179163838471,0.0691187498453341,0.06912331866738666,0.06912558510729928,0.06912783158883153,0.06912855408905581,0.06913292490582144,0.06914429417968292,0.0691443053938177,0.06914771446042105,0.06914800711845676,0.06914855642255156,0.06915186078851099,0.06915259206440906,0.0691533789877889,0.0691620453270876,0.06916609733341252,0.06916935556237808,0.06917954857723714,0.06918086125376034,0.06918831081802311,0.06918922126777437,0.06919202431836938,0.0691963728568799,0.06919660684204519,0.06919808388823089,0.06920090767832526,0.06920109374209818,0.06920212444831206,0.06920549530011669,0.06920717971491853,0.06920982892785457,0.0692126143100509,0.06921276147216612,0.06921384470793245,0.06921756270775385,0.06922181807939302,0.06922458141023412,0.06922552061700964,0.069227259924368,0.06922996945129696,0.06923030739341815,0.06923522743449098,0.06923858828569716,0.06924038360577316,0.06924124908790259,0.06924220073844363,0.06924227354455598,0.06924243355487572,0.069245027937708,0.06924588115419197,0.06924640452928099,0.06924854105828229,0.0692486702671295,0.06925319786993103,0.06925421965437874,0.06925644522682341,0.06925709539512476,0.06925889424663423,0.06925932637340451,0.06925991061907671,0.06926199197973457,0.0692620961531368,0.0692622246987065,0.06926499544064171,0.06926946273322841,0.06927272213759704,0.06927912858309368,0.06927917328425934,0.06927920790350951,0.06927982685760885,0.06928079261578805,0.06928374141202752,0.06928603470826211,0.06928789281713703,0.06928854545834728,0.06928917195457139,0.06929199668699898,0.06929212506694779,0.06929257746775005,0.06929426723747709,0.06929427148807533,0.06929461526428429,0.06929566219377149,0.06930009153068462,0.0693024788660985,0.06930757661168649,0.06930808895276724,0.06930832393702822,0.06930960658183072,0.06931050174604853,0.06931080408841377,0.06932167176464361,0.06932182267082242,0.0693263513810794,0.06933252107671986,0.06933388045257162,0.06933800280033615,0.06933949686758004,0.06934654971003767,0.069349174999949,0.06934955770732873,0.06935643005808906,0.06935763683489034,0.06936366555061069,0.0693660938674881,0.0693685425428006,0.06936914186452146,0.06937213640682738,0.0693726112533012,0.06937343028257038,0.06937671652695332,0.06937758450983217,0.06938026438416019,0.06938788564234127,0.0693903837288826,0.0693938209473935,0.0693949763476522,0.06940365164458587,0.06940782050244097,0.06941086408862375,0.06941106374097879,0.06941374650793578,0.06941985426965984,0.06942029638460352,0.0694218644854738,0.06942406189020703,0.0694266044114947,0.0694277862484645,0.0694294756832217,0.06943045826259943,0.06943461931289961,0.06943485364687589,0.06943621654378339,0.06943940311966529,0.06944253552006349,0.06944722656299812,0.06945023533905056,0.06945214353740542,0.0694523304645504,0.06945708637246627,0.06946177529820069,0.06946242481569508,0.06947219505985398,0.0694735549483084,0.06947358753472227,0.06947829497051027,0.06947832915495669,0.0694814866527143,0.06948391070005049,0.06948450493916619,0.06948783799211002,0.06948978972351438,0.06948995057204713,0.06949021963300597,0.06949082685310949,0.0694942973438624,0.06949998751625415,0.0695,0.06950602170410387,0.06950651528724883,0.06951157853484624,0.06951296155576978,0.0695163245332809,0.0695171462005258,0.06951979103319296,0.06952294593218157,0.06952307941787059,0.06952396502924256,0.06952563040034258,0.06952827248793841,0.06953311222100772,0.06953838418503983,0.0695459204840809,0.06954793790967702,0.06954841462126833,0.06955249045567312,0.06955254043912523,0.06955373354937931,0.06955664861564154,0.06955798723665416,0.06956020316900129,0.06956561103797912,0.06956664898705142,0.069569564665233,0.06956977325643013,0.06957117864270725,0.06957344265948524,0.06957365342371599,0.06957647753318201,0.0695773456600088,0.06957766904501746,0.06957775845060249,0.06957910656212239,0.06957915974090449,0.0695796097960559,0.06958325750908413,0.06958737726979895,0.06959172785797393,0.06959278513696653,0.06959496857371522,0.06959637179332008,0.06959683663745304,0.0695990607488352,0.0696022649438825,0.06960508011685927,0.06960549891879433,0.0696055367630899,0.0696063745370019,0.06961102153198205,0.06961117856101179,0.06961145581559164,0.06961157980080905,0.06961335700964655,0.06961524789836183,0.06961709989245585,0.0696270722598717,0.069629145861442,0.06963274394815332,0.06963459628809475,0.06963739418673465,0.06963747807332347,0.06963828559978742,0.06964229832477932,0.06964885594734897,0.06965331569563032,0.06966220432245823,0.06967704590790592,0.06968159646786141,0.06968192368248734,0.0696836931366521,0.06968683988143907,0.06968685043959223,0.06968736428065256,0.06968912852022101,0.06969653037524166,0.06969916614109038,0.0697018224426372,0.069713311670816,0.06971557887272668,0.06971632438733615,0.06972181436728184,0.06972239902672504,0.06972704913815123,0.06973354952660835,0.06974153121220115,0.06974168277559649,0.069742842129814,0.06974482075849565,0.06974530694753142,0.06975372904531035,0.06975893500673949,0.06976022004637081,0.0697633222648189,0.06976388360812485,0.06976525982637671,0.06976865604282373,0.06976888474322243,0.06977269439311039,0.06977330788765261,0.06977475994377702,0.06977675154775556,0.06978771324620693,0.0697919902356197,0.06979329961039774,0.0697948842530523,0.06980016232027865,0.06980346711968666,0.06981009833305529,0.06981134594265423,0.06981293692439758,0.06981322292237416,0.0698147522894486,0.06982678869991338,0.06982828977182941,0.06983228612076861,0.06983233399341877,0.06983618622477411,0.06984690953556406,0.06984869171141633,0.06984873549346952,0.06985173816687977,0.06986105133908105,0.06986316182340933,0.06986709910775817,0.06987422480080088,0.0698744126232571,0.06987892630850309,0.06988134485144794,0.06989914788708383,0.06990305856933389,0.06990503965803045,0.06990767078014395,0.0699144462963118,0.06991558471282602,0.0699158212902868,0.06992195451552238,0.06992353104858641,0.06992531493258287,0.06992783160482267,0.06992792071430037,0.06993653035544513,0.06993823068849321,0.06994301602942002,0.06994376007570613,0.06994377846639496,0.06994934876610587,0.06995096561117035,0.06995426103926214,0.069957463941628,0.06996842403573143,0.06997058710005921,0.06997257005022078,0.06997705308745851,0.06997832900233623,0.06997990108036536,0.06998282930846765,0.06998592504090498,0.06998928369632786,0.06999570294943877,0.06999961823687643,0.06999972198463718,0.07,0.07000065377066896,0.07000295905204751,0.07000338995443989,0.07000470818390957,0.07000599732044913,0.07001665002544277,0.07001689487381517,0.07001694317611289,0.07001799914197397,0.07001799955696832,0.07002797462335447,0.07003144532622314,0.07003229882083978,0.0700348108739701,0.07003894122569122,0.0700437571641738,0.07004410287485559,0.07004539450415548,0.07004913294571562,0.07005133819891704,0.07005360430224879,0.07005678030539347,0.07005764049266455,0.07006206831527254,0.07007069784185856,0.07007659269889294,0.07008366747401501,0.07008523161964404,0.07008885542796575,0.0700898558798086,0.07009411911199044,0.07009590389071355,0.070097152471056,0.07009815217872348,0.07009952424825555,0.07010135356244436,0.07010454094480251,0.07011183898510534,0.07011341719006917,0.07011676193540403,0.07011746242402438,0.07011862660524006,0.07012516883554235,0.07012568560015725,0.07012669721238705,0.07013096997354105,0.07013464953187595,0.07013561204783228,0.07013581616812292,0.07013609857084603,0.07013769715225998,0.0701377792471474,0.07013940095665783,0.0701404379797847,0.07014715552627698,0.07015110882584288,0.07015650485182419,0.07015771673675505,0.07015793878902603,0.07015797894523104,0.07016817820470779,0.07017152480137898,0.07017415102052617,0.07018517785466802,0.07018537243663432,0.07018738977761808,0.07018777933910653,0.07019031939055345,0.07019778797128584,0.07020083654859922,0.07020133829961578,0.07020220046299563,0.07020580740260836,0.0702071896612877,0.07021048987855283,0.07021245229428226,0.07022367255593949,0.07022696733131556,0.07023252118423595,0.07024065748722678,0.07024179185008622,0.0702476365167589,0.07024952146621587,0.07025,0.07025200032316455,0.0702540109813345,0.07025854243795422,0.07026881127455795,0.07026922294533483,0.0702714784432866,0.07027208527165849,0.07027337925313441,0.07027533544346044,0.07028012210061035,0.0702824643776783,0.07028320943194197,0.07028726227867865,0.07029066776703957,0.07029086299056857,0.07029580586870215,0.07029824585699578,0.0702991420229761,0.07030797313330495,0.0703167479443351,0.07031750884059633,0.07031765471128484,0.07032482310330801,0.07032548227356684,0.07033069782241219,0.07033566458559827,0.07034241437992261,0.07034355895718646,0.07034466756100778,0.07034897015477128,0.07035274154557117,0.0703529077497747,0.07035604552130456,0.0703616559123676,0.0703623507379817,0.07036301403090073,0.07036312047999985,0.07036959201258391,0.07036966296509509,0.07037447892776423,0.07037552964700637,0.07037560735020369,0.0703801556132542,0.07038284400953056,0.07038374763553307,0.07038571617041216,0.0703880858055384,0.07038968468173287,0.07039527945617087,0.07039738908218854,0.07040065514229978,0.07040603520632108,0.07040876003325933,0.07041167767927298,0.07041251777571704,0.07041500434687073,0.07041570438430857,0.0704186768043256,0.07042686169550491,0.07042694183102885,0.07042801448038757,0.07042833382262557,0.07043162320923549,0.07043518249125731,0.07043690878761487,0.07044781849242072,0.07045269237378977,0.07045453722099962,0.07046548337475807,0.0704728586767933,0.07048069099172745,0.07048114466186078,0.07048150317320583,0.07048904686197044,0.07049189648605907,0.07049493532968569,0.07049518143765354,0.07049803223048938,0.07050651345496585,0.07050881915742052,0.07050927723354401,0.07051200780671231,0.07051726197805759,0.07052366680361216,0.07052655800933379,0.07054105027278666,0.0705475263466906,0.07056434098279261,0.07056560388670945,0.07056769096360521,0.07056837380278358,0.07056962315143828,0.07057128462539158,0.07057445674428603,0.07057519937364407,0.0705768050332007,0.07058356271222176,0.07058570237719002,0.0705933972153867,0.07059867643459956,0.07060415933469039,0.07060877976481596,0.07062258577036552,0.07064549416926072,0.07065047220037145,0.07066068097254646,0.07066165699453653,0.07066389554005142,0.0706653639425315,0.0706656157534142,0.07066605845826135,0.07067182200096708,0.07067760257748024,0.07068754692048579,0.07069030927267624,0.07070194141764917,0.07070377254197663,0.07070687448759563,0.07071115510760594,0.07071579757939375,0.07072404919152482,0.07072410752252932,0.07072514414198576,0.07072632901641054,0.07074313820127903,0.07074493317767128,0.07074753766499596,0.0707511385806057,0.0707531046958302,0.07075516716107316,0.07075652846245145,0.07076158566292419,0.07076724981599775,0.07077317230210793,0.0707753800204987,0.07077682116230319,0.07077881804813353,0.07077926329800695,0.07078572128176834,0.070792005840121,0.07079650450926857,0.07079688387280797,0.0708029536647012,0.07081122463239835,0.07081260391435905,0.07082282343349008,0.07082534407101491,0.07083000444042253,0.07083456565829221,0.07083498025506525,0.07083868015391157,0.07083916984878215,0.07083982373098313,0.0708704753792101,0.07087119244157082,0.07087407766113932,0.07087509505997143,0.07087524774368326,0.0708834196773074,0.07088733553375903,0.07089384703003856,0.07090323099289393,0.07090971266862474,0.07091102307028387,0.07091369543177177,0.07092369955748887,0.07092481166989899,0.07092559543625838,0.07092703631782167,0.07092827173649137,0.07093298307776794,0.07093508749621831,0.0709379215086198,0.07094353371147563,0.07094479180122783,0.07094553475136332,0.07094611498617948,0.07095030530687714,0.0709543147519539,0.07096034272093647,0.07096375302567558,0.07096885769919004,0.07097029156267559,0.07097132731455899,0.07098659703333979,0.07098819307768287,0.07098840168624226,0.07099588471707113,0.07099981377032295,0.071,0.07100000000000001,0.0710003198356821,0.0710006146732996,0.07100932960873076,0.07101828950127294,0.07103337068949693,0.07103696904988922,0.07104208037760809,0.07104383194073169,0.07104697548611127,0.07104745685512828,0.07105465807974133,0.07106401023717496,0.07106958467724606,0.07107717775306424,0.07108085763296153,0.07108216222068703,0.07109198596775677,0.07109305725893124,0.07109676072263502,0.07111738796934938,0.0711236524828421,0.07112733487596996,0.07112813628001663,0.07112999006402068,0.07113334050931693,0.07114364414959692,0.07114827823687539,0.07115100763000384,0.07115258632460753,0.07116686975226831,0.07118330238761059,0.07118462040513833,0.07118894174015096,0.07119097515577781,0.07119383043771317,0.07119552009417023,0.07119613883143183,0.07119657216589881,0.07119853826025632,0.07120018645695875,0.0712005427584874,0.07120739919603578,0.07121249024430275,0.07121325052780052,0.07121948101273831,0.07122274696516578,0.0712286192054365,0.07123004141851542,0.07123027016961297,0.07123419239027762,0.07123434233171523,0.07124184799484874,0.07124236590616467,0.07124492516451317,0.07124767635034392,0.07124868076926698,0.07125551723159088,0.07126613775873954,0.07127147573769671,0.071273377313203,0.07127514994651571,0.07127936721685281,0.07128072809318636,0.07128325351841086,0.07129596440619451,0.07129857180533547,0.07130050673463466,0.07130161446164796,0.0713039256279595,0.07130959329188044,0.07131199446379717,0.07131528818721856,0.07131689329893294,0.0713171795390488,0.07132154279331403,0.0713222637752607,0.07132765102773016,0.0713317939453296,0.07135276820357105,0.07135824047212731,0.0713651421209133,0.07136579683851214,0.07137617288262027,0.07137704665366958,0.07138090619807053,0.07139099872549985,0.07139147885359365,0.07139731733993653,0.0713975820655919,0.07140496306216035,0.07141388670329457,0.07141901005459822,0.07142174972492611,0.07142348039783135,0.07142456690116056,0.07142530081363709,0.071426076479074,0.0714287017794065,0.07143125553930116,0.07143457415164083,0.07144166301637972,0.07144938982017615,0.07145100077608227,0.07145228496194582,0.07145410610719168,0.07146003704794435,0.0714605505500189,0.07146309870612604,0.07146648596832622,0.07146697728444239,0.07147063871205747,0.07147624692819911,0.07147635174637687,0.07147704766833765,0.07147988837262545,0.07148019387651948,0.07148503556859159,0.07149562413770022,0.07150030320863339,0.07150767346094085,0.07151502318141324,0.07151531176991995,0.0715219137878023,0.0715220582839159,0.07152391002745441,0.0715320534982391,0.07155023046840867,0.07155710378574322,0.07156194741375765,0.07156208373639009,0.0715650248499413,0.07157708584820134,0.0715826637816927,0.07158502521927149,0.07159057599253602,0.07159642066129701,0.07160949496880038,0.07161004430030103,0.07161654664878687,0.0716189799421416,0.07161919617904448,0.0716277543435388,0.07163075917020421,0.07163365989708416,0.07164262464393875,0.07164299532978763,0.07164428922286374,0.07164469714352481,0.07164812917320214,0.07165178314784418,0.0716594142918705,0.07166796721645884,0.07167110103142896,0.0716712156596408,0.07167613987353502,0.07167754646996301,0.07168387660441176,0.07168457136384733,0.07169958644114403,0.07170435731412728,0.07170713423955109,0.07171527561387187,0.07171691152702227,0.07172270421370565,0.0717325414209413,0.0717344812320304,0.07173603654439628,0.07174537565893123,0.07175,0.07175106290618387,0.07175410026526802,0.07175887896412196,0.07176171448201224,0.07176434110071134,0.07176757370001562,0.07176801837827776,0.0717731271690421,0.071774545422513,0.07177774181579129,0.07178965428690236,0.07179540046997422,0.07179783250612021,0.07180386867029885,0.07180444102115748,0.07180614065769556,0.0718067354682252,0.07181947011185345,0.07182128414080098,0.07182521017696471,0.07183827940328674,0.07184248422070275,0.07184525662746191,0.07185020289254686,0.0718524571560602,0.07185397354558802,0.0718565434115605,0.07185852248634314,0.07186220721422633,0.07186396317691292,0.07188301395457146,0.07188694208666548,0.07188933973993893,0.07189335608779387,0.07189610851024725,0.07189626710806052,0.07189684269981869,0.07190533390802271,0.07190913641154564,0.07191555297134368,0.07193060689732142,0.07193919210720948,0.07194994068384677,0.07195350890209276,0.07197012814976018,0.07197302563235346,0.07197385000215606,0.07197867479463907,0.07198309601068364,0.07199346896919473,0.07199456470847064,0.07200000000000001,0.07200315201604164,0.07200551347291592,0.07201245479082485,0.07202134235092901,0.07202421677349231,0.07202871259162709,0.07203324305592462,0.07204309194489115,0.07204615111251242,0.07204966573888488,0.07205151317649772,0.07205313121798014,0.07206055555522,0.07206678974097551,0.07207032880002641,0.07207364495860503,0.07207768065421657,0.07208389744512583,0.07208497638110446,0.07208769105660125,0.07208857880284189,0.07208940667887448,0.07209940320764516,0.07210173711419011,0.07210765293834147,0.07211519260151462,0.07212232346989662,0.07213860205295479,0.07214315631122074,0.07216361312628568,0.07216987488229848,0.07217283815651424,0.0721809516265811,0.07218635483763557,0.07219359700559323,0.07220090355214902,0.07220119189468589,0.07220805886705654,0.07222258221880423,0.07223295020437209,0.07223844761981024,0.07223981790721577,0.07225154364600726,0.07225259970843818,0.07225479795795266,0.07225823831704829,0.07226793436687892,0.07227309544490317,0.07227708489850508,0.07228207793681127,0.07228592443486319,0.07228606229911677,0.07229999060048173,0.07230471965244076,0.07230592218658295,0.07231416824716985,0.07234706981620084,0.07235430555767285,0.07236256047315624,0.07237055056425885,0.07237243793440032,0.07237515855773567,0.07238284591961179,0.07238313097593106,0.0723958516975903,0.0724064202529325,0.07240761099215552,0.07241279935811867,0.0724139771727683,0.07242339396926308,0.07243865582228777,0.07244262828102835,0.07246004667890998,0.07246589825953488,0.07247158649521948,0.0725,0.07250982805091274,0.07252364937071423,0.07254342501292849,0.07254521252990577,0.07255140319012092,0.07255537151514876,0.07255664969272192,0.07256099185602581,0.07257175229162913,0.0725825301533875,0.07258915880083337,0.07260340623727417,0.0726065344847863,0.07260745567490791,0.07261343568854933,0.07262337187774637,0.07262932566977076,0.07262985063502451,0.07264376464877435,0.07265362867383318,0.07265490698146508,0.07265534358595711,0.07265672811798343,0.07268785722566039,0.07269055429661223,0.07269064702356799,0.07269704512777196,0.07269737495955636,0.07270973363782357,0.07272019292296447,0.07272056283039019,0.07272505142732,0.07273434936404223,0.07273689787436942,0.07273825190382084,0.07274341568589665,0.07275724988621,0.07275913160991383,0.07278158918033827,0.07278204486718626,0.07278445872312853,0.07279326270966406,0.07280715283853104,0.07280866322166023,0.07282248271727605,0.07282672448329168,0.0728307629168429,0.07283250633810118,0.07283652216321307,0.07284013938086142,0.0728609282040428,0.07286714375053027,0.07286808711333258,0.0728711629539235,0.07288045122153891,0.07288942372445381,0.07289271545362394,0.07290876944565693,0.0729093817113708,0.07291395248621288,0.07292071754263892,0.07295249590446087,0.07295588393525758,0.0729724599121094,0.07298120221448004,0.07298349002436706,0.073,0.07302126022064892,0.07302241121498376,0.07302753765037721,0.07302881222202086,0.07303379175059233,0.07303871116497616,0.07306576484853572,0.07306849971723131,0.07307621666015918,0.07307875346604022,0.07308061962217893,0.07308091584520794,0.07309263444393908,0.07310064709912528,0.07311505474502036,0.07312614391039879,0.07312776601425724,0.07313871451483958,0.07314175843903238,0.07314374812935089,0.07314419819622196,0.07314506414508407,0.07314707823256282,0.0731514874447688,0.07315777384513772,0.07318301567758084,0.07318985634705236,0.07320864143003716,0.07321457746509076,0.07321678559748909,0.07322785624912367,0.07324059667122676,0.07324131845806789,0.07324653482908529,0.07325000000000001,0.07325100763814521,0.0732631872854506,0.07326932957290926,0.07328787623914618,0.07329420819229361,0.07331867322466365,0.07332722373025993,0.07333590318608489,0.07334040721314096,0.07335397278623726,0.07335719178963568,0.07336334872794077,0.0733633986598568,0.07336922997987223,0.07338242247030506,0.07338469195264356,0.07339088629950145,0.07340299062251879,0.07340530304828335,0.07341279424967503,0.07344187130009984,0.0734436902719182,0.07344876268515611,0.07346226695738901,0.07346643777312833,0.07346938336228204,0.07347294826541283,0.0734757502838357,0.07348693996497274,0.07353039328787889,0.07353231166835332,0.07354995391449849,0.07355208590468992,0.07356116941851674,0.07356435951654355,0.0735720332260617,0.07358503315932453,0.07359438592859106,0.07360867006024044,0.07363571352010481,0.07366661406443868,0.07368635002123244,0.07369066855968393,0.07369300501119933,0.07372482996461444,0.07372648101378391,0.07372804090596805,0.07373907491303941,0.07374365820973346,0.07376404861950167,0.07378686124704358,0.0737941214655972,0.07381334859535871,0.07381648349998388,0.073838406483014,0.07385052452229292,0.07385186101808848,0.07385449718117962,0.07385463697916946,0.07387250122901978,0.07388816754006802,0.07389792848529621,0.07390757413001257,0.07391898998186884,0.07394347235025148,0.07394646899375147,0.0739496419375585,0.07395265459930343,0.07395846591079834,0.0739604230792845,0.07398689993933946,0.07399003144017703,0.07400000000000001,0.07400000000000001,0.0740119935472448,0.07401248387167424,0.07402621407104856,0.07404168868700267,0.07404747949232884,0.07407714418736361,0.07409048069388441,0.07409636572469896,0.07413210676025499,0.07414183039639079,0.07418158657629585,0.0742069860864481,0.07421713688370911,0.07421913887684879,0.07421999703198534,0.07423200202708145,0.07423813064818079,0.07425051912320706,0.07426084323610137,0.07427185795745346,0.07427373982609844,0.07428890189308521,0.07429249584876949,0.07431659622394621,0.07432238362034452,0.07435420173412799,0.07436734987451268,0.07437281469587133,0.0744022381697101,0.07440357285871677,0.07446805912521472,0.07448784564139273,0.07457942490453295,0.07458369226447999,0.0746070504676431,0.07461363598950697,0.074646449278029,0.07474565513123271,0.07474996102103798,0.07475,0.07475559733651567,0.0747559434487255,0.07477695500574014,0.07478001684316768,0.07479491027760021,0.07481316503798884,0.07482966711676012,0.07483730050149476,0.07483950250240945,0.07487888617802567,0.07489319367850061,0.07491338013773136,0.07492687996461103,0.0749297509824081,0.07494503315360111,0.07497091481506972,0.075,0.07502829847339555,0.0750303385181964,0.0750385428941992,0.07507140859859751,0.07507309012182847,0.07507742786749158,0.07513433061857608,0.07519620677098535,0.07520242120741152,0.07521001462052418,0.0752211926086968,0.07522224682480737,0.07529799436527031,0.07533606859149256,0.0753378856928277,0.0753413034660129,0.0753434244696694,0.07535731880543561,0.07538133177635392,0.07539200027232208,0.07541022993568011,0.07544289459575282,0.07545362941666105,0.07549250849940714,0.07549884846260468,0.0755,0.07552052000045645,0.07553704496639017,0.07554190263598104,0.0756164430006756,0.07564637919444676,0.0756704232519456,0.0756801994639939,0.07569791305308252,0.07570748809164476,0.07573719117826036,0.07574631139134541,0.0757534650112119,0.07579504976681622,0.07582309005809813,0.07588238219880193,0.07589370619881261,0.07590315172266808,0.07593948366064579,0.07597809930375568,0.075983403217767,0.07599886998476982,0.07600000000000001,0.07603599140148791,0.0760754816402145,0.07609101661965861,0.07612875364922816,0.07613937552359973,0.0761494610787108,0.07616245942128883,0.07616518085432561,0.07619356916155823,0.07621617656723097,0.07624507936326604,0.07625,0.07628074605383942,0.07631121255810469,0.07635782237214811,0.07638050684813946,0.07638294245012803,0.07638983241202357,0.07639685149522765,0.0764056968906341,0.07642010686170397,0.07645483025379528,0.07647884742106494,0.0764843995360177,0.07652641305665915,0.07656543993121719,0.07658191874365639,0.07664485866082553,0.07665210938897764,0.07665546987680191,0.07680290506263991,0.07680628879489493,0.07690426245200611,0.077,0.077,0.07708505418379519,0.07711196812333006,0.07734099545461093,0.0774402898867275,0.07747376857950984,0.0775410562431777,0.07762214058746784,0.07775,0.07798725722749199,0.07800000000000001,0.07800179183035705,0.07808602885961313,0.07818067698008876,0.07821196809686554,0.0785,0.07857633881577834,0.07859803107120766,0.079,0.07925,0.07952568537647334,0.07985249251185796,0.08,0.08],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":15},"mode":"markers","name":"Underlying Assets","text":["US Equity","Developed Intl","Emerging Mkt"],"x":[0.15,0.165,0.21],"y":[0.06,0.065,0.08],"type":"scatter"},{"customdata":[[[100.0],[0.0],[0.0]],[[95.0],[4.999999999999993],[0.0]],[[90.0],[9.999999999999998],[0.0]],[[85.00000000000001],[14.999999999999991],[0.0]],[[80.0],[19.999999999999996],[0.0]],[[75.0],[25.0],[0.0]],[[70.0],[29.999999999999993],[0.0]],[[65.0],[35.0],[0.0]],[[60.00000000000001],[39.99999999999999],[0.0]],[[55.00000000000001],[44.99999999999999],[0.0]],[[50.0],[50.0],[0.0]],[[45.0],[55.00000000000001],[0.0]],[[40.0],[60.0],[0.0]],[[35.0],[64.99999999999999],[0.0]],[[30.000000000000004],[70.0],[0.0]],[[25.0],[75.0],[0.0]],[[20.0],[80.0],[0.0]],[[15.000000000000002],[85.0],[0.0]],[[10.0],[90.0],[0.0]],[[5.0],[95.0],[0.0]],[[0.0],[100.0],[0.0]]],"hovertemplate":"US Equity: %{customdata[0]:.0f}%<br>Developed Intl: %{customdata[1]:.0f}%<br>Emerging Mkt: %{customdata[2]:.0f}%<br><extra></extra>","line":{"color":"red"},"mode":"lines","name":"Frontier: US Equity + Developed Intl","x":[0.15,0.1487876002898091,0.14777855054100375,0.14697703902310727,0.14638647478507022,0.1460094175044884,0.14584752311918087,0.1459015078743191,0.146171132580958,0.1466552078857072,0.14735162028291376,0.1482573775567341,0.14936867141405522,0.1506809543373017,0.1521890271997295,0.15388713396512393,0.15576905982896605,0.15782822941413238,0.16005780205913114,0.16245076177106713,0.165],"y":[0.06,0.06025,0.060500000000000005,0.06075,0.061000000000000006,0.06125,0.06149999999999999,0.061750000000000006,0.062,0.06225,0.0625,0.06275,0.063,0.06324999999999999,0.0635,0.06375,0.064,0.06425,0.06450000000000002,0.06475,0.065],"type":"scatter"},{"customdata":[[[0.0],[100.0],[0.0]],[[0.0],[95.0],[4.999999999999993]],[[0.0],[90.0],[9.999999999999998]],[[0.0],[85.00000000000001],[14.999999999999991]],[[0.0],[80.0],[19.999999999999996]],[[0.0],[75.0],[25.0]],[[0.0],[70.0],[29.999999999999993]],[[0.0],[65.0],[35.0]],[[0.0],[60.00000000000001],[39.99999999999999]],[[0.0],[55.00000000000001],[44.99999999999999]],[[0.0],[50.0],[50.0]],[[0.0],[45.0],[55.00000000000001]],[[0.0],[40.0],[60.0]],[[0.0],[35.0],[64.99999999999999]],[[0.0],[30.000000000000004],[70.0]],[[0.0],[25.0],[75.0]],[[0.0],[20.0],[80.0]],[[0.0],[15.000000000000002],[85.0]],[[0.0],[10.0],[90.0]],[[0.0],[5.0],[95.0]],[[0.0],[0.0],[100.0]]],"hovertemplate":"US Equity: %{customdata[0]:.0f}%<br>Developed Intl: %{customdata[1]:.0f}%<br>Emerging Mkt: %{customdata[2]:.0f}%<br><extra></extra>","line":{"color":"black"},"mode":"lines","name":"Frontier: Developed Intl + Emerging Mkt","x":[0.165,0.16477143259679453,0.16483628241379383,0.16519420389347808,0.16584329953302304,0.16678016968452816,0.168,0.16949668138344184,0.171262955714305,0.1732905796631773,0.17557049866079438,0.17809302344561398,0.1808480024772184,0.18382498470012174,0.18701336850610437,0.19040253412179156,0.19398195792392653,0.19774130827927683,0.2016705233790997,0.20575987218114222,0.21],"y":[0.065,0.06575,0.0665,0.06724999999999999,0.068,0.06875,0.0695,0.07025,0.071,0.07175,0.0725,0.07325000000000001,0.07400000000000001,0.07475,0.0755,0.07625,0.077,0.07775,0.0785,0.07925,0.08],"type":"scatter"},{"customdata":[[[100.0],[0.0],[0.0]],[[95.0],[0.0],[4.999999999999993]],[[90.0],[0.0],[9.999999999999998]],[[85.00000000000001],[0.0],[14.999999999999991]],[[80.0],[0.0],[19.999999999999996]],[[75.0],[0.0],[25.0]],[[70.0],[0.0],[29.999999999999993]],[[65.0],[0.0],[35.0]],[[60.00000000000001],[0.0],[39.99999999999999]],[[55.00000000000001],[0.0],[44.99999999999999]],[[50.0],[0.0],[50.0]],[[45.0],[0.0],[55.00000000000001]],[[40.0],[0.0],[60.0]],[[35.0],[0.0],[64.99999999999999]],[[30.000000000000004],[0.0],[70.0]],[[25.0],[0.0],[75.0]],[[20.0],[0.0],[80.0]],[[15.000000000000002],[0.0],[85.0]],[[10.0],[0.0],[90.0]],[[5.0],[0.0],[95.0]],[[0.0],[0.0],[100.0]]],"hovertemplate":"US Equity: %{customdata[0]:.0f}%<br>Developed Intl: %{customdata[1]:.0f}%<br>Emerging Mkt: %{customdata[2]:.0f}%<br><extra></extra>","line":{"color":"orange"},"mode":"lines","name":"Frontier: US Equity + Emerging Mkt","x":[0.15,0.15053529486469278,0.15138857288448163,0.1525544984587475,0.1540259718359212,0.15579433558380743,0.15784961197291553,0.16018075727127773,0.16277591959500642,0.16562268866311763,0.1687083281880299,0.17201998430414997,0.17554486605993352,0.17927039632912065,0.1831843333912592,0.18727486483775657,0.1915306763941484,0.1959409987725897,0.20049563586272892,0.2051849775202853,0.21],"y":[0.06,0.061,0.062,0.063,0.064,0.065,0.066,0.067,0.068,0.069,0.07,0.07100000000000001,0.07200000000000001,0.073,0.07400000000000001,0.075,0.07600000000000001,0.077,0.07800000000000001,0.079,0.08],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"range":[0.12397039465130373,0.24149999999999996],"tickformat":".1%"},"yaxis":{"title":{"text":"Expected Return"},"range":[0.051,0.092],"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('5b3f9453-de63-4b5c-a787-8d0676d183e3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.2: Portfolios of three risky assets</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="sec-frontier" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="sec-frontier"><span class="header-section-number">2.2.3</span> The Efficient Frontier</h3>
<p>With more than two risky assets, multiple portfolios can achieve the same expected return, but with different amounts of portfolio risk. This was seen above in <a href="#fig-three-asset">Figure&nbsp;<span>2.2</span></a>. All else equal, investors like expected return and dislike risk, so for a given expected return level, lower levels of portfolio standard deviation are preferred. For each level of expected return, we can find the portfolio that provides the highest possible diversification, that is, the lowest standard deviation. The set of these minimum-variance portfolios is called the <strong>frontier</strong>. The portfolio with the lowest standard deviation across all feasible expected returns is called the <strong>global minimum variance (GMV)</strong> portfolio. Portfolios that lie on the frontier with expected returns above those of the GMV portfolio are said to be efficient, and this portion of the frontier is called the <strong>efficient frontier</strong>.</p>
<p>Mathematically, a frontier portfolio with expected return <span class="math inline">\(\mu_{\text{target}}\)</span> is defined by the portfolio weights that solve the following constrained optimization problem:</p>
<p><span id="eq-frontier"><span class="math display">\[ \underset{w_1,w_2,\dots,w_N}{\text{min}} \text{var}[r_p] \tag{2.11}\]</span></span> subject to constraints: <span class="math inline">\(E[r_p]=\mu_{\text{target}}\)</span> and <span class="math inline">\(\sum_i w_i=1\)</span>. If short-selling is not allowed, we add an additional set of constraints: <span class="math inline">\(w_i \ge 0\)</span> for all assets. To trace out the frontier, we solve the problem for a range of target expected returns.</p>
<p>The GMV portfolio is the set of portfolio weights that minimizes portfolio variance without conditioning on the portfolio expected return: <span id="eq-gmv"><span class="math display">\[ \underset{w_1,w_2,\dots,w_N}{\text{min}} \text{var}[r_p] \tag{2.12}\]</span></span></p>
<p>subject to the constraints <span class="math inline">\(\sum_i w_i=1\)</span>. Again, short-sales may or may not be allowed in solving this problem.</p>
<p><a href="#fig-frontier-gmv">Figure&nbsp;<span>2.3</span></a> shows the frontier (without short sales) formed using the three equity funds. The GMV portfolio is the portfolio with the lowest standard deviation on the left-hand side of the frontier.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Based on French return series</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: US Equity</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 2: Developed International</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: Emerging Market</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>mn1<span class="op">=</span> <span class="dv">6</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>mn2<span class="op">=</span> <span class="fl">6.5</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>mn3<span class="op">=</span> <span class="dv">8</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>sd1<span class="op">=</span> <span class="dv">15</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>sd2<span class="op">=</span> <span class="fl">16.5</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>sd3<span class="op">=</span> <span class="dv">21</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>corr12 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>corr13 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>corr23 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_pos_def(x):</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.<span class="bu">all</span>(np.linalg.eigvals(x) <span class="op">&gt;</span> <span class="dv">0</span>):</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'True'</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'False'</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, mn3, sd1, sd2, sd3, c12, c13, c23, asset_names):</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array((mn1, mn2, mn3)) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array((sd1, sd2, sd3)) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    corr <span class="op">=</span> np.identity(<span class="dv">3</span>)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    corr[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> corr[<span class="dv">1</span>,<span class="dv">0</span>] <span class="op">=</span> c12 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    corr[<span class="dv">0</span>,<span class="dv">2</span>] <span class="op">=</span> corr[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> c13 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    corr[<span class="dv">1</span>,<span class="dv">2</span>] <span class="op">=</span> corr[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> c23 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.diag(sds) <span class="op">@</span> corr <span class="op">@</span> np.diag(sds)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports):</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> asset_names[i]</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, <span class="va">False</span>)</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    mingrid <span class="op">=</span> np.<span class="bu">min</span>(mns)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    maxgrid <span class="op">=</span> np.<span class="bu">max</span>(mns)</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    mnsFrontier <span class="op">=</span> np.linspace(mingrid, maxgrid, <span class="dv">50</span>)</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    portsFrontier <span class="op">=</span> [P.frontier(m) <span class="cf">for</span> m <span class="kw">in</span> mnsFrontier]</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    sdsFrontier <span class="op">=</span> [np.sqrt(w <span class="op">@</span> cov <span class="op">@</span> w) <span class="cf">for</span> w <span class="kw">in</span> portsFrontier]</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    string, cd <span class="op">=</span> custom(<span class="st">'frontier'</span>, portsFrontier)</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># string, cd = custom('frontier w/o short sales', portsFrontier)</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sdsFrontier,</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mnsFrontier,</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span>cd,</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string,</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"green"</span>),</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"3-Fund Frontier"</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"GMV portfolio&lt;br&gt;"</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> asset_names[i]<span class="op">+</span><span class="st">": "</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span>gmv[i]<span class="sc">:.1%}</span><span class="ss">'</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    trace1a <span class="op">=</span> go.Scatter(</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[np.sqrt(gmv <span class="op">@</span> cov <span class="op">@</span> gmv)],</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>[gmv <span class="op">@</span> mns],</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string,        </span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"green"</span>),</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Global Minimum Variance Portfolio"</span></span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>    trace3 <span class="op">=</span> go.Scatter(</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds,</span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns,</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>        <span class="co"># text=[1, 2, 3],</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>        <span class="co"># hovertemplate="Asset %{text}&lt;extra&gt;&lt;/extra&gt;",</span></span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>asset_names,</span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Underlying Assets"</span></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()  </span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> trace <span class="kw">in</span> (trace1, trace1a, trace3):</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(trace)</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace1=frontier w/o short sales</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace1a=GMV portfolio w/o short sales</span></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace3=Assets</span></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.update_xaxes(range=[0, 1.25 * np.max(sds)])</span></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.update_yaxes(range=[0, 1.25 * np.max(mns)])</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return largefig(fig), is_pos_def(cov)</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>figtbl(mn1, mn2, mn3, sd1, sd2, sd3, corr12, corr13, corr23, [<span class="st">"US Equity"</span>, <span class="st">"Developed Intl"</span>, <span class="st">"Emerging Mkt"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-frontier-gmv" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="a03f8243-df5e-4a69-be3d-05d0555f0bfc" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a03f8243-df5e-4a69-be3d-05d0555f0bfc")) {                    Plotly.newPlot(                        "a03f8243-df5e-4a69-be3d-05d0555f0bfc",                        [{"customdata":[[[1.0000000012690171],[-1.6920226428633447e-09],[4.2300560429227826e-10]],[[0.9183679080744738],[0.08163190488029354],[1.8704523271909353e-07]],[[0.8367351389358623],[0.16326471271136725],[1.4835277050608749e-07]],[[0.7551025257843631],[0.24489731255962482],[1.616560120723118e-07]],[[0.673565640456942],[0.32640227530911176],[3.2084233946259866e-05]],[[0.6116290985241579],[0.3817734468657489],[0.006597454610093188]],[[0.5933178210905573],[0.37897759909014117],[0.02770457981930152]],[[0.5750093395964916],[0.3761780233951537],[0.04881263700835477]],[[0.5567012440593702],[0.3733779330909083],[0.06992082284972162]],[[0.5383883515938985],[0.3705842386911286],[0.09102740971497283]],[[0.5200813483380506],[0.3677826920118514],[0.11213595965009802]],[[0.5017740486398098],[0.36498154058909765],[0.1332444107710926]],[[0.4834665645684783],[0.36218063499713105],[0.15435280043439062]],[[0.46515891745862425],[0.3593799467898614],[0.17546113575151437]],[[0.4468512080253341],[0.35657934168050676],[0.19656945029415912]],[[0.42854345671563876],[0.3537787924063594],[0.2176777508780019]],[[0.4102356642623814],[0.3509782979902944],[0.23878603774732415]],[[0.3919278326731305],[0.34817785575555393],[0.25989431157131554]],[[0.3736199651067157],[0.3453774614903654],[0.2810025734029189]],[[0.3553120662027745],[0.34257710900854627],[0.30211082478867923]],[[0.33700417025215407],[0.3397767525889646],[0.3232190771588813]],[[0.3186963125854704],[0.33697634512413466],[0.344327342290395]],[[0.3003885169596963],[0.3341758549380927],[0.36543562810221103]],[[0.28208080403953306],[0.3313752544779012],[0.3865439414825657]],[[0.26377320637090246],[0.328574500349001],[0.4076522932800966]],[[0.2454657694096434],[0.3257735319436051],[0.4287606986467515]],[[0.22715855697462703],[0.32297226416988534],[0.4498691788554876]],[[0.20885165955582918],[0.32017057637454005],[0.47097776406963077]],[[0.19054520753679524],[0.31736829471284483],[0.4920864977503599]],[[0.17223939410073985],[0.3145651616071766],[0.5131954442920835]],[[0.15393452101353342],[0.3117607747030437],[0.5343047042834229]],[[0.13563110883161592],[0.3089544399251923],[0.5554144512431918]],[[0.11733021251501735],[0.30614475066024815],[0.5765250368247345]],[[0.09899879841993721],[0.3033757517666144],[0.5976254498134483]],[[0.08069094161972291],[0.3005753431464925],[0.6187337152337846]],[[0.06238354736558234],[0.2977743177982715],[0.6398421348361463]],[[0.04407796332933381],[0.2949708788261942],[0.6609511578444719]],[[0.025784032761666437],[0.2921519018960094],[0.682064065342324]],[[0.007468548800615419],[0.289361662823668],[0.7031697883757165]],[[0.00016182922347619116],[0.27189307123944756],[0.7279450995370763]],[[2.247863545222831e-06],[0.24489496203227953],[0.7551027901041751]],[[8.73832738023945e-06],[0.21767542372675788],[0.7823158379458619]],[[2.7279911682753875e-06],[0.19047255315463196],[0.8095247188541996]],[[7.560944858353656e-07],[0.16326429799646702],[0.8367349459090472]],[[2.4421106607472147e-05],[0.13602186029323038],[0.8639537186001622]],[[8.469531662675571e-06],[0.10883224470608364],[0.8911592857622537]],[[2.3343113262333157e-06],[0.08162954064612359],[0.9183681250425502]],[[1.3113655536809874e-05],[0.05440428383343404],[0.9455826025110291]],[[2.1320128341073858e-07],[0.027210600085363294],[0.9727891867133532]],[[-2.078855384972893e-10],[2.7718051090481075e-10],[0.9999999999307051]]],"hovertemplate":"frontier<br>US Equity: %{customdata[0]:.1%}<br>Developed Intl: %{customdata[1]:.1%}<br>Emerging Mkt: %{customdata[2]:.1%}<br><extra></extra>","line":{"color":"green"},"mode":"lines","name":"3-Fund Frontier","x":[0.15000000004758812,0.1481253281440315,0.14679968883899114,0.1460380623904224,0.14584982226361967,0.14621018708025638,0.14674704076644476,0.14733607935237605,0.1479766796542143,0.14866817514794645,0.14940985917557165,0.15020098825680103,0.1510407854360856,0.1519284436645731,0.15286312917402467,0.15384398481822922,0.15487013335685024,0.15594068065942293,0.15705471880977306,0.15821132909386057,0.15940958485677884,0.16064855421730917,0.16192730263099905,0.1632448952951733,0.164600399391558,0.1659928861642781,0.16742143283287295,0.16888512434164957,0.17038305494815958,0.1719143296548527,0.17347806548905084,0.17507339263740654,0.1766994554423633,0.17835541320332135,0.18004044110191197,0.1817537305883169,0.18349449002879317,0.18526194509952693,0.18705533903265514,0.18888001627256087,0.19075924712648748,0.19269471374718453,0.1946844822192047,0.19672697269246964,0.19882079227670843,0.20096372662713122,0.20315465959056034,0.20539220791707272,0.20767429907665255,0.209999999996362],"y":[0.06,0.06040816326530612,0.060816326530612246,0.061224489795918366,0.061632653061224486,0.06204081632653061,0.062448979591836734,0.06285714285714286,0.06326530612244897,0.0636734693877551,0.06408163265306122,0.06448979591836734,0.06489795918367347,0.0653061224489796,0.06571428571428571,0.06612244897959184,0.06653061224489795,0.06693877551020408,0.0673469387755102,0.06775510204081632,0.06816326530612245,0.06857142857142857,0.06897959183673469,0.06938775510204082,0.06979591836734694,0.07020408163265306,0.07061224489795918,0.07102040816326531,0.07142857142857142,0.07183673469387755,0.07224489795918368,0.07265306122448979,0.07306122448979592,0.07346938775510203,0.07387755102040816,0.07428571428571429,0.07469387755102042,0.07510204081632653,0.07551020408163266,0.07591836734693877,0.0763265306122449,0.07673469387755102,0.07714285714285715,0.07755102040816327,0.07795918367346939,0.0783673469387755,0.07877551020408163,0.07918367346938776,0.07959183673469387,0.08],"type":"scatter"},{"hovertemplate":"GMV portfolio<br>US Equity: 68.7%<br>Developed Intl: 31.2%<br>Emerging Mkt: 0.0%<br>","marker":{"color":"green","size":15},"mode":"markers","name":"Global Minimum Variance Portfolio","x":[0.14584078022550442],"y":[0.061562505459663915],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":15},"mode":"markers","name":"Underlying Assets","text":["US Equity","Developed Intl","Emerging Mkt"],"x":[0.15,0.165,0.21],"y":[0.06,0.065,0.08],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"tickformat":".1%"},"yaxis":{"title":{"text":"Expected Return"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a03f8243-df5e-4a69-be3d-05d0555f0bfc');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.3: The Efficient Frontier and the Global Minimum Variance Portfolio</figcaption><p></p>
</figure>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Calculating the Frontier and GMV in Python
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The code below relies on a Portfolio python object, which needs to be executed or imported before using this code. See <a href="#sec-portfolio-class"><span>Section&nbsp;2.5</span></a> for details.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode p code-with-copy"><code class="sourceCode pascal"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> numpy <span class="kw">as</span> np</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Expected returns</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>mns = np.<span class="kw">array</span>([<span class="dv">0.10</span>, <span class="dv">0.05</span>, <span class="dv">0.07</span>])</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Standard deviations</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>sds = np.<span class="kw">array</span>([<span class="dv">0.20</span>, <span class="dv">0.12</span>, <span class="dv">0.15</span>])</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Correlations</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>corr12 = <span class="dv">0.3</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>corr13 = <span class="dv">0.3</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>corr23 = <span class="dv">0.3</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Covariance matrix</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>C  = np.identity(<span class="dv">3</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">1</span>] = C[<span class="dv">1</span>, <span class="dv">0</span>] = corr12</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">2</span>] = C[<span class="dv">2</span>, <span class="dv">0</span>] = corr13</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">1</span>, <span class="dv">2</span>] = C[<span class="dv">2</span>, <span class="dv">1</span>] = corr23</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>cov = np.diag(sds) @ C @ np.diag(sds)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Define portfolios <span class="kw">class</span> <span class="kw">object</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>AllowShorting = <span class="kw">False</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>P = portfolio(mns, cov, AllowShorting)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>Frontier Portfolios</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="st"># </span><span class="kw">Set</span> grid <span class="kw">of</span> expected return targets</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>mingrid = np.min(mns)</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>maxgrid = np.max(mns)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>mnsFrontier = np.linspace(mingrid, maxgrid, <span class="dv">50</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Calculate portfolios weights <span class="kw">for</span> each target expected return</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>portsFrontier = [P.frontier(m) <span class="kw">for</span> m <span class="kw">in</span> mnsFrontier]</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Calculate frontier standard deviations <span class="kw">for</span> each portfolio</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>sdsFrontier = [np.sqrt(w @ cov @ w) <span class="kw">for</span> w <span class="kw">in</span> portsFrontier]</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>GMV Portfolio</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>gmv = P.GMV</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>mn_gmv = gmv @ mns</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>sd_gmv = np.sqrt(gmv @ cov @ gmv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="sec-short-frontier" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="sec-short-frontier"><span class="header-section-number">2.2.4</span> Short-Selling</h3>
<p>Short-selling involves borrowing a security from another owner and selling it. The short-seller then has a liability to return the security to the security lender; this liability is equal to the security’s market value. Short-sellers hope to purchase the security later for a lower price. Thus, they reverse the order of the investing maxim: buy low-sell high. Short-sellers hope to sell high-buy low. In practice, there are limitations on short selling: it may not be possible to use the proceeds from a short sale to buy other risky assets, less than full interest may be earned on the proceeds, and a fee must be paid to borrow the asset being shorted. In this section, we ignore those issues. We assume that proceeds from short sales are invested in the other risky assets.</p>
<p>It may sometimes be possible to improve mean-variance efficiency by selling some assets short. Short positions in a portfolio have negative portfolio weights (<span class="math inline">\(w_i&lt;0\)</span>). <a href="#fig-frontier-gmv-shorting">Figure&nbsp;<span>2.4</span></a> shows how the GMV portfolio and frontier changes if we allow short-selling of the three equity portfolios. With short-selling allowed, a lower global minimum variance is possible. This portfolio shorts emerging market equity and invests the proceeds and initial capital in a combination of US and developed international equities.</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Based on French return series</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: US Equity</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 2: Developed International</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Asset 1: Emerging Market</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>mn1<span class="op">=</span> <span class="dv">6</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>mn2<span class="op">=</span> <span class="fl">6.5</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>mn3<span class="op">=</span> <span class="dv">8</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>sd1<span class="op">=</span> <span class="dv">15</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>sd2<span class="op">=</span> <span class="fl">16.5</span> </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>sd3<span class="op">=</span> <span class="dv">21</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>corr12 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>corr13 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>corr23 <span class="op">=</span> <span class="dv">75</span> </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_pos_def(x):</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.<span class="bu">all</span>(np.linalg.eigvals(x) <span class="op">&gt;</span> <span class="dv">0</span>):</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'True'</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'False'</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, mn3, sd1, sd2, sd3, c12, c13, c23, asset_names):</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array((mn1, mn2, mn3)) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array((sd1, sd2, sd3)) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    corr <span class="op">=</span> np.identity(<span class="dv">3</span>)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    corr[<span class="dv">0</span>,<span class="dv">1</span>] <span class="op">=</span> corr[<span class="dv">1</span>,<span class="dv">0</span>] <span class="op">=</span> c12 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    corr[<span class="dv">0</span>,<span class="dv">2</span>] <span class="op">=</span> corr[<span class="dv">2</span>,<span class="dv">0</span>] <span class="op">=</span> c13 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    corr[<span class="dv">1</span>,<span class="dv">2</span>] <span class="op">=</span> corr[<span class="dv">2</span>,<span class="dv">1</span>] <span class="op">=</span> c23 <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.diag(sds) <span class="op">@</span> corr <span class="op">@</span> np.diag(sds)</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports):</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> asset_names[i]</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No short-sales</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, <span class="va">False</span>)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    mingrid <span class="op">=</span> np.<span class="bu">min</span>(mns)</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    maxgrid <span class="op">=</span> np.<span class="bu">max</span>(mns)</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    mnsFrontier <span class="op">=</span> np.linspace(mingrid, maxgrid, <span class="dv">50</span>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    portsFrontier <span class="op">=</span> [P.frontier(m) <span class="cf">for</span> m <span class="kw">in</span> mnsFrontier]</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    sdsFrontier <span class="op">=</span> [np.sqrt(w <span class="op">@</span> cov <span class="op">@</span> w) <span class="cf">for</span> w <span class="kw">in</span> portsFrontier]</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># string, cd = custom('frontier', portsFrontier)</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>    string, cd <span class="op">=</span> custom(<span class="st">'frontier w/o short sales'</span>, portsFrontier)</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sdsFrontier,</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mnsFrontier,</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span>cd,</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string,</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"green"</span>),</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"3-Fund Frontier w/o short sales"</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"GMV portfolio w/o short sales &lt;br&gt;"</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> asset_names[i]<span class="op">+</span><span class="st">": "</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span>gmv[i]<span class="sc">:.1%}</span><span class="ss">'</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span>        </span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>    trace1a <span class="op">=</span> go.Scatter(</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[np.sqrt(gmv <span class="op">@</span> cov <span class="op">@</span> gmv)],</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>[gmv <span class="op">@</span> mns],</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>        <span class="co"># customdata=cd,</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string,        </span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"green"</span>),</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"GMV Portfolio w/o Short Sales"</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Allowing short-selling</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, <span class="va">True</span>)</span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>    mingrid <span class="op">=</span> <span class="fl">0.9</span><span class="op">*</span>np.<span class="bu">min</span>(mns)</span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>    maxgrid <span class="op">=</span> <span class="fl">1.025</span><span class="op">*</span>np.<span class="bu">max</span>(mns)</span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>    mnsFrontier <span class="op">=</span> np.linspace(mingrid, maxgrid, <span class="dv">50</span>)</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>    portsFrontier <span class="op">=</span> [P.frontier(m) <span class="cf">for</span> m <span class="kw">in</span> mnsFrontier]</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>    sdsFrontier <span class="op">=</span> [np.sqrt(w <span class="op">@</span> cov <span class="op">@</span> w) <span class="cf">for</span> w <span class="kw">in</span> portsFrontier]</span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>    string, cd <span class="op">=</span> custom(<span class="st">'frontier with short sales'</span>, portsFrontier)</span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>    trace2 <span class="op">=</span> go.Scatter(</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sdsFrontier,</span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mnsFrontier,</span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span>cd,</span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string,</span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"3-Fund Frontier with short sales"</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV</span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"GMV portfolio with short sales &lt;br&gt;"</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> asset_names[i]<span class="op">+</span><span class="st">": "</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span>gmv[i]<span class="sc">:.1%}</span><span class="ss">'</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[np.sqrt(gmv <span class="op">@</span> cov <span class="op">@</span> gmv)],</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> [gmv <span class="op">@</span> mns],</span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a>        mode <span class="op">=</span> <span class="st">"markers"</span>,</span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a>        hovertemplate <span class="op">=</span> string,</span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>        marker <span class="op">=</span> <span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"GMV Portfolio with Short Sales"</span></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a>    trace3 <span class="op">=</span> go.Scatter(</span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds,</span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns,</span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>        <span class="co"># text=[1, 2, 3],</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>        <span class="co"># hovertemplate="Asset %{text}&lt;extra&gt;&lt;/extra&gt;",</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>asset_names,</span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Underlying Assets"</span></span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> trace <span class="kw">in</span> (trace1, trace1a, trace2, trace2a, trace3):</span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(trace)</span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace1=frontier w/o short sales</span></span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace1a=GMV portfolio w/o short sales</span></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace2=frontier with short sales</span></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace2a=GMV portfolio with short sales</span></span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">#trace3=Assets</span></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.update_xaxes(range=[0, 1.25 * np.max(sds)])</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.update_yaxes(range=[0, 1.25 * np.max(mns)])</span></span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return largefig(fig), is_pos_def(cov)</span></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a>figtbl(mn1, mn2, mn3, sd1, sd2, sd3, corr12, corr13, corr23, [<span class="st">"US Equity"</span>, <span class="st">"Developed Intl"</span>, <span class="st">"Emerging Mkt"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-frontier-gmv-shorting" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="69fe43e1-2ee7-4447-8663-55749daff8cb" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("69fe43e1-2ee7-4447-8663-55749daff8cb")) {                    Plotly.newPlot(                        "69fe43e1-2ee7-4447-8663-55749daff8cb",                        [{"customdata":[[[1.0000000012690171],[-1.6920226428633447e-09],[4.2300560429227826e-10]],[[0.9183679080744738],[0.08163190488029354],[1.8704523271909353e-07]],[[0.8367351389358623],[0.16326471271136725],[1.4835277050608749e-07]],[[0.7551025257843631],[0.24489731255962482],[1.616560120723118e-07]],[[0.673565640456942],[0.32640227530911176],[3.2084233946259866e-05]],[[0.6116290985241579],[0.3817734468657489],[0.006597454610093188]],[[0.5933178210905573],[0.37897759909014117],[0.02770457981930152]],[[0.5750093395964916],[0.3761780233951537],[0.04881263700835477]],[[0.5567012440593702],[0.3733779330909083],[0.06992082284972162]],[[0.5383883515938985],[0.3705842386911286],[0.09102740971497283]],[[0.5200813483380506],[0.3677826920118514],[0.11213595965009802]],[[0.5017740486398098],[0.36498154058909765],[0.1332444107710926]],[[0.4834665645684783],[0.36218063499713105],[0.15435280043439062]],[[0.46515891745862425],[0.3593799467898614],[0.17546113575151437]],[[0.4468512080253341],[0.35657934168050676],[0.19656945029415912]],[[0.42854345671563876],[0.3537787924063594],[0.2176777508780019]],[[0.4102356642623814],[0.3509782979902944],[0.23878603774732415]],[[0.3919278326731305],[0.34817785575555393],[0.25989431157131554]],[[0.3736199651067157],[0.3453774614903654],[0.2810025734029189]],[[0.3553120662027745],[0.34257710900854627],[0.30211082478867923]],[[0.33700417025215407],[0.3397767525889646],[0.3232190771588813]],[[0.3186963125854704],[0.33697634512413466],[0.344327342290395]],[[0.3003885169596963],[0.3341758549380927],[0.36543562810221103]],[[0.28208080403953306],[0.3313752544779012],[0.3865439414825657]],[[0.26377320637090246],[0.328574500349001],[0.4076522932800966]],[[0.2454657694096434],[0.3257735319436051],[0.4287606986467515]],[[0.22715855697462703],[0.32297226416988534],[0.4498691788554876]],[[0.20885165955582918],[0.32017057637454005],[0.47097776406963077]],[[0.19054520753679524],[0.31736829471284483],[0.4920864977503599]],[[0.17223939410073985],[0.3145651616071766],[0.5131954442920835]],[[0.15393452101353342],[0.3117607747030437],[0.5343047042834229]],[[0.13563110883161592],[0.3089544399251923],[0.5554144512431918]],[[0.11733021251501735],[0.30614475066024815],[0.5765250368247345]],[[0.09899879841993721],[0.3033757517666144],[0.5976254498134483]],[[0.08069094161972291],[0.3005753431464925],[0.6187337152337846]],[[0.06238354736558234],[0.2977743177982715],[0.6398421348361463]],[[0.04407796332933381],[0.2949708788261942],[0.6609511578444719]],[[0.025784032761666437],[0.2921519018960094],[0.682064065342324]],[[0.007468548800615419],[0.289361662823668],[0.7031697883757165]],[[0.00016182922347619116],[0.27189307123944756],[0.7279450995370763]],[[2.247863545222831e-06],[0.24489496203227953],[0.7551027901041751]],[[8.73832738023945e-06],[0.21767542372675788],[0.7823158379458619]],[[2.7279911682753875e-06],[0.19047255315463196],[0.8095247188541996]],[[7.560944858353656e-07],[0.16326429799646702],[0.8367349459090472]],[[2.4421106607472147e-05],[0.13602186029323038],[0.8639537186001622]],[[8.469531662675571e-06],[0.10883224470608364],[0.8911592857622537]],[[2.3343113262333157e-06],[0.08162954064612359],[0.9183681250425502]],[[1.3113655536809874e-05],[0.05440428383343404],[0.9455826025110291]],[[2.1320128341073858e-07],[0.027210600085363294],[0.9727891867133532]],[[-2.078855384972893e-10],[2.7718051090481075e-10],[0.9999999999307051]]],"hovertemplate":"frontier w/o short sales<br>US Equity: %{customdata[0]:.1%}<br>Developed Intl: %{customdata[1]:.1%}<br>Emerging Mkt: %{customdata[2]:.1%}<br><extra></extra>","line":{"color":"green"},"mode":"lines","name":"3-Fund Frontier w/o short sales","x":[0.15000000004758812,0.1481253281440315,0.14679968883899114,0.1460380623904224,0.14584982226361967,0.14621018708025638,0.14674704076644476,0.14733607935237605,0.1479766796542143,0.14866817514794645,0.14940985917557165,0.15020098825680103,0.1510407854360856,0.1519284436645731,0.15286312917402467,0.15384398481822922,0.15487013335685024,0.15594068065942293,0.15705471880977306,0.15821132909386057,0.15940958485677884,0.16064855421730917,0.16192730263099905,0.1632448952951733,0.164600399391558,0.1659928861642781,0.16742143283287295,0.16888512434164957,0.17038305494815958,0.1719143296548527,0.17347806548905084,0.17507339263740654,0.1766994554423633,0.17835541320332135,0.18004044110191197,0.1817537305883169,0.18349449002879317,0.18526194509952693,0.18705533903265514,0.18888001627256087,0.19075924712648748,0.19269471374718453,0.1946844822192047,0.19672697269246964,0.19882079227670843,0.20096372662713122,0.20315465959056034,0.20539220791707272,0.20767429907665255,0.209999999996362],"y":[0.06,0.06040816326530612,0.060816326530612246,0.061224489795918366,0.061632653061224486,0.06204081632653061,0.062448979591836734,0.06285714285714286,0.06326530612244897,0.0636734693877551,0.06408163265306122,0.06448979591836734,0.06489795918367347,0.0653061224489796,0.06571428571428571,0.06612244897959184,0.06653061224489795,0.06693877551020408,0.0673469387755102,0.06775510204081632,0.06816326530612245,0.06857142857142857,0.06897959183673469,0.06938775510204082,0.06979591836734694,0.07020408163265306,0.07061224489795918,0.07102040816326531,0.07142857142857142,0.07183673469387755,0.07224489795918368,0.07265306122448979,0.07306122448979592,0.07346938775510203,0.07387755102040816,0.07428571428571429,0.07469387755102042,0.07510204081632653,0.07551020408163266,0.07591836734693877,0.0763265306122449,0.07673469387755102,0.07714285714285715,0.07755102040816327,0.07795918367346939,0.0783673469387755,0.07877551020408163,0.07918367346938776,0.07959183673469387,0.08],"type":"scatter"},{"hovertemplate":"GMV portfolio w/o short sales <br>US Equity: 68.7%<br>Developed Intl: 31.2%<br>Emerging Mkt: 0.0%<br><extra></extra>","marker":{"color":"green","size":15},"mode":"markers","name":"GMV Portfolio w/o Short Sales","x":[0.14584078022550442],"y":[0.061562505459663915],"type":"scatter"},{"customdata":[[[0.9722955145118738],[0.43693931398416874],[-0.40923482849604265]],[[0.9466641537881648],[0.4330192235205427],[-0.3796833773087075]],[[0.921032793064456],[0.4290991330569166],[-0.3501319261213725]],[[0.8954014323407467],[0.4251790425932904],[-0.3205804749340372]],[[0.8697700716170378],[0.4212589521296644],[-0.29102902374670214]],[[0.8441387108933288],[0.41733886166603834],[-0.26147757255936716]],[[0.8185073501696198],[0.41341877120241227],[-0.23192612137203206]],[[0.7928759894459109],[0.40949868073878626],[-0.20237467018469707]],[[0.7672446287222019],[0.4055785902751602],[-0.17282321899736205]],[[0.7416132679984927],[0.401658499811534],[-0.1432717678100267]],[[0.7159819072747837],[0.39773840934790794],[-0.11372031662269166]],[[0.6903505465510749],[0.3938183188842819],[-0.08416886543535665]],[[0.6647191858273658],[0.38989822842065586],[-0.05461741424802165]],[[0.6390878251036566],[0.38597813795702973],[-0.025065963060686258]],[[0.6134564643799477],[0.38205804749340366],[0.004485488126648743]],[[0.5878251036562387],[0.3781379570297776],[0.03403693931398376]],[[0.5621937429325298],[0.3742178665661515],[0.06358839050131876]],[[0.5365623822088208],[0.37029777610252546],[0.0931398416886538]],[[0.5109310214851119],[0.3663776856388994],[0.12269129287598882]],[[0.48529966076140296],[0.3624575951752734],[0.15224274406332383]],[[0.459668300037694],[0.35853750471164725],[0.18179419525065885]],[[0.4340369393139844],[0.35461741424802107],[0.21134564643799456]],[[0.4084055785902761],[0.3506973237843951],[0.24089709762532888]],[[0.3827742178665665],[0.346777233320769],[0.2704485488126646]],[[0.35714285714285765],[0.3428571428571429],[0.29999999999999966]],[[0.3315114964191487],[0.33893705239351685],[0.32955145118733464]],[[0.3058801356954397],[0.3350169619298907],[0.3591029023746697]],[[0.28024877497173073],[0.33109687146626465],[0.3886543535620047]],[[0.2546174142480218],[0.3271767810026386],[0.41820580474933966]],[[0.2289860535243129],[0.32325669053901246],[0.4477572559366747]],[[0.20335469280060392],[0.3193366000753865],[0.4773087071240097]],[[0.17772333207689495],[0.31541650961176043],[0.5068601583113448]],[[0.15209197135318542],[0.3114964191481343],[0.5364116094986805]],[[0.1264606106294771],[0.3075763286845083],[0.5659630606860148]],[[0.10082924990576747],[0.3036562382208821],[0.5955145118733506]],[[0.0751978891820585],[0.299736147757256],[0.6250659630606856]],[[0.049566528458349635],[0.29581605729363003],[0.6546174142480206]],[[0.02393516773464066],[0.29189596683000385],[0.6841688654353556]],[[-0.0016961929890682015],[0.2879758763663779],[0.7137203166226906]],[[-0.027327553712777064],[0.2840557859027517],[0.7432717678100256]],[[-0.05295891443648615],[0.28013569543912575],[0.7728232189973605]],[[-0.07859027516019523],[0.2762156049754996],[0.8023746701846957]],[[-0.1042216358839041],[0.2722955145118735],[0.8319261213720306]],[[-0.12985299660761362],[0.2683754240482473],[0.8614775725593662]],[[-0.15548435733132204],[0.26445533358462125],[0.8910290237467007]],[[-0.18111571805503135],[0.2605352431209953],[0.9205804749340365]],[[-0.20674707877874043],[0.25661515265736934],[0.9501319261213714]],[[-0.2323784395024493],[0.25269506219374316],[0.9796833773087064]],[[-0.25800980022615816],[0.2487749717301171],[1.0092348284960415]],[[-0.28364116094986724],[0.24485488126649113],[1.0387862796833764]]],"hovertemplate":"frontier with short sales<br>US Equity: %{customdata[0]:.1%}<br>Developed Intl: %{customdata[1]:.1%}<br>Emerging Mkt: %{customdata[2]:.1%}<br><extra></extra>","line":{"color":"blue"},"mode":"lines","name":"3-Fund Frontier with short sales","x":[0.14673600493784317,0.14600059702256735,0.1453690398466881,0.14484269187682333,0.14442270342115646,0.1441100043924805,0.14390529419622033,0.14380903399500047,0.1438214415468855,0.14394248875105542,0.14417190196513935,0.1445091650858807,0.14495352531265113,0.14550400144493278,0.14615939450334048,0.14691830041167012,0.14777912443677188,0.14874009705495886,0.1497992908985646,0.1509546384338073,0.15220395003029558,0.15354493210178732,0.15497520502530313,0.15649232057932283,0.15809377867943716,0.15977704322949116,0.16153955694612088,0.16337875505313992,0.16529207777825675,0.1672769816172183,0.1693309493591045,0.17145149889084832,0.17363619081906873,0.17588263496311402,0.17818849578509421,0.18055149683100266,0.18296942426222776,0.18544012955927625,0.187961531479837,0.19053161735183177,0.1931484437792302,0.1958101368345025,0.19851489180696053,0.2012609725711531,0.20404671063415383,0.20687050391518938,0.20973081530572735,0.21262617105300174,0.2155551590050448,0.2185164267507009],"y":[0.054,0.05457142857142857,0.05514285714285714,0.055714285714285716,0.056285714285714286,0.056857142857142856,0.057428571428571426,0.057999999999999996,0.058571428571428566,0.05914285714285714,0.05971428571428571,0.06028571428571428,0.06085714285714285,0.06142857142857143,0.062,0.06257142857142857,0.06314285714285714,0.06371428571428571,0.06428571428571428,0.06485714285714285,0.06542857142857142,0.066,0.06657142857142856,0.06714285714285714,0.06771428571428571,0.06828571428571428,0.06885714285714285,0.06942857142857142,0.06999999999999999,0.07057142857142856,0.07114285714285713,0.0717142857142857,0.07228571428571429,0.07285714285714284,0.07342857142857143,0.074,0.07457142857142857,0.07514285714285714,0.0757142857142857,0.07628571428571428,0.07685714285714285,0.07742857142857142,0.07799999999999999,0.07857142857142857,0.07914285714285713,0.07971428571428571,0.08028571428571428,0.08085714285714285,0.08142857142857142,0.08199999999999999],"type":"scatter"},{"hovertemplate":"GMV portfolio with short sales <br>US Equity: 78.3%<br>Developed Intl: 40.8%<br>Emerging Mkt: -19.1%<br><extra></extra>","marker":{"color":"blue","size":15},"mode":"markers","name":"GMV Portfolio with Short Sales","x":[0.14380094206054425],"y":[0.058220486111111115],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":15},"mode":"markers","name":"Underlying Assets","text":["US Equity","Developed Intl","Emerging Mkt"],"x":[0.15,0.165,0.21],"y":[0.06,0.065,0.08],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"tickformat":".1%"},"yaxis":{"title":{"text":"Expected Return"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('69fe43e1-2ee7-4447-8663-55749daff8cb');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.4: Short-Selling and the Frontier</figcaption><p></p>
</figure>
</div>
</div>
<p>The frontier with short-selling coincides with the frontier without short-selling for many expected return values, but shorting allows an investor to reach expected returns values below the minimum expected returns of the assets (the US equity portfolio) and above the maximum expected return of the underlying assets (the emerging market portfolio). These portfolios entail shorting the emerging market fund or the US equity fund, respectively.</p>
<p>Within the set of expected returns possible without shorting, lower risk portfolios are possible with shorting for expected returns close to the US market fund’s expected return and close to the emerging market fund’s expected return. Thus, short-selling may provide additional diversification benefits relative to those available to a short-sale-constrained investor.</p>
</section>
<section id="sec-n-risky" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="sec-n-risky"><span class="header-section-number">2.2.5</span> N Risky Assets</h3>
<p>Adding more securities to a portfolio results in additional diversification benefits, but the marginal benefit of an additional security decreases with the total number of securities in the portfolio. We discussed above that the diversification benefit in a two-asset case depends on the correlation between the two security returns. For portfolios of many assets, the portfolio variance depends more on the average correlation across securities than it does on the riskiness of the securities themselves. One reason for the sheer number of terms in the portfolio variance calculation <a href="#eq-n-asset-variance">Equation&nbsp;<span>2.8</span></a> involving correlations (through the covariance terms). We can write all of the terms in the three-asset version of <a href="#eq-n-asset-variance">Equation&nbsp;<span>2.8</span></a> in matrix form as follows:</p>

<table style="border:1px solid black; margin-left:auto;margin-right:auto;">
<!-- Row 1 -->
<tbody><tr>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_1^2 \text{var}[r_1]\)</span>
</td>
<td style="text-align:center; background-color:lightblue">
<span class="math inline">\(w_1 w_2 \text{cov}[r_1,r_2]\)</span>
</td>
<td style="text-align:center; background-color:lightcoral">
<span class="math inline">\(w_1 w_3 \text{cov}[r_1,r_3]\)</span>
</td>
</tr>
<!-- Row 2 -->
<tr>
<td style="text-align:center; background-color:lightblue">
<span class="math inline">\(w_2 w_1 \text{cov}[r_2,r_1]\)</span>
</td>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_2^2 \text{var}[r_2]\)</span>
</td>
<td style="text-align:center; background-color:#d9f2d9">
<span class="math inline">\(w_2 w_3 \text{cov}[r_2,r_3]\)</span>
</td>
</tr>
<!-- Row 3 -->
<tr>
<td style="text-align:center; background-color:lightcoral">
<span class="math inline">\(w_3 w_1 \text{cov}[r_3,r_1]\)</span>
</td>
<td style="text-align:center; background-color:#d9f2d9">
<span class="math inline">\(w_3 w_2 \text{cov}[r_3,r_2]\)</span>
</td>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_3^2 \text{var}[r_3]\)</span>
</td>
</tr>

</tbody></table>
For the three-asset portfolio, there are 3 variance terms and 3 distinct covariance terms. For a five-asset portfolio, the tabular representation of <a href="#eq-n-asset-variance">Equation&nbsp;<span>2.8</span></a> is:

<table style="border:1px solid black; margin-left:auto;margin-right:auto;">
<!-- Row 1 -->
<tbody><tr>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_1^2 \text{var}[r_1]\)</span>
</td>
<td style="text-align:center; background-color:lightblue">
<span class="math inline">\(w_1 w_2 \text{cov}[r_1,r_2]\)</span>
</td>
<td style="text-align:center; background-color:lightcoral">
<span class="math inline">\(w_1 w_3 \text{cov}[r_1,r_3]\)</span>
</td>
<td style="text-align:center; background-color:lightgray">
<span class="math inline">\(w_1 w_4 \text{cov}[r_1,r_4]\)</span>
</td>
<td style="text-align:center; background-color:darkseagreen">
<span class="math inline">\(w_1 w_5 \text{cov}[r_1,r_5]\)</span>
</td>
</tr>
<!-- Row 2 -->
<tr>
<td style="text-align:center; background-color:lightblue">
<span class="math inline">\(w_2 w_1 \text{cov}[r_2,r_1]\)</span>
</td>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_2^2 \text{var}[r_2]\)</span>
</td>
<td style="text-align:center; background-color:#d9f2d9">
<span class="math inline">\(w_2 w_3 \text{cov}[r_2,r_3]\)</span>
</td>
<td style="text-align:center; background-color:khaki3">
<span class="math inline">\(w_2 w_4 \text{cov}[r_2,r_4]\)</span>
</td>
<td style="text-align:center; background-color:lavender">
<span class="math inline">\(w_2 w_5 \text{cov}[r_2,r_5]\)</span>
</td>
</tr>
<!-- Row 3 -->
<tr>
<td style="text-align:center; background-color:lightcoral">
<span class="math inline">\(w_3 w_1 \text{cov}[r_3,r_1]\)</span>
</td>
<td style="text-align:center; background-color:#d9f2d9">
<span class="math inline">\(w_3 w_2 \text{cov}[r_3,r_2]\)</span>
</td>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_3^2 \text{var}[r_3]\)</span>
</td>
<td style="text-align:center; background-color:pink">
<span class="math inline">\(w_3 w_4 \text{cov}[r_3,r_4]\)</span>
</td>
<td style="text-align:center; background-color:wheat">
<span class="math inline">\(w_3 w_5 \text{cov}[r_3,r_5]\)</span>
</td>
</tr>
<!-- Row 4 -->
<tr>
<td style="text-align:center; background-color:lightgray">
<span class="math inline">\(w_4 w_1 \text{cov}[r_4,r_1]\)</span>
</td>
<td style="text-align:center; background-color:khaki3">
<span class="math inline">\(w_4 w_2 \text{cov}[r_4,r_2]\)</span>
</td>
<td style="text-align:center; background-color:pink">
<span class="math inline">\(w_4 w_3 \text{cov}[r_4,r_3]\)</span>
</td>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_4^2 \text{var}[r_4]\)</span>
</td>
<td style="text-align:center; background-color:thistle">
<span class="math inline">\(w_4 w_5 \text{cov}[r_4,r_5]\)</span>
</td>
</tr>
<!-- Row 5 -->
<tr>
<td style="text-align:center; background-color:darkseagreen">
<span class="math inline">\(w_5 w_1 \text{cov}[r_5,r_1]\)</span>
</td>
<td style="text-align:center; background-color:lavender">
<span class="math inline">\(w_5 w_2 \text{cov}[r_5,r_2]\)</span>
</td>
<td style="text-align:center; background-color:wheat">
<span class="math inline">\(w_5 w_3 \text{cov}[r_5,r_3]\)</span>
</td>
<td style="text-align:center; background-color:thistle">
<span class="math inline">\(w_5 w_4 \text{cov}[r_5,r_4]\)</span>
</td>
<td style="text-align:center; background-color:gray">
<span class="math inline">\(w_5^2 \text{var}[r_5]\)</span>
</td>
</tr>

</tbody></table>
<p>For the five-asset portfolio, there are 5 variance terms (along the diagonal) and 10 =((25-5)/2) distinct covariance terms. For an <span class="math inline">\(N\)</span> asset portfolio, there will be <span class="math inline">\(N\)</span> variance terms and <span class="math inline">\(\frac{N^2-N}{2}\)</span> distinct covariance terms. For portfolios with many assets, the number of covariance terms will quickly dwarf the number of variance terms.</p>
<p>To see how correlation across assets can dominate the riskiness of individual securities in portfolios with many assets, consider an equally-weighted (<span class="math inline">\(w_i=1/N\)</span> for all assets) portfolio where all all assets have the same variance <span class="math inline">\((\sigma^2_{\text{all}})\)</span> and all pairs of assets have the same covariance <span class="math inline">\((\overline{\text{cov}})\)</span>. The variance of this equal-weighted portfolio is:</p>
<p><span class="math display">\[
\begin{align*}
  \text{var}(r_p) =&amp; N\cdot \left(\frac{1}{N}\right)^2 \sigma^2_{\text{all}} + (N^2-N)\cdot \left(\frac{1}{N}\right)^2 \overline{\text{cov}} \\
  =&amp; \left(\frac{1}{N}\right) \sigma^2_{\text{all}} + \left(\frac{N-1}{N}\right) \overline{\text{cov}}\,.
\end{align*}
\]</span></p>
<p>As <span class="math inline">\(N\)</span> gets very large, the portfolio variance approaches the common covariance across assets:</p>
<p><span id="eq-diversification-limit"><span class="math display">\[ \text{var}(r_p) \underset{N\rightarrow \infty}{\longrightarrow} 0\cdot\sigma^2_{\text{all}}+(1-0)\overline{\text{cov}}=\overline{\text{cov}}\,. \tag{2.13}\]</span></span></p>
<p><a href="#fig-diversification">Figure&nbsp;<span>2.5</span></a> plots the portfolio variance for this equally-weighted portfolio as a function of the number of assets for three correlation values. The figure demonstrates three insights. First, as discussed previously, the diversification benefit is greater for lower levels of correlation across assets (that is, lower <span class="math inline">\(\overline{\text{cov}}\)</span> here). Second, the marginal benefit of adding additional securities to a portfolio decreases with the number of securities. A large fraction of the overall risk reduction is due to the first 10 to 20 securities added to the portfolio. Third, there is a limit to risk reduction, and this limit is governed by the amount of common comovement across assets in the portfolio. <span class="math inline">\(\sigma_{\text{all}}\)</span> is assumed to be 40%, so <a href="#eq-diversification-limit">Equation&nbsp;<span>2.13</span></a> tells us that the portfolio standard deviation approaches values of 12.6%, 20%, and 28.3%, respectively, for correlations of 10%, 25%, and 50% as the number of portfolio assets gets large.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> <a href="#fig-diversification">Figure&nbsp;<span>2.5</span></a> shows that for portfolios of 200 assets, the portfolio standard deviation is already quite close to these limiting standard deviations.</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>std  <span class="op">=</span> <span class="dv">40</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>corr0 <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>corr1 <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>corr2 <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Range of x-axis</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>Num <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(std, cor):</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    var <span class="op">=</span> std <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> var <span class="op">*</span> cor</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    stdevs <span class="op">=</span> [np.sqrt(var <span class="op">/</span> n <span class="op">+</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> cov <span class="op">/</span> n) <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, Num <span class="op">+</span> <span class="dv">1</span>)]</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(stdevs)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"Standard Deviation"</span>]</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"Number of Assets"</span>] <span class="op">=</span> [i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, Num <span class="op">+</span> <span class="dv">1</span>)]</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(std, cor0, cor1, cor2):</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The inputs are in percents</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    std <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    cor0 <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    cor1 <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    cor2 <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Correlation 0</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(std, cor0)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    trace0 <span class="op">=</span> go.Scatter(</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"Number of Assets"</span>],</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"Standard Deviation"</span>],</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"Correlation="</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>cor0<span class="sc">:.0f}</span><span class="ss">%'</span> <span class="op">+</span> <span class="st">"&lt;br&gt;Number of Assets = %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;Standard Deviation = %</span><span class="sc">{y:0.2%}</span><span class="st"> &lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">"Correlation="</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>cor0<span class="sc">:.0f}</span><span class="ss">%'</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Correlation 1</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(std, cor1)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"Number of Assets"</span>],</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"Standard Deviation"</span>],</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"Correlation="</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>cor1<span class="sc">:.0f}</span><span class="ss">%'</span> <span class="op">+</span> <span class="st">"&lt;br&gt;Number of Assets = %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;Standard Deviation = %</span><span class="sc">{y:0.2%}</span><span class="st"> &lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">"Correlation="</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>cor1<span class="sc">:.0f}</span><span class="ss">%'</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    )   </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Correlation 2</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(std, cor2)</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    trace2 <span class="op">=</span> go.Scatter(</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"Number of Assets"</span>],</span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"Standard Deviation"</span>],</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"Correlation="</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>cor2<span class="sc">:.0f}</span><span class="ss">%'</span> <span class="op">+</span> <span class="st">"&lt;br&gt;Number of Assets = %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;Standard Deviation = %</span><span class="sc">{y:0.2%}</span><span class="st"> &lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">"Correlation="</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>cor2<span class="sc">:.0f}</span><span class="ss">%'</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    )      </span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace0)</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2)</span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">",.0%"</span>, rangemode<span class="op">=</span><span class="st">"tozero"</span>)</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Number of Assets"</span></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.74</span>))</span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>figtbl(std, corr0, corr1, corr2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-diversification" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="0dcf986d-9df5-4648-9e68-597d8f16837b" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("0dcf986d-9df5-4648-9e68-597d8f16837b")) {                    Plotly.newPlot(                        "0dcf986d-9df5-4648-9e68-597d8f16837b",                        [{"hovertemplate":"Correlation=10%<br>Number of Assets = %{x}<br>Standard Deviation = %{y:0.2%} <extra></extra>","mode":"lines","name":"Correlation=10%","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],"y":[0.4,0.29664793948382656,0.2529822128134704,0.2280350850198276,0.21166010488516726,0.2,0.191236577493503,0.18439088914585777,0.1788854381999832,0.17435595774162696,0.17056057308448835,0.16733200530681513,0.16455067024148848,0.16212869667555552,0.16,0.15811388300841897,0.1564307777750086,0.1549193338482967,0.1535543791899829,0.15231546211727817,0.1511857892036909,0.15015143870590966,0.14920076931845022,0.14832396974191328,0.14751271131668622,0.14675987714106856,0.14605934866804432,0.145405835999994,0.1447947417601182,0.1442220510185596,0.14368424162141993,0.14317821063276354,0.14270121360253518,0.14225081411945265,0.14182484166846696,0.14142135623730953,0.14103861844151727,0.1406750641876894,0.14032928308912468,0.14,0.13968605915391566,0.13938641048743394,0.13910009780479066,0.13882624850051692,0.13856406460551018,0.13831281496162495,0.13807182836203064,0.13784048752090225,0.13761822375762625,0.13740451229854136,0.13719886811400708,0.13700084222088116,0.13681001839074314,0.13662601021279466,0.13644845846759068,0.1362770287738494,0.13611140947574413,0.13595130974245764,0.1357964578555041,0.13564659966250536,0.13550149717883164,0.13536092732085317,0.13522468075656266,0.13509256086106297,0.13496438276591577,0.13483997249264845,0.13471916616184682,0.13460180927024545,0.13448775602908664,0.1343768687577697,0.1342690173274703,0.1341640786499874,0.13406193620758292,0.13396247962002625,0.1338656042454521,0.13377121081198776,0.1336792050774161,0.13358949751441485,0.13350200301915544,0.13341664064126335,0.13333333333333336,0.13325200771836654,0.1331725938736501,0.13309502512973848,0.13301923788331832,0.13294517142285073,0.13287276776598397,0.13280197150781928,0.13273272967919364,0.13266499161421602,0.13259870882635919,0.13253383489246945,0.1324703253441094,0.13240813756569883,0.1323472306989618,0.13228756555322954,0.1322291045211841,0.13217181149966148,0.1321156518151633,0.13206059215375343,0.13200660049504126,0.13195364604997603,0.13190169920219824,0.13185073145271278,0.13180071536766624,0.1317516245290271,0.13170343348798227,0.13165611772087668,0.13160965358753587,0.13156401829182215,0.13151918984428584,0.1314751470267833,0.1314318693589414,0.13138933706635728,0.1313475310504293,0.13130643285972257,0.13126602466277873,0.13122628922228521,0.13118720987052607,0.13114877048604004,0.1311109554714178,0.13107374973217353,0.13103713865663077,0.1310011080967663,0.13096564434995922,0.13093073414159545,0.13089636460848153,0.13086252328302403,0.13082919807813334,0.13079637727281407,0.13076404949840525,0.13073220372543673,0.1307008292510698,0.13066991568709166,0.13063945294843618,0.13060943124220306,0.1305798410571515,0.13055067315364394,0.13052191855401754,0.13049356853336272,0.13046561461068845,0.13043804854045563,0.13041086230446072,0.130384048104053,0.13035759835266936,0.13033150566867174,0.13030576286847295,0.1302803629599372,0.13025529913604336,0.13023056476879769,0.1302061534033855,0.13018205875255098,0.1301582746911937,0.13013479525117386,0.13011161461631515,0.1300887271175982,0.13006612722853442,0.13004380956071415,0.1300217688595202,0.13000000000000003,0.12997849798289024,0.1299572579307862,0.12993627508445088,0.1299155447992572,0.12989506254175823,0.12987482388637944,0.12985482451222904,0.12983506020002017,0.12981552682910147,0.1297962203745911,0.12977713690461004,0.12975827257761097,0.1297396236397984,0.12972118642263705,0.12970295734044443,0.12968493288806462,0.12966710963862002,0.129649484241338,0.12963205341944956,0.12961481396815722,0.12959776275266963,0.12958089670630002,0.12956421282862657,0.12954770818371192,0.12953137989837976,0.12951522516054667,0.1294992412176065,0.1294834253748661,0.12946777499402995,0.1294522874917323,0.12943696033811472,0.12942179105544788,0.12940677721679536,0.1293919164447189,0.1293772064100224,0.12936264483053453,0.12934822946992774,0.12933395813657267,0.12931982868242697,0.1293058390019569],"type":"scatter"},{"hovertemplate":"Correlation=25%<br>Number of Assets = %{x}<br>Standard Deviation = %{y:0.2%} <extra></extra>","mode":"lines","name":"Correlation=25%","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],"y":[0.4,0.31622776601683794,0.28284271247461906,0.2645751311064591,0.2529822128134704,0.24494897427831783,0.23904572186687875,0.2345207879911715,0.23094010767585033,0.22803508501982764,0.2256304299271065,0.223606797749979,0.22188007849009167,0.22038926600773592,0.21908902300206645,0.2179449471770337,0.2169304578186562,0.2160246899469287,0.21521103473958816,0.2144761058952722,0.21380899352993954,0.21320071635561047,0.212643813228478,0.21213203435596428,0.2116601048851673,0.21122354181147665,0.21081851067789198,0.21044171232366052,0.2100902925755561,0.20976176963403032,0.20945397523545714,0.20916500663351892,0.20889318714683744,0.20863703354080237,0.2083952289006911,0.2081665999466133,0.2079500979640146,0.2077447826946374,0.20754980866510836,0.20736441353327723,0.2071879081131249,0.20701966780270628,0.20685912519011246,0.206705763652765,0.2065591117977289,0.206418738616856,0.2062842492517587,0.20615528128088306,0.20603150145508511,0.20591260281974003,0.2057983021710106,0.2056883378018606,0.20558246750001868,0.20548046676563259,0.20538212722098823,0.20528725518857024,0.20519567041703082,0.2051072049374214,0.20502170203440598,0.20493901531919198,0.2048590078926336,0.20478155158843714,0.20470652628766361,0.20463381929681126,0.20456332478270353,0.20449494325821807,0.2044285811135992,0.20436415018870838,0.20430156738209967,0.20424075429327448,0.20418163689487465,0.20412414523193154,0.20406821314560084,0.2040137780190878,0.20396078054371142,0.2039091645032686,0.20385887657505022,0.20380986614602725,0.2037620851428748,0.20371548787463364,0.20367003088692623,0.20362567282674932,0.20358237431695833,0.20354009783964297,0.20349880762766734,0.2034584695637154,0.20341905108624314,0.20338052110179178,0.2033428499031662,0.20330600909302543,0.20326997151247236,0.20323471117426514,0.20320020320030482,0.20316642376308358,0.2031333500308033,0.20310096011589904,0.20306923302672383,0.20303814862216996,0.20300768756902093,0.2029778313018444,0.20294856198525082,0.20291986247835697,0.20289171630130526,0.20286410760370144,0.202837021134844,0.20281044221562688,0.20278435671200776,0.20275875100994067,0.20273361199167905,0.20270892701336343,0.20268468388381272,0.20266087084444442,0.20263747655025433,0.20261449005179114,0.20259190077806558,0.20256969852033815,0.20254787341673333,0.20252641593763115,0.20250531687179116,0.2024845673131659,0.20246415864836445,0.20244408254472904,0.20242433093898957,0.20240489602646444,0.2023857702507763,0.20236694629405505,0.20234841706760098,0.2023301757029831,0.20231221554354928,0.20229453013632606,0.20227711322428732,0.20225995873897265,0.20224306079343674,0.202226413675513,0.20221001184137471,0.202193849909379,0.2021779226541789,0.20216222500108993,0.20214675202069907,0.2021314989237028,0.2021164610559646,0.20210163389377936,0.20208701303933624,0.20207259421636906,0.20205837326598608,0.2020443461426703,0.20203050891044216,0.20201685773917685,0.20200338890106964,0.20199009876724155,0.2019769838044795,0.20196404057210415,0.20195126571896055,0.2019386559805249,0.20192620817612336,0.20191391920625673,0.2019017860500275,0.20188980576266372,0.20187797547313596,0.20186629238186352,0.20185475375850537,0.2018433569398328,0.20183209932767984,0.20182097838696844,0.20180999164380523,0.20179913668364655,0.20178841114952936,0.2017778127403648,0.20176733920929235,0.20175698836209166,0.20174675805564984,0.20173664619648227,0.20172665073930396,0.20171676968565058,0.20170700108254622,0.2016973430212163,0.2016877936358443,0.2016783511023699,0.20166901363732734,0.20165977949672234,0.20165064697494617,0.20164161440372536,0.20163268015110558,0.20162384262046856,0.20161510024958115,0.20160645150967416,0.20159789490455135,0.20158942896972656,0.20158105227158787,0.2015727634065883,0.20156456100046186,0.20155644370746376,0.20154841020963452,0.20154045921608627,0.2015325894623116,0.20152479970951265,0.20151708874395138,0.20150945537631879,0.2015018984411236,0.20149441679609886],"type":"scatter"},{"hovertemplate":"Correlation=50%<br>Number of Assets = %{x}<br>Standard Deviation = %{y:0.2%} <extra></extra>","mode":"lines","name":"Correlation=50%","x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],"y":[0.4,0.3464101615137755,0.32659863237109044,0.31622776601683794,0.3098386676965934,0.3055050463303894,0.3023715784073818,0.30000000000000004,0.29814239699997197,0.29664793948382656,0.29541957835039856,0.2943920288775949,0.29351975428213717,0.29277002188455997,0.29211869733608864,0.29154759474226505,0.2910427500435996,0.2905932629027116,0.2901905000440047,0.2898275349237888,0.2894987457822984,0.2891995221924885,0.2889260474058461,0.2886751345948129,0.2884441020371192,0.2882306768491569,0.2880329199292383,0.2878491668515698,0.2876779808912305,0.28751811537130434,0.28736848324283987,0.2872281323269015,0.2870962250261094,0.28697202159177576,0.2868548662402545,0.28674417556808757,0.28663942883379145,0.2865401597645516,0.2864459496157732,0.2863564212655271,0.28627123416821876,0.2861900800250804,0.2861126790554363,0.2860387767736777,0.28596814119369623,0.28590056039606254,0.28583584040419857,0.28577380332470415,0.28571428571428575,0.28565713714171403,0.2856022189181667,0.28554940297339365,0.2854985708585319,0.2854496128592251,0.28540242720507036,0.28535691936340263,0.2853130014071035,0.285270591447537,0.285229613124917,0.2851899951494325,0.28515167088732984,0.2851145779868949,0.2850786580399194,0.2850438562747845,0.28501012127777015,0.28497740473960603,0.2849456612246382,0.28491484796029026,0.2848849246447679,0.284855853271189,0.28482759796652485,0.28480012484391776,0.28477340186709665,0.2847473987257497,0.284722086720835,0.2846974386589162,0.28467342875470664,0.2846500325410855,0.28462722678592806,0.28460498941515416,0.28458329944146,0.2845621368982486,0.28454148277832314,0.2845213189769459,0.28450162823890524,0.2844823941092657,0.28446360088750383,0.284445233584764,0.28442727788398636,0.2844097201026872,0.28439254715818574,0.28437574653509273,0.284359306254892,0.2843432148474573,0.2843274613243644,0.2843120351538664,0.28429692623741337,0.28428212488760574,0.2842676218074806,0.28425340807103794,0.28423947510492065,0.2842258146711699,0.28421241885098236,0.2841992800294026,0.2841863908808879,0.2841737443556883,0.2841613336669891,0.28414915227876497,0.28413719389430253,0.2841254524453463,0.284113922081831,0.2841025971621621,0.28409147224401143,0.2840805420755968,0.2840698015874145,0.2840592458843996,0.2840488702384868,0.2840386700815488,0.2840286409986906,0.28401877872187725,0.28400907912387835,0.28399953821250845,0.2839901521251486,0.28398091712353246,0.2839718295887816,0.28396288601667763,0.28395408301315644,0.2839454172900137,0.28393688566080966,0.2839284850369625,0.28392021242402027,0.28391206491810206,0.28390403970249967,0.2838961340444303,0.28388834529193446,0.28388067087090957,0.28387310828227363,0.2838656550992521,0.2838583089647815,0.28385106758902384,0.2838439287469874,0.2838368902762468,0.2838299500747597,0.28382310609877337,0.28381635636081837,0.2838096989277841,0.28380313191907314,0.28379665350483,0.2837902619042413,0.2837839553839035,0.283777732256256,0.2837715908780752,0.2837655296490282,0.28375954701028216,0.2837536414431682,0.2837478114678958,0.28374205564231647,0.28373637256073475,0.2837307608527635,0.28372521918222215,0.28371974624607627,0.2837143407734157,0.283709001524471,0.2837037272896653,0.2836985168887009,0.2836933691696783,0.2836882830082478,0.2836832573067901,0.28367829099362735,0.28367338302226053,0.28366853237063494,0.28366373804043016,0.28365899905637537,0.28365431446558775,0.2836496833369339,0.28364510476041266,0.2836405778465591,0.28363610172586845,0.28363167554823926,0.28362729848243534,0.2836229697155649,0.2836186884525779,0.2836144539157787,0.28361026534435535,0.28360612199392393,0.2836020231360872,0.2835979680580082,0.28359395606199655,0.2835899864651085,0.28358605859875935,0.28358217180834777,0.28357832545289263,0.28357451890468005,0.2835707515489223,0.28356702278342666,0.2835633320182744,0.28355967867550985,0.28355606218883844,0.2835524820033344,0.28354893757515653],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"yaxis":{"tickformat":",.0%","rangemode":"tozero","title":{"text":"Standard Deviation"}},"xaxis":{"title":{"text":"Number of Assets"}},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.74}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('0dcf986d-9df5-4648-9e68-597d8f16837b');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.5: Portfolios of three risky assets</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
<section id="capital-allocation-to-risky-assets" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="capital-allocation-to-risky-assets"><span class="header-section-number">2.3</span> Capital Allocation to Risky Assets</h2>
<p>In this section, we introduce risk-free assets for saving and borrowing into the investment opportunity set. We generally consider assets like Treasury bills or money-market mutual funds as the risk-free asset for saving in practice. Borrowing rates will depend on the investor’s access to debt markets.</p>
<section id="sec-cal-1risky" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="sec-cal-1risky"><span class="header-section-number">2.3.1</span> A Single Risky Asset</h3>
<p>What does the set of possible portfolios look like if we consider the US stock market index fund as the risky asset and Treasury bills as the risk-free asset. For a given portfolio weight in the risky asset <span class="math inline">\(w_{\text{risky}}\)</span>, we first need to determine the portfolio’s expected return and standard deviation. Considering all possible risky portfolio weights traces out the set of possible investments, which is called the <strong>capital allocation line</strong> in expected return/standard deviation space.</p>
<p>From <a href="#eq-2asset-variance">Equation&nbsp;<span>2.5</span></a>, the variance of portfolio <span class="math inline">\(r_p\)</span> with non-negative <span class="math inline">\(w_{\text{risky}}\)</span> invested in the risky asset and <span class="math inline">\(1-w_{\text{risky}}\)</span> invested in the risk-free rate is: <span class="math display">\[\begin{align}
    \text{var}[r_p] =&amp; w_{\text{risky}}^2 \text{var}[r_{\text{risky}}]+ (1-w_{\text{risky}})^2 \text{var}[r_f]+ 2 w_{\text{risky}}(1-w_{\text{risky}}) \text{cov}[r_{\text{risky}},r_f] \\
                    =&amp; w_{\text{risky}}^2 \text{var}[r_{\text{risky}}]+ (1-w_{\text{risky}})^2 \cdot 0 + 2 w_{\text{risky}}(1-w_{\text{risky}}) \cdot 0 \\
                     =&amp;w_{\text{risky}}^2 \text{var}[r_{\text{risky}}]\,,
\end{align}\]</span> where we have used the facts that the risk-free asset’s return is risk-free (<span class="math inline">\(\text{var}[r_f]=0\)</span>) and does not covary with the risky asset return. Thus, the portfolio’s standard deviation is: <span id="eq-sd-rf-risky"><span class="math display">\[ \text{sd}[r_p] = w_{\text{risky}}\cdot \text{sd}[r_{\text{risky}}]\,. \tag{2.14}\]</span></span></p>
<p>The expected return of the portfolio is:</p>
<p><span id="eq-expret-rf-risky"><span class="math display">\[ E[r_p] = w_{\text{risky}} E[r_{\text{risky}}]+ (1-w_{\text{risky}}) r_f \,. \tag{2.15}\]</span></span> Solving <a href="#eq-sd-rf-risky">Equation&nbsp;<span>2.14</span></a> for <span class="math inline">\(w_{\text{risky}}\)</span>, substituting into <a href="#eq-expret-rf-risky">Equation&nbsp;<span>2.15</span></a>, and rearranging yields the relationship between expected return and standard deviation along the capital allocation line: <span id="eq-cal"><span class="math display">\[ E[r_p] = r_f + \bigg[ \frac{E[r_{\text{risky}}]-r_f}{\text{sd}[r_{\text{risky}}] }\bigg] \cdot \text{sd}[r_p] \,. \tag{2.16}\]</span></span></p>
<p>The capital allocation line for a risky asset is a set of portfolios combining the risky asset with the risk-free asset. In expected return/standard deviation space, the <span class="math inline">\(y\)</span>-intercept is the risk-free rate of return and the slope of the line is the ratio of the expected excess return of the risky asset to its standard deviation. This ratio is called the Sharpe ratio, after Nobel laureate <a href="https://en.wikipedia.org/wiki/William_F._Sharpe"> William Sharpe </a>. We discuss it in more detail below in <a href="#sec-multiple-cals"><span>Section&nbsp;2.3.2</span></a>.</p>
<p>When <span class="math inline">\(w_{\text{risky}}&gt;100\%\)</span>, the portfolio is borrowing at the risk-free rate (that is, issuing bonds at the same rate as, say, US Treasuries). This is probably not a reasonable assumption. For most investors, <span class="math inline">\(r^{\text{borrow}}&gt;r^{\text{saving}}\)</span>. In this case, the capital allocation line is kinked at the risky-asset:</p>
<p><span class="math display">\[
\begin{equation}
\text{E}[r_p] = \begin{cases}
r_f^{\text{saving}} + \bigg[ \frac{E[r_{\text{risky}}]-r_f^{\text{saving}}}{\text{sd}[r_{\text{risky}}] }\bigg]\cdot \text{sd}[r_p] &amp; \text{if } \text{sd}[r_p] \le \text{sd}[r_{\text{risky}}] \\
  r_f^{\text{borrow}} + \bigg[ \frac{E[r_{\text{risky}}]-r_f^{\text{borrow}}}{\text{sd}[r_{\text{risky}}] }\bigg]\cdot \text{sd}[r_p] &amp; \text{if } \text{sd}[r_p] &gt; \text{sd}[r_{\text{risky}}] \\
\end{cases}
\end{equation}
\]</span></p>
<p><a href="#fig-cal">Figure&nbsp;<span>2.6</span></a> shows the set of possible portfolios along the capital allocation line.</p>
<div class="cell" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter values (in percent)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>mn <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>sd <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">2</span>    <span class="co">#incremental borrowing rate</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn, sd, s, b):</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">201</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(s <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> s) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> b <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> b)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn, sd, s, extra):</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> s<span class="op">+</span>extra</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    s <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    b <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    grid, mns, sds <span class="op">=</span> data(mn, sd, s, b)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in market = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>mns, mode<span class="op">=</span><span class="st">"lines"</span>, text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, hovertemplate<span class="op">=</span>string, name<span class="op">=</span><span class="st">'CAL'</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in market = 100%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    trace2 <span class="op">=</span> go.Scatter(</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[sd], y<span class="op">=</span>[mn], mode<span class="op">=</span><span class="st">"markers"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Market'</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in market = 0%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    trace3 <span class="op">=</span> go.Scatter(</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[<span class="dv">0</span>], y<span class="op">=</span>[s], mode<span class="op">=</span><span class="st">"markers"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Risk-free (Saving)'</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"Borrowing rate&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    trace4 <span class="op">=</span> go.Scatter(</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[<span class="dv">0</span>], y<span class="op">=</span>[b], mode<span class="op">=</span><span class="st">"markers"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Risk-free (Borrowing)'</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    )       </span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2)</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace3)</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace4)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>figtbl(mn, sd, s, extra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-cal" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="86fcc26f-1d2d-4dfb-8507-2658e68e2ec3" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("86fcc26f-1d2d-4dfb-8507-2658e68e2ec3")) {                    Plotly.newPlot(                        "86fcc26f-1d2d-4dfb-8507-2658e68e2ec3",                        [{"hovertemplate":"wealth in market = %{text:.0f}%<extra></extra>","mode":"lines","name":"CAL","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0,101.0,102.0,103.0,104.0,105.0,106.0,107.0,108.0,109.00000000000001,110.00000000000001,111.00000000000001,112.00000000000001,113.00000000000001,114.00000000000001,115.00000000000001,115.99999999999999,117.0,118.0,119.0,120.0,121.0,122.0,123.0,124.0,125.0,126.0,127.0,128.0,129.0,130.0,131.0,132.0,133.0,134.0,135.0,136.0,137.0,138.0,139.0,140.0,141.0,142.0,143.0,144.0,145.0,146.0,147.0,148.0,149.0,150.0,151.0,152.0,153.0,154.0,155.0,156.0,157.0,158.0,159.0,160.0,161.0,162.0,163.0,164.0,165.0,166.0,167.0,168.0,169.0,170.0,171.0,172.0,173.0,174.0,175.0,176.0,177.0,178.0,179.0,180.0,181.0,182.0,183.0,184.0,185.0,186.0,187.0,188.0,189.0,190.0,191.0,192.0,193.0,194.0,195.0,196.0,197.0,198.0,199.0,200.0],"x":[0.0,0.0015,0.003,0.0045,0.006,0.0075,0.009,0.0105,0.012,0.0135,0.015,0.0165,0.018,0.0195,0.021,0.0225,0.024,0.025500000000000002,0.027,0.028499999999999998,0.03,0.0315,0.033,0.0345,0.036,0.0375,0.039,0.0405,0.042,0.0435,0.045,0.0465,0.048,0.0495,0.051000000000000004,0.052500000000000005,0.054,0.0555,0.056999999999999995,0.058499999999999996,0.06,0.0615,0.063,0.0645,0.066,0.0675,0.069,0.07050000000000001,0.072,0.0735,0.075,0.0765,0.078,0.0795,0.081,0.0825,0.084,0.0855,0.087,0.0885,0.09,0.0915,0.093,0.0945,0.096,0.0975,0.099,0.1005,0.10200000000000001,0.10350000000000001,0.10500000000000001,0.1065,0.108,0.1095,0.111,0.11249999999999999,0.11399999999999999,0.11549999999999999,0.11699999999999999,0.1185,0.12,0.1215,0.123,0.1245,0.126,0.1275,0.129,0.1305,0.132,0.1335,0.135,0.1365,0.138,0.1395,0.14100000000000001,0.14250000000000002,0.144,0.1455,0.147,0.1485,0.15,0.1515,0.153,0.1545,0.156,0.1575,0.159,0.1605,0.162,0.1635,0.165,0.1665,0.168,0.1695,0.171,0.17250000000000001,0.174,0.1755,0.177,0.1785,0.18,0.1815,0.183,0.1845,0.186,0.1875,0.189,0.1905,0.192,0.1935,0.195,0.1965,0.198,0.1995,0.201,0.2025,0.20400000000000001,0.20550000000000002,0.20700000000000002,0.20850000000000002,0.21000000000000002,0.2115,0.213,0.2145,0.216,0.2175,0.219,0.2205,0.222,0.2235,0.22499999999999998,0.22649999999999998,0.22799999999999998,0.22949999999999998,0.23099999999999998,0.23249999999999998,0.23399999999999999,0.2355,0.237,0.2385,0.24,0.2415,0.243,0.2445,0.246,0.2475,0.249,0.2505,0.252,0.2535,0.255,0.2565,0.258,0.2595,0.261,0.2625,0.264,0.2655,0.267,0.2685,0.27,0.2715,0.273,0.2745,0.276,0.2775,0.279,0.2805,0.28200000000000003,0.28350000000000003,0.28500000000000003,0.28650000000000003,0.288,0.2895,0.291,0.2925,0.294,0.2955,0.297,0.2985,0.3],"y":[0.02,0.0204,0.0208,0.0212,0.0216,0.022,0.0224,0.0228,0.0232,0.0236,0.024,0.024399999999999998,0.0248,0.0252,0.0256,0.026,0.0264,0.0268,0.0272,0.0276,0.027999999999999997,0.028399999999999998,0.0288,0.0292,0.029599999999999998,0.03,0.0304,0.0308,0.0312,0.031599999999999996,0.032,0.0324,0.032799999999999996,0.0332,0.0336,0.034,0.0344,0.0348,0.035199999999999995,0.0356,0.036,0.0364,0.0368,0.0372,0.037599999999999995,0.038,0.038400000000000004,0.0388,0.0392,0.039599999999999996,0.039999999999999994,0.0404,0.0408,0.0412,0.0416,0.041999999999999996,0.0424,0.0428,0.043199999999999995,0.0436,0.044,0.044399999999999995,0.04479999999999999,0.0452,0.0456,0.046,0.0464,0.046799999999999994,0.0472,0.0476,0.048,0.0484,0.048799999999999996,0.049199999999999994,0.04959999999999999,0.049999999999999996,0.0504,0.0508,0.051199999999999996,0.05159999999999999,0.05199999999999999,0.0524,0.0528,0.0532,0.053599999999999995,0.05399999999999999,0.05439999999999999,0.0548,0.0552,0.0556,0.055999999999999994,0.05639999999999999,0.0568,0.0572,0.0576,0.057999999999999996,0.058399999999999994,0.05879999999999999,0.05919999999999999,0.0596,0.06,0.0602,0.060399999999999995,0.0606,0.0608,0.061,0.0612,0.061399999999999996,0.0616,0.0618,0.062,0.0622,0.0624,0.0626,0.0628,0.063,0.06319999999999999,0.0634,0.06359999999999999,0.0638,0.064,0.0642,0.0644,0.06459999999999999,0.0648,0.065,0.0652,0.0654,0.06559999999999999,0.0658,0.066,0.0662,0.0664,0.06659999999999999,0.0668,0.067,0.0672,0.0674,0.0676,0.0678,0.068,0.0682,0.06839999999999999,0.0686,0.0688,0.06899999999999999,0.0692,0.06939999999999999,0.0696,0.0698,0.06999999999999999,0.0702,0.07039999999999999,0.0706,0.0708,0.071,0.0712,0.07139999999999999,0.0716,0.0718,0.072,0.0722,0.07239999999999999,0.0726,0.0728,0.073,0.0732,0.07339999999999999,0.0736,0.0738,0.074,0.07419999999999999,0.0744,0.0746,0.0748,0.075,0.07519999999999999,0.0754,0.0756,0.0758,0.076,0.07619999999999999,0.0764,0.0766,0.07680000000000001,0.077,0.07719999999999999,0.0774,0.0776,0.0778,0.078,0.07819999999999999,0.0784,0.0786,0.0788,0.07899999999999999,0.07919999999999999,0.0794,0.0796,0.0798,0.07999999999999999],"type":"scatter"},{"hovertemplate":"wealth in market = 100%<extra></extra>","marker":{"size":15},"mode":"markers","name":"Market","x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"wealth in market = 0%<extra></extra>","marker":{"size":15},"mode":"markers","name":"Risk-free (Saving)","x":[0],"y":[0.02],"type":"scatter"},{"hovertemplate":"Borrowing rate<extra></extra>","marker":{"size":15},"mode":"markers","name":"Risk-free (Borrowing)","x":[0],"y":[0.04],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"tickformat":".0%"},"yaxis":{"title":{"text":"Expected Return"},"tickformat":".0%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('86fcc26f-1d2d-4dfb-8507-2658e68e2ec3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.6: Capital Allocation Line</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="sec-multiple-cals" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="sec-multiple-cals"><span class="header-section-number">2.3.2</span> Multiple Risky Assets</h3>
<p>We’ve seen how to combine two risky assets (<a href="#sec-two-risky"><span>Section&nbsp;2.2.1</span></a>) as well as a risky asset with a risk-free asset (<a href="#sec-cal-1risky"><span>Section&nbsp;2.3.1</span></a>). What if we can invest in two risky assets <em>and</em> the risk-free asset? What is the best way to form a portfolio in this case? Let’s assume that in addition to the US stock market fund, we are also considering investing in a long-term bond fund. Empirically, over the last 30 or 40 years, equities and long-term government bonds have been almost uncorrelated; we will use a correlation of -5% below.</p>
<p>First, consider the investment opportunity sets that would obtain if we restricted attention to investing in only a single risky fund (either the stock or bond fund) in conjunction with the risk-free asset. We assume for the moment that we can both borrow and save at a single risk-free rate. The possible portfolios are the capital allocation lines for the stock fund and the bond fund, respectively. These are plotted as the orange and red lines in <a href="#fig-two-asset-plus_rf">Figure&nbsp;<span>2.7</span></a>. We can see immediately that all portfolios on the CAL for the stock fund are dominated by both the stock-bond frontier (the black line) and by the bond CAL. The same expected return can be achieved for smaller standard deviation.</p>
<div class="cell" data-execution_count="8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>mn_stock <span class="op">=</span> <span class="dv">6</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>mn_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>sd_stock <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>sd_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c, rs, extra):</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra   </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_s"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rs)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_b"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rb)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky(mn, sd, rs, rb, w_min, w_max):</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rs <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rs) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> rb <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rb)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>    srs <span class="op">=</span> (mn <span class="op">-</span> rs)<span class="op">/</span>sd</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    srb <span class="op">=</span> (mn <span class="op">-</span> rb)<span class="op">/</span>sd</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds, srs, srb</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky_nokink(mn, sd, rf, w_min, w_max):</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>    rf <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rf <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rf)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c, rs, extra, asset1_name, asset2_name):</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c, rs, extra)</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Plot the portfolios of the two assets</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a>        <span class="co"># line={'color': green},</span></span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>asset1_name<span class="op">+</span><span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Stock &amp; Bond Frontier"</span></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-77"><a href="#cb10-77" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb10-78"><a href="#cb10-78" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb10-79"><a href="#cb10-79" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb10-80"><a href="#cb10-80" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb10-81"><a href="#cb10-81" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb10-82"><a href="#cb10-82" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb10-83"><a href="#cb10-83" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb10-84"><a href="#cb10-84" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb10-85"><a href="#cb10-85" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb10-86"><a href="#cb10-86" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb10-87"><a href="#cb10-87" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb10-88"><a href="#cb10-88" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-89"><a href="#cb10-89" aria-hidden="true" tabindex="-1"></a>    trace2b <span class="op">=</span> go.Scatter(</span>
<span id="cb10-90"><a href="#cb10-90" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb10-91"><a href="#cb10-91" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb10-92"><a href="#cb10-92" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb10-93"><a href="#cb10-93" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb10-94"><a href="#cb10-94" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb10-95"><a href="#cb10-95" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb10-96"><a href="#cb10-96" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb10-97"><a href="#cb10-97" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-98"><a href="#cb10-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-99"><a href="#cb10-99" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb10-100"><a href="#cb10-100" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2a)</span>
<span id="cb10-101"><a href="#cb10-101" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2b)</span>
<span id="cb10-102"><a href="#cb10-102" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb10-103"><a href="#cb10-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-104"><a href="#cb10-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the combination of the risk-free and each asset (CAL for each asset)</span></span>
<span id="cb10-105"><a href="#cb10-105" aria-hidden="true" tabindex="-1"></a>    grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mn1, sd1, rs, rs <span class="op">+</span> extra, <span class="dv">0</span>, <span class="fl">1.0</span>)</span>
<span id="cb10-106"><a href="#cb10-106" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>asset1_name<span class="op">+</span><span class="st">"= %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srs_cal) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb10-107"><a href="#cb10-107" aria-hidden="true" tabindex="-1"></a>    trace3 <span class="op">=</span> go.Scatter(</span>
<span id="cb10-108"><a href="#cb10-108" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds_cal, </span>
<span id="cb10-109"><a href="#cb10-109" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns_cal, </span>
<span id="cb10-110"><a href="#cb10-110" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb10-111"><a href="#cb10-111" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb10-112"><a href="#cb10-112" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string, </span>
<span id="cb10-113"><a href="#cb10-113" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb10-114"><a href="#cb10-114" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"CAL: "</span><span class="op">+</span>asset1_name</span>
<span id="cb10-115"><a href="#cb10-115" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-116"><a href="#cb10-116" aria-hidden="true" tabindex="-1"></a>    grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mn2, sd2, rs, rs <span class="op">+</span> extra, <span class="dv">0</span>, <span class="fl">2.7</span>)</span>
<span id="cb10-117"><a href="#cb10-117" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">"= %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio : "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srs_cal) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb10-118"><a href="#cb10-118" aria-hidden="true" tabindex="-1"></a>    trace4 <span class="op">=</span> go.Scatter(</span>
<span id="cb10-119"><a href="#cb10-119" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds_cal, </span>
<span id="cb10-120"><a href="#cb10-120" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns_cal, </span>
<span id="cb10-121"><a href="#cb10-121" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb10-122"><a href="#cb10-122" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb10-123"><a href="#cb10-123" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string, </span>
<span id="cb10-124"><a href="#cb10-124" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb10-125"><a href="#cb10-125" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"CAL: "</span><span class="op">+</span>asset2_name</span>
<span id="cb10-126"><a href="#cb10-126" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-127"><a href="#cb10-127" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace3)</span>
<span id="cb10-128"><a href="#cb10-128" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace4)  </span>
<span id="cb10-129"><a href="#cb10-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-130"><a href="#cb10-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-131"><a href="#cb10-131" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports,srTang,borrow_flag):</span>
<span id="cb10-132"><a href="#cb10-132" aria-hidden="true" tabindex="-1"></a>        <span class="co"># borrow_flag=1 adds statement about "relative to borrowing rate"</span></span>
<span id="cb10-133"><a href="#cb10-133" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N<span class="op">+</span><span class="dv">1</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb10-134"><a href="#cb10-134" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb10-135"><a href="#cb10-135" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb10-136"><a href="#cb10-136" aria-hidden="true" tabindex="-1"></a>        cd[:,N] <span class="op">=</span> np.<span class="bu">round</span>(srTang,<span class="dv">4</span>)</span>
<span id="cb10-137"><a href="#cb10-137" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(cd)</span></span>
<span id="cb10-138"><a href="#cb10-138" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb10-139"><a href="#cb10-139" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb10-140"><a href="#cb10-140" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"asset "</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb10-141"><a href="#cb10-141" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb10-142"><a href="#cb10-142" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb10-143"><a href="#cb10-143" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb10-144"><a href="#cb10-144" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> borrow_flag<span class="op">==</span><span class="dv">1</span>:</span>
<span id="cb10-145"><a href="#cb10-145" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio (relative to borrowing rate): %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span>    </span>
<span id="cb10-146"><a href="#cb10-146" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb10-147"><a href="#cb10-147" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio: %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span></span>
<span id="cb10-148"><a href="#cb10-148" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb10-149"><a href="#cb10-149" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd  </span>
<span id="cb10-150"><a href="#cb10-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-151"><a href="#cb10-151" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the tangency portfolios</span></span>
<span id="cb10-152"><a href="#cb10-152" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb10-153"><a href="#cb10-153" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra     </span>
<span id="cb10-154"><a href="#cb10-154" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb10-155"><a href="#cb10-155" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb10-156"><a href="#cb10-156" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb10-157"><a href="#cb10-157" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array(mns) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb10-158"><a href="#cb10-158" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb10-159"><a href="#cb10-159" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array(sds) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb10-160"><a href="#cb10-160" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb10-161"><a href="#cb10-161" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb10-162"><a href="#cb10-162" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb10-163"><a href="#cb10-163" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-164"><a href="#cb10-164" aria-hidden="true" tabindex="-1"></a>    Shorts <span class="op">=</span> <span class="fl">0.0</span>     </span>
<span id="cb10-165"><a href="#cb10-165" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="bu">len</span>(mns)</span>
<span id="cb10-166"><a href="#cb10-166" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts)    </span>
<span id="cb10-167"><a href="#cb10-167" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb10-168"><a href="#cb10-168" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('GMV return is: ',gmv)</span></span>
<span id="cb10-169"><a href="#cb10-169" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rs <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb10-170"><a href="#cb10-170" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rs)</span>
<span id="cb10-171"><a href="#cb10-171" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb10-172"><a href="#cb10-172" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb10-173"><a href="#cb10-173" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb10-174"><a href="#cb10-174" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rs)<span class="op">/</span>sdTang</span>
<span id="cb10-175"><a href="#cb10-175" aria-hidden="true" tabindex="-1"></a>            string0 <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb10-176"><a href="#cb10-176" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string0, [portTang], srTang,<span class="dv">0</span>)</span>
<span id="cb10-177"><a href="#cb10-177" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb10-178"><a href="#cb10-178" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb10-179"><a href="#cb10-179" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb10-180"><a href="#cb10-180" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb10-181"><a href="#cb10-181" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb10-182"><a href="#cb10-182" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb10-183"><a href="#cb10-183" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb10-184"><a href="#cb10-184" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>string0</span>
<span id="cb10-185"><a href="#cb10-185" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb10-186"><a href="#cb10-186" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb10-187"><a href="#cb10-187" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb10-188"><a href="#cb10-188" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (no leverage)</span></span>
<span id="cb10-189"><a href="#cb10-189" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,<span class="dv">0</span>, <span class="fl">2.2</span>)</span>
<span id="cb10-190"><a href="#cb10-190" aria-hidden="true" tabindex="-1"></a>            portlabel <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb10-191"><a href="#cb10-191" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>portlabel <span class="op">+</span> <span class="st">" = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span>  <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb10-192"><a href="#cb10-192" aria-hidden="true" tabindex="-1"></a>            trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb10-193"><a href="#cb10-193" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb10-194"><a href="#cb10-194" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb10-195"><a href="#cb10-195" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb10-196"><a href="#cb10-196" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb10-197"><a href="#cb10-197" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb10-198"><a href="#cb10-198" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb10-199"><a href="#cb10-199" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span> <span class="op">+</span> portlabel</span>
<span id="cb10-200"><a href="#cb10-200" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb10-201"><a href="#cb10-201" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5)</span>
<span id="cb10-202"><a href="#cb10-202" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb10-203"><a href="#cb10-203" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)</span></span>
<span id="cb10-204"><a href="#cb10-204" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,<span class="fl">1.0</span>, <span class="fl">2.5</span>)</span>
<span id="cb10-205"><a href="#cb10-205" aria-hidden="true" tabindex="-1"></a>            trace5a <span class="op">=</span> go.Scatter(</span>
<span id="cb10-206"><a href="#cb10-206" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb10-207"><a href="#cb10-207" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb10-208"><a href="#cb10-208" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb10-209"><a href="#cb10-209" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb10-210"><a href="#cb10-210" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb10-211"><a href="#cb10-211" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>,dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb10-212"><a href="#cb10-212" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span>  <span class="op">+</span> portlabel <span class="op">+</span> <span class="st">" (levered)"</span></span>
<span id="cb10-213"><a href="#cb10-213" aria-hidden="true" tabindex="-1"></a>                <span class="co"># showlegend=False</span></span>
<span id="cb10-214"><a href="#cb10-214" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb10-215"><a href="#cb10-215" aria-hidden="true" tabindex="-1"></a>            <span class="co"># fig.add_trace(trace5a)           </span></span>
<span id="cb10-216"><a href="#cb10-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-217"><a href="#cb10-217" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs) <span class="kw">and</span> ((gmv <span class="op">&gt;</span> rb) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb10-218"><a href="#cb10-218" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rb)</span>
<span id="cb10-219"><a href="#cb10-219" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb10-220"><a href="#cb10-220" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rb)<span class="op">/</span>sdTang</span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">'efficient high mean portfolio'</span></span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string, [portTang], srTang,<span class="dv">1</span>)</span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb10-229"><a href="#cb10-229" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb10-230"><a href="#cb10-230" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb10-231"><a href="#cb10-231" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb10-232"><a href="#cb10-232" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"efficient high mean portfolio"</span></span>
<span id="cb10-233"><a href="#cb10-233" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb10-234"><a href="#cb10-234" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb10-235"><a href="#cb10-235" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb10-236"><a href="#cb10-236" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)            </span></span>
<span id="cb10-237"><a href="#cb10-237" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rb<span class="op">*</span><span class="dv">100</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb10-238"><a href="#cb10-238" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in efficient high mean portfolio = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio (relative to borrowing rate): "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb10-239"><a href="#cb10-239" aria-hidden="true" tabindex="-1"></a>            trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb10-240"><a href="#cb10-240" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb10-241"><a href="#cb10-241" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb10-242"><a href="#cb10-242" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb10-243"><a href="#cb10-243" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb10-244"><a href="#cb10-244" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb10-245"><a href="#cb10-245" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb10-246"><a href="#cb10-246" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean"</span></span>
<span id="cb10-247"><a href="#cb10-247" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb10-248"><a href="#cb10-248" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6)   </span>
<span id="cb10-249"><a href="#cb10-249" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb10-250"><a href="#cb10-250" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (without leverage) </span></span>
<span id="cb10-251"><a href="#cb10-251" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rb<span class="op">*</span><span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb10-252"><a href="#cb10-252" aria-hidden="true" tabindex="-1"></a>            trace6a <span class="op">=</span> go.Scatter(</span>
<span id="cb10-253"><a href="#cb10-253" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb10-254"><a href="#cb10-254" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb10-255"><a href="#cb10-255" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb10-256"><a href="#cb10-256" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb10-257"><a href="#cb10-257" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb10-258"><a href="#cb10-258" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>, dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb10-259"><a href="#cb10-259" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean (unlevered)"</span></span>
<span id="cb10-260"><a href="#cb10-260" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb10-261"><a href="#cb10-261" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6a)      </span>
<span id="cb10-262"><a href="#cb10-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-263"><a href="#cb10-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-264"><a href="#cb10-264" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb10-265"><a href="#cb10-265" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-266"><a href="#cb10-266" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb10-267"><a href="#cb10-267" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb10-268"><a href="#cb10-268" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.05</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb10-269"><a href="#cb10-269" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.05</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb10-270"><a href="#cb10-270" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb10-271"><a href="#cb10-271" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb10-272"><a href="#cb10-272" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.5</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.65</span>))</span>
<span id="cb10-273"><a href="#cb10-273" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb10-274"><a href="#cb10-274" aria-hidden="true" tabindex="-1"></a>figtbl(mn_stock,mn_bond,sd_stock,sd_bond,corr,rs,extra,<span class="st">"Stock"</span>,<span class="st">"Bond"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-two-asset-plus_rf" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="ea98ad8e-f527-4ad3-9b09-7f36e5d3b269" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("ea98ad8e-f527-4ad3-9b09-7f36e5d3b269")) {                    Plotly.newPlot(                        "ea98ad8e-f527-4ad3-9b09-7f36e5d3b269",                        [{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"orange","size":10},"mode":"markers","name":"Stock","text":["Stock"],"x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":10},"mode":"markers","name":"Bond","text":["Bond"],"x":[0.035],"y":[0.035],"type":"scatter"},{"customdata":[100.0,99.0,98.0,97.0,96.0,95.0,94.0,93.0,92.0,91.0,90.0,89.0,88.0,87.0,86.0,85.0,84.0,83.0,82.0,81.0,80.0,79.0,78.0,77.0,76.0,75.0,74.0,73.0,72.0,71.0,70.0,69.0,68.0,67.0,65.99999999999999,64.99999999999999,64.0,63.0,62.0,61.0,60.0,59.0,58.00000000000001,57.00000000000001,56.00000000000001,55.00000000000001,54.0,53.0,52.0,51.0,50.0,49.0,48.0,47.0,46.0,44.99999999999999,43.99999999999999,42.99999999999999,42.00000000000001,41.0,40.0,39.0,38.0,37.0,36.0,35.0,34.0,32.99999999999999,31.999999999999996,30.999999999999993,29.999999999999993,29.000000000000004,28.000000000000004,27.0,26.0,25.0,24.0,23.0,21.999999999999996,20.999999999999996,19.999999999999996,18.999999999999993,17.999999999999993,16.999999999999993,16.000000000000004,15.000000000000002,14.000000000000002,13.0,12.0,10.999999999999998,9.999999999999998,8.999999999999996,7.9999999999999964,6.999999999999995,5.999999999999995,4.999999999999993,4.0000000000000036,3.0000000000000027,2.0000000000000018,1.0000000000000009,0.0],"hovertemplate":"Stock: %{text:.0f}%<br>Bond: %{customdata:.0f}%<extra></extra>","line":{"color":"black"},"mode":"lines","name":"Stock & Bond Frontier","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0],"x":[0.035,0.034607441396324,0.034281190177705326,0.03402315388085002,0.033834893231692045,0.03371757701852254,0.03367194678066595,0.03369829372535055,0.033796449517663835,0.033965791614505324,0.03420526275297414,0.03451340319354207,0.034888393485513196,0.035328104959083215,0.03583015489779524,0.03639196339853072,0.03701080923189873,0.03768388249636706,0.03840833242930498,0.039181309319623304,0.04,0.04086165684354955,0.04176362053270765,0.04270333710613258,0.04367836993295422,0.0446864073292987,0.04572526653831556,0.04679289475978164,0.0478873678541638,0.0490068872710765,0.05014977567247933,0.05131447164299756,0.052499523807364196,0.053703584610340485,0.05492540395845988,0.056163822875584246,0.057417767285048625,0.05868624199929656,0.05996832497243858,0.061263161851148364,0.06256996084384263,0.06388798791635249,0.06521656231357185,0.06655505240024982,0.06790287180966649,0.06925947588597534,0.07062435840416534,0.07199704855061768,0.07337710814688733,0.07476412909945516,0.07615773105863909,0.07755755927051858,0.07896328260653808,0.08037459175635046,0.08179119757039874,0.08321282953968097,0.0846392344010743,0.08607017485749636,0.08750542840304253,0.08894478624405142,0.09038805230781334,0.09183504233134539,0.09328558302331609,0.09473951129280751,0.09619667353916142,0.09765692499766722,0.0991201291363162,0.10058615709927485,0.10205488719311781,0.10352620441221633,0.10500000000000002,0.1064761710431024,0.10795462009566797,0.10943525483133851,0.11091798772065782,0.11240273573183172,0.1138894200529619,0.11537796583403609,0.11686830194710626,0.11836036076322173,0.11985407794480754,0.12134939225228943,0.1228462453638694,0.12434458170744715,0.1258443483037677,0.12734549461995112,0.12884797243263083,0.1303517356999898,0.13185674044204188,0.13336294462855863,0.1348703080740902,0.13637879233957162,0.13788836064004822,0.1393989777580883,0.1409106099624865,0.14242322493189094,0.14393679168301618,0.14545128050312928,0.14696666288651994,0.1484829114746879,0.15],"y":[0.035,0.03525,0.0355,0.035750000000000004,0.036,0.03625,0.0365,0.03675,0.037000000000000005,0.03725,0.0375,0.037750000000000006,0.038,0.03825,0.0385,0.03875,0.039,0.03925,0.0395,0.03975,0.04,0.04025,0.0405,0.04075,0.040999999999999995,0.04125,0.0415,0.041749999999999995,0.042,0.042249999999999996,0.0425,0.04275,0.043,0.04324999999999999,0.0435,0.04375,0.044000000000000004,0.04425,0.044500000000000005,0.04475,0.045,0.045250000000000005,0.045500000000000006,0.04575,0.046000000000000006,0.04625,0.04650000000000001,0.04675000000000001,0.047,0.04724999999999999,0.0475,0.04775,0.048,0.04825,0.048499999999999995,0.04875,0.049,0.04925000000000001,0.049499999999999995,0.049749999999999996,0.05,0.05025,0.050499999999999996,0.05075,0.051,0.05125,0.051500000000000004,0.051750000000000004,0.052000000000000005,0.052250000000000005,0.0525,0.052750000000000005,0.053000000000000005,0.05325,0.0535,0.05375,0.054000000000000006,0.05425,0.05449999999999999,0.05474999999999999,0.05500000000000001,0.05525,0.0555,0.05575,0.055999999999999994,0.05625,0.0565,0.056749999999999995,0.057,0.057249999999999995,0.0575,0.057749999999999996,0.05800000000000001,0.05825,0.0585,0.05875,0.059000000000000004,0.059250000000000004,0.059500000000000004,0.05975,0.06],"type":"scatter"},{"hovertemplate":"wealth in Stock= %{text:.0f}%<br>Sharpe ratio: 0.2667<extra></extra>","line":{"color":"orange"},"mode":"lines","name":"CAL: Stock","text":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0,40.5,41.0,41.5,42.0,42.5,43.0,43.5,44.0,44.5,45.0,45.5,46.0,46.5,47.0,47.5,48.0,48.5,49.0,49.5,50.0,50.5,51.0,51.5,52.0,52.5,53.0,53.5,54.0,54.50000000000001,55.00000000000001,55.50000000000001,56.00000000000001,56.50000000000001,57.00000000000001,57.50000000000001,57.99999999999999,58.5,59.0,59.5,60.0,60.5,61.0,61.5,62.0,62.5,63.0,63.5,64.0,64.5,65.0,65.5,66.0,66.5,67.0,67.5,68.0,68.5,69.0,69.5,70.0,70.5,71.0,71.5,72.0,72.5,73.0,73.5,74.0,74.5,75.0,75.5,76.0,76.5,77.0,77.5,78.0,78.5,79.0,79.5,80.0,80.5,81.0,81.5,82.0,82.5,83.0,83.5,84.0,84.5,85.0,85.5,86.0,86.5,87.0,87.5,88.0,88.5,89.0,89.5,90.0,90.5,91.0,91.5,92.0,92.5,93.0,93.5,94.0,94.5,95.0,95.5,96.0,96.5,97.0,97.5,98.0,98.5,99.0,99.5,100.0],"x":[0.0,0.00075,0.0015,0.00225,0.003,0.00375,0.0045,0.00525,0.006,0.00675,0.0075,0.00825,0.009,0.00975,0.0105,0.01125,0.012,0.012750000000000001,0.0135,0.014249999999999999,0.015,0.01575,0.0165,0.01725,0.018,0.01875,0.0195,0.02025,0.021,0.02175,0.0225,0.02325,0.024,0.02475,0.025500000000000002,0.026250000000000002,0.027,0.02775,0.028499999999999998,0.029249999999999998,0.03,0.03075,0.0315,0.03225,0.033,0.03375,0.0345,0.035250000000000004,0.036,0.03675,0.0375,0.03825,0.039,0.03975,0.0405,0.04125,0.042,0.04275,0.0435,0.04425,0.045,0.04575,0.0465,0.04725,0.048,0.04875,0.0495,0.05025,0.051000000000000004,0.051750000000000004,0.052500000000000005,0.05325,0.054,0.05475,0.0555,0.056249999999999994,0.056999999999999995,0.057749999999999996,0.058499999999999996,0.05925,0.06,0.06075,0.0615,0.06225,0.063,0.06375,0.0645,0.06525,0.066,0.06675,0.0675,0.06825,0.069,0.06975,0.07050000000000001,0.07125000000000001,0.072,0.07275,0.0735,0.07425,0.075,0.07575,0.0765,0.07725,0.078,0.07875,0.0795,0.08025,0.081,0.08175,0.0825,0.08325,0.084,0.08475,0.0855,0.08625000000000001,0.087,0.08775,0.0885,0.08925,0.09,0.09075,0.0915,0.09225,0.093,0.09375,0.0945,0.09525,0.096,0.09675,0.0975,0.09825,0.099,0.09975,0.1005,0.10125,0.10200000000000001,0.10275000000000001,0.10350000000000001,0.10425000000000001,0.10500000000000001,0.10575,0.1065,0.10725,0.108,0.10875,0.1095,0.11025,0.111,0.11175,0.11249999999999999,0.11324999999999999,0.11399999999999999,0.11474999999999999,0.11549999999999999,0.11624999999999999,0.11699999999999999,0.11775,0.1185,0.11925,0.12,0.12075,0.1215,0.12225,0.123,0.12375,0.1245,0.12525,0.126,0.12675,0.1275,0.12825,0.129,0.12975,0.1305,0.13125,0.132,0.13275,0.1335,0.13425,0.135,0.13575,0.1365,0.13725,0.138,0.13875,0.1395,0.14025,0.14100000000000001,0.14175000000000001,0.14250000000000002,0.14325000000000002,0.144,0.14475,0.1455,0.14625,0.147,0.14775,0.1485,0.14925,0.15],"y":[0.02,0.0202,0.0204,0.0206,0.0208,0.021,0.0212,0.0214,0.0216,0.0218,0.022,0.0222,0.0224,0.022600000000000002,0.0228,0.023,0.0232,0.0234,0.0236,0.0238,0.024,0.0242,0.024399999999999998,0.0246,0.0248,0.025,0.0252,0.0254,0.0256,0.0258,0.026,0.0262,0.0264,0.0266,0.0268,0.027,0.0272,0.0274,0.0276,0.0278,0.027999999999999997,0.0282,0.028399999999999998,0.0286,0.0288,0.028999999999999998,0.0292,0.0294,0.029599999999999998,0.0298,0.03,0.030199999999999998,0.0304,0.0306,0.0308,0.031,0.0312,0.0314,0.031599999999999996,0.031799999999999995,0.032,0.0322,0.0324,0.0326,0.032799999999999996,0.033,0.0332,0.0334,0.0336,0.0338,0.034,0.034199999999999994,0.0344,0.0346,0.0348,0.034999999999999996,0.035199999999999995,0.0354,0.0356,0.0358,0.036,0.036199999999999996,0.0364,0.0366,0.0368,0.037,0.0372,0.0374,0.037599999999999995,0.0378,0.038,0.0382,0.038400000000000004,0.038599999999999995,0.0388,0.039,0.0392,0.0394,0.039599999999999996,0.0398,0.039999999999999994,0.0402,0.0404,0.0406,0.0408,0.040999999999999995,0.0412,0.0414,0.0416,0.041800000000000004,0.041999999999999996,0.0422,0.0424,0.0426,0.0428,0.043,0.043199999999999995,0.043399999999999994,0.0436,0.04379999999999999,0.044,0.044199999999999996,0.044399999999999995,0.0446,0.04479999999999999,0.045,0.0452,0.045399999999999996,0.0456,0.045799999999999993,0.046,0.0462,0.0464,0.0466,0.046799999999999994,0.047,0.0472,0.0474,0.0476,0.047799999999999995,0.048,0.04819999999999999,0.0484,0.04859999999999999,0.048799999999999996,0.048999999999999995,0.049199999999999994,0.0494,0.04959999999999999,0.0498,0.049999999999999996,0.050199999999999995,0.0504,0.05059999999999999,0.0508,0.051,0.051199999999999996,0.0514,0.05159999999999999,0.0518,0.05199999999999999,0.052199999999999996,0.0524,0.052599999999999994,0.0528,0.05299999999999999,0.0532,0.05339999999999999,0.053599999999999995,0.0538,0.05399999999999999,0.0542,0.05439999999999999,0.054599999999999996,0.0548,0.05499999999999999,0.0552,0.05539999999999999,0.0556,0.0558,0.055999999999999994,0.0562,0.05639999999999999,0.0566,0.0568,0.056999999999999995,0.0572,0.05739999999999999,0.0576,0.05779999999999999,0.057999999999999996,0.0582,0.058399999999999994,0.0586,0.05879999999999999,0.059,0.05919999999999999,0.059399999999999994,0.0596,0.05979999999999999,0.06],"type":"scatter"},{"hovertemplate":"wealth in Bond= %{text:.0f}%<br>Sharpe ratio : 0.4286<extra></extra>","line":{"color":"red"},"mode":"lines","name":"CAL: Bond","text":[0.0,1.35,2.7,4.050000000000001,5.4,6.75,8.100000000000001,9.450000000000001,10.8,12.15,13.5,14.850000000000001,16.200000000000003,17.55,18.900000000000002,20.25,21.6,22.950000000000003,24.3,25.650000000000002,27.0,28.35,29.700000000000003,31.050000000000004,32.400000000000006,33.75,35.1,36.45,37.800000000000004,39.150000000000006,40.5,41.85,43.2,44.550000000000004,45.900000000000006,47.25,48.6,49.95,51.300000000000004,52.650000000000006,54.0,55.35000000000001,56.7,58.050000000000004,59.400000000000006,60.75000000000001,62.10000000000001,63.45,64.80000000000001,66.15,67.5,68.85000000000001,70.2,71.55000000000001,72.9,74.25,75.60000000000001,76.95,78.30000000000001,79.65,81.0,82.35000000000001,83.7,85.05000000000001,86.4,87.75,89.10000000000001,90.45,91.80000000000001,93.15,94.5,95.85000000000001,97.2,98.55000000000001,99.9,101.25000000000001,102.60000000000001,103.95,105.30000000000001,106.65000000000002,108.0,109.35000000000001,110.70000000000002,112.05000000000001,113.4,114.75000000000001,116.10000000000001,117.45000000000002,118.80000000000001,120.15000000000002,121.50000000000001,122.85000000000001,124.20000000000002,125.55000000000001,126.9,128.25000000000003,129.60000000000002,130.95000000000002,132.3,133.65000000000003,135.0,136.35000000000002,137.70000000000002,139.05,140.4,141.75000000000003,143.10000000000002,144.45000000000002,145.8,147.15000000000003,148.5,149.85000000000002,151.20000000000002,152.55,153.9,155.25000000000003,156.60000000000002,157.95000000000002,159.3,160.65000000000003,162.0,163.35000000000002,164.70000000000002,166.05,167.4,168.75000000000003,170.10000000000002,171.45000000000002,172.8,174.15000000000003,175.5,176.85000000000002,178.20000000000002,179.55000000000004,180.9,182.25000000000003,183.60000000000002,184.95000000000002,186.3,187.65000000000003,189.0,190.35000000000002,191.70000000000002,193.05000000000004,194.4,195.75000000000003,197.10000000000002,198.45000000000002,199.8,201.15000000000003,202.50000000000003,203.85000000000005,205.20000000000002,206.55,207.9,209.25000000000003,210.60000000000002,211.95000000000005,213.30000000000004,214.65,216.0,217.35000000000002,218.70000000000002,220.05000000000004,221.40000000000003,222.75000000000006,224.10000000000002,225.45000000000002,226.8,228.15000000000003,229.50000000000003,230.85000000000005,232.20000000000002,233.55,234.90000000000003,236.25000000000003,237.60000000000002,238.95000000000005,240.30000000000004,241.65,243.00000000000003,244.35000000000002,245.70000000000002,247.05000000000004,248.40000000000003,249.75000000000006,251.10000000000002,252.45000000000002,253.8,255.15000000000003,256.50000000000006,257.85,259.20000000000005,260.55,261.90000000000003,263.25,264.6,265.95000000000005,267.30000000000007,268.65000000000003,270.0],"x":[0.0,0.0004725000000000001,0.0009450000000000002,0.0014175000000000004,0.0018900000000000004,0.0023625000000000005,0.0028350000000000007,0.003307500000000001,0.003780000000000001,0.004252500000000001,0.004725000000000001,0.005197500000000002,0.005670000000000001,0.006142500000000001,0.006615000000000002,0.007087500000000001,0.007560000000000002,0.008032500000000001,0.008505000000000002,0.008977500000000001,0.009450000000000002,0.009922500000000002,0.010395000000000003,0.010867500000000002,0.011340000000000003,0.011812500000000002,0.012285000000000003,0.012757500000000003,0.013230000000000004,0.013702500000000005,0.014175000000000002,0.014647500000000003,0.015120000000000003,0.015592500000000004,0.016065000000000003,0.016537500000000004,0.017010000000000004,0.017482500000000005,0.017955000000000002,0.018427500000000003,0.018900000000000004,0.019372500000000004,0.019845000000000005,0.020317500000000002,0.020790000000000006,0.021262500000000004,0.021735000000000004,0.022207500000000005,0.022680000000000006,0.023152500000000006,0.023625000000000004,0.024097500000000008,0.024570000000000005,0.025042500000000006,0.025515000000000006,0.025987500000000004,0.026460000000000008,0.026932500000000005,0.02740500000000001,0.027877500000000006,0.028350000000000004,0.028822500000000008,0.029295000000000005,0.02976750000000001,0.030240000000000006,0.030712500000000004,0.031185000000000008,0.031657500000000005,0.032130000000000006,0.032602500000000006,0.03307500000000001,0.03354750000000001,0.03402000000000001,0.03449250000000001,0.03496500000000001,0.03543750000000001,0.035910000000000004,0.036382500000000005,0.036855000000000006,0.03732750000000001,0.03780000000000001,0.03827250000000001,0.03874500000000001,0.0392175,0.03969000000000001,0.04016250000000001,0.040635000000000004,0.041107500000000005,0.04158000000000001,0.042052500000000013,0.04252500000000001,0.04299750000000001,0.04347000000000001,0.04394250000000001,0.04441500000000001,0.04488750000000001,0.04536000000000001,0.045832500000000005,0.04630500000000001,0.046777500000000014,0.04725000000000001,0.04772250000000001,0.048195000000000016,0.04866750000000001,0.04914000000000001,0.04961250000000001,0.05008500000000001,0.05055750000000001,0.05103000000000001,0.051502500000000014,0.05197500000000001,0.05244750000000001,0.052920000000000016,0.05339250000000001,0.05386500000000001,0.05433750000000001,0.05481000000000002,0.05528250000000001,0.05575500000000001,0.056227500000000014,0.05670000000000001,0.057172500000000015,0.057645000000000016,0.05811750000000001,0.05859000000000001,0.05906250000000001,0.05953500000000002,0.06000750000000001,0.06048000000000001,0.060952500000000014,0.06142500000000001,0.061897500000000015,0.062370000000000016,0.06284250000000002,0.06331500000000001,0.06378750000000001,0.06426000000000001,0.06473250000000001,0.06520500000000001,0.06567750000000001,0.06615000000000001,0.06662250000000002,0.06709500000000002,0.06756750000000002,0.06804000000000002,0.06851250000000002,0.06898500000000002,0.0694575,0.06993000000000002,0.07040250000000002,0.07087500000000002,0.07134750000000002,0.07182000000000001,0.07229250000000001,0.07276500000000001,0.07323750000000001,0.07371000000000001,0.07418250000000003,0.07465500000000003,0.07512750000000001,0.07560000000000001,0.07607250000000002,0.07654500000000002,0.07701750000000002,0.07749000000000002,0.07796250000000002,0.078435,0.07890750000000002,0.07938000000000002,0.07985250000000002,0.08032500000000002,0.08079750000000002,0.08127000000000001,0.08174250000000001,0.08221500000000001,0.08268750000000001,0.08316000000000003,0.08363250000000003,0.08410500000000003,0.08457750000000001,0.08505000000000001,0.08552250000000002,0.08599500000000002,0.08646750000000002,0.08694000000000002,0.08741250000000003,0.08788500000000002,0.08835750000000002,0.08883000000000002,0.08930250000000002,0.08977500000000002,0.09024750000000002,0.09072000000000002,0.09119250000000001,0.09166500000000001,0.09213750000000002,0.09261000000000003,0.09308250000000003,0.09355500000000003,0.09402750000000001,0.09450000000000001],"y":[0.02,0.0202025,0.020405,0.0206075,0.020810000000000002,0.0210125,0.021215,0.021417500000000003,0.02162,0.0218225,0.022025,0.0222275,0.022430000000000002,0.0226325,0.022835,0.023037500000000002,0.02324,0.0234425,0.023645000000000003,0.0238475,0.024050000000000002,0.024252500000000003,0.024455,0.024657500000000002,0.024860000000000004,0.0250625,0.025265000000000003,0.025467500000000004,0.025670000000000002,0.025872500000000003,0.026075,0.026277500000000002,0.026480000000000004,0.0266825,0.026885000000000003,0.0270875,0.027290000000000002,0.027492500000000003,0.027695,0.027897500000000006,0.0281,0.0283025,0.028505000000000003,0.028707500000000004,0.028910000000000005,0.029112500000000003,0.029315000000000004,0.029517500000000002,0.029720000000000003,0.029922500000000005,0.030125000000000002,0.030327500000000004,0.03053,0.030732500000000003,0.030935000000000004,0.031137500000000005,0.03134000000000001,0.0315425,0.031745,0.031947500000000004,0.032150000000000005,0.032352500000000006,0.032555,0.03275750000000001,0.03296,0.033162500000000004,0.033365000000000006,0.0335675,0.03377000000000001,0.0339725,0.034175000000000004,0.034377500000000005,0.03458000000000001,0.03478250000000001,0.034985,0.035187500000000003,0.035390000000000005,0.035592500000000006,0.03579500000000001,0.0359975,0.0362,0.036402500000000004,0.036605000000000006,0.03680750000000001,0.03701,0.03721250000000001,0.037415000000000004,0.037617500000000005,0.037820000000000006,0.03802250000000001,0.03822500000000001,0.0384275,0.03863000000000001,0.038832500000000006,0.03903500000000001,0.03923750000000001,0.03944000000000001,0.039642500000000004,0.039845000000000005,0.04004750000000001,0.04025000000000001,0.0404525,0.04065500000000001,0.040857500000000005,0.041060000000000006,0.04126250000000001,0.04146500000000001,0.04166750000000001,0.041870000000000004,0.04207250000000001,0.04227500000000001,0.04247750000000001,0.04268000000000001,0.042882500000000004,0.04308500000000001,0.043287500000000007,0.04349000000000001,0.04369250000000001,0.043895,0.04409750000000001,0.044300000000000006,0.04450250000000001,0.04470500000000001,0.0449075,0.04511000000000001,0.045312500000000006,0.045515000000000014,0.04571750000000001,0.04592000000000001,0.04612250000000001,0.046325000000000005,0.04652750000000001,0.04673000000000001,0.04693250000000001,0.04713500000000001,0.047337500000000005,0.04754000000000001,0.04774250000000001,0.04794500000000001,0.04814750000000001,0.048350000000000004,0.04855250000000001,0.04875500000000001,0.048957500000000015,0.04916000000000001,0.04936250000000001,0.04956500000000001,0.049767500000000006,0.049970000000000014,0.05017250000000001,0.05037500000000001,0.05057750000000001,0.050780000000000006,0.05098250000000001,0.05118500000000001,0.051387500000000016,0.05159000000000001,0.05179250000000002,0.05199500000000001,0.05219750000000001,0.0524,0.05260250000000001,0.052805000000000005,0.05300750000000001,0.05321000000000001,0.053412500000000016,0.05361500000000001,0.053817500000000004,0.05402000000000001,0.05422250000000001,0.054425000000000015,0.05462750000000001,0.054830000000000004,0.05503250000000001,0.055235000000000006,0.055437500000000015,0.05564000000000001,0.05584250000000002,0.05604500000000001,0.056247500000000006,0.056450000000000014,0.05665250000000001,0.05685500000000002,0.05705750000000001,0.05726000000000002,0.057462500000000014,0.05766500000000001,0.057867500000000016,0.05807000000000001,0.05827250000000002,0.05847500000000001,0.05867750000000002,0.058880000000000016,0.05908250000000001,0.059285000000000004,0.05948750000000001,0.05969000000000001,0.059892500000000015,0.06009500000000001,0.060297500000000004,0.06050000000000001],"type":"scatter"},{"customdata":[[[0.13202804395829393],[0.8679719560417061],[0.5166]]],"hovertemplate":"tangency portfolio<br>asset 1: %{customdata[0]:.1%}<br>asset 2: %{customdata[1]:.1%}<br>Sharpe ratio: %{customdata[2]:.4f}<br><extra></extra>","marker":{"color":"blue","size":10},"mode":"markers","name":"tangency portfolio","x":[0.035424964724284705],"y":[0.03830070109895735],"type":"scatter"},{"hovertemplate":"wealth in tangency portfolio = %{text:.0f}%<br>Sharpe ratio: 0.5166<extra></extra>","line":{"color":"blue"},"mode":"lines","name":"CAL: tangency portfolio","text":[0.0,1.1,2.2,3.3000000000000003,4.4,5.500000000000001,6.6000000000000005,7.700000000000001,8.8,9.9,11.000000000000002,12.100000000000001,13.200000000000001,14.3,15.400000000000002,16.5,17.6,18.700000000000003,19.8,20.900000000000002,22.000000000000004,23.1,24.200000000000003,25.3,26.400000000000002,27.500000000000004,28.6,29.700000000000003,30.800000000000004,31.900000000000002,33.0,34.1,35.2,36.300000000000004,37.400000000000006,38.50000000000001,39.6,40.7,41.800000000000004,42.900000000000006,44.00000000000001,45.10000000000001,46.2,47.300000000000004,48.400000000000006,49.50000000000001,50.6,51.7,52.800000000000004,53.900000000000006,55.00000000000001,56.10000000000001,57.2,58.300000000000004,59.400000000000006,60.50000000000001,61.60000000000001,62.70000000000001,63.800000000000004,64.9,66.0,67.10000000000001,68.2,69.30000000000001,70.4,71.50000000000001,72.60000000000001,73.70000000000002,74.80000000000001,75.9,77.00000000000001,78.10000000000001,79.2,80.30000000000001,81.4,82.5,83.60000000000001,84.7,85.80000000000001,86.9,88.00000000000001,89.10000000000001,90.20000000000002,91.30000000000001,92.4,93.5,94.60000000000001,95.7,96.80000000000001,97.9,99.00000000000001,100.10000000000001,101.2,102.30000000000001,103.4,104.50000000000001,105.60000000000001,106.70000000000002,107.80000000000001,108.90000000000002,110.00000000000001,111.10000000000002,112.20000000000002,113.3,114.4,115.5,116.60000000000001,117.7,118.80000000000001,119.9,121.00000000000001,122.10000000000001,123.20000000000002,124.30000000000001,125.40000000000002,126.50000000000001,127.60000000000001,128.70000000000002,129.8,130.9,132.0,133.10000000000002,134.20000000000002,135.3,136.4,137.50000000000003,138.60000000000002,139.70000000000002,140.8,141.9,143.00000000000003,144.1,145.20000000000002,146.3,147.40000000000003,148.5,149.60000000000002,150.70000000000002,151.8,152.9,154.00000000000003,155.10000000000002,156.20000000000002,157.3,158.4,159.50000000000003,160.60000000000002,161.70000000000002,162.8,163.90000000000003,165.0,166.10000000000002,167.20000000000002,168.30000000000004,169.4,170.5,171.60000000000002,172.70000000000002,173.8,174.9,176.00000000000003,177.10000000000002,178.20000000000002,179.3,180.40000000000003,181.50000000000003,182.60000000000002,183.70000000000002,184.8,185.90000000000003,187.0,188.10000000000002,189.20000000000002,190.3,191.4,192.50000000000003,193.60000000000002,194.70000000000002,195.8,196.90000000000003,198.00000000000003,199.10000000000002,200.20000000000002,201.30000000000004,202.4,203.5,204.60000000000002,205.70000000000005,206.8,207.9,209.00000000000003,210.10000000000005,211.20000000000002,212.3,213.40000000000003,214.5,215.60000000000002,216.70000000000002,217.80000000000004,218.9,220.00000000000003],"x":[0.0,0.0003896746119671318,0.0007793492239342636,0.0011690238359013953,0.0015586984478685273,0.001948373059835659,0.0023380476718027907,0.0027277222837699226,0.0031173968957370546,0.003507071507704186,0.003896746119671318,0.0042864207316384495,0.004676095343605581,0.005065769955572713,0.005455444567539845,0.005845119179506976,0.006234793791474109,0.006624468403441241,0.007014143015408372,0.007403817627375504,0.007793492239342636,0.008183166851309768,0.008572841463276899,0.00896251607524403,0.009352190687211163,0.009741865299178294,0.010131539911145427,0.01052121452311256,0.01091088913507969,0.011300563747046822,0.011690238359013953,0.012079912970981085,0.012469587582948218,0.01285926219491535,0.013248936806882482,0.013638611418849613,0.014028286030816744,0.014417960642783875,0.014807635254751008,0.01519730986671814,0.015586984478685272,0.015976659090652403,0.016366333702619536,0.016756008314586665,0.017145682926553798,0.01753535753852093,0.01792503215048806,0.018314706762455193,0.018704381374422326,0.01909405598638946,0.019483730598356588,0.01987340521032372,0.020263079822290853,0.020652754434257986,0.02104242904622512,0.021432103658192248,0.02182177827015938,0.022211452882126514,0.022601127494093643,0.022990802106060776,0.023380476718027905,0.023770151329995038,0.02415982594196217,0.024549500553929304,0.024939175165896436,0.025328849777863566,0.0257185243898307,0.02610819900179783,0.026497873613764964,0.026887548225732097,0.027277222837699226,0.027666897449666356,0.02805657206163349,0.02844624667360062,0.02883592128556775,0.029225595897534883,0.029615270509502016,0.03000494512146915,0.03039461973343628,0.03078429434540341,0.031173968957370544,0.03156364356933768,0.031953318181304806,0.03234299279327194,0.03273266740523907,0.0331223420172062,0.03351201662917333,0.033901691241140466,0.034291365853107596,0.03468104046507473,0.03507071507704186,0.03546038968900899,0.03585006430097612,0.036239738912943256,0.036629413524910386,0.03701908813687752,0.03740876274884465,0.03779843736081179,0.03818811197277892,0.03857778658474605,0.038967461196713175,0.03935713580868031,0.03974681042064744,0.04013648503261457,0.04052615964458171,0.040915834256548836,0.04130550886851597,0.0416951834804831,0.04208485809245024,0.04247453270441736,0.042864207316384496,0.043253881928351626,0.04364355654031876,0.04403323115228589,0.04442290576425303,0.04481258037622016,0.045202254988187286,0.04559192960015442,0.04598160421212155,0.04637127882408868,0.04676095343605581,0.04715062804802295,0.047540302659990076,0.04792997727195721,0.04831965188392434,0.04870932649589148,0.04909900110785861,0.049488675719825743,0.04987835033179287,0.050268024943759995,0.05065769955572713,0.05104737416769426,0.0514370487796614,0.051826723391628526,0.05221639800359566,0.05260607261556279,0.05299574722752993,0.05338542183949706,0.053775096451464194,0.054164771063431316,0.05455444567539845,0.05494412028736558,0.05533379489933271,0.05572346951129985,0.05611314412326698,0.05650281873523411,0.05689249334720124,0.05728216795916838,0.0576718425711355,0.05806151718310264,0.05845119179506977,0.0588408664070369,0.05923054101900403,0.05962021563097117,0.0600098902429383,0.06039956485490543,0.06078923946687256,0.061178914078839686,0.06156858869080682,0.06195826330277395,0.06234793791474109,0.06273761252670822,0.06312728713867535,0.06351696175064248,0.06390663636260961,0.06429631097457675,0.06468598558654388,0.065075660198511,0.06546533481047814,0.06585500942244528,0.0662446840344124,0.06663435864637954,0.06702403325834666,0.0674137078703138,0.06780338248228093,0.06819305709424807,0.06858273170621519,0.06897240631818233,0.06936208093014946,0.0697517555421166,0.07014143015408372,0.07053110476605085,0.07092077937801798,0.07131045398998512,0.07170012860195224,0.07208980321391938,0.07247947782588651,0.07286915243785365,0.07325882704982077,0.07364850166178791,0.07403817627375504,0.07442785088572218,0.0748175254976893,0.07520720010965644,0.07559687472162357,0.0759865493335907,0.07637622394555783,0.07676589855752497,0.0771555731694921,0.07754524778145921,0.07793492239342635],"y":[0.02,0.020201307712088532,0.02040261542417706,0.020603923136265592,0.020805230848354124,0.021006538560442656,0.021207846272531184,0.021409153984619716,0.021610461696708248,0.02181176940879678,0.022013077120885308,0.02221438483297384,0.02241569254506237,0.022617000257150903,0.02281830796923943,0.023019615681327963,0.023220923393416495,0.023422231105505027,0.023623538817593555,0.023824846529682087,0.02402615424177062,0.02422746195385915,0.02442876966594768,0.02463007737803621,0.02483138509012474,0.02503269280221327,0.025234000514301802,0.025435308226390334,0.025636615938478866,0.025837923650567394,0.026039231362655926,0.026240539074744457,0.026441846786832986,0.026643154498921517,0.02684446221101005,0.02704576992309858,0.027247077635187113,0.02744838534727564,0.027649693059364173,0.027851000771452705,0.028052308483541233,0.028253616195629765,0.028454923907718296,0.028656231619806828,0.02885753933189536,0.029058847043983888,0.029260154756072417,0.02946146246816095,0.02966277018024948,0.029864077892338012,0.030065385604426544,0.030266693316515075,0.030468001028603607,0.030669308740692135,0.030870616452780667,0.031071924164869195,0.03127323187695773,0.03147453958904626,0.03167584730113479,0.031877155013223316,0.032078462725311854,0.03227977043740038,0.03248107814948891,0.03268238586157744,0.032883693573665974,0.033085001285754506,0.03328630899784304,0.03348761670993157,0.0336889244220201,0.03389023213410863,0.03409153984619716,0.03429284755828569,0.03449415527037422,0.03469546298246275,0.034896770694551285,0.03509807840663981,0.03529938611872835,0.03550069383081687,0.03570200154290541,0.03590330925499394,0.03610461696708247,0.036305924679171,0.03650723239125953,0.036708540103348064,0.03690984781543659,0.03711115552752512,0.03731246323961365,0.037513770951702184,0.037715078663790716,0.03791638637587925,0.03811769408796778,0.038319001800056304,0.038520309512144836,0.03872161722423337,0.0389229249363219,0.03912423264841043,0.039325540360498956,0.039526848072587495,0.03972815578467602,0.03992946349676456,0.04013077120885308,0.04033207892094162,0.04053338663303015,0.04073469434511867,0.04093600205720721,0.041137309769295735,0.041338617481384274,0.0415399251934728,0.04174123290556134,0.04194254061764986,0.042143848329738394,0.042345156041826926,0.04254646375391546,0.04274777146600399,0.04294907917809252,0.04315038689018105,0.04335169460226958,0.04355300231435811,0.04375431002644664,0.04395561773853517,0.044156925450623705,0.04435823316271223,0.04455954087480077,0.04476084858688929,0.044962156298977825,0.04516346401106636,0.04536477172315489,0.04556607943524342,0.045767387147331945,0.045968694859420484,0.04617000257150901,0.04637131028359754,0.04657261799568607,0.046773925707774604,0.046975233419863135,0.04717654113195166,0.0473778488440402,0.047579156556128724,0.04778046426821726,0.04798177198030579,0.048183079692394326,0.04838438740448285,0.048585695116571376,0.048787002828659914,0.04898831054074844,0.04918961825283698,0.0493909259649255,0.04959223367701404,0.049793541389102566,0.0499948491011911,0.05019615681327963,0.05039746452536816,0.05059877223745669,0.05080007994954522,0.05100138766163375,0.05120269537372228,0.05140400308581082,0.051605310797899345,0.05180661850998787,0.05200792622207641,0.052209233934164934,0.05241054164625347,0.052611849358342,0.05281315707043052,0.05301446478251906,0.053215772494607586,0.053417080206696124,0.05361838791878465,0.05381969563087319,0.05402100334296171,0.05422231105505024,0.054423618767138776,0.0546249264792273,0.05482623419131584,0.055027541903404364,0.0552288496154929,0.05543015732758143,0.05563146503966997,0.05583277275175849,0.05603408046384703,0.056235388175935555,0.05643669588802408,0.05663800360011262,0.05683931131220114,0.05704061902428967,0.05724192673637821,0.057443234448466746,0.05764454216055527,0.057845849872643795,0.058047157584732334,0.05824846529682086,0.0584497730089094,0.05865108072099792,0.05885238843308646,0.059053696145174986,0.05925500385726351,0.05945631156935205,0.059657619281440574,0.05985892699352911,0.06006023470561764,0.060261542417706176],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"range":[0,0.1575],"tickformat":".0%"},"yaxis":{"title":{"text":"Expected Return"},"range":[0,0.063],"tickformat":".0%"},"legend":{"yanchor":"top","y":0.5,"xanchor":"left","x":0.65}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('ea98ad8e-f527-4ad3-9b09-7f36e5d3b269');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.7: Tangency portfolio of two risky assets</figcaption><p></p>
</figure>
</div>
</div>
<p>Recall from <a href="#eq-cal">Equation&nbsp;<span>2.16</span></a> that the slope of the CAL for a risky asset is the Sharpe ratio. The <strong>Sharpe ratio</strong> is a measure of the excess return of an investment per unit of risk. Since investors like expected returns and dislike risk, they want high Sharpe ratios. Note in <a href="#fig-two-asset-plus_rf">Figure&nbsp;<span>2.7</span></a> that the Sharpe ratio of the bond is higher than that of the stock portfolio. In fact, the Sharpe ratio for all portfolios on the frontier have higher Sharpe ratios than that of the stock portfolio. The highest Sharpe ratio is obtained by combining the risk-free asset with a risky portfolio so that the CAL slope is as high as possible. This occurs when the CAL is tangent to the curve of risky-only portfolios. This portfolio of risky assets is thus called the <strong>tangency portfolio</strong>. Investing along the CAL of the tangency portfolio offers the highest possible Sharpe ratio, regardless of any desired level of expected return or risk.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Calculating the Tangency Portfolio in Python
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The code below relies on a Portfolio python object, which needs to be executed or imported before using this code. See <a href="#sec-portfolio-class"><span>Section&nbsp;2.5</span></a> for details.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode p code-with-copy"><code class="sourceCode pascal"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> numpy <span class="kw">as</span> np</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Risk-free rate</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>rs = <span class="dv">0.02</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Expected returns</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>mns = np.<span class="kw">array</span>([<span class="dv">0.10</span>, <span class="dv">0.05</span>, <span class="dv">0.07</span>])</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Standard deviations</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>sds = np.<span class="kw">array</span>([<span class="dv">0.20</span>, <span class="dv">0.12</span>, <span class="dv">0.15</span>])</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Correlations</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>corr12 = <span class="dv">0.3</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>corr13 = <span class="dv">0.3</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>corr23 = <span class="dv">0.3</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Covariance matrix</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>C  = np.identity(<span class="dv">3</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">1</span>] = C[<span class="dv">1</span>, <span class="dv">0</span>] = corr12</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">2</span>] = C[<span class="dv">2</span>, <span class="dv">0</span>] = corr13</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">1</span>, <span class="dv">2</span>] = C[<span class="dv">2</span>, <span class="dv">1</span>] = corr23</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>cov = np.diag(sds) @ C @ np.diag(sds)</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Define portfolios <span class="kw">class</span> <span class="kw">object</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>AllowShorting = <span class="kw">False</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>P = portfolio(mns, cov, AllowShorting)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="st">##### </span>Tangency Portfolio</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Weights</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>portTang = P.tangency(rs)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Expected return</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>mnTang = portTang @ mns</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Standard deviation</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>sdTang = np.sqrt(portTang @ cov @ portTang)</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="st"># </span>Sharpe ratio</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>srTang = (mnTang - rs)/sdTang</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>The tangency portfolio is thus the optimal combination of risky assets, and all investors should invest somewhere along the tangency portfolio CAL. This is an example of the <strong>two-fund separation</strong> property of asset allocation. All investors will choose to allocate capital to the risk-free asset and an optimal risky asset portfolio. The problem of determining an optimal all-risky asset portfolio is separate from the choice of where to invest on the resulting capital allocation line. We discuss the latter decision of how much capital to allocate to risky assets relative to the risk-free asset in <a href="#sec-preferences"><span>Section&nbsp;2.4</span></a>.</p>
<p>So far we have assumed that we can borrow and save at the same risk-free rate. Now relax this in favor of the more realistic assumption that <span class="math inline">\(r_f^{\text{borrow}}&gt;r_f^{\text{saving}}\)</span>. In this case, efficient portfolios fall into three regions, separated by blue dots in <a href="#fig-two-asset-plus_rf_saveborrow">Figure&nbsp;<span>2.8</span></a>.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> These blue dots indicate an efficient low risk portfolio and an efficient high mean portfolio, both comprised solely of risky assets. To the left of the efficient low risk portfolio, the efficient portfolios are scaled-down versions of the efficient low risk portfolio with some savings. To the right of the efficient high mean portfolio, the efficient portfolios are scaled-up versions of the efficient high mean portfolio with some borrowing. Both cases are shown as blue lines in the figure.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> The third region is the portion of the efficient frontier between the efficient low risk and efficient high mean portfolios. These portfolios do not involve saving or borrowing. Investors with different preferences will choose to invest in different locations across these three regions, as discussed in the next section.</p>
<div class="cell" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>mn_stock <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>mn_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>sd_stock <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>sd_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c, rs, extra):</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra   </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_s"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rs)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_b"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rb)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky(mn, sd, rs, rb, w_min, w_max):</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rs <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rs) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> rb <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rb)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    srs <span class="op">=</span> (mn <span class="op">-</span> rs)<span class="op">/</span>sd</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    srb <span class="op">=</span> (mn <span class="op">-</span> rb)<span class="op">/</span>sd</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds, srs, srb</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky_nokink(mn, sd, rf, w_min, w_max):</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>    rf <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rf <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rf)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c, rs, extra, asset1_name, asset2_name):</span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c, rs, extra)</span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Plot the portfolios of the two assets</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>        <span class="co"># line={'color': green},</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>asset1_name<span class="op">+</span><span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Stock &amp; Bond Frontier"</span></span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a>    trace2b <span class="op">=</span> go.Scatter(</span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb12-98"><a href="#cb12-98" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-99"><a href="#cb12-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2a)</span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2b)</span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb12-104"><a href="#cb12-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-105"><a href="#cb12-105" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the combination of the risk-free and each asset (CAL for each asset)</span></span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a>    grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mn1, sd1, rs, rs <span class="op">+</span> extra, <span class="dv">0</span>, <span class="fl">1.0</span>)</span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>asset1_name<span class="op">+</span><span class="st">"= %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srs_cal) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>    trace3 <span class="op">=</span> go.Scatter(</span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds_cal, </span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns_cal, </span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb12-113"><a href="#cb12-113" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string, </span>
<span id="cb12-114"><a href="#cb12-114" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb12-115"><a href="#cb12-115" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"CAL: "</span><span class="op">+</span>asset1_name</span>
<span id="cb12-116"><a href="#cb12-116" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-117"><a href="#cb12-117" aria-hidden="true" tabindex="-1"></a>    grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mn2, sd2, rs, rs <span class="op">+</span> extra, <span class="dv">0</span>, <span class="fl">1.0</span>)</span>
<span id="cb12-118"><a href="#cb12-118" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">"= %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio : "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srs_cal) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb12-119"><a href="#cb12-119" aria-hidden="true" tabindex="-1"></a>    trace4 <span class="op">=</span> go.Scatter(</span>
<span id="cb12-120"><a href="#cb12-120" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds_cal, </span>
<span id="cb12-121"><a href="#cb12-121" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>mns_cal, </span>
<span id="cb12-122"><a href="#cb12-122" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb12-123"><a href="#cb12-123" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb12-124"><a href="#cb12-124" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>string, </span>
<span id="cb12-125"><a href="#cb12-125" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb12-126"><a href="#cb12-126" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"CAL: "</span><span class="op">+</span>asset2_name</span>
<span id="cb12-127"><a href="#cb12-127" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-128"><a href="#cb12-128" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace3)</span>
<span id="cb12-129"><a href="#cb12-129" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace4)  </span>
<span id="cb12-130"><a href="#cb12-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-131"><a href="#cb12-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-132"><a href="#cb12-132" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports,srTang,borrow_flag):</span>
<span id="cb12-133"><a href="#cb12-133" aria-hidden="true" tabindex="-1"></a>        <span class="co"># borrow_flag=1 adds statement about "relative to borrowing rate"</span></span>
<span id="cb12-134"><a href="#cb12-134" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N<span class="op">+</span><span class="dv">1</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb12-135"><a href="#cb12-135" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb12-136"><a href="#cb12-136" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb12-137"><a href="#cb12-137" aria-hidden="true" tabindex="-1"></a>        cd[:,N] <span class="op">=</span> np.<span class="bu">round</span>(srTang,<span class="dv">4</span>)</span>
<span id="cb12-138"><a href="#cb12-138" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(cd)</span></span>
<span id="cb12-139"><a href="#cb12-139" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb12-140"><a href="#cb12-140" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb12-141"><a href="#cb12-141" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"asset "</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb12-142"><a href="#cb12-142" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb12-143"><a href="#cb12-143" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb12-144"><a href="#cb12-144" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb12-145"><a href="#cb12-145" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> borrow_flag<span class="op">==</span><span class="dv">1</span>:</span>
<span id="cb12-146"><a href="#cb12-146" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio (relative to borrowing rate): %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span>    </span>
<span id="cb12-147"><a href="#cb12-147" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb12-148"><a href="#cb12-148" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio: %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span></span>
<span id="cb12-149"><a href="#cb12-149" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb12-150"><a href="#cb12-150" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd  </span>
<span id="cb12-151"><a href="#cb12-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-152"><a href="#cb12-152" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the tangency portfolios</span></span>
<span id="cb12-153"><a href="#cb12-153" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb12-154"><a href="#cb12-154" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra     </span>
<span id="cb12-155"><a href="#cb12-155" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb12-156"><a href="#cb12-156" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb12-157"><a href="#cb12-157" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb12-158"><a href="#cb12-158" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array(mns) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb12-159"><a href="#cb12-159" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb12-160"><a href="#cb12-160" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array(sds) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb12-161"><a href="#cb12-161" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb12-162"><a href="#cb12-162" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb12-163"><a href="#cb12-163" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb12-164"><a href="#cb12-164" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-165"><a href="#cb12-165" aria-hidden="true" tabindex="-1"></a>    Shorts <span class="op">=</span> <span class="fl">0.0</span>     </span>
<span id="cb12-166"><a href="#cb12-166" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="bu">len</span>(mns)</span>
<span id="cb12-167"><a href="#cb12-167" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts)    </span>
<span id="cb12-168"><a href="#cb12-168" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb12-169"><a href="#cb12-169" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('GMV return is: ',gmv)</span></span>
<span id="cb12-170"><a href="#cb12-170" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rs <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb12-171"><a href="#cb12-171" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rs)</span>
<span id="cb12-172"><a href="#cb12-172" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb12-173"><a href="#cb12-173" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb12-174"><a href="#cb12-174" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb12-175"><a href="#cb12-175" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rs)<span class="op">/</span>sdTang</span>
<span id="cb12-176"><a href="#cb12-176" aria-hidden="true" tabindex="-1"></a>            string0 <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb12-177"><a href="#cb12-177" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string0, [portTang], srTang,<span class="dv">0</span>)</span>
<span id="cb12-178"><a href="#cb12-178" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb12-179"><a href="#cb12-179" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb12-180"><a href="#cb12-180" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb12-181"><a href="#cb12-181" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb12-182"><a href="#cb12-182" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb12-183"><a href="#cb12-183" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb12-184"><a href="#cb12-184" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb12-185"><a href="#cb12-185" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>string0</span>
<span id="cb12-186"><a href="#cb12-186" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb12-187"><a href="#cb12-187" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb12-188"><a href="#cb12-188" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-189"><a href="#cb12-189" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (no leverage)</span></span>
<span id="cb12-190"><a href="#cb12-190" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,<span class="dv">0</span>, <span class="fl">1.0</span>)</span>
<span id="cb12-191"><a href="#cb12-191" aria-hidden="true" tabindex="-1"></a>            portlabel <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb12-192"><a href="#cb12-192" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>portlabel <span class="op">+</span> <span class="st">" = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span>  <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb12-193"><a href="#cb12-193" aria-hidden="true" tabindex="-1"></a>            trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb12-194"><a href="#cb12-194" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb12-195"><a href="#cb12-195" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb12-196"><a href="#cb12-196" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb12-197"><a href="#cb12-197" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb12-198"><a href="#cb12-198" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb12-199"><a href="#cb12-199" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb12-200"><a href="#cb12-200" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span> <span class="op">+</span> portlabel</span>
<span id="cb12-201"><a href="#cb12-201" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb12-202"><a href="#cb12-202" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5)</span>
<span id="cb12-203"><a href="#cb12-203" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-204"><a href="#cb12-204" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)</span></span>
<span id="cb12-205"><a href="#cb12-205" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,<span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb12-206"><a href="#cb12-206" aria-hidden="true" tabindex="-1"></a>            trace5a <span class="op">=</span> go.Scatter(</span>
<span id="cb12-207"><a href="#cb12-207" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb12-208"><a href="#cb12-208" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb12-209"><a href="#cb12-209" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb12-210"><a href="#cb12-210" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb12-211"><a href="#cb12-211" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb12-212"><a href="#cb12-212" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>,dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb12-213"><a href="#cb12-213" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span>  <span class="op">+</span> portlabel <span class="op">+</span> <span class="st">" (levered)"</span></span>
<span id="cb12-214"><a href="#cb12-214" aria-hidden="true" tabindex="-1"></a>                <span class="co"># showlegend=False</span></span>
<span id="cb12-215"><a href="#cb12-215" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb12-216"><a href="#cb12-216" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5a)         </span>
<span id="cb12-217"><a href="#cb12-217" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-218"><a href="#cb12-218" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-219"><a href="#cb12-219" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-220"><a href="#cb12-220" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-221"><a href="#cb12-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-222"><a href="#cb12-222" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs) <span class="kw">and</span> ((gmv <span class="op">&gt;</span> rb) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb12-223"><a href="#cb12-223" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rb)</span>
<span id="cb12-224"><a href="#cb12-224" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb12-225"><a href="#cb12-225" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb12-226"><a href="#cb12-226" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb12-227"><a href="#cb12-227" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rb)<span class="op">/</span>sdTang</span>
<span id="cb12-228"><a href="#cb12-228" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">'efficient high mean portfolio'</span></span>
<span id="cb12-229"><a href="#cb12-229" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string, [portTang], srTang,<span class="dv">1</span>)</span>
<span id="cb12-230"><a href="#cb12-230" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb12-231"><a href="#cb12-231" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb12-232"><a href="#cb12-232" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb12-233"><a href="#cb12-233" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb12-234"><a href="#cb12-234" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb12-235"><a href="#cb12-235" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb12-236"><a href="#cb12-236" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb12-237"><a href="#cb12-237" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"efficient high mean portfolio"</span></span>
<span id="cb12-238"><a href="#cb12-238" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb12-239"><a href="#cb12-239" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb12-240"><a href="#cb12-240" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-241"><a href="#cb12-241" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)            </span></span>
<span id="cb12-242"><a href="#cb12-242" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rb<span class="op">*</span><span class="dv">100</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb12-243"><a href="#cb12-243" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in efficient high mean = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio (relative to borrowing rate): "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb12-244"><a href="#cb12-244" aria-hidden="true" tabindex="-1"></a>            trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb12-245"><a href="#cb12-245" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb12-246"><a href="#cb12-246" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb12-247"><a href="#cb12-247" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb12-248"><a href="#cb12-248" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb12-249"><a href="#cb12-249" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb12-250"><a href="#cb12-250" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb12-251"><a href="#cb12-251" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean"</span></span>
<span id="cb12-252"><a href="#cb12-252" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb12-253"><a href="#cb12-253" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6)   </span>
<span id="cb12-254"><a href="#cb12-254" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb12-255"><a href="#cb12-255" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (without leverage) </span></span>
<span id="cb12-256"><a href="#cb12-256" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal <span class="op">=</span> rf_plus_risky_nokink(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rb<span class="op">*</span><span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb12-257"><a href="#cb12-257" aria-hidden="true" tabindex="-1"></a>            trace6a <span class="op">=</span> go.Scatter(</span>
<span id="cb12-258"><a href="#cb12-258" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb12-259"><a href="#cb12-259" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb12-260"><a href="#cb12-260" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb12-261"><a href="#cb12-261" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb12-262"><a href="#cb12-262" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb12-263"><a href="#cb12-263" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>, dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb12-264"><a href="#cb12-264" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean (unlevered)"</span></span>
<span id="cb12-265"><a href="#cb12-265" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb12-266"><a href="#cb12-266" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6a)      </span>
<span id="cb12-267"><a href="#cb12-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-268"><a href="#cb12-268" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb12-269"><a href="#cb12-269" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb12-270"><a href="#cb12-270" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb12-271"><a href="#cb12-271" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.15</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb12-272"><a href="#cb12-272" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb12-273"><a href="#cb12-273" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb12-274"><a href="#cb12-274" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.65</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.535</span>))</span>
<span id="cb12-275"><a href="#cb12-275" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb12-276"><a href="#cb12-276" aria-hidden="true" tabindex="-1"></a>figtbl(mn_stock,mn_bond,sd_stock,sd_bond,corr,rs,extra,<span class="st">"Stock"</span>,<span class="st">"Bond"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-two-asset-plus_rf_saveborrow" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="f3fdbdf6-757e-4ed8-88b8-6596506d5e08" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f3fdbdf6-757e-4ed8-88b8-6596506d5e08")) {                    Plotly.newPlot(                        "f3fdbdf6-757e-4ed8-88b8-6596506d5e08",                        [{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"orange","size":10},"mode":"markers","name":"Stock","text":["Stock"],"x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":10},"mode":"markers","name":"Bond","text":["Bond"],"x":[0.035],"y":[0.035],"type":"scatter"},{"customdata":[100.0,99.0,98.0,97.0,96.0,95.0,94.0,93.0,92.0,91.0,90.0,89.0,88.0,87.0,86.0,85.0,84.0,83.0,82.0,81.0,80.0,79.0,78.0,77.0,76.0,75.0,74.0,73.0,72.0,71.0,70.0,69.0,68.0,67.0,65.99999999999999,64.99999999999999,64.0,63.0,62.0,61.0,60.0,59.0,58.00000000000001,57.00000000000001,56.00000000000001,55.00000000000001,54.0,53.0,52.0,51.0,50.0,49.0,48.0,47.0,46.0,44.99999999999999,43.99999999999999,42.99999999999999,42.00000000000001,41.0,40.0,39.0,38.0,37.0,36.0,35.0,34.0,32.99999999999999,31.999999999999996,30.999999999999993,29.999999999999993,29.000000000000004,28.000000000000004,27.0,26.0,25.0,24.0,23.0,21.999999999999996,20.999999999999996,19.999999999999996,18.999999999999993,17.999999999999993,16.999999999999993,16.000000000000004,15.000000000000002,14.000000000000002,13.0,12.0,10.999999999999998,9.999999999999998,8.999999999999996,7.9999999999999964,6.999999999999995,5.999999999999995,4.999999999999993,4.0000000000000036,3.0000000000000027,2.0000000000000018,1.0000000000000009,0.0],"hovertemplate":"Stock: %{text:.0f}%<br>Bond: %{customdata:.0f}%<extra></extra>","line":{"color":"black"},"mode":"lines","name":"Stock & Bond Frontier","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0],"x":[0.035,0.034607441396324,0.034281190177705326,0.03402315388085002,0.033834893231692045,0.03371757701852254,0.03367194678066595,0.03369829372535055,0.033796449517663835,0.033965791614505324,0.03420526275297414,0.03451340319354207,0.034888393485513196,0.035328104959083215,0.03583015489779524,0.03639196339853072,0.03701080923189873,0.03768388249636706,0.03840833242930498,0.039181309319623304,0.04,0.04086165684354955,0.04176362053270765,0.04270333710613258,0.04367836993295422,0.0446864073292987,0.04572526653831556,0.04679289475978164,0.0478873678541638,0.0490068872710765,0.05014977567247933,0.05131447164299756,0.052499523807364196,0.053703584610340485,0.05492540395845988,0.056163822875584246,0.057417767285048625,0.05868624199929656,0.05996832497243858,0.061263161851148364,0.06256996084384263,0.06388798791635249,0.06521656231357185,0.06655505240024982,0.06790287180966649,0.06925947588597534,0.07062435840416534,0.07199704855061768,0.07337710814688733,0.07476412909945516,0.07615773105863909,0.07755755927051858,0.07896328260653808,0.08037459175635046,0.08179119757039874,0.08321282953968097,0.0846392344010743,0.08607017485749636,0.08750542840304253,0.08894478624405142,0.09038805230781334,0.09183504233134539,0.09328558302331609,0.09473951129280751,0.09619667353916142,0.09765692499766722,0.0991201291363162,0.10058615709927485,0.10205488719311781,0.10352620441221633,0.10500000000000002,0.1064761710431024,0.10795462009566797,0.10943525483133851,0.11091798772065782,0.11240273573183172,0.1138894200529619,0.11537796583403609,0.11686830194710626,0.11836036076322173,0.11985407794480754,0.12134939225228943,0.1228462453638694,0.12434458170744715,0.1258443483037677,0.12734549461995112,0.12884797243263083,0.1303517356999898,0.13185674044204188,0.13336294462855863,0.1348703080740902,0.13637879233957162,0.13788836064004822,0.1393989777580883,0.1409106099624865,0.14242322493189094,0.14393679168301618,0.14545128050312928,0.14696666288651994,0.1484829114746879,0.15],"y":[0.035,0.03525,0.0355,0.035750000000000004,0.036,0.03625,0.0365,0.03675,0.037000000000000005,0.03725,0.0375,0.037750000000000006,0.038,0.03825,0.0385,0.03875,0.039,0.03925,0.0395,0.03975,0.04,0.04025,0.0405,0.04075,0.040999999999999995,0.04125,0.0415,0.041749999999999995,0.042,0.042249999999999996,0.0425,0.04275,0.043,0.04324999999999999,0.0435,0.04375,0.044000000000000004,0.04425,0.044500000000000005,0.04475,0.045,0.045250000000000005,0.045500000000000006,0.04575,0.046000000000000006,0.04625,0.04650000000000001,0.04675000000000001,0.047,0.04724999999999999,0.0475,0.04775,0.048,0.04825,0.048499999999999995,0.04875,0.049,0.04925000000000001,0.049499999999999995,0.049749999999999996,0.05,0.05025,0.050499999999999996,0.05075,0.051,0.05125,0.051500000000000004,0.051750000000000004,0.052000000000000005,0.052250000000000005,0.0525,0.052750000000000005,0.053000000000000005,0.05325,0.0535,0.05375,0.054000000000000006,0.05425,0.05449999999999999,0.05474999999999999,0.05500000000000001,0.05525,0.0555,0.05575,0.055999999999999994,0.05625,0.0565,0.056749999999999995,0.057,0.057249999999999995,0.0575,0.057749999999999996,0.05800000000000001,0.05825,0.0585,0.05875,0.059000000000000004,0.059250000000000004,0.059500000000000004,0.05975,0.06],"type":"scatter"},{"hovertemplate":"wealth in Stock= %{text:.0f}%<br>Sharpe ratio: 0.2667<extra></extra>","line":{"color":"orange"},"mode":"lines","name":"CAL: Stock","text":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0,40.5,41.0,41.5,42.0,42.5,43.0,43.5,44.0,44.5,45.0,45.5,46.0,46.5,47.0,47.5,48.0,48.5,49.0,49.5,50.0,50.5,51.0,51.5,52.0,52.5,53.0,53.5,54.0,54.50000000000001,55.00000000000001,55.50000000000001,56.00000000000001,56.50000000000001,57.00000000000001,57.50000000000001,57.99999999999999,58.5,59.0,59.5,60.0,60.5,61.0,61.5,62.0,62.5,63.0,63.5,64.0,64.5,65.0,65.5,66.0,66.5,67.0,67.5,68.0,68.5,69.0,69.5,70.0,70.5,71.0,71.5,72.0,72.5,73.0,73.5,74.0,74.5,75.0,75.5,76.0,76.5,77.0,77.5,78.0,78.5,79.0,79.5,80.0,80.5,81.0,81.5,82.0,82.5,83.0,83.5,84.0,84.5,85.0,85.5,86.0,86.5,87.0,87.5,88.0,88.5,89.0,89.5,90.0,90.5,91.0,91.5,92.0,92.5,93.0,93.5,94.0,94.5,95.0,95.5,96.0,96.5,97.0,97.5,98.0,98.5,99.0,99.5,100.0],"x":[0.0,0.00075,0.0015,0.00225,0.003,0.00375,0.0045,0.00525,0.006,0.00675,0.0075,0.00825,0.009,0.00975,0.0105,0.01125,0.012,0.012750000000000001,0.0135,0.014249999999999999,0.015,0.01575,0.0165,0.01725,0.018,0.01875,0.0195,0.02025,0.021,0.02175,0.0225,0.02325,0.024,0.02475,0.025500000000000002,0.026250000000000002,0.027,0.02775,0.028499999999999998,0.029249999999999998,0.03,0.03075,0.0315,0.03225,0.033,0.03375,0.0345,0.035250000000000004,0.036,0.03675,0.0375,0.03825,0.039,0.03975,0.0405,0.04125,0.042,0.04275,0.0435,0.04425,0.045,0.04575,0.0465,0.04725,0.048,0.04875,0.0495,0.05025,0.051000000000000004,0.051750000000000004,0.052500000000000005,0.05325,0.054,0.05475,0.0555,0.056249999999999994,0.056999999999999995,0.057749999999999996,0.058499999999999996,0.05925,0.06,0.06075,0.0615,0.06225,0.063,0.06375,0.0645,0.06525,0.066,0.06675,0.0675,0.06825,0.069,0.06975,0.07050000000000001,0.07125000000000001,0.072,0.07275,0.0735,0.07425,0.075,0.07575,0.0765,0.07725,0.078,0.07875,0.0795,0.08025,0.081,0.08175,0.0825,0.08325,0.084,0.08475,0.0855,0.08625000000000001,0.087,0.08775,0.0885,0.08925,0.09,0.09075,0.0915,0.09225,0.093,0.09375,0.0945,0.09525,0.096,0.09675,0.0975,0.09825,0.099,0.09975,0.1005,0.10125,0.10200000000000001,0.10275000000000001,0.10350000000000001,0.10425000000000001,0.10500000000000001,0.10575,0.1065,0.10725,0.108,0.10875,0.1095,0.11025,0.111,0.11175,0.11249999999999999,0.11324999999999999,0.11399999999999999,0.11474999999999999,0.11549999999999999,0.11624999999999999,0.11699999999999999,0.11775,0.1185,0.11925,0.12,0.12075,0.1215,0.12225,0.123,0.12375,0.1245,0.12525,0.126,0.12675,0.1275,0.12825,0.129,0.12975,0.1305,0.13125,0.132,0.13275,0.1335,0.13425,0.135,0.13575,0.1365,0.13725,0.138,0.13875,0.1395,0.14025,0.14100000000000001,0.14175000000000001,0.14250000000000002,0.14325000000000002,0.144,0.14475,0.1455,0.14625,0.147,0.14775,0.1485,0.14925,0.15],"y":[0.02,0.0202,0.0204,0.0206,0.0208,0.021,0.0212,0.0214,0.0216,0.0218,0.022,0.0222,0.0224,0.022600000000000002,0.0228,0.023,0.0232,0.0234,0.0236,0.0238,0.024,0.0242,0.024399999999999998,0.0246,0.0248,0.025,0.0252,0.0254,0.0256,0.0258,0.026,0.0262,0.0264,0.0266,0.0268,0.027,0.0272,0.0274,0.0276,0.0278,0.027999999999999997,0.0282,0.028399999999999998,0.0286,0.0288,0.028999999999999998,0.0292,0.0294,0.029599999999999998,0.0298,0.03,0.030199999999999998,0.0304,0.0306,0.0308,0.031,0.0312,0.0314,0.031599999999999996,0.031799999999999995,0.032,0.0322,0.0324,0.0326,0.032799999999999996,0.033,0.0332,0.0334,0.0336,0.0338,0.034,0.034199999999999994,0.0344,0.0346,0.0348,0.034999999999999996,0.035199999999999995,0.0354,0.0356,0.0358,0.036,0.036199999999999996,0.0364,0.0366,0.0368,0.037,0.0372,0.0374,0.037599999999999995,0.0378,0.038,0.0382,0.038400000000000004,0.038599999999999995,0.0388,0.039,0.0392,0.0394,0.039599999999999996,0.0398,0.039999999999999994,0.0402,0.0404,0.0406,0.0408,0.040999999999999995,0.0412,0.0414,0.0416,0.041800000000000004,0.041999999999999996,0.0422,0.0424,0.0426,0.0428,0.043,0.043199999999999995,0.043399999999999994,0.0436,0.04379999999999999,0.044,0.044199999999999996,0.044399999999999995,0.0446,0.04479999999999999,0.045,0.0452,0.045399999999999996,0.0456,0.045799999999999993,0.046,0.0462,0.0464,0.0466,0.046799999999999994,0.047,0.0472,0.0474,0.0476,0.047799999999999995,0.048,0.04819999999999999,0.0484,0.04859999999999999,0.048799999999999996,0.048999999999999995,0.049199999999999994,0.0494,0.04959999999999999,0.0498,0.049999999999999996,0.050199999999999995,0.0504,0.05059999999999999,0.0508,0.051,0.051199999999999996,0.0514,0.05159999999999999,0.0518,0.05199999999999999,0.052199999999999996,0.0524,0.052599999999999994,0.0528,0.05299999999999999,0.0532,0.05339999999999999,0.053599999999999995,0.0538,0.05399999999999999,0.0542,0.05439999999999999,0.054599999999999996,0.0548,0.05499999999999999,0.0552,0.05539999999999999,0.0556,0.0558,0.055999999999999994,0.0562,0.05639999999999999,0.0566,0.0568,0.056999999999999995,0.0572,0.05739999999999999,0.0576,0.05779999999999999,0.057999999999999996,0.0582,0.058399999999999994,0.0586,0.05879999999999999,0.059,0.05919999999999999,0.059399999999999994,0.0596,0.05979999999999999,0.06],"type":"scatter"},{"hovertemplate":"wealth in Bond= %{text:.0f}%<br>Sharpe ratio : 0.4286<extra></extra>","line":{"color":"red"},"mode":"lines","name":"CAL: Bond","text":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0,40.5,41.0,41.5,42.0,42.5,43.0,43.5,44.0,44.5,45.0,45.5,46.0,46.5,47.0,47.5,48.0,48.5,49.0,49.5,50.0,50.5,51.0,51.5,52.0,52.5,53.0,53.5,54.0,54.50000000000001,55.00000000000001,55.50000000000001,56.00000000000001,56.50000000000001,57.00000000000001,57.50000000000001,57.99999999999999,58.5,59.0,59.5,60.0,60.5,61.0,61.5,62.0,62.5,63.0,63.5,64.0,64.5,65.0,65.5,66.0,66.5,67.0,67.5,68.0,68.5,69.0,69.5,70.0,70.5,71.0,71.5,72.0,72.5,73.0,73.5,74.0,74.5,75.0,75.5,76.0,76.5,77.0,77.5,78.0,78.5,79.0,79.5,80.0,80.5,81.0,81.5,82.0,82.5,83.0,83.5,84.0,84.5,85.0,85.5,86.0,86.5,87.0,87.5,88.0,88.5,89.0,89.5,90.0,90.5,91.0,91.5,92.0,92.5,93.0,93.5,94.0,94.5,95.0,95.5,96.0,96.5,97.0,97.5,98.0,98.5,99.0,99.5,100.0],"x":[0.0,0.00017500000000000003,0.00035000000000000005,0.0005250000000000001,0.0007000000000000001,0.0008750000000000001,0.0010500000000000002,0.0012250000000000002,0.0014000000000000002,0.001575,0.0017500000000000003,0.0019250000000000003,0.0021000000000000003,0.002275,0.0024500000000000004,0.002625,0.0028000000000000004,0.0029750000000000006,0.00315,0.0033250000000000003,0.0035000000000000005,0.0036750000000000003,0.0038500000000000006,0.004025000000000001,0.004200000000000001,0.004375,0.00455,0.004725000000000001,0.004900000000000001,0.0050750000000000005,0.00525,0.005425,0.005600000000000001,0.005775000000000001,0.005950000000000001,0.006125000000000001,0.0063,0.006475000000000001,0.0066500000000000005,0.006825000000000001,0.007000000000000001,0.007175000000000001,0.007350000000000001,0.0075250000000000004,0.007700000000000001,0.007875000000000002,0.008050000000000002,0.008225000000000001,0.008400000000000001,0.008575000000000001,0.00875,0.008925,0.0091,0.009275000000000002,0.009450000000000002,0.009625000000000002,0.009800000000000001,0.009975000000000001,0.010150000000000001,0.010325,0.0105,0.010675,0.01085,0.011025000000000002,0.011200000000000002,0.011375000000000001,0.011550000000000001,0.011725000000000001,0.011900000000000003,0.012075000000000002,0.012250000000000002,0.012425,0.0126,0.012775000000000002,0.012950000000000001,0.013125000000000001,0.013300000000000001,0.013475,0.013650000000000002,0.013825000000000002,0.014000000000000002,0.014175000000000002,0.014350000000000002,0.014525000000000003,0.014700000000000001,0.014875000000000001,0.015050000000000001,0.015225,0.015400000000000002,0.015575000000000002,0.015750000000000004,0.015925,0.016100000000000003,0.016275,0.016450000000000003,0.016625000000000004,0.016800000000000002,0.016975,0.017150000000000002,0.017325,0.0175,0.017675000000000003,0.01785,0.018025000000000003,0.0182,0.018375000000000002,0.018550000000000004,0.018725000000000002,0.018900000000000004,0.019075,0.019250000000000003,0.019425000000000005,0.019600000000000003,0.019775000000000004,0.019950000000000002,0.020125000000000004,0.020300000000000002,0.020475,0.02065,0.020825,0.021,0.021175000000000003,0.02135,0.021525000000000002,0.0217,0.021875000000000002,0.022050000000000004,0.022225,0.022400000000000003,0.022575,0.022750000000000003,0.022925000000000004,0.023100000000000002,0.023275000000000004,0.023450000000000002,0.023625000000000004,0.023800000000000005,0.023975000000000003,0.024150000000000005,0.024325000000000003,0.024500000000000004,0.024675000000000002,0.02485,0.025025000000000002,0.0252,0.025375,0.025550000000000003,0.025725,0.025900000000000003,0.026075,0.026250000000000002,0.026425000000000004,0.026600000000000002,0.026775000000000004,0.02695,0.027125000000000003,0.027300000000000005,0.027475000000000003,0.027650000000000004,0.027825000000000003,0.028000000000000004,0.028175000000000006,0.028350000000000004,0.028525000000000005,0.028700000000000003,0.028875000000000005,0.029050000000000006,0.029225,0.029400000000000003,0.029575,0.029750000000000002,0.029925000000000004,0.030100000000000002,0.030275000000000003,0.03045,0.030625000000000003,0.030800000000000004,0.030975000000000003,0.031150000000000004,0.031325000000000006,0.03150000000000001,0.031675,0.03185,0.032025000000000005,0.032200000000000006,0.03237500000000001,0.03255,0.032725000000000004,0.032900000000000006,0.03307500000000001,0.03325000000000001,0.033425,0.033600000000000005,0.033775,0.03395,0.034125,0.034300000000000004,0.034475000000000006,0.03465,0.034825,0.035],"y":[0.02,0.020075,0.02015,0.020225,0.020300000000000002,0.020375,0.02045,0.020525,0.0206,0.020675,0.02075,0.020825,0.020900000000000002,0.020975,0.02105,0.021125,0.0212,0.021275000000000002,0.02135,0.021425,0.021500000000000002,0.021575,0.021650000000000003,0.021725,0.0218,0.021875000000000002,0.02195,0.022025,0.0221,0.022175,0.02225,0.022325,0.0224,0.022475000000000002,0.02255,0.022625,0.0227,0.022775,0.022850000000000002,0.022925,0.023,0.023075000000000002,0.02315,0.023225000000000003,0.0233,0.023375,0.023450000000000002,0.023525,0.023600000000000003,0.023675,0.02375,0.023825000000000002,0.0239,0.023975000000000003,0.024050000000000002,0.024125,0.024200000000000003,0.024275,0.02435,0.024425000000000002,0.0245,0.024575,0.024650000000000002,0.024725,0.024800000000000003,0.024875,0.02495,0.025025000000000002,0.0251,0.025175000000000003,0.02525,0.025325,0.025400000000000002,0.025475,0.025550000000000003,0.025625000000000002,0.0257,0.025775000000000003,0.02585,0.025925000000000004,0.026000000000000002,0.026075,0.026150000000000003,0.026225000000000002,0.0263,0.026375000000000003,0.02645,0.026525,0.026600000000000002,0.026675,0.026750000000000003,0.026825,0.0269,0.026975000000000002,0.02705,0.027125000000000003,0.027200000000000002,0.027275,0.027350000000000003,0.027425,0.027500000000000004,0.027575000000000002,0.02765,0.027725000000000003,0.027800000000000002,0.027875000000000004,0.027950000000000003,0.028025,0.0281,0.028175000000000002,0.028250000000000004,0.028325000000000003,0.0284,0.028475000000000004,0.028550000000000002,0.028625000000000005,0.028700000000000003,0.028775000000000002,0.02885,0.028925,0.029,0.029075000000000004,0.029150000000000002,0.029225,0.0293,0.029375000000000002,0.029450000000000004,0.029525000000000003,0.0296,0.029675,0.029750000000000002,0.029825000000000004,0.029900000000000003,0.029975,0.030050000000000004,0.030125000000000002,0.030200000000000005,0.030275000000000003,0.030350000000000002,0.030425000000000004,0.030500000000000003,0.030575,0.030650000000000004,0.030725000000000002,0.0308,0.030875,0.030950000000000002,0.031025000000000004,0.031100000000000003,0.031175,0.03125,0.031325000000000006,0.031400000000000004,0.031475,0.03155,0.031625,0.031700000000000006,0.031775000000000005,0.03185,0.031925,0.032,0.032075000000000006,0.032150000000000005,0.032225000000000004,0.0323,0.032375,0.03245000000000001,0.032525,0.032600000000000004,0.032675,0.03275,0.03282500000000001,0.0329,0.032975000000000004,0.03305,0.033125,0.03320000000000001,0.033275,0.033350000000000005,0.033425,0.0335,0.03357500000000001,0.03365,0.033725000000000005,0.033800000000000004,0.033875,0.03395000000000001,0.034025,0.034100000000000005,0.034175000000000004,0.03425,0.03432500000000001,0.0344,0.034475000000000006,0.034550000000000004,0.034625,0.0347,0.034775,0.034850000000000006,0.034925000000000005,0.035],"type":"scatter"},{"customdata":[[[0.13202804395829393],[0.8679719560417061],[0.5166]]],"hovertemplate":"efficient low risk<br>asset 1: %{customdata[0]:.1%}<br>asset 2: %{customdata[1]:.1%}<br>Sharpe ratio: %{customdata[2]:.4f}<br><extra></extra>","marker":{"color":"blue","size":10},"mode":"markers","name":"efficient low risk","x":[0.035424964724284705],"y":[0.03830070109895735],"type":"scatter"},{"hovertemplate":"wealth in efficient low risk = %{text:.0f}%<br>Sharpe ratio: 0.5166<extra></extra>","line":{"color":"blue"},"mode":"lines","name":"CAL: efficient low risk","text":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0,40.5,41.0,41.5,42.0,42.5,43.0,43.5,44.0,44.5,45.0,45.5,46.0,46.5,47.0,47.5,48.0,48.5,49.0,49.5,50.0,50.5,51.0,51.5,52.0,52.5,53.0,53.5,54.0,54.50000000000001,55.00000000000001,55.50000000000001,56.00000000000001,56.50000000000001,57.00000000000001,57.50000000000001,57.99999999999999,58.5,59.0,59.5,60.0,60.5,61.0,61.5,62.0,62.5,63.0,63.5,64.0,64.5,65.0,65.5,66.0,66.5,67.0,67.5,68.0,68.5,69.0,69.5,70.0,70.5,71.0,71.5,72.0,72.5,73.0,73.5,74.0,74.5,75.0,75.5,76.0,76.5,77.0,77.5,78.0,78.5,79.0,79.5,80.0,80.5,81.0,81.5,82.0,82.5,83.0,83.5,84.0,84.5,85.0,85.5,86.0,86.5,87.0,87.5,88.0,88.5,89.0,89.5,90.0,90.5,91.0,91.5,92.0,92.5,93.0,93.5,94.0,94.5,95.0,95.5,96.0,96.5,97.0,97.5,98.0,98.5,99.0,99.5,100.0],"x":[0.0,0.00017712482362142352,0.00035424964724284705,0.0005313744708642706,0.0007084992944856941,0.0008856241181071176,0.0010627489417285411,0.0012398737653499649,0.0014169985889713882,0.0015941234125928117,0.0017712482362142352,0.0019483730598356588,0.0021254978834570823,0.002302622707078506,0.0024797475306999298,0.002656872354321353,0.0028339971779427764,0.0030111220015642,0.0031882468251856234,0.003365371648807047,0.0035424964724284705,0.003719621296049894,0.0038967461196713175,0.004073870943292741,0.004250995766914165,0.004428120590535588,0.004605245414157012,0.004782370237778435,0.0049594950613998596,0.005136619885021282,0.005313744708642706,0.005490869532264129,0.005667994355885553,0.005845119179506976,0.0060222440031284,0.006199368826749824,0.006376493650371247,0.00655361847399267,0.006730743297614094,0.0069078681212355175,0.007084992944856941,0.007262117768478365,0.007439242592099788,0.0076163674157212116,0.007793492239342635,0.007970617062964059,0.008147741886585482,0.008324866710206906,0.00850199153382833,0.008679116357449753,0.008856241181071176,0.0090333660046926,0.009210490828314023,0.009387615651935447,0.00956474047555687,0.009741865299178294,0.009918990122799719,0.010096114946421143,0.010273239770042564,0.010450364593663988,0.010627489417285411,0.010804614240906835,0.010981739064528259,0.011158863888149682,0.011335988711771106,0.011513113535392529,0.011690238359013953,0.011867363182635376,0.0120444880062568,0.012221612829878225,0.012398737653499648,0.01257586247712107,0.012752987300742494,0.012930112124363917,0.01310723694798534,0.013284361771606764,0.013461486595228188,0.013638611418849611,0.013815736242471035,0.013992861066092458,0.014169985889713882,0.014347110713335307,0.01452423553695673,0.014701360360578154,0.014878485184199576,0.015055610007821,0.015232734831442423,0.015409859655063847,0.01558698447868527,0.015764109302306695,0.015941234125928117,0.016118358949549542,0.016295483773170964,0.01647260859679239,0.01664973342041381,0.016826858244035237,0.01700398306765666,0.01718110789127808,0.017358232714899505,0.017535357538520927,0.017712482362142352,0.017889607185763778,0.0180667320093852,0.018243856833006625,0.018420981656628047,0.018598106480249472,0.018775231303870894,0.01895235612749232,0.01912948095111374,0.019306605774735166,0.019483730598356588,0.019660855421978013,0.019837980245599438,0.02001510506922086,0.020192229892842285,0.020369354716463707,0.02054647954008513,0.02072360436370655,0.020900729187327976,0.021077854010949398,0.021254978834570823,0.021432103658192245,0.02160922848181367,0.021786353305435092,0.021963478129056517,0.02214060295267794,0.022317727776299364,0.02249485259992079,0.02267197742354221,0.022849102247163636,0.023026227070785058,0.023203351894406483,0.023380476718027905,0.02355760154164933,0.023734726365270752,0.023911851188892178,0.0240889760125136,0.024266100836135025,0.02444322565975645,0.02462035048337787,0.024797475306999297,0.024974600130620715,0.02515172495424214,0.025328849777863562,0.025505974601484988,0.02568309942510641,0.025860224248727835,0.026037349072349256,0.02621447389597068,0.026391598719592103,0.02656872354321353,0.026745848366834954,0.026922973190456376,0.0271000980140778,0.027277222837699223,0.027454347661320648,0.02763147248494207,0.027808597308563495,0.027985722132184917,0.028162846955806342,0.028339971779427764,0.02851709660304919,0.028694221426670614,0.028871346250292036,0.02904847107391346,0.029225595897534883,0.02940272072115631,0.029579845544777727,0.029756970368399152,0.029934095192020574,0.030111220015642,0.03028834483926342,0.030465469662884846,0.030642594486506268,0.030819719310127693,0.03099684413374912,0.03117396895737054,0.03135109378099196,0.03152821860461339,0.03170534342823481,0.031882468251856234,0.032059593075477656,0.032236717899099085,0.03241384272272051,0.03259096754634193,0.03276809236996335,0.03294521719358478,0.0331223420172062,0.03329946684082762,0.03347659166444905,0.03365371648807047,0.033830841311691895,0.03400796613531332,0.03418509095893474,0.03436221578255616,0.03453934060617759,0.03471646542979901,0.03489359025342043,0.035070715077041854,0.03524783990066328,0.035424964724284705],"y":[0.02,0.02009150350549479,0.020183007010989573,0.02027451051648436,0.020366014021979146,0.020457517527473934,0.020549021032968722,0.020640524538463507,0.020732028043958295,0.02082353154945308,0.020915035054947868,0.021006538560442656,0.02109804206593744,0.02118954557143223,0.021281049076927017,0.0213725525824218,0.02146405608791659,0.021555559593411374,0.021647063098906162,0.021738566604400947,0.021830070109895735,0.021921573615390523,0.022013077120885308,0.022104580626380096,0.022196084131874884,0.02228758763736967,0.022379091142864457,0.02247059464835924,0.02256209815385403,0.022653601659348814,0.022745105164843602,0.02283660867033839,0.022928112175833175,0.023019615681327963,0.02311111918682275,0.023202622692317536,0.023294126197812324,0.02338562970330711,0.023477133208801897,0.023568636714296685,0.02366014021979147,0.023751643725286258,0.023843147230781042,0.02393465073627583,0.02402615424177062,0.024117657747265403,0.02420916125276019,0.02430066475825498,0.024392168263749764,0.02448367176924455,0.024575175274739337,0.024666678780234125,0.02475818228572891,0.024849685791223698,0.024941189296718486,0.02503269280221327,0.02512419630770806,0.025215699813202846,0.02530720331869763,0.025398706824192416,0.025490210329687204,0.025581713835181992,0.025673217340676777,0.025764720846171565,0.025856224351666353,0.025947727857161137,0.026039231362655926,0.026130734868150714,0.0262222383736455,0.026313741879140286,0.026405245384635075,0.02649674889012986,0.026588252395624644,0.026679755901119432,0.02677125940661422,0.026862762912109005,0.026954266417603793,0.02704576992309858,0.027137273428593366,0.027228776934088154,0.027320280439582942,0.027411783945077726,0.027503287450572515,0.027594790956067303,0.027686294461562087,0.027777797967056872,0.02786930147255166,0.027960804978046448,0.028052308483541233,0.02814381198903602,0.02823531549453081,0.028326819000025594,0.028418322505520382,0.02850982601101517,0.028601329516509955,0.02869283302200474,0.028784336527499527,0.028875840032994315,0.0289673435384891,0.029058847043983888,0.029150350549478676,0.02924185405497346,0.02933335756046825,0.029424861065963037,0.029516364571457822,0.029607868076952606,0.029699371582447398,0.029790875087942183,0.029882378593436967,0.029973882098931755,0.030065385604426544,0.030156889109921328,0.030248392615416116,0.030339896120910904,0.03043139962640569,0.030522903131900477,0.030614406637395262,0.03070591014289005,0.030797413648384835,0.030888917153879623,0.03098042065937441,0.031071924164869195,0.03116342767036398,0.03125493117585877,0.031346434681353556,0.03143793818684834,0.03152944169234313,0.03162094519783792,0.0317124487033327,0.03180395220882749,0.03189545571432228,0.03198695921981706,0.032078462725311854,0.03216996623080664,0.032261469736301424,0.032352973241796215,0.032444476747291,0.032535980252785784,0.032627483758280576,0.03271898726377536,0.032810490769270145,0.03290199427476493,0.032993497780259715,0.033085001285754506,0.03317650479124929,0.033268008296744075,0.03335951180223887,0.03345101530773365,0.033542518813228436,0.03363402231872323,0.03372552582421801,0.0338170293297128,0.03390853283520759,0.03400003634070237,0.03409153984619716,0.03418304335169195,0.034274546857186734,0.03436605036268152,0.03445755386817631,0.034549057373671095,0.03464056087916588,0.034732064384660664,0.034823567890155456,0.03491507139565024,0.035006574901145025,0.03509807840663981,0.0351895819121346,0.035281085417629386,0.03537258892312417,0.03546409242861896,0.03555559593411375,0.03564709943960853,0.03573860294510332,0.03583010645059811,0.03592160995609289,0.036013113461587684,0.03610461696708247,0.03619612047257725,0.036287623978072045,0.03637912748356682,0.036470630989061614,0.036562134494556406,0.036653638000051184,0.036745141505545975,0.03683664501104077,0.036928148516535544,0.037019652022030336,0.03711115552752512,0.037202659033019905,0.0372941625385147,0.03738566604400948,0.037477169549504266,0.03756867305499906,0.03766017656049384,0.03775168006598863,0.03784318357148342,0.037934687076978196,0.03802619058247299,0.03811769408796778,0.03820919759346256,0.03830070109895735],"type":"scatter"},{"hovertemplate":"wealth in efficient low risk = %{text:.0f}%<br>Sharpe ratio: 0.5166<extra></extra>","line":{"color":"blue","dash":"dot"},"mode":"lines","name":"CAL: efficient low risk (levered)","text":[100.0,100.25,100.49999999999999,100.75,101.0,101.25,101.49999999999999,101.75,102.0,102.25,102.49999999999999,102.75000000000001,103.0,103.25,103.49999999999999,103.75000000000001,104.0,104.25,104.5,104.75000000000001,105.0,105.25,105.5,105.75000000000001,106.0,106.25,106.5,106.74999999999999,107.0,107.25,107.5,107.74999999999999,108.0,108.25,108.5,108.74999999999999,109.00000000000001,109.25,109.5,109.74999999999999,110.00000000000001,110.25,110.5,110.75,111.00000000000001,111.25,111.5,111.75,112.00000000000001,112.25,112.5,112.75,112.99999999999999,113.25,113.5,113.75,114.00000000000001,114.25,114.5,114.75,114.99999999999999,115.25000000000001,115.5,115.75,115.99999999999999,116.25000000000001,116.5,116.75,117.0,117.25000000000001,117.5,117.75,118.0,118.25000000000001,118.5,118.75,119.0,119.24999999999999,119.5,119.75,120.0,120.25000000000001,120.5,120.75,121.0,121.24999999999999,121.50000000000001,121.75,122.0,122.24999999999999,122.50000000000001,122.75,123.0,123.25,123.50000000000001,123.75,124.0,124.25,124.50000000000001,124.75,125.0,125.25,125.49999999999999,125.75,126.0,126.25,126.50000000000001,126.75,127.0,127.25,127.49999999999999,127.75000000000001,128.0,128.25,128.5,128.75,129.0,129.25,129.5,129.75,130.0,130.25,130.5,130.75,131.0,131.25,131.5,131.75,132.0,132.25,132.5,132.75,133.0,133.25,133.5,133.75,134.0,134.25,134.5,134.75,135.0,135.25,135.5,135.75,136.0,136.25,136.5,136.75,137.0,137.25,137.5,137.75,138.0,138.25,138.5,138.75,139.0,139.25,139.5,139.75,140.0,140.25,140.5,140.75,141.0,141.25,141.5,141.75,142.0,142.25,142.5,142.75,143.0,143.25,143.5,143.75,144.0,144.25,144.5,144.75,145.0,145.25,145.5,145.75,146.0,146.25,146.5,146.75,147.0,147.25,147.5,147.75,148.0,148.25,148.5,148.75,149.0,149.25,149.5,149.75,150.0],"x":[0.035424964724284705,0.035513527136095416,0.03560208954790613,0.035690651959716845,0.035779214371527555,0.03586777678333826,0.03595633919514897,0.03604490160695969,0.0361334640187704,0.03622202643058111,0.03631058884239182,0.03639915125420254,0.03648771366601325,0.03657627607782395,0.036664838489634664,0.03675340090144538,0.03684196331325609,0.036930525725066804,0.037019088136877515,0.03710765054868823,0.037196212960498944,0.037284775372309654,0.03737333778412036,0.037461900195931076,0.03755046260774179,0.0376390250195525,0.03772758743136321,0.03781614984317392,0.03790471225498464,0.03799327466679535,0.03808183707860606,0.03817039949041676,0.03825896190222748,0.03834752431403819,0.0384360867258489,0.038524649137659614,0.03861321154947033,0.03870177396128104,0.038790336373091754,0.03887889878490246,0.038967461196713175,0.039056023608523886,0.0391445860203346,0.03923314843214531,0.039321710843956026,0.03941027325576674,0.03949883566757745,0.03958739807938816,0.039675960491198876,0.03976452290300958,0.03985308531482029,0.039941647726631,0.04003021013844171,0.04011877255025243,0.04020733496206314,0.04029589737387385,0.04038445978568457,0.040473022197495274,0.040561584609305985,0.040650147021116696,0.04073870943292741,0.040827271844738125,0.040915834256548836,0.04100439666835955,0.04109295908017026,0.041181521491980976,0.04127008390379168,0.04135864631560239,0.0414472087274131,0.04153577113922382,0.04162433355103453,0.04171289596284524,0.04180145837465595,0.04189002078646667,0.04197858319827738,0.042067145610088084,0.042155708021898795,0.042244270433709506,0.042332832845520224,0.042421395257330935,0.042509957669141646,0.042598520080952364,0.042687082492763075,0.04277564490457378,0.04286420731638449,0.0429527697281952,0.04304133214000592,0.04312989455181663,0.04321845696362734,0.04330701937543805,0.04339558178724877,0.04348414419905948,0.043572706610870184,0.043661269022680894,0.04374983143449161,0.04383839384630232,0.043926956258113034,0.044015518669923745,0.04410408108173446,0.044192643493545174,0.04428120590535588,0.04436976831716659,0.0444583307289773,0.04454689314078802,0.04463545555259873,0.04472401796440944,0.04481258037622016,0.04490114278803087,0.04498970519984158,0.04507826761165228,0.045166830023462994,0.04525539243527371,0.04534395484708442,0.04543251725889513,0.04552107967070585,0.04560964208251656,0.04569820449432727,0.045786766906137984,0.04587532931794869,0.0459638917297594,0.046052454141570116,0.04614101655338083,0.04622957896519154,0.046318141377002256,0.04640670378881297,0.04649526620062368,0.04658382861243438,0.04667239102424509,0.04676095343605581,0.04684951584786652,0.04693807825967723,0.04702664067148795,0.04711520308329866,0.04720376549510937,0.04729232790692008,0.04738089031873079,0.047469452730541505,0.047558015142352215,0.047646577554162926,0.047735139965973644,0.047823702377784355,0.047912264789595066,0.04800082720140578,0.04808938961321649,0.04817795202502719,0.04826651443683791,0.04835507684864862,0.04844363926045933,0.04853220167227005,0.04862076408408076,0.04870932649589147,0.04879788890770218,0.048886451319512886,0.048975013731323604,0.049063576143134315,0.049152138554945025,0.04924070096675574,0.049329263378566454,0.049417825790377165,0.049506388202187876,0.04959495061399859,0.049683513025809305,0.04977207543762001,0.04986063784943072,0.04994920026124144,0.05003776267305215,0.05012632508486286,0.05021488749667357,0.05030344990848428,0.050392012320294985,0.0504805747321057,0.050569137143916414,0.050657699555727125,0.05074626196753784,0.05083482437934855,0.050923386791159264,0.051011949202969975,0.051100511614780686,0.051189074026591404,0.05127763643840211,0.05136619885021282,0.051454761262023536,0.05154332367383425,0.05163188608564496,0.05172044849745567,0.05180901090926638,0.0518975733210771,0.05198613573288781,0.05207469814469851,0.05216326055650923,0.05225182296831994,0.05234038538013065,0.05242894779194136,0.052517510203752074,0.052606072615562785,0.0526946350273735,0.05278319743918421,0.05287175985099492,0.052960322262805636,0.053048884674616346,0.05313744708642706],"y":[0.03830070109895735,0.03834645285170474,0.03839220460445213,0.03843795635719953,0.03848370810994692,0.038529459862694314,0.03857521161544171,0.0386209633681891,0.0386667151209365,0.03871246687368389,0.03875821862643128,0.03880397037917868,0.03884972213192607,0.03889547388467346,0.038941225637420855,0.03898697739016825,0.03903272914291564,0.039078480895663036,0.03912423264841043,0.03916998440115782,0.039215736153905216,0.03926148790665261,0.0393072396594,0.0393529914121474,0.03939874316489479,0.03944449491764218,0.03949024667038958,0.03953599842313697,0.03958175017588436,0.03962750192863176,0.03967325368137915,0.03971900543412654,0.03976475718687394,0.039810508939621334,0.03985626069236872,0.03990201244511611,0.039947764197863514,0.0399935159506109,0.04003926770335829,0.04008501945610569,0.04013077120885308,0.04017652296160048,0.040222274714347875,0.040268026467095264,0.04031377821984266,0.040359529972590055,0.040405281725337444,0.04045103347808483,0.040496785230832236,0.040542536983579625,0.04058828873632701,0.04063404048907441,0.040679792241821805,0.040725543994569194,0.04077129574731659,0.040817047500063985,0.04086279925281138,0.04090855100555878,0.040954302758306166,0.041000054511053555,0.04104580626380095,0.041091558016548346,0.041137309769295735,0.04118306152204313,0.04122881327479053,0.041274565027537916,0.04132031678028531,0.04136606853303271,0.041411820285780096,0.04145757203852749,0.04150332379127489,0.041549075544022276,0.041594827296769665,0.04164057904951707,0.04168633080226446,0.04173208255501185,0.04177783430775925,0.04182358606050664,0.04186933781325403,0.04191508956600143,0.04196084131874882,0.042006593071496214,0.04205234482424361,0.042098096576991,0.04214384832973839,0.04218960008248578,0.04223535183523318,0.04228110358798057,0.04232685534072796,0.04237260709347536,0.042418358846222755,0.04246411059897015,0.04250986235171754,0.04255561410446493,0.04260136585721233,0.04264711760995972,0.04269286936270711,0.042738621115454505,0.0427843728682019,0.04283012462094929,0.042875876373696685,0.04292162812644408,0.04296737987919147,0.043013131631938865,0.04305888338468626,0.04310463513743365,0.04315038689018105,0.04319613864292844,0.04324189039567583,0.043287642148423226,0.04333339390117062,0.04337914565391801,0.04342489740666541,0.0434706491594128,0.04351640091216019,0.04356215266490759,0.04360790441765498,0.04365365617040237,0.04369940792314976,0.043745159675897156,0.04379091142864455,0.04383666318139195,0.043882414934139344,0.04392816668688673,0.04397391843963413,0.044019670192381524,0.04406542194512891,0.0441111736978763,0.044156925450623705,0.044202677203371094,0.04424842895611848,0.044294180708865885,0.044339932461613274,0.04438568421436066,0.04443143596710806,0.044477187719855454,0.04452293947260285,0.044568691225350246,0.044614442978097635,0.04466019473084503,0.044705946483592426,0.044751698236339815,0.044797449989087204,0.0448432017418346,0.044888953494581996,0.044934705247329385,0.04498045700007678,0.045026208752824176,0.045071960505571565,0.04511771225831896,0.04516346401106636,0.045209215763813745,0.045254967516561134,0.04530071926930854,0.045346471022055926,0.04539222277480332,0.04543797452755072,0.045483726280298106,0.0455294780330455,0.0455752297857929,0.04562098153854029,0.04566673329128768,0.04571248504403508,0.04575823679678247,0.04580398854952986,0.04584974030227726,0.04589549205502465,0.045941243807772036,0.04598699556051943,0.04603274731326683,0.046078499066014224,0.04612425081876162,0.04617000257150901,0.046215754324256404,0.0462615060770038,0.04630725782975119,0.04635300958249858,0.046398761335245974,0.04644451308799337,0.04649026484074076,0.046536016593488154,0.04658176834623555,0.04662752009898294,0.046673271851730334,0.04671902360447773,0.04676477535722512,0.04681052710997252,0.04685627886271991,0.0469020306154673,0.0469477823682147,0.04699353412096209,0.04703928587370948,0.047085037626456876,0.04713078937920427,0.04717654113195166,0.047222292884699056,0.04726804463744645,0.04731379639019384,0.04735954814294124,0.04740529989568863,0.04745105164843602],"type":"scatter"},{"customdata":[[[0.9997759731343422],[0.00022402686565786706],[0.1333]]],"hovertemplate":"efficient high mean portfolio<br>asset 1: %{customdata[0]:.1%}<br>asset 2: %{customdata[1]:.1%}<br>Sharpe ratio (relative to borrowing rate): %{customdata[2]:.4f}<br><extra></extra>","marker":{"color":"blue","size":10},"mode":"markers","name":"efficient high mean portfolio","x":[0.1499660041276049],"y":[0.05999439932835855],"type":"scatter"},{"hovertemplate":"wealth in efficient high mean = %{text:.0f}%<br>Sharpe ratio (relative to borrowing rate): 0.1333<extra></extra>","line":{"color":"blue"},"mode":"lines","name":"CAL: efficient high mean","text":[100.0,100.25,100.49999999999999,100.75,101.0,101.25,101.49999999999999,101.75,102.0,102.25,102.49999999999999,102.75000000000001,103.0,103.25,103.49999999999999,103.75000000000001,104.0,104.25,104.5,104.75000000000001,105.0,105.25,105.5,105.75000000000001,106.0,106.25,106.5,106.74999999999999,107.0,107.25,107.5,107.74999999999999,108.0,108.25,108.5,108.74999999999999,109.00000000000001,109.25,109.5,109.74999999999999,110.00000000000001,110.25,110.5,110.75,111.00000000000001,111.25,111.5,111.75,112.00000000000001,112.25,112.5,112.75,112.99999999999999,113.25,113.5,113.75,114.00000000000001,114.25,114.5,114.75,114.99999999999999,115.25000000000001,115.5,115.75,115.99999999999999,116.25000000000001,116.5,116.75,117.0,117.25000000000001,117.5,117.75,118.0,118.25000000000001,118.5,118.75,119.0,119.24999999999999,119.5,119.75,120.0,120.25000000000001,120.5,120.75,121.0,121.24999999999999,121.50000000000001,121.75,122.0,122.24999999999999,122.50000000000001,122.75,123.0,123.25,123.50000000000001,123.75,124.0,124.25,124.50000000000001,124.75,125.0,125.25,125.49999999999999,125.75,126.0,126.25,126.50000000000001,126.75,127.0,127.25,127.49999999999999,127.75000000000001,128.0,128.25,128.5,128.75,129.0,129.25,129.5,129.75,130.0,130.25,130.5,130.75,131.0,131.25,131.5,131.75,132.0,132.25,132.5,132.75,133.0,133.25,133.5,133.75,134.0,134.25,134.5,134.75,135.0,135.25,135.5,135.75,136.0,136.25,136.5,136.75,137.0,137.25,137.5,137.75,138.0,138.25,138.5,138.75,139.0,139.25,139.5,139.75,140.0,140.25,140.5,140.75,141.0,141.25,141.5,141.75,142.0,142.25,142.5,142.75,143.0,143.25,143.5,143.75,144.0,144.25,144.5,144.75,145.0,145.25,145.5,145.75,146.0,146.25,146.5,146.75,147.0,147.25,147.5,147.75,148.0,148.25,148.5,148.75,149.0,149.25,149.5,149.75,150.0],"x":[0.1499660041276049,0.1503409191379239,0.1507158341482429,0.15109074915856197,0.15146566416888096,0.15184057917919996,0.15221549418951896,0.15259040919983802,0.15296532421015702,0.15334023922047602,0.15371515423079501,0.15409006924111407,0.15446498425143307,0.15483989926175207,0.15521481427207107,0.15558972928239012,0.15596464429270912,0.15633955930302812,0.15671447431334712,0.15708938932366617,0.15746430433398517,0.15783921934430417,0.15821413435462317,0.15858904936494223,0.15896396437526122,0.15933887938558022,0.15971379439589922,0.16008870940621822,0.16046362441653728,0.16083853942685628,0.16121345443717527,0.16158836944749427,0.16196328445781333,0.16233819946813233,0.16271311447845133,0.16308802948877033,0.16346294449908938,0.16383785950940838,0.16421277451972738,0.16458768953004638,0.1649626045403654,0.16533751955068443,0.16571243456100343,0.16608734957132243,0.16646226458164146,0.16683717959196048,0.16721209460227948,0.16758700961259848,0.1679619246229175,0.16833683963323653,0.16871175464355553,0.16908666965387453,0.16946158466419353,0.1698364996745126,0.17021141468483159,0.17058632969515058,0.1709612447054696,0.1713361597157886,0.17171107472610764,0.17208598973642664,0.17246090474674564,0.17283581975706466,0.1732107347673837,0.1735856497777027,0.1739605647880217,0.17433547979834071,0.17471039480865974,0.17508530981897874,0.17546022482929774,0.17583513983961677,0.17621005484993577,0.1765849698602548,0.1769598848705738,0.17733479988089282,0.17770971489121182,0.17808462990153084,0.17845954491184984,0.17883445992216884,0.17920937493248787,0.1795842899428069,0.1799592049531259,0.18033411996344492,0.18070903497376392,0.18108394998408295,0.18145886499440195,0.18183378000472095,0.18220869501503997,0.18258361002535897,0.182958525035678,0.183333440045997,0.18370835505631603,0.18408327006663502,0.18445818507695405,0.18483310008727305,0.18520801509759208,0.18558293010791108,0.1859578451182301,0.1863327601285491,0.18670767513886813,0.18708259014918713,0.18745750515950615,0.18783242016982515,0.18820733518014415,0.18858225019046318,0.18895716520078218,0.1893320802111012,0.18970699522142023,0.19008191023173923,0.19045682524205823,0.19083174025237726,0.19120665526269626,0.19158157027301528,0.19195648528333428,0.1923314002936533,0.19270631530397234,0.19308123031429134,0.19345614532461033,0.19383106033492933,0.19420597534524836,0.19458089035556736,0.1949558053658864,0.19533072037620539,0.1957056353865244,0.19608055039684344,0.19645546540716244,0.19683038041748144,0.19720529542780046,0.19758021043811946,0.1979551254484385,0.1983300404587575,0.19870495546907652,0.19907987047939554,0.19945478548971454,0.19982970050003354,0.20020461551035254,0.20057953052067157,0.2009544455309906,0.2013293605413096,0.2017042755516286,0.20207919056194765,0.20245410557226665,0.20282902058258565,0.20320393559290464,0.20357885060322367,0.20395376561354267,0.2043286806238617,0.2047035956341807,0.2050785106444997,0.20545342565481875,0.20582834066513775,0.20620325567545675,0.20657817068577575,0.20695308569609477,0.2073280007064138,0.2077029157167328,0.2080778307270518,0.20845274573737085,0.20882766074768985,0.20920257575800885,0.20957749076832785,0.20995240577864688,0.2103273207889659,0.2107022357992849,0.2110771508096039,0.21145206581992296,0.21182698083024196,0.21220189584056096,0.21257681085087995,0.21295172586119895,0.21332664087151798,0.213701555881837,0.214076470892156,0.214451385902475,0.21482630091279406,0.21520121592311306,0.21557613093343206,0.21595104594375106,0.21632596095407006,0.2167008759643891,0.2170757909747081,0.2174507059850271,0.21782562099534616,0.21820053600566516,0.21857545101598416,0.21895036602630316,0.21932528103662216,0.21970019604694122,0.22007511105726021,0.2204500260675792,0.22082494107789827,0.22119985608821727,0.22157477109853627,0.22194968610885527,0.22232460111917426,0.22269951612949326,0.22307443113981232,0.22344934615013132,0.22382426116045032,0.22419917617076937,0.22457409118108837,0.22494900619140737],"y":[0.05999439932835855,0.060044385326679446,0.06009437132500034,0.06014435732332124,0.06019434332164214,0.060244329319963034,0.06029431531828393,0.06034430131660483,0.06039428731492572,0.060444273313246616,0.060494259311567516,0.06054424530988842,0.06059423130820931,0.060644217306530204,0.060694203304851105,0.060744189303172,0.06079417530149289,0.06084416129981379,0.060894147298134686,0.06094413329645559,0.06099411929477648,0.06104410529309738,0.06109409129141827,0.06114407728973917,0.06119406328806007,0.06124404928638096,0.061294035284701856,0.06134402128302276,0.06139400728134366,0.061443993279664544,0.061493979277985444,0.06154396527630634,0.06159395127462724,0.06164393727294813,0.06169392327126903,0.06174390926958992,0.06179389526791082,0.06184388126623172,0.061893867264552614,0.06194385326287351,0.06199383926119441,0.06204382525951531,0.062093811257836196,0.062143797256157096,0.062193783254478,0.06224376925279889,0.062293755251119784,0.062343741249440685,0.062393727247761585,0.06244371324608247,0.06249369924440337,0.06254368524272427,0.06259367124104516,0.06264365723936606,0.06269364323768696,0.06274362923600785,0.06279361523432875,0.06284360123264965,0.06289358723097055,0.06294357322929144,0.06299355922761234,0.06304354522593324,0.06309353122425412,0.06314351722257502,0.06319350322089592,0.06324348921921683,0.06329347521753771,0.06334346121585861,0.0633934472141795,0.0634434332125004,0.0634934192108213,0.0635434052091422,0.06359339120746309,0.06364337720578399,0.06369336320410489,0.06374334920242578,0.06379333520074668,0.06384332119906758,0.06389330719738848,0.06394329319570936,0.06399327919403026,0.06404326519235116,0.06409325119067205,0.06414323718899295,0.06419322318731385,0.06424320918563474,0.06429319518395564,0.06434318118227654,0.06439316718059743,0.06444315317891833,0.06449313917723923,0.06454312517556013,0.06459311117388102,0.06464309717220192,0.06469308317052282,0.0647430691688437,0.0647930551671646,0.0648430411654855,0.0648930271638064,0.06494301316212729,0.06499299916044819,0.06504298515876908,0.06509297115708998,0.06514295715541088,0.06519294315373178,0.06524292915205267,0.06529291515037357,0.06534290114869447,0.06539288714701535,0.06544287314533626,0.06549285914365716,0.06554284514197806,0.06559283114029894,0.06564281713861984,0.06569280313694074,0.06574278913526163,0.06579277513358253,0.06584276113190343,0.06589274713022432,0.06594273312854522,0.06599271912686612,0.066042705125187,0.06609269112350791,0.06614267712182881,0.06619266312014971,0.0662426491184706,0.0662926351167915,0.06634262111511238,0.06639260711343328,0.06644259311175418,0.06649257911007508,0.06654256510839598,0.06659255110671687,0.06664253710503777,0.06669252310335866,0.06674250910167956,0.06679249510000046,0.06684248109832136,0.06689246709664226,0.06694245309496315,0.06699243909328405,0.06704242509160493,0.06709241108992584,0.06714239708824674,0.06719238308656764,0.06724236908488854,0.06729235508320942,0.06734234108153032,0.06739232707985121,0.06744231307817211,0.06749229907649301,0.06754228507481391,0.0675922710731348,0.0676422570714557,0.06769224306977659,0.06774222906809749,0.06779221506641839,0.06784220106473929,0.06789218706306019,0.06794217306138108,0.06799215905970198,0.06804214505802286,0.06809213105634376,0.06814211705466466,0.06819210305298556,0.06824208905130646,0.06829207504962735,0.06834206104794825,0.06839204704626914,0.06844203304459004,0.06849201904291094,0.06854200504123184,0.06859199103955273,0.06864197703787363,0.06869196303619453,0.06874194903451541,0.06879193503283632,0.06884192103115722,0.06889190702947812,0.068941893027799,0.0689918790261199,0.0690418650244408,0.06909185102276169,0.06914183702108259,0.06919182301940349,0.06924180901772438,0.06929179501604528,0.06934178101436618,0.06939176701268707,0.06944175301100797,0.06949173900932887,0.06954172500764977,0.06959171100597066,0.06964169700429156,0.06969168300261244,0.06974166900093334,0.06979165499925424,0.06984164099757514,0.06989162699589604,0.06994161299421693,0.06999159899253783],"type":"scatter"},{"hovertemplate":"wealth in efficient high mean = %{text:.0f}%<br>Sharpe ratio (relative to borrowing rate): 0.1333<extra></extra>","line":{"color":"blue","dash":"dot"},"mode":"lines","name":"CAL: efficient high mean (unlevered)","text":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0,40.5,41.0,41.5,42.0,42.5,43.0,43.5,44.0,44.5,45.0,45.5,46.0,46.5,47.0,47.5,48.0,48.5,49.0,49.5,50.0,50.5,51.0,51.5,52.0,52.5,53.0,53.5,54.0,54.50000000000001,55.00000000000001,55.50000000000001,56.00000000000001,56.50000000000001,57.00000000000001,57.50000000000001,57.99999999999999,58.5,59.0,59.5,60.0,60.5,61.0,61.5,62.0,62.5,63.0,63.5,64.0,64.5,65.0,65.5,66.0,66.5,67.0,67.5,68.0,68.5,69.0,69.5,70.0,70.5,71.0,71.5,72.0,72.5,73.0,73.5,74.0,74.5,75.0,75.5,76.0,76.5,77.0,77.5,78.0,78.5,79.0,79.5,80.0,80.5,81.0,81.5,82.0,82.5,83.0,83.5,84.0,84.5,85.0,85.5,86.0,86.5,87.0,87.5,88.0,88.5,89.0,89.5,90.0,90.5,91.0,91.5,92.0,92.5,93.0,93.5,94.0,94.5,95.0,95.5,96.0,96.5,97.0,97.5,98.0,98.5,99.0,99.5,100.0],"x":[0.0,0.0007498300206380245,0.001499660041276049,0.0022494900619140735,0.002999320082552098,0.003749150103190123,0.004498980123828147,0.005248810144466172,0.005998640165104196,0.0067484701857422206,0.007498300206380246,0.00824813022701827,0.008997960247656294,0.00974779026829432,0.010497620288932344,0.011247450309570368,0.011997280330208393,0.012747110350846419,0.013496940371484441,0.014246770392122467,0.014996600412760491,0.015746430433398514,0.01649626045403654,0.017246090474674566,0.017995920495312588,0.018745750515950614,0.01949558053658864,0.020245410557226666,0.02099524057786469,0.02174507059850271,0.022494900619140737,0.023244730639778763,0.023994560660416785,0.02474439068105481,0.025494220701692837,0.026244050722330863,0.026993880742968882,0.027743710763606908,0.028493540784244934,0.02924337080488296,0.029993200825520983,0.03074303084615901,0.03149286086679703,0.03224269088743505,0.03299252090807308,0.033742350928711105,0.03449218094934913,0.03524201096998716,0.035991840990625176,0.0367416710112632,0.03749150103190123,0.038241331052539254,0.03899116107317728,0.039740991093815306,0.04049082111445333,0.04124065113509135,0.04199048115572938,0.0427403111763674,0.04349014119700542,0.04423997121764345,0.044989801238281474,0.0457396312589195,0.046489461279557526,0.047239291300195545,0.04798912132083357,0.0487389513414716,0.04948878136210962,0.05023861138274765,0.050988441403385674,0.0517382714240237,0.052488101444661726,0.05323793146529974,0.053987761485937764,0.05473759150657579,0.055487421527213816,0.05623725154785184,0.05698708156848987,0.057736911589127894,0.05848674160976592,0.059236571630403946,0.059986401651041965,0.06073623167167999,0.06148606169231802,0.06223589171295604,0.06298572173359406,0.06373555175423208,0.0644853817748701,0.06523521179550813,0.06598504181614616,0.06673487183678418,0.06748470185742221,0.06823453187806024,0.06898436189869826,0.06973419191933629,0.07048402193997431,0.07123385196061234,0.07198368198125035,0.07273351200188838,0.0734833420225264,0.07423317204316443,0.07498300206380246,0.07573283208444048,0.07648266210507851,0.07723249212571653,0.07798232214635456,0.07873215216699259,0.07948198218763061,0.08023181220826864,0.08098164222890666,0.08173147224954469,0.0824813022701827,0.08323113229082073,0.08398096231145875,0.08473079233209678,0.0854806223527348,0.08623045237337283,0.08698028239401084,0.08773011241464887,0.0884799424352869,0.08922977245592492,0.08997960247656295,0.09072943249720097,0.091479262517839,0.09222909253847703,0.09297892255911505,0.09372875257975308,0.09447858260039109,0.09522841262102912,0.09597824264166714,0.09672807266230517,0.0974779026829432,0.09822773270358122,0.09897756272421925,0.09972739274485727,0.1004772227654953,0.10122705278613332,0.10197688280677135,0.10272671282740937,0.1034765428480474,0.10422637286868543,0.10497620288932345,0.10572603290996145,0.10647586293059948,0.1072256929512375,0.10797552297187553,0.10872535299251355,0.10947518301315158,0.1102250130337896,0.11097484305442763,0.11172467307506566,0.11247450309570368,0.11322433311634171,0.11397416313697974,0.11472399315761776,0.11547382317825579,0.11622365319889381,0.11697348321953184,0.11772331324016987,0.11847314326080789,0.11922297328144592,0.11997280330208393,0.12072263332272196,0.12147246334335998,0.12222229336399801,0.12297212338463603,0.12372195340527406,0.12447178342591209,0.12522161344655008,0.1259714434671881,0.12672127348782614,0.12747110350846416,0.1282209335291022,0.1289707635497402,0.12972059357037824,0.13047042359101627,0.1312202536116543,0.13197008363229232,0.13271991365293034,0.13346974367356837,0.1342195736942064,0.13496940371484442,0.13571923373548245,0.13646906375612047,0.1372188937767585,0.13796872379739653,0.13871855381803455,0.13946838383867258,0.1402182138593106,0.14096804387994863,0.14171787390058666,0.14246770392122468,0.1432175339418627,0.1439673639625007,0.14471719398313873,0.14546702400377676,0.14621685402441478,0.1469666840450528,0.14771651406569083,0.14846634408632886,0.1492161741069669,0.1499660041276049],"y":[0.04,0.040099971996641795,0.04019994399328359,0.040299915989925376,0.04039988798656717,0.040499859983208965,0.04059983197985076,0.04069980397649255,0.04079977597313434,0.040899747969776135,0.04099971996641793,0.04109969196305972,0.04119966395970152,0.041299635956343304,0.0413996079529851,0.04149957994962689,0.04159955194626869,0.04169952394291048,0.04179949593955227,0.04189946793619406,0.04199943993283586,0.04209941192947765,0.04219938392611944,0.04229935592276123,0.042399327919403026,0.04249929991604482,0.042599271912686615,0.0426992439093284,0.042799215905970196,0.04289918790261199,0.042999159899253785,0.04309913189589558,0.043199103892537366,0.04329907588917916,0.043399047885820954,0.04349901988246275,0.04359899187910454,0.04369896387574633,0.043798935872388124,0.04389890786902992,0.04399887986567171,0.04409885186231351,0.044198823858955294,0.04429879585559709,0.04439876785223888,0.044498739848880677,0.04459871184552247,0.04469868384216426,0.04479865583880605,0.044898627835447846,0.04499859983208964,0.045098571828731435,0.04519854382537322,0.045298515822015016,0.04539848781865681,0.045498459815298604,0.0455984318119404,0.045698403808582186,0.04579837580522398,0.045898347801865774,0.04599831979850757,0.04609829179514936,0.04619826379179115,0.046298235788432944,0.04639820778507474,0.04649817978171653,0.04659815177835833,0.046698123775000114,0.04679809577164191,0.0468980677682837,0.046998039764925496,0.047098011761567284,0.04719798375820908,0.04729795575485087,0.047397927751492666,0.04749789974813446,0.04759787174477625,0.04769784374141804,0.047797815738059836,0.04789778773470163,0.047997759731343424,0.04809773172798522,0.048197703724627006,0.0482976757212688,0.048397647717910594,0.04849761971455238,0.048597591711194175,0.04869756370783597,0.048797535704477764,0.04889750770111956,0.048997479697761345,0.049097451694403146,0.049197423691044934,0.04929739568768673,0.04939736768432852,0.04949733968097031,0.0495973116776121,0.0496972836742539,0.04979725567089569,0.049897227667537486,0.04999719966417927,0.05009717166082107,0.05019714365746286,0.050297115654104656,0.05039708765074645,0.05049705964738824,0.05059703164403003,0.050697003640671826,0.05079697563731362,0.050896947633955414,0.0509969196305972,0.051096891627239,0.05119686362388079,0.051296835620522584,0.05139680761716438,0.051496779613806165,0.05159675161044796,0.05169672360708975,0.05179669560373155,0.05189666760037334,0.05199663959701513,0.05209661159365692,0.05219658359029872,0.05229655558694051,0.052396527583582306,0.05249649958022409,0.05259647157686589,0.05269644357350768,0.052796415570149476,0.05289638756679127,0.05299635956343306,0.05309633156007485,0.053196303556716645,0.05329627555335844,0.053396247550000234,0.05349621954664202,0.053596191543283815,0.05369616353992561,0.053796135536567403,0.0538961075332092,0.053996079529850985,0.05409605152649278,0.05419602352313457,0.05429599551977636,0.05439596751641816,0.05449593951305995,0.05459591150970174,0.05469588350634354,0.05479585550298533,0.054895827499627126,0.05499579949626891,0.05509577149291071,0.0551957434895525,0.055295715486194295,0.05539568748283609,0.05549565947947788,0.05559563147611967,0.055695603472761465,0.05579557546940325,0.055895547466045054,0.05599551946268684,0.056095491459328635,0.05619546345597043,0.05629543545261222,0.05639540744925402,0.056495379445895805,0.0565953514425376,0.05669532343917939,0.05679529543582118,0.05689526743246298,0.05699523942910477,0.05709521142574656,0.05719518342238836,0.057295155419030144,0.057395127415671945,0.05749509941231373,0.05759507140895553,0.05769504340559732,0.05779501540223911,0.05789498739888091,0.0579949593955227,0.05809493139216449,0.058194903388806285,0.05829487538544807,0.05839484738208987,0.05849481937873166,0.058594791375373455,0.05869476337201525,0.058794735368657036,0.05889470736529884,0.058994679361940625,0.05909465135858242,0.05919462335522421,0.059294595351866,0.059394567348507794,0.05949453934514959,0.05959451134179138,0.05969448333843318,0.059794455335074964,0.05989442733171676,0.05999439932835855],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"range":[0,0.1875],"tickformat":".0%"},"yaxis":{"title":{"text":"Expected Return"},"range":[0,0.06899999999999999],"tickformat":".0%"},"legend":{"yanchor":"top","y":0.65,"xanchor":"left","x":0.535}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f3fdbdf6-757e-4ed8-88b8-6596506d5e08');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.8: Portfolios of two risky assets and risk-free saving and borrowing</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-preferences" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="sec-preferences"><span class="header-section-number">2.4</span> Preferences and Optimal Portfolios</h2>
<p>In order to make statements about “optimal” portfolios, we need to describe the preferences of investors in some way. A standard way to do so is to use mean-variance utility. Simply put, we will assume that investors like higher expected returns and dislike portfolios with riskier returns. The amount of extra expected return needed for an investor to take on additional risk is governed by the investor’s risk aversion, which we will denote by <span class="math inline">\(A\)</span>.</p>
<p>Mathematically, mean-variance utility for a given portfolio return <span class="math inline">\(r_p\)</span> is:</p>
<p><span class="math display">\[ U(r_p)=E[r_p] - 0.5\cdot A \cdot \text{var}[r_p]\,.\]</span></p>
<p>The utility of a risky investment is its expected return minus a penalty for variance. More risk averse investors have higher values for <span class="math inline">\(A\)</span>, meaning that they put greater penalties on variance. <a href="#fig-indifference0">Figure&nbsp;<span>2.9</span></a> shows indifference curves for three different levels of risk aversion, but the same level of utility. When risk aversion is higher, a higher expected return is required to reach the utility for a given level of risk, and the extra expected return increases when risk increases.</p>
<div class="cell" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>raver1 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>raver2 <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>raver3 <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>u1 <span class="op">=</span> <span class="fl">0.10</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>u2 <span class="op">=</span> <span class="fl">0.10</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>u3 <span class="op">=</span> <span class="fl">0.10</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>string1<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver1)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>string2<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver2)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>string3<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver3)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate data</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>sd <span class="op">=</span> np.arange(<span class="dv">0</span>,<span class="fl">0.405</span>,<span class="fl">0.005</span>)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>U1 <span class="op">=</span> u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver1<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>U2 <span class="op">=</span> u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver2<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>U3 <span class="op">=</span> u3 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver3<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">'Standard Deviation'</span>: sd, string1: U1, string2: U2,string3: U3})</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df<span class="op">*</span><span class="dv">100</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot data</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df,x<span class="op">=</span><span class="st">'Standard Deviation'</span>, y<span class="op">=</span>[string1, string2, string3])</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>fig.update_layout(title<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>                   xaxis_title<span class="op">=</span><span class="st">'Standard Deviation'</span>,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>                   yaxis_title<span class="op">=</span><span class="st">'Expected Return'</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    legend_title_text<span class="op">=</span><span class="st">''</span>,)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0f"</span>, ticksuffix<span class="op">=</span><span class="st">"%"</span>)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0f"</span>, ticksuffix<span class="op">=</span><span class="st">"%"</span>)</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-indifference0" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="86a48a66-bee7-4192-a608-b68b3c92427c" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("86a48a66-bee7-4192-a608-b68b3c92427c")) {                    Plotly.newPlot(                        "86a48a66-bee7-4192-a608-b68b3c92427c",                        [{"hovertemplate":"variable=Risk Aversion=2<br>Standard Deviation=%{x}<br>value=%{y}<extra></extra>","legendgroup":"Risk Aversion=2","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"Risk Aversion=2","orientation":"v","showlegend":true,"x":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0],"xaxis":"x","y":[10.0,10.0025,10.010000000000002,10.0225,10.040000000000001,10.0625,10.09,10.1225,10.16,10.2025,10.25,10.3025,10.360000000000001,10.422500000000001,10.49,10.562500000000002,10.64,10.7225,10.81,10.902500000000002,11.000000000000002,11.1025,11.21,11.3225,11.44,11.5625,11.690000000000001,11.822500000000002,11.96,12.102500000000001,12.25,12.402500000000002,12.560000000000002,12.7225,12.89,13.062500000000002,13.240000000000002,13.422500000000001,13.61,13.8025,14.000000000000002,14.2025,14.41,14.622499999999999,14.84,15.0625,15.290000000000001,15.5225,15.760000000000002,16.0025,16.25,16.5025,16.76,17.0225,17.29,17.562500000000004,17.84,18.122500000000002,18.41,18.7025,19.0,19.302500000000002,19.61,19.922500000000003,20.240000000000002,20.5625,20.890000000000004,21.222500000000004,21.560000000000002,21.902500000000003,22.250000000000004,22.6025,22.96,23.322499999999998,23.69,24.0625,24.44,24.8225,25.21,25.602500000000006,26.0],"yaxis":"y","type":"scatter"},{"hovertemplate":"variable=Risk Aversion=5<br>Standard Deviation=%{x}<br>value=%{y}<extra></extra>","legendgroup":"Risk Aversion=5","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"Risk Aversion=5","orientation":"v","showlegend":true,"x":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0],"xaxis":"x","y":[10.0,10.00625,10.025,10.05625,10.100000000000001,10.15625,10.225000000000001,10.30625,10.4,10.50625,10.625000000000002,10.756250000000001,10.9,11.05625,11.225,11.406250000000002,11.600000000000001,11.806250000000002,12.025,12.25625,12.5,12.75625,13.025,13.30625,13.600000000000001,13.90625,14.225000000000001,14.55625,14.900000000000002,15.25625,15.625,16.00625,16.400000000000002,16.80625,17.225,17.65625,18.099999999999998,18.556250000000002,19.025,19.50625,20.0,20.506250000000005,21.025,21.55625,22.1,22.656250000000004,23.225,23.806250000000002,24.4,25.006249999999998,25.624999999999996,26.25625,26.900000000000002,27.556250000000006,28.225,28.90625,29.600000000000005,30.306250000000002,31.025000000000002,31.756249999999998,32.49999999999999,33.25625,34.025000000000006,34.806250000000006,35.6,36.40625000000001,37.22500000000001,38.056250000000006,38.9,39.75625,40.625000000000014,41.50625,42.39999999999999,43.30624999999999,44.225,45.15625,46.099999999999994,47.05625,48.025000000000006,49.00625000000001,50.000000000000014],"yaxis":"y","type":"scatter"},{"hovertemplate":"variable=Risk Aversion=10<br>Standard Deviation=%{x}<br>value=%{y}<extra></extra>","legendgroup":"Risk Aversion=10","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"Risk Aversion=10","orientation":"v","showlegend":true,"x":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0],"xaxis":"x","y":[10.0,10.012500000000001,10.05,10.1125,10.200000000000001,10.3125,10.450000000000001,10.6125,10.8,11.0125,11.25,11.512500000000001,11.8,12.1125,12.450000000000001,12.812499999999998,13.200000000000001,13.612499999999999,14.05,14.512500000000001,15.000000000000002,15.512500000000001,16.05,16.6125,17.2,17.8125,18.45,19.1125,19.8,20.5125,21.25,22.012500000000003,22.8,23.612500000000004,24.450000000000003,25.312500000000004,26.200000000000003,27.1125,28.049999999999997,29.012500000000003,30.000000000000004,31.012500000000003,32.05,33.1125,34.199999999999996,35.3125,36.45,37.612500000000004,38.800000000000004,40.012499999999996,41.25,42.512499999999996,43.800000000000004,45.1125,46.45,47.8125,49.20000000000001,50.612500000000004,52.05,53.512499999999996,54.99999999999999,56.512499999999996,58.050000000000004,59.612500000000004,61.199999999999996,62.81250000000001,64.45,66.11250000000001,67.80000000000001,69.51250000000002,71.25000000000001,73.0125,74.79999999999998,76.61249999999998,78.45,80.3125,82.19999999999999,84.1125,86.05000000000001,88.01250000000002,90.00000000000001],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Standard Deviation"},"tickformat":".0f","ticksuffix":"%"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Expected Return"},"tickformat":".0f","ticksuffix":"%"},"legend":{"title":{"text":""},"tracegroupgap":0,"yanchor":"top","y":0.99,"xanchor":"left","x":0.01},"margin":{"t":60},"title":{"text":""}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('86a48a66-bee7-4192-a608-b68b3c92427c');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.9: Indifference curves with different levels of risk aversion</figcaption><p></p>
</figure>
</div>
</div>
<p>Investors are indifferent between portfolios that generate the same utility. <a href="#fig-indifference1">Figure&nbsp;<span>2.10</span></a> shows three different levels of utility, holding risk aversion fixed. A utility of, for example, 10% means that the investor would be indifferent between the risky investment and a risk-free investment with a return of 10%. That is, any portfolio located on the green <strong>indifference curve</strong> in <a href="#fig-indifference1">Figure&nbsp;<span>2.10</span></a> provides the same level of utility to this investor. Higher utility is achieved with either a higher expected return or lower risk or both.</p>
<div class="cell" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># import plotly.io as pio</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># pio.renderers.default='notebook'</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>raver <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>u1 <span class="op">=</span> <span class="fl">0.05</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>u2 <span class="op">=</span> <span class="fl">0.075</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>u3 <span class="op">=</span> <span class="fl">0.10</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>string1<span class="op">=</span><span class="st">'Utility='</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(u1<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>))<span class="op">+</span><span class="st">'%'</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>string2<span class="op">=</span><span class="st">'Utility='</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(u2<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>))<span class="op">+</span><span class="st">'%'</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>string3<span class="op">=</span><span class="st">'Utility='</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(u3<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>))<span class="op">+</span><span class="st">'%'</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate data</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>sd <span class="op">=</span> np.arange(<span class="dv">0</span>,<span class="fl">0.405</span>,<span class="fl">0.005</span>)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>U1 <span class="op">=</span> u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>U2 <span class="op">=</span> u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>U3 <span class="op">=</span> u3 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>{<span class="st">'Standard Deviation'</span>: sd, string1: U1, string2: U2,string3: U3})</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df<span class="op">*</span><span class="dv">100</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot data</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df,x<span class="op">=</span><span class="st">'Standard Deviation'</span>, y<span class="op">=</span>[string1, string2, string3])</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>fig.update_layout(title<span class="op">=</span><span class="st">''</span>,</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>                   xaxis_title<span class="op">=</span><span class="st">'Standard Deviation'</span>,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>                   yaxis_title<span class="op">=</span><span class="st">'Expected Return'</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    legend_title_text<span class="op">=</span><span class="st">''</span>,)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0f"</span>, ticksuffix<span class="op">=</span><span class="st">"%"</span>)</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0f"</span>, ticksuffix<span class="op">=</span><span class="st">"%"</span>)</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-indifference1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="cea31ae5-5288-465d-a109-5538a68e00bc" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("cea31ae5-5288-465d-a109-5538a68e00bc")) {                    Plotly.newPlot(                        "cea31ae5-5288-465d-a109-5538a68e00bc",                        [{"hovertemplate":"variable=Utility=5.0%<br>Standard Deviation=%{x}<br>value=%{y}<extra></extra>","legendgroup":"Utility=5.0%","line":{"color":"#636efa","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"Utility=5.0%","orientation":"v","showlegend":true,"x":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0],"xaxis":"x","y":[5.0,5.0125,5.050000000000001,5.112500000000001,5.2,5.312500000000001,5.45,5.6125,5.800000000000001,6.0125,6.25,6.5125,6.800000000000001,7.112500000000001,7.450000000000001,7.8125,8.200000000000001,8.6125,9.049999999999999,9.5125,10.0,10.5125,11.05,11.6125,12.2,12.812499999999998,13.450000000000001,14.1125,14.800000000000002,15.512500000000001,16.249999999999996,17.012500000000003,17.8,18.612500000000004,19.45,20.312500000000007,21.199999999999996,22.1125,23.049999999999997,24.012500000000003,25.000000000000007,26.012500000000006,27.049999999999997,28.112499999999997,29.2,30.312500000000004,31.45,32.612500000000004,33.8,35.012499999999996,36.25,37.512499999999996,38.800000000000004,40.112500000000004,41.45,42.8125,44.2,45.612500000000004,47.05,48.512499999999996,49.99999999999999,51.5125,53.05000000000001,54.61250000000001,56.2,57.812500000000014,59.45000000000002,61.11250000000001,62.80000000000001,64.51250000000002,66.25000000000001,68.0125,69.8,71.61249999999998,73.45,75.3125,77.2,79.11250000000001,81.05000000000001,83.01250000000002,85.00000000000001],"yaxis":"y","type":"scatter"},{"hovertemplate":"variable=Utility=7.5%<br>Standard Deviation=%{x}<br>value=%{y}<extra></extra>","legendgroup":"Utility=7.5%","line":{"color":"#EF553B","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"Utility=7.5%","orientation":"v","showlegend":true,"x":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0],"xaxis":"x","y":[7.5,7.512499999999999,7.55,7.6125,7.7,7.8125,7.95,8.1125,8.299999999999999,8.5125,8.75,9.0125,9.3,9.6125,9.950000000000001,10.3125,10.7,11.1125,11.549999999999999,12.0125,12.5,13.0125,13.55,14.1125,14.7,15.312500000000002,15.950000000000001,16.6125,17.3,18.0125,18.75,19.5125,20.3,21.1125,21.950000000000003,22.812500000000004,23.7,24.612499999999997,25.55,26.5125,27.500000000000004,28.512500000000003,29.549999999999997,30.612499999999997,31.7,32.81250000000001,33.95,35.112500000000004,36.3,37.512499999999996,38.75,40.0125,41.300000000000004,42.612500000000004,43.95,45.31250000000001,46.70000000000001,48.11250000000001,49.55,51.012499999999996,52.49999999999999,54.012499999999996,55.55,57.1125,58.699999999999996,60.3125,61.95,63.612500000000004,65.3,67.0125,68.75000000000001,70.5125,72.29999999999998,74.11249999999998,75.94999999999999,77.8125,79.69999999999999,81.6125,83.55,85.51250000000002,87.50000000000001],"yaxis":"y","type":"scatter"},{"hovertemplate":"variable=Utility=10.0%<br>Standard Deviation=%{x}<br>value=%{y}<extra></extra>","legendgroup":"Utility=10.0%","line":{"color":"#00cc96","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"Utility=10.0%","orientation":"v","showlegend":true,"x":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0],"xaxis":"x","y":[10.0,10.012500000000001,10.05,10.1125,10.200000000000001,10.3125,10.450000000000001,10.6125,10.8,11.0125,11.25,11.512500000000001,11.8,12.1125,12.450000000000001,12.812499999999998,13.200000000000001,13.612499999999999,14.05,14.512500000000001,15.000000000000002,15.512500000000001,16.05,16.6125,17.2,17.8125,18.45,19.1125,19.8,20.5125,21.25,22.012500000000003,22.8,23.612500000000004,24.450000000000003,25.312500000000004,26.200000000000003,27.1125,28.049999999999997,29.012500000000003,30.000000000000004,31.012500000000003,32.05,33.1125,34.199999999999996,35.3125,36.45,37.612500000000004,38.800000000000004,40.012499999999996,41.25,42.512499999999996,43.800000000000004,45.1125,46.45,47.8125,49.20000000000001,50.612500000000004,52.05,53.512499999999996,54.99999999999999,56.512499999999996,58.050000000000004,59.612500000000004,61.199999999999996,62.81250000000001,64.45,66.11250000000001,67.80000000000001,69.51250000000002,71.25000000000001,73.0125,74.79999999999998,76.61249999999998,78.45,80.3125,82.19999999999999,84.1125,86.05000000000001,88.01250000000002,90.00000000000001],"yaxis":"y","type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Standard Deviation"},"tickformat":".0f","ticksuffix":"%"},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Expected Return"},"tickformat":".0f","ticksuffix":"%"},"legend":{"title":{"text":""},"tracegroupgap":0,"yanchor":"top","y":0.99,"xanchor":"left","x":0.01},"margin":{"t":60},"title":{"text":""}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('cea31ae5-5288-465d-a109-5538a68e00bc');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.10: Indifference curves with same level of risk aversion</figcaption><p></p>
</figure>
</div>
</div>
<section id="a-single-risky-asset-cal" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="a-single-risky-asset-cal"><span class="header-section-number">2.4.1</span> A Single Risky Asset CAL</h3>
<p>The choice of where to locate along the CAL is the choice of how much to invest in a risky portfolio <span class="math inline">\(w_{\text{risky}}\)</span> (the other <span class="math inline">\(1-w_{\text{risky}}\)</span> being invested in a risk-free asset). A mean-variance investor chooses <span class="math inline">\(w_{\text{risky}}\)</span> to solve:</p>
<p><span id="eq-cal-optimization"><span class="math display">\[ \underset{w_{\text{risky}}}\max E[r_p] - 0.5\cdot A \cdot \text{var}[r_p]\,.  \tag{2.17}\]</span></span> with $r_p = w_{} r_{ + (1-w_{}) r_{ r_f} Plugging in the expected return (<a href="#eq-expret-rf-risky">Equation&nbsp;<span>2.15</span></a>) and standard deviation ( <a href="#eq-sd-rf-risky">Equation&nbsp;<span>2.14</span></a>) into <a href="#eq-cal-optimization">Equation&nbsp;<span>2.17</span></a> and considering the first-order condition with respect to <span class="math inline">\(w_{\text{risky}}\)</span> provides the optimal weight to invest in the risky asset: <!-- $$ w^*_{\text{risky}} = \frac{E[r_{\text{risky}}-r_f]}{A \cdot \text{var}_{\text{risky}}}\,.$$ {#eq-cal-opt-wgt} --> <!-- ```{tex} --> <span class="math display">\[\begin{equation}
w^*_{\text{risky}} = \begin{cases}
    \frac{E[r_{\text{risky}}-r_f^{\text{saving}}]}{A \cdot \text{var}_{\text{risky}}} &amp; \text{if } A &gt; \frac{E[r_{\text{risky}}-r_f^{\text{saving}}]}{\text{var}_{\text{risky}}} \\
    100\% &amp; \text{if } \frac{E[r_{\text{risky}}-r_f^{\text{borrow}}]}{ \text{var}_{\text{risky}}} \le A \le \frac{E[r_{\text{risky}}-r_f^{\text{saving}}]}{\text{var}_{\text{risky}}} \\
    \frac{E[r_{\text{risky}}-r_f^{\text{borrow}}]}{A \cdot \text{var}_{\text{risky}}} &amp; \text{if } A &lt; \frac{E[r_{\text{risky}}-r_f^{\text{borrow}}]}{ \text{var}_{\text{risky}}} \,. \\
\end{cases}
\end{equation}\]</span> <!-- ``` --></p>
<p>Thus, an investor’s location on the CAL depends on risk aversion. Investors with different risk aversion will choose different combinations of the risky asset and the risk-free asset. This is demonstrated in <a href="#fig-cal-preferences">Figure&nbsp;<span>2.11</span></a>.</p>
<div class="cell" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter values (in percent)</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>mn <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>sd <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">2</span>    <span class="co">#incremental borrowing rate</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>raver1 <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>raver2 <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> cal(mn, sd, s, b):</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">201</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(s <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> s) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> b <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> b)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> opt_utility(mn, sd, s, b, A):</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return/sd inputs must be in decimal</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    wgt <span class="op">=</span> (mn <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    expret<span class="op">=</span> wgt<span class="op">*</span>mn <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    sdret <span class="op">=</span> wgt<span class="op">*</span>sd </span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> wgt <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> (mn <span class="op">-</span> b) <span class="op">/</span> (A <span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> <span class="bu">max</span>(wgt,<span class="dv">1</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>        expret<span class="op">=</span> wgt<span class="op">*</span>mn <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>b </span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>        sdret <span class="op">=</span> wgt<span class="op">*</span>sd   </span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> expret <span class="op">-</span> <span class="fl">0.5</span><span class="op">*</span>A<span class="op">*</span>sdret<span class="op">**</span><span class="dv">2</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> u, wgt</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn, sd, s, extra, raver1, raver2):</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> s<span class="op">+</span>extra</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    s <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    b <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CAL Plot Info</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>    grid, mns, sds <span class="op">=</span> cal(mn, sd, s, b)</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in market = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>mns, mode<span class="op">=</span><span class="st">"lines"</span>, text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, hovertemplate<span class="op">=</span>string, name<span class="op">=</span><span class="st">'CAL'</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in market = 100%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    trace2 <span class="op">=</span> go.Scatter(</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[sd], y<span class="op">=</span>[mn], mode<span class="op">=</span><span class="st">"markers"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Market'</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"wealth in market = 0%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>    trace3 <span class="op">=</span> go.Scatter(</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[<span class="dv">0</span>], y<span class="op">=</span>[s], mode<span class="op">=</span><span class="st">"markers"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Risk-free (Saving)'</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"Borrowing rate&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>    trace4 <span class="op">=</span> go.Scatter(</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>[<span class="dv">0</span>], y<span class="op">=</span>[b], mode<span class="op">=</span><span class="st">"markers"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Risk-free (Borrowing)'</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>    )       </span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility plot info</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>    u1, wgt1 <span class="op">=</span> opt_utility(mn,sd,s,b, raver1)</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>    u2, wgt2 <span class="op">=</span> opt_utility(mn,sd,s,b, raver2)</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>    string1<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver1)</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>    string2<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver2)</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>    eret1 <span class="op">=</span> [u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver1<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds]</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>    eret2 <span class="op">=</span> [u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver2<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds] </span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df = pd.DataFrame(data={'Standard Deviation': sds, string1: U1, string2: U2})</span></span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt;utility obtained from &lt;br&gt;optimal wealth in market = "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(<span class="dv">100</span><span class="op">*</span>wgt1,<span class="dv">0</span>))<span class="op">+</span><span class="st">"%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>    trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret1, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string1</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt;utility obtained from &lt;br&gt;optimal wealth in market = "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(<span class="dv">100</span><span class="op">*</span>wgt2,<span class="dv">0</span>))<span class="op">+</span><span class="st">"%&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>    trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret2, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string2</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2)</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace3)</span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace4)</span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace5)</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace6)</span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span>    </span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a>figtbl(mn, sd, s, extra, raver1, raver2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-cal-preferences" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="e41800aa-6554-47c5-9d75-da25256b6129" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("e41800aa-6554-47c5-9d75-da25256b6129")) {                    Plotly.newPlot(                        "e41800aa-6554-47c5-9d75-da25256b6129",                        [{"hovertemplate":"wealth in market = %{text:.0f}%<extra></extra>","mode":"lines","name":"CAL","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0,101.0,102.0,103.0,104.0,105.0,106.0,107.0,108.0,109.00000000000001,110.00000000000001,111.00000000000001,112.00000000000001,113.00000000000001,114.00000000000001,115.00000000000001,115.99999999999999,117.0,118.0,119.0,120.0,121.0,122.0,123.0,124.0,125.0,126.0,127.0,128.0,129.0,130.0,131.0,132.0,133.0,134.0,135.0,136.0,137.0,138.0,139.0,140.0,141.0,142.0,143.0,144.0,145.0,146.0,147.0,148.0,149.0,150.0,151.0,152.0,153.0,154.0,155.0,156.0,157.0,158.0,159.0,160.0,161.0,162.0,163.0,164.0,165.0,166.0,167.0,168.0,169.0,170.0,171.0,172.0,173.0,174.0,175.0,176.0,177.0,178.0,179.0,180.0,181.0,182.0,183.0,184.0,185.0,186.0,187.0,188.0,189.0,190.0,191.0,192.0,193.0,194.0,195.0,196.0,197.0,198.0,199.0,200.0],"x":[0.0,0.0015,0.003,0.0045,0.006,0.0075,0.009,0.0105,0.012,0.0135,0.015,0.0165,0.018,0.0195,0.021,0.0225,0.024,0.025500000000000002,0.027,0.028499999999999998,0.03,0.0315,0.033,0.0345,0.036,0.0375,0.039,0.0405,0.042,0.0435,0.045,0.0465,0.048,0.0495,0.051000000000000004,0.052500000000000005,0.054,0.0555,0.056999999999999995,0.058499999999999996,0.06,0.0615,0.063,0.0645,0.066,0.0675,0.069,0.07050000000000001,0.072,0.0735,0.075,0.0765,0.078,0.0795,0.081,0.0825,0.084,0.0855,0.087,0.0885,0.09,0.0915,0.093,0.0945,0.096,0.0975,0.099,0.1005,0.10200000000000001,0.10350000000000001,0.10500000000000001,0.1065,0.108,0.1095,0.111,0.11249999999999999,0.11399999999999999,0.11549999999999999,0.11699999999999999,0.1185,0.12,0.1215,0.123,0.1245,0.126,0.1275,0.129,0.1305,0.132,0.1335,0.135,0.1365,0.138,0.1395,0.14100000000000001,0.14250000000000002,0.144,0.1455,0.147,0.1485,0.15,0.1515,0.153,0.1545,0.156,0.1575,0.159,0.1605,0.162,0.1635,0.165,0.1665,0.168,0.1695,0.171,0.17250000000000001,0.174,0.1755,0.177,0.1785,0.18,0.1815,0.183,0.1845,0.186,0.1875,0.189,0.1905,0.192,0.1935,0.195,0.1965,0.198,0.1995,0.201,0.2025,0.20400000000000001,0.20550000000000002,0.20700000000000002,0.20850000000000002,0.21000000000000002,0.2115,0.213,0.2145,0.216,0.2175,0.219,0.2205,0.222,0.2235,0.22499999999999998,0.22649999999999998,0.22799999999999998,0.22949999999999998,0.23099999999999998,0.23249999999999998,0.23399999999999999,0.2355,0.237,0.2385,0.24,0.2415,0.243,0.2445,0.246,0.2475,0.249,0.2505,0.252,0.2535,0.255,0.2565,0.258,0.2595,0.261,0.2625,0.264,0.2655,0.267,0.2685,0.27,0.2715,0.273,0.2745,0.276,0.2775,0.279,0.2805,0.28200000000000003,0.28350000000000003,0.28500000000000003,0.28650000000000003,0.288,0.2895,0.291,0.2925,0.294,0.2955,0.297,0.2985,0.3],"y":[0.02,0.0204,0.0208,0.0212,0.0216,0.022,0.0224,0.0228,0.0232,0.0236,0.024,0.024399999999999998,0.0248,0.0252,0.0256,0.026,0.0264,0.0268,0.0272,0.0276,0.027999999999999997,0.028399999999999998,0.0288,0.0292,0.029599999999999998,0.03,0.0304,0.0308,0.0312,0.031599999999999996,0.032,0.0324,0.032799999999999996,0.0332,0.0336,0.034,0.0344,0.0348,0.035199999999999995,0.0356,0.036,0.0364,0.0368,0.0372,0.037599999999999995,0.038,0.038400000000000004,0.0388,0.0392,0.039599999999999996,0.039999999999999994,0.0404,0.0408,0.0412,0.0416,0.041999999999999996,0.0424,0.0428,0.043199999999999995,0.0436,0.044,0.044399999999999995,0.04479999999999999,0.0452,0.0456,0.046,0.0464,0.046799999999999994,0.0472,0.0476,0.048,0.0484,0.048799999999999996,0.049199999999999994,0.04959999999999999,0.049999999999999996,0.0504,0.0508,0.051199999999999996,0.05159999999999999,0.05199999999999999,0.0524,0.0528,0.0532,0.053599999999999995,0.05399999999999999,0.05439999999999999,0.0548,0.0552,0.0556,0.055999999999999994,0.05639999999999999,0.0568,0.0572,0.0576,0.057999999999999996,0.058399999999999994,0.05879999999999999,0.05919999999999999,0.0596,0.06,0.0602,0.060399999999999995,0.0606,0.0608,0.061,0.0612,0.061399999999999996,0.0616,0.0618,0.062,0.0622,0.0624,0.0626,0.0628,0.063,0.06319999999999999,0.0634,0.06359999999999999,0.0638,0.064,0.0642,0.0644,0.06459999999999999,0.0648,0.065,0.0652,0.0654,0.06559999999999999,0.0658,0.066,0.0662,0.0664,0.06659999999999999,0.0668,0.067,0.0672,0.0674,0.0676,0.0678,0.068,0.0682,0.06839999999999999,0.0686,0.0688,0.06899999999999999,0.0692,0.06939999999999999,0.0696,0.0698,0.06999999999999999,0.0702,0.07039999999999999,0.0706,0.0708,0.071,0.0712,0.07139999999999999,0.0716,0.0718,0.072,0.0722,0.07239999999999999,0.0726,0.0728,0.073,0.0732,0.07339999999999999,0.0736,0.0738,0.074,0.07419999999999999,0.0744,0.0746,0.0748,0.075,0.07519999999999999,0.0754,0.0756,0.0758,0.076,0.07619999999999999,0.0764,0.0766,0.07680000000000001,0.077,0.07719999999999999,0.0774,0.0776,0.0778,0.078,0.07819999999999999,0.0784,0.0786,0.0788,0.07899999999999999,0.07919999999999999,0.0794,0.0796,0.0798,0.07999999999999999],"type":"scatter"},{"hovertemplate":"wealth in market = 100%<extra></extra>","marker":{"size":15},"mode":"markers","name":"Market","x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"wealth in market = 0%<extra></extra>","marker":{"size":15},"mode":"markers","name":"Risk-free (Saving)","x":[0],"y":[0.02],"type":"scatter"},{"hovertemplate":"Borrowing rate<extra></extra>","marker":{"size":15},"mode":"markers","name":"Risk-free (Borrowing)","x":[0],"y":[0.04],"type":"scatter"},{"hovertemplate":"indifference curve for <br>utility obtained from <br>optimal wealth in market = 59.0%<extra></extra>","mode":"lines","name":"Risk Aversion=3","x":[0.0,0.0015,0.003,0.0045,0.006,0.0075,0.009,0.0105,0.012,0.0135,0.015,0.0165,0.018,0.0195,0.021,0.0225,0.024,0.025500000000000002,0.027,0.028499999999999998,0.03,0.0315,0.033,0.0345,0.036,0.0375,0.039,0.0405,0.042,0.0435,0.045,0.0465,0.048,0.0495,0.051000000000000004,0.052500000000000005,0.054,0.0555,0.056999999999999995,0.058499999999999996,0.06,0.0615,0.063,0.0645,0.066,0.0675,0.069,0.07050000000000001,0.072,0.0735,0.075,0.0765,0.078,0.0795,0.081,0.0825,0.084,0.0855,0.087,0.0885,0.09,0.0915,0.093,0.0945,0.096,0.0975,0.099,0.1005,0.10200000000000001,0.10350000000000001,0.10500000000000001,0.1065,0.108,0.1095,0.111,0.11249999999999999,0.11399999999999999,0.11549999999999999,0.11699999999999999,0.1185,0.12,0.1215,0.123,0.1245,0.126,0.1275,0.129,0.1305,0.132,0.1335,0.135,0.1365,0.138,0.1395,0.14100000000000001,0.14250000000000002,0.144,0.1455,0.147,0.1485,0.15,0.1515,0.153,0.1545,0.156,0.1575,0.159,0.1605,0.162,0.1635,0.165,0.1665,0.168,0.1695,0.171,0.17250000000000001,0.174,0.1755,0.177,0.1785,0.18,0.1815,0.183,0.1845,0.186,0.1875,0.189,0.1905,0.192,0.1935,0.195,0.1965,0.198,0.1995,0.201,0.2025,0.20400000000000001,0.20550000000000002,0.20700000000000002,0.20850000000000002,0.21000000000000002,0.2115,0.213,0.2145,0.216,0.2175,0.219,0.2205,0.222,0.2235,0.22499999999999998,0.22649999999999998,0.22799999999999998,0.22949999999999998,0.23099999999999998,0.23249999999999998,0.23399999999999999,0.2355,0.237,0.2385,0.24,0.2415,0.243,0.2445,0.246,0.2475,0.249,0.2505,0.252,0.2535,0.255,0.2565,0.258,0.2595,0.261,0.2625,0.264,0.2655,0.267,0.2685,0.27,0.2715,0.273,0.2745,0.276,0.2775,0.279,0.2805,0.28200000000000003,0.28350000000000003,0.28500000000000003,0.28650000000000003,0.288,0.2895,0.291,0.2925,0.294,0.2955,0.297,0.2985,0.3],"y":[0.03185185185185186,0.03185522685185186,0.03186535185185186,0.03188222685185186,0.03190585185185186,0.03193622685185186,0.03197335185185186,0.03201722685185186,0.03206785185185186,0.03212522685185186,0.03218935185185186,0.03226022685185186,0.03233785185185186,0.03242222685185186,0.03251335185185186,0.03261122685185186,0.03271585185185186,0.03282722685185186,0.03294535185185186,0.03307022685185186,0.03320185185185186,0.03334022685185186,0.03348535185185186,0.03363722685185186,0.03379585185185186,0.033961226851851864,0.03413335185185186,0.03431222685185186,0.03449785185185186,0.03469022685185186,0.03488935185185186,0.03509522685185186,0.03530785185185186,0.03552722685185186,0.03575335185185186,0.03598622685185186,0.036225851851851856,0.03647222685185186,0.036725351851851856,0.03698522685185186,0.03725185185185186,0.03752522685185186,0.03780535185185186,0.03809222685185186,0.03838585185185186,0.03868622685185186,0.03899335185185186,0.03930722685185186,0.03962785185185186,0.03995522685185186,0.04028935185185186,0.04063022685185186,0.04097785185185186,0.04133222685185186,0.041693351851851856,0.04206122685185186,0.042435851851851863,0.04281722685185186,0.043205351851851856,0.04360022685185186,0.04400185185185186,0.044410226851851864,0.04482535185185186,0.04524722685185186,0.045675851851851856,0.04611122685185186,0.04655335185185186,0.04700222685185186,0.04745785185185186,0.04792022685185186,0.048389351851851864,0.048865226851851865,0.04934785185185186,0.04983722685185186,0.050333351851851865,0.05083622685185186,0.05134585185185186,0.05186222685185186,0.05238535185185186,0.05291522685185186,0.05345185185185186,0.05399522685185186,0.05454535185185186,0.05510222685185186,0.05566585185185186,0.05623622685185186,0.05681335185185186,0.05739722685185186,0.05798785185185186,0.058585226851851864,0.05918935185185186,0.059800226851851865,0.06041785185185186,0.06104222685185187,0.06167335185185187,0.062311226851851864,0.06295585185185186,0.06360722685185186,0.06426535185185187,0.06493022685185186,0.06560185185185186,0.06628022685185186,0.06696535185185186,0.06765722685185185,0.06835585185185186,0.06906122685185187,0.06977335185185186,0.07049222685185186,0.07121785185185187,0.07195022685185187,0.07268935185185187,0.07343522685185186,0.07418785185185187,0.07494722685185187,0.07571335185185187,0.07648622685185186,0.07726585185185186,0.07805222685185186,0.07884535185185185,0.07964522685185185,0.08045185185185186,0.08126522685185186,0.08208535185185187,0.08291222685185187,0.08374585185185186,0.08458622685185185,0.08543335185185186,0.08628722685185186,0.08714785185185187,0.08801522685185187,0.08888935185185187,0.08977022685185186,0.09065785185185186,0.09155222685185185,0.09245335185185187,0.09336122685185187,0.09427585185185186,0.09519722685185186,0.09612535185185186,0.09706022685185187,0.09800185185185187,0.09895022685185184,0.09990535185185187,0.10086722685185184,0.10183585185185184,0.10281122685185187,0.10379335185185184,0.10478222685185187,0.10577785185185187,0.10678022685185187,0.10778935185185184,0.10880522685185184,0.10982785185185184,0.11085722685185184,0.11189335185185184,0.11293622685185184,0.11398585185185184,0.11504222685185186,0.11610535185185186,0.11717522685185186,0.11825185185185186,0.11933522685185186,0.12042535185185185,0.12152222685185185,0.12262585185185185,0.12373622685185184,0.12485335185185187,0.12597722685185184,0.12710785185185186,0.12824522685185186,0.12938935185185185,0.13054022685185185,0.13169785185185184,0.13286222685185187,0.13403335185185186,0.13521122685185186,0.13639585185185188,0.13758722685185187,0.13878535185185187,0.13999022685185186,0.14120185185185186,0.14242022685185188,0.14364535185185187,0.14487722685185186,0.14611585185185186,0.14736122685185188,0.1486133518518519,0.1498722268518519,0.15113785185185188,0.15241022685185188,0.1536893518518519,0.1549752268518519,0.15626785185185185,0.15756722685185184,0.15887335185185184,0.16018622685185183,0.16150585185185184,0.16283222685185184,0.16416535185185185,0.16550522685185184,0.16685185185185186],"type":"scatter"},{"hovertemplate":"indifference curve for <br>utility obtained from <br>optimal wealth in market = 178.0%<extra></extra>","mode":"lines","name":"Risk Aversion=0.5","x":[0.0,0.0015,0.003,0.0045,0.006,0.0075,0.009,0.0105,0.012,0.0135,0.015,0.0165,0.018,0.0195,0.021,0.0225,0.024,0.025500000000000002,0.027,0.028499999999999998,0.03,0.0315,0.033,0.0345,0.036,0.0375,0.039,0.0405,0.042,0.0435,0.045,0.0465,0.048,0.0495,0.051000000000000004,0.052500000000000005,0.054,0.0555,0.056999999999999995,0.058499999999999996,0.06,0.0615,0.063,0.0645,0.066,0.0675,0.069,0.07050000000000001,0.072,0.0735,0.075,0.0765,0.078,0.0795,0.081,0.0825,0.084,0.0855,0.087,0.0885,0.09,0.0915,0.093,0.0945,0.096,0.0975,0.099,0.1005,0.10200000000000001,0.10350000000000001,0.10500000000000001,0.1065,0.108,0.1095,0.111,0.11249999999999999,0.11399999999999999,0.11549999999999999,0.11699999999999999,0.1185,0.12,0.1215,0.123,0.1245,0.126,0.1275,0.129,0.1305,0.132,0.1335,0.135,0.1365,0.138,0.1395,0.14100000000000001,0.14250000000000002,0.144,0.1455,0.147,0.1485,0.15,0.1515,0.153,0.1545,0.156,0.1575,0.159,0.1605,0.162,0.1635,0.165,0.1665,0.168,0.1695,0.171,0.17250000000000001,0.174,0.1755,0.177,0.1785,0.18,0.1815,0.183,0.1845,0.186,0.1875,0.189,0.1905,0.192,0.1935,0.195,0.1965,0.198,0.1995,0.201,0.2025,0.20400000000000001,0.20550000000000002,0.20700000000000002,0.20850000000000002,0.21000000000000002,0.2115,0.213,0.2145,0.216,0.2175,0.219,0.2205,0.222,0.2235,0.22499999999999998,0.22649999999999998,0.22799999999999998,0.22949999999999998,0.23099999999999998,0.23249999999999998,0.23399999999999999,0.2355,0.237,0.2385,0.24,0.2415,0.243,0.2445,0.246,0.2475,0.249,0.2505,0.252,0.2535,0.255,0.2565,0.258,0.2595,0.261,0.2625,0.264,0.2655,0.267,0.2685,0.27,0.2715,0.273,0.2745,0.276,0.2775,0.279,0.2805,0.28200000000000003,0.28350000000000003,0.28500000000000003,0.28650000000000003,0.288,0.2895,0.291,0.2925,0.294,0.2955,0.297,0.2985,0.3],"y":[0.057777777777777775,0.05777834027777778,0.05778002777777778,0.057782840277777775,0.05778677777777778,0.05779184027777778,0.057798027777777775,0.05780534027777778,0.057813777777777776,0.057823340277777774,0.057834027777777776,0.057845840277777776,0.05785877777777777,0.057872840277777775,0.057888027777777774,0.05790434027777778,0.05792177777777777,0.05794034027777777,0.05796002777777778,0.05798084027777777,0.05800277777777778,0.058025840277777775,0.05805002777777778,0.058075340277777776,0.05810177777777777,0.058129340277777775,0.058158027777777774,0.05818784027777778,0.05821877777777777,0.05825084027777778,0.058284027777777775,0.058318340277777776,0.058353777777777775,0.05839034027777777,0.05842802777777777,0.05846684027777777,0.058506777777777776,0.05854784027777778,0.058590027777777776,0.05863334027777777,0.05867777777777777,0.05872334027777777,0.058770027777777775,0.058817840277777776,0.058866777777777775,0.05891684027777778,0.05896802777777777,0.05902034027777778,0.059073777777777774,0.059128340277777774,0.05918402777777777,0.059240840277777776,0.05929877777777778,0.059357840277777775,0.05941802777777778,0.05947934027777778,0.05954177777777778,0.05960534027777777,0.05967002777777777,0.05973584027777777,0.059802777777777774,0.059870840277777775,0.05994002777777777,0.060010340277777775,0.060081777777777776,0.060154340277777774,0.060228027777777776,0.060302840277777776,0.060378777777777774,0.06045584027777778,0.06053402777777778,0.060613340277777775,0.06069377777777778,0.06077534027777778,0.060858027777777775,0.06094184027777778,0.06102677777777778,0.061112840277777775,0.06120002777777778,0.06128834027777778,0.061377777777777774,0.061468340277777776,0.061560027777777776,0.06165284027777777,0.061746777777777775,0.061841840277777775,0.06193802777777777,0.062035340277777774,0.062133777777777774,0.06223334027777778,0.06233402777777777,0.06243584027777778,0.06253877777777778,0.06264284027777778,0.06274802777777777,0.06285434027777778,0.06296177777777777,0.06307034027777778,0.06318002777777777,0.06329084027777777,0.06340277777777778,0.06351584027777778,0.06363002777777778,0.06374534027777777,0.06386177777777778,0.06397934027777777,0.06409802777777777,0.06421784027777777,0.06433877777777777,0.06446084027777778,0.06458402777777777,0.06470834027777778,0.06483377777777778,0.06496034027777778,0.06508802777777778,0.06521684027777777,0.06534677777777778,0.06547784027777777,0.06561002777777777,0.06574334027777777,0.06587777777777777,0.06601334027777778,0.06615002777777777,0.06628784027777777,0.06642677777777778,0.06656684027777778,0.06670802777777778,0.06685034027777778,0.06699377777777778,0.06713834027777778,0.06728402777777778,0.06743084027777778,0.06757877777777778,0.06772784027777777,0.06787802777777778,0.06802934027777778,0.06818177777777777,0.06833534027777778,0.06849002777777778,0.06864584027777777,0.06880277777777778,0.06896084027777777,0.06912002777777777,0.06928034027777777,0.06944177777777777,0.06960434027777777,0.06976802777777777,0.06993284027777777,0.07009877777777777,0.07026584027777777,0.07043402777777777,0.07060334027777777,0.07077377777777777,0.07094534027777777,0.07111802777777777,0.07129184027777777,0.07146677777777777,0.07164284027777777,0.07182002777777777,0.07199834027777777,0.07217777777777777,0.07235834027777778,0.07254002777777778,0.07272284027777777,0.07290677777777778,0.07309184027777778,0.07327802777777778,0.07346534027777778,0.07365377777777778,0.07384334027777778,0.07403402777777777,0.07422584027777777,0.07441877777777778,0.07461284027777777,0.07480802777777777,0.07500434027777778,0.07520177777777778,0.07540034027777778,0.07560002777777777,0.07580084027777778,0.07600277777777778,0.07620584027777777,0.07641002777777778,0.07661534027777778,0.07682177777777778,0.07702934027777777,0.07723802777777777,0.07744784027777778,0.07765877777777777,0.07787084027777778,0.07808402777777779,0.07829834027777778,0.07851377777777777,0.07873034027777777,0.07894802777777778,0.07916684027777778,0.07938677777777778,0.07960784027777777,0.07983002777777777,0.08005334027777777,0.08027777777777778],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"tickformat":".0%"},"yaxis":{"title":{"text":"Expected Return"},"tickformat":".0%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('e41800aa-6554-47c5-9d75-da25256b6129');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.11: Preferences and the Capital Allocation Line</figcaption><p></p>
</figure>
</div>
</div>
<p>Another way to see how risk aversion affects capital allocation is to plot the risky asset weight as a function of risk aversion, as in <a href="#fig-cal-wgt-by-riskaver">Figure&nbsp;<span>2.12</span></a>. Higher risk aversion translates into lower holdings of the risky asset. This effect is monotonic except for a region of risk aversion where the optimal weight is 100% in the market portfolio. This is due to the kink in the capital allocation line resulting from the difference in risk-free borrowing and savings rates.</p>
<div class="cell" data-execution_count="13">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameter values (in percent)</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>mn <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>sd <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">2</span>    <span class="co">#incremental borrowing rate</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> opt_wgt(mn, sd, s, b, A):</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># return/sd inputs must be in decimal</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    wgt <span class="op">=</span> (mn <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    expret<span class="op">=</span> wgt<span class="op">*</span>mn <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    sdret <span class="op">=</span> wgt<span class="op">*</span>sd </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> wgt <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> (mn <span class="op">-</span> b) <span class="op">/</span> (A <span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> <span class="bu">max</span>(wgt,<span class="dv">1</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        expret<span class="op">=</span> wgt<span class="op">*</span>mn <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>b </span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        sdret <span class="op">=</span> wgt<span class="op">*</span>sd   </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> expret <span class="op">-</span> <span class="fl">0.5</span><span class="op">*</span>A<span class="op">*</span>sdret<span class="op">**</span><span class="dv">2</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wgt</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn, sd, s, extra):</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> s<span class="op">+</span>extra</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    s <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    b <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>    ravers <span class="op">=</span> np.arange(<span class="fl">0.2</span>,<span class="fl">5.1</span>,<span class="fl">0.1</span>)</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> [opt_wgt(mn,sd,s,b,A) <span class="cf">for</span> A <span class="kw">in</span> ravers]</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"Risk Aversion: %</span><span class="sc">{x:.2f}</span><span class="st"> &lt;br&gt;Risky Asset Weight: %</span><span class="sc">{y:.1%}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>ravers, y<span class="op">=</span>wgts, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">15</span>), name<span class="op">=</span><span class="st">'Optimal Weight'</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>    )       </span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Risk Aversion"</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Weight in Risky Asset"</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".2"</span>)</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.74</span>))</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>figtbl(mn, sd, s, extra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-cal-wgt-by-riskaver" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="e81b7a98-12ed-403f-a241-a571e6231056" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("e81b7a98-12ed-403f-a241-a571e6231056")) {                    Plotly.newPlot(                        "e81b7a98-12ed-403f-a241-a571e6231056",                        [{"hovertemplate":"Risk Aversion: %{x:.2f} <br>Risky Asset Weight: %{y:.1%}<extra></extra>","marker":{"size":15},"mode":"lines","name":"Optimal Weight","x":[0.2,0.30000000000000004,0.4000000000000001,0.5000000000000001,0.6000000000000001,0.7000000000000002,0.8000000000000003,0.9000000000000001,1.0000000000000002,1.1000000000000003,1.2000000000000004,1.3000000000000003,1.4000000000000004,1.5000000000000004,1.6000000000000003,1.7000000000000004,1.8000000000000005,1.9000000000000006,2.000000000000001,2.1000000000000005,2.200000000000001,2.3000000000000007,2.400000000000001,2.500000000000001,2.600000000000001,2.700000000000001,2.800000000000001,2.9000000000000012,3.000000000000001,3.100000000000001,3.200000000000001,3.300000000000001,3.4000000000000012,3.5000000000000013,3.6000000000000014,3.7000000000000015,3.8000000000000016,3.9000000000000012,4.000000000000001,4.100000000000001,4.200000000000002,4.300000000000002,4.400000000000001,4.500000000000002,4.600000000000001,4.700000000000002,4.800000000000002,4.900000000000002,5.000000000000002],"y":[4.444444444444444,2.9629629629629624,2.2222222222222214,1.7777777777777772,1.4814814814814812,1.2698412698412693,1.1111111111111105,1,1,1,1,1,1,1,1,1,0.9876543209876539,0.9356725146198827,0.8888888888888884,0.8465608465608463,0.8080808080808076,0.7729468599033814,0.7407407407407405,0.7111111111111108,0.6837606837606834,0.6584362139917692,0.6349206349206346,0.6130268199233713,0.5925925925925923,0.5734767025089603,0.5555555555555552,0.5387205387205385,0.5228758169934637,0.5079365079365077,0.4938271604938269,0.4804804804804802,0.4678362573099413,0.4558404558404556,0.4444444444444443,0.43360433604336024,0.42328042328042303,0.41343669250645976,0.4040404040404039,0.39506172839506154,0.3864734299516907,0.3782505910165483,0.37037037037037024,0.3628117913832198,0.3555555555555554],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Risk Aversion"},"tickformat":".2"},"yaxis":{"title":{"text":"Weight in Risky Asset"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.74}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('e81b7a98-12ed-403f-a241-a571e6231056');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.12: Risky asset weight as function of risk aversion</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="the-tangency-cal" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="the-tangency-cal"><span class="header-section-number">2.4.2</span> The Tangency CAL</h3>
<p>In this section, we assume that risky saving and borrowing occur at the same rate. With multiple risky assets, asset allocation decisions are made in two steps. First, the optimal combination of risky assets, the tangency portfolio, is found. With the same set of inputs for expected returns, standard deviations, and correlations, all investors find the tangency portfolio to be the optimal risky portfolio. Investors will differ in the fraction of their wealth to invest in the tangency portfolio relative to the risk-free asset because investors with different risk aversions will find different portfolios on the tangency portfolio capital allocation line to be better than others. The optimal weight in the tangency portfolio is: <span id="eq-opt-wgt-tangency"><span class="math display">\[ w^*_{\text{tangency}} = \frac{E[r_{\text{tangency}}-r_f]}{A \cdot \text{var}_{\text{tangency}}}\,. \tag{2.18}\]</span></span></p>
<p><a href="#fig-tangency-and-preferences">Figure&nbsp;<span>2.13</span></a> shows the indifference curves at the highest possible utility level for investors with the indicated risk aversions. Investors with lower risk aversion will further up the capital allocation line, accepting greater risk for higher expected returns.</p>
<div class="cell" data-execution_count="14">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>mn_stock <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>mn_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>sd_stock <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>sd_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>raver1 <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>raver2 <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c, rs, extra):</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra   </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_s"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rs)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_b"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rb)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky(mn, sd, rs, rb, w_min, w_max):</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rs <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rs) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> rb <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rb)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    srs <span class="op">=</span> (mn <span class="op">-</span> rs)<span class="op">/</span>sd</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>    srb <span class="op">=</span> (mn <span class="op">-</span> rb)<span class="op">/</span>sd</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds, srs, srb</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> opt_utility(mns, cov, Shorts, s, b, A):</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># P is a portfolio object based on expected returns, covariance matrix, and shorts</span></span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts) </span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> s<span class="op">==</span>b:</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">#tangency exp ret and sd</span></span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>            portTang <span class="op">=</span> P.tangency(s)</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>            mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>                sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>                <span class="co">#optimal weight in tangency based on risk-aversion</span></span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> (mnTang <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTang<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>                expret<span class="op">=</span> wgt<span class="op">*</span>mnTang <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> wgt<span class="op">*</span>sdTang </span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> wgt</span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient low-risk portfolio</span></span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>            portTangLowRisk <span class="op">=</span> P.tangency(s)</span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>            mnTangLowRisk <span class="op">=</span> portTangLowRisk <span class="op">@</span> mns</span>
<span id="cb17-78"><a href="#cb17-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangLowRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb17-79"><a href="#cb17-79" aria-hidden="true" tabindex="-1"></a>                sdTangLowRisk <span class="op">=</span> np.sqrt(portTangLowRisk <span class="op">@</span> cov <span class="op">@</span> portTangLowRisk)</span>
<span id="cb17-80"><a href="#cb17-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-81"><a href="#cb17-81" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient high-risk portfolio</span></span>
<span id="cb17-82"><a href="#cb17-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ((b<span class="op">&lt;</span>gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb17-83"><a href="#cb17-83" aria-hidden="true" tabindex="-1"></a>            portTangHighRisk <span class="op">=</span> P.tangency(b)</span>
<span id="cb17-84"><a href="#cb17-84" aria-hidden="true" tabindex="-1"></a>            mnTangHighRisk <span class="op">=</span> portTangHighRisk <span class="op">@</span> mns</span>
<span id="cb17-85"><a href="#cb17-85" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangHighRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb17-86"><a href="#cb17-86" aria-hidden="true" tabindex="-1"></a>                sdTangHighRisk <span class="op">=</span> np.sqrt(portTangHighRisk <span class="op">@</span> cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb17-87"><a href="#cb17-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-88"><a href="#cb17-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">#1st: efficient low risk CAL</span></span>
<span id="cb17-89"><a href="#cb17-89" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTangLowRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb17-90"><a href="#cb17-90" aria-hidden="true" tabindex="-1"></a>        expret<span class="op">=</span> wgt<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb17-91"><a href="#cb17-91" aria-hidden="true" tabindex="-1"></a>        sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangLowRisk </span>
<span id="cb17-92"><a href="#cb17-92" aria-hidden="true" tabindex="-1"></a>        wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb17-93"><a href="#cb17-93" aria-hidden="true" tabindex="-1"></a>        wgt_lo <span class="op">=</span> wgt</span>
<span id="cb17-94"><a href="#cb17-94" aria-hidden="true" tabindex="-1"></a>        wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb17-95"><a href="#cb17-95" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print('Weight low risk CAL: ', wgt)</span></span>
<span id="cb17-96"><a href="#cb17-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> wgt <span class="op">&gt;</span> <span class="fl">1.0</span>:</span>
<span id="cb17-97"><a href="#cb17-97" aria-hidden="true" tabindex="-1"></a>            <span class="co">#2nd: efficient high risk CAL</span></span>
<span id="cb17-98"><a href="#cb17-98" aria-hidden="true" tabindex="-1"></a>            wgt <span class="op">=</span> (mnTangHighRisk <span class="op">-</span> b) <span class="op">/</span> (A <span class="op">*</span> (sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb17-99"><a href="#cb17-99" aria-hidden="true" tabindex="-1"></a>            expret<span class="op">=</span> wgt<span class="op">*</span>mnTangHighRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>b</span>
<span id="cb17-100"><a href="#cb17-100" aria-hidden="true" tabindex="-1"></a>            sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangHighRisk </span>
<span id="cb17-101"><a href="#cb17-101" aria-hidden="true" tabindex="-1"></a>            wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb17-102"><a href="#cb17-102" aria-hidden="true" tabindex="-1"></a>            wgt_lo <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb17-103"><a href="#cb17-103" aria-hidden="true" tabindex="-1"></a>            wgt_hi <span class="op">=</span> wgt</span>
<span id="cb17-104"><a href="#cb17-104" aria-hidden="true" tabindex="-1"></a>            <span class="co"># print('Weight high risk CAL: ', wgt)</span></span>
<span id="cb17-105"><a href="#cb17-105" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> wgt <span class="op">&lt;</span> <span class="fl">1.0</span>:</span>
<span id="cb17-106"><a href="#cb17-106" aria-hidden="true" tabindex="-1"></a>                <span class="co">#3rd: risky asset frontier</span></span>
<span id="cb17-107"><a href="#cb17-107" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> <span class="dv">1</span> <span class="co">#This is should be interpreted as total weight in risky assets.</span></span>
<span id="cb17-108"><a href="#cb17-108" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Method 1: solve analytically for utility-maximizing mix of efficient low and high risk portfolios</span></span>
<span id="cb17-109"><a href="#cb17-109" aria-hidden="true" tabindex="-1"></a>                cov_hilo <span class="op">=</span> portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk</span>
<span id="cb17-110"><a href="#cb17-110" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> mnTangHighRisk <span class="op">-</span> A <span class="op">*</span>(cov_hilo  <span class="op">-</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))<span class="op">/</span>(A<span class="op">*</span>(sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">2</span><span class="op">*</span>cov_hilo))</span>
<span id="cb17-111"><a href="#cb17-111" aria-hidden="true" tabindex="-1"></a>                expret <span class="op">=</span> wgt_lo<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span> mnTangHighRisk</span>
<span id="cb17-112"><a href="#cb17-112" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> np.sqrt((wgt_lo<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span>sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> ((<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>wgt_lo<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span>portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb17-113"><a href="#cb17-113" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt_lo</span>
<span id="cb17-114"><a href="#cb17-114" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb17-115"><a href="#cb17-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-116"><a href="#cb17-116" aria-hidden="true" tabindex="-1"></a>                <span class="co"># #Method 2: calculate frontier manually and choose max utility</span></span>
<span id="cb17-117"><a href="#cb17-117" aria-hidden="true" tabindex="-1"></a>                <span class="co"># eret_grid = np.linspace(mnTangLowRisk, mnTangHighRisk, 100)</span></span>
<span id="cb17-118"><a href="#cb17-118" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df = pd.DataFrame(dtype='float', columns=['mn','sd','u'],index=np.arange(0,100))</span></span>
<span id="cb17-119"><a href="#cb17-119" aria-hidden="true" tabindex="-1"></a>                <span class="co"># for i,m in enumerate(eret_grid):</span></span>
<span id="cb17-120"><a href="#cb17-120" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     portFrontier = P.frontier(m)</span></span>
<span id="cb17-121"><a href="#cb17-121" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'mn'] = portFrontier @ mns</span></span>
<span id="cb17-122"><a href="#cb17-122" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'sd'] = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb17-123"><a href="#cb17-123" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df['u']  = df['mn'] - 0.5*A* df['sd']**2</span></span>
<span id="cb17-124"><a href="#cb17-124" aria-hidden="true" tabindex="-1"></a>                <span class="co"># opt_mn = df.loc[df['u'].idxmax(),'mn']</span></span>
<span id="cb17-125"><a href="#cb17-125" aria-hidden="true" tabindex="-1"></a>                <span class="co"># portFrontier = P.frontier(opt_mn)</span></span>
<span id="cb17-126"><a href="#cb17-126" aria-hidden="true" tabindex="-1"></a>                <span class="co"># expret = portFrontier @ mns</span></span>
<span id="cb17-127"><a href="#cb17-127" aria-hidden="true" tabindex="-1"></a>                <span class="co"># sdret  = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb17-128"><a href="#cb17-128" aria-hidden="true" tabindex="-1"></a>                <span class="co"># print('Weight frontier: ', wgt)</span></span>
<span id="cb17-129"><a href="#cb17-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-130"><a href="#cb17-130" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> expret <span class="op">-</span> <span class="fl">0.5</span><span class="op">*</span>A<span class="op">*</span>sdret<span class="op">**</span><span class="dv">2</span></span>
<span id="cb17-131"><a href="#cb17-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> u, wgt, wgt_rf, wgt_lo, wgt_hi</span>
<span id="cb17-132"><a href="#cb17-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-133"><a href="#cb17-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-134"><a href="#cb17-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-135"><a href="#cb17-135" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c, rs, extra, raver1, raver2, asset1_name, asset2_name):</span>
<span id="cb17-136"><a href="#cb17-136" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c, rs, extra)</span>
<span id="cb17-137"><a href="#cb17-137" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-138"><a href="#cb17-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Plot the portfolios of the two assets</span></span>
<span id="cb17-139"><a href="#cb17-139" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb17-140"><a href="#cb17-140" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb17-141"><a href="#cb17-141" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb17-142"><a href="#cb17-142" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb17-143"><a href="#cb17-143" aria-hidden="true" tabindex="-1"></a>        <span class="co"># line={'color': green},</span></span>
<span id="cb17-144"><a href="#cb17-144" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb17-145"><a href="#cb17-145" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb17-146"><a href="#cb17-146" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>asset1_name<span class="op">+</span><span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb17-147"><a href="#cb17-147" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb17-148"><a href="#cb17-148" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Stock &amp; Bond Frontier"</span></span>
<span id="cb17-149"><a href="#cb17-149" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-150"><a href="#cb17-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-151"><a href="#cb17-151" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb17-152"><a href="#cb17-152" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb17-153"><a href="#cb17-153" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb17-154"><a href="#cb17-154" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb17-155"><a href="#cb17-155" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb17-156"><a href="#cb17-156" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb17-157"><a href="#cb17-157" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb17-158"><a href="#cb17-158" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb17-159"><a href="#cb17-159" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb17-160"><a href="#cb17-160" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb17-161"><a href="#cb17-161" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb17-162"><a href="#cb17-162" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-163"><a href="#cb17-163" aria-hidden="true" tabindex="-1"></a>    trace2b <span class="op">=</span> go.Scatter(</span>
<span id="cb17-164"><a href="#cb17-164" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb17-165"><a href="#cb17-165" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb17-166"><a href="#cb17-166" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb17-167"><a href="#cb17-167" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb17-168"><a href="#cb17-168" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb17-169"><a href="#cb17-169" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb17-170"><a href="#cb17-170" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb17-171"><a href="#cb17-171" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-172"><a href="#cb17-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-173"><a href="#cb17-173" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb17-174"><a href="#cb17-174" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2a)</span>
<span id="cb17-175"><a href="#cb17-175" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2b)</span>
<span id="cb17-176"><a href="#cb17-176" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb17-177"><a href="#cb17-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-178"><a href="#cb17-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-179"><a href="#cb17-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-180"><a href="#cb17-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports,srTang,borrow_flag):</span>
<span id="cb17-181"><a href="#cb17-181" aria-hidden="true" tabindex="-1"></a>        <span class="co"># borrow_flag=1 adds statement about "relative to borrowing rate"</span></span>
<span id="cb17-182"><a href="#cb17-182" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N<span class="op">+</span><span class="dv">1</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb17-183"><a href="#cb17-183" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb17-184"><a href="#cb17-184" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb17-185"><a href="#cb17-185" aria-hidden="true" tabindex="-1"></a>        cd[:,N] <span class="op">=</span> np.<span class="bu">round</span>(srTang,<span class="dv">4</span>)</span>
<span id="cb17-186"><a href="#cb17-186" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(cd)</span></span>
<span id="cb17-187"><a href="#cb17-187" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb17-188"><a href="#cb17-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb17-189"><a href="#cb17-189" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"asset "</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb17-190"><a href="#cb17-190" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb17-191"><a href="#cb17-191" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb17-192"><a href="#cb17-192" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb17-193"><a href="#cb17-193" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> borrow_flag<span class="op">==</span><span class="dv">1</span>:</span>
<span id="cb17-194"><a href="#cb17-194" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio (relative to borrowing rate): %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span>    </span>
<span id="cb17-195"><a href="#cb17-195" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb17-196"><a href="#cb17-196" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio: %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span></span>
<span id="cb17-197"><a href="#cb17-197" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb17-198"><a href="#cb17-198" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd  </span>
<span id="cb17-199"><a href="#cb17-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-200"><a href="#cb17-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the tangency portfolios</span></span>
<span id="cb17-201"><a href="#cb17-201" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb17-202"><a href="#cb17-202" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra     </span>
<span id="cb17-203"><a href="#cb17-203" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb17-204"><a href="#cb17-204" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb17-205"><a href="#cb17-205" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb17-206"><a href="#cb17-206" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array(mns) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb17-207"><a href="#cb17-207" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb17-208"><a href="#cb17-208" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array(sds) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb17-209"><a href="#cb17-209" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb17-210"><a href="#cb17-210" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb17-211"><a href="#cb17-211" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb17-212"><a href="#cb17-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-213"><a href="#cb17-213" aria-hidden="true" tabindex="-1"></a>    Shorts <span class="op">=</span> <span class="fl">0.0</span>     </span>
<span id="cb17-214"><a href="#cb17-214" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="bu">len</span>(mns)</span>
<span id="cb17-215"><a href="#cb17-215" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts)    </span>
<span id="cb17-216"><a href="#cb17-216" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb17-217"><a href="#cb17-217" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('GMV return is: ',gmv)</span></span>
<span id="cb17-218"><a href="#cb17-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rs <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb17-219"><a href="#cb17-219" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rs)</span>
<span id="cb17-220"><a href="#cb17-220" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb17-221"><a href="#cb17-221" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb17-222"><a href="#cb17-222" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb17-223"><a href="#cb17-223" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rs)<span class="op">/</span>sdTang</span>
<span id="cb17-224"><a href="#cb17-224" aria-hidden="true" tabindex="-1"></a>            string0 <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb17-225"><a href="#cb17-225" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string0, [portTang], srTang,<span class="dv">0</span>)</span>
<span id="cb17-226"><a href="#cb17-226" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb17-227"><a href="#cb17-227" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb17-228"><a href="#cb17-228" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb17-229"><a href="#cb17-229" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb17-230"><a href="#cb17-230" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb17-231"><a href="#cb17-231" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb17-232"><a href="#cb17-232" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb17-233"><a href="#cb17-233" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>string0</span>
<span id="cb17-234"><a href="#cb17-234" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb17-235"><a href="#cb17-235" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb17-236"><a href="#cb17-236" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb17-237"><a href="#cb17-237" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (no leverage)</span></span>
<span id="cb17-238"><a href="#cb17-238" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> rb<span class="op">==</span>rs:</span>
<span id="cb17-239"><a href="#cb17-239" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">4.0</span></span>
<span id="cb17-240"><a href="#cb17-240" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb17-241"><a href="#cb17-241" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb17-242"><a href="#cb17-242" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>,<span class="dv">0</span>, max_wgt)</span>
<span id="cb17-243"><a href="#cb17-243" aria-hidden="true" tabindex="-1"></a>            portlabel <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb17-244"><a href="#cb17-244" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>portlabel <span class="op">+</span> <span class="st">" = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span>  <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb17-245"><a href="#cb17-245" aria-hidden="true" tabindex="-1"></a>            trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb17-246"><a href="#cb17-246" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb17-247"><a href="#cb17-247" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb17-248"><a href="#cb17-248" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb17-249"><a href="#cb17-249" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb17-250"><a href="#cb17-250" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb17-251"><a href="#cb17-251" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb17-252"><a href="#cb17-252" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span> <span class="op">+</span> portlabel</span>
<span id="cb17-253"><a href="#cb17-253" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb17-254"><a href="#cb17-254" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5)</span>
<span id="cb17-255"><a href="#cb17-255" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb17-256"><a href="#cb17-256" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb17-257"><a href="#cb17-257" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb17-258"><a href="#cb17-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-259"><a href="#cb17-259" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs) <span class="kw">and</span> ((gmv <span class="op">&gt;</span> rb) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb17-260"><a href="#cb17-260" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rb)</span>
<span id="cb17-261"><a href="#cb17-261" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb17-262"><a href="#cb17-262" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb17-263"><a href="#cb17-263" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb17-264"><a href="#cb17-264" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rb)<span class="op">/</span>sdTang</span>
<span id="cb17-265"><a href="#cb17-265" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">'efficient high mean portfolio'</span></span>
<span id="cb17-266"><a href="#cb17-266" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string, [portTang], srTang,<span class="dv">1</span>)</span>
<span id="cb17-267"><a href="#cb17-267" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb17-268"><a href="#cb17-268" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb17-269"><a href="#cb17-269" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb17-270"><a href="#cb17-270" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb17-271"><a href="#cb17-271" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb17-272"><a href="#cb17-272" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb17-273"><a href="#cb17-273" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb17-274"><a href="#cb17-274" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"efficient high mean portfolio"</span></span>
<span id="cb17-275"><a href="#cb17-275" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb17-276"><a href="#cb17-276" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb17-277"><a href="#cb17-277" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb17-278"><a href="#cb17-278" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)            </span></span>
<span id="cb17-279"><a href="#cb17-279" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb17-280"><a href="#cb17-280" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in efficient high mean portfolio = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio (relative to borrowing rate): "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb17-281"><a href="#cb17-281" aria-hidden="true" tabindex="-1"></a>            trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb17-282"><a href="#cb17-282" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb17-283"><a href="#cb17-283" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb17-284"><a href="#cb17-284" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb17-285"><a href="#cb17-285" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb17-286"><a href="#cb17-286" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb17-287"><a href="#cb17-287" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb17-288"><a href="#cb17-288" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean"</span></span>
<span id="cb17-289"><a href="#cb17-289" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb17-290"><a href="#cb17-290" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6)   </span>
<span id="cb17-291"><a href="#cb17-291" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb17-292"><a href="#cb17-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-293"><a href="#cb17-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-294"><a href="#cb17-294" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility plot info</span></span>
<span id="cb17-295"><a href="#cb17-295" aria-hidden="true" tabindex="-1"></a>    u1, wgt1, wgt_rf1, wgt_lo1, wgt_hi1 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver1)</span>
<span id="cb17-296"><a href="#cb17-296" aria-hidden="true" tabindex="-1"></a>    u2, wgt2, wgt_rf2, wgt_lo2, wgt_hi2 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver2)</span>
<span id="cb17-297"><a href="#cb17-297" aria-hidden="true" tabindex="-1"></a>    string1<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver1)</span>
<span id="cb17-298"><a href="#cb17-298" aria-hidden="true" tabindex="-1"></a>    string2<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver2)</span>
<span id="cb17-299"><a href="#cb17-299" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>,<span class="fl">1.4</span>,<span class="dv">100</span>)</span>
<span id="cb17-300"><a href="#cb17-300" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w<span class="op">*</span>np.<span class="bu">max</span>(sds) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb17-301"><a href="#cb17-301" aria-hidden="true" tabindex="-1"></a>    eret1 <span class="op">=</span> [u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver1<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds]</span>
<span id="cb17-302"><a href="#cb17-302" aria-hidden="true" tabindex="-1"></a>    eret2 <span class="op">=</span> [u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver2<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds] </span>
<span id="cb17-303"><a href="#cb17-303" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df = pd.DataFrame(data={'Standard Deviation': sds, string1: U1, string2: U2})</span></span>
<span id="cb17-304"><a href="#cb17-304" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver1,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb17-305"><a href="#cb17-305" aria-hidden="true" tabindex="-1"></a>    trace7 <span class="op">=</span> go.Scatter(</span>
<span id="cb17-306"><a href="#cb17-306" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret1, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string1, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>,dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb17-307"><a href="#cb17-307" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb17-308"><a href="#cb17-308" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver2,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb17-309"><a href="#cb17-309" aria-hidden="true" tabindex="-1"></a>    trace8 <span class="op">=</span> go.Scatter(</span>
<span id="cb17-310"><a href="#cb17-310" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret2, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string2, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>),</span>
<span id="cb17-311"><a href="#cb17-311" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb17-312"><a href="#cb17-312" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace7) </span>
<span id="cb17-313"><a href="#cb17-313" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace8) </span>
<span id="cb17-314"><a href="#cb17-314" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb17-315"><a href="#cb17-315" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-316"><a href="#cb17-316" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb17-317"><a href="#cb17-317" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb17-318"><a href="#cb17-318" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb17-319"><a href="#cb17-319" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb17-320"><a href="#cb17-320" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb17-321"><a href="#cb17-321" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb17-322"><a href="#cb17-322" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.5</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.6</span>))</span>
<span id="cb17-323"><a href="#cb17-323" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb17-324"><a href="#cb17-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-325"><a href="#cb17-325" aria-hidden="true" tabindex="-1"></a>figtbl(mn_stock,mn_bond,sd_stock,sd_bond,corr,rs,extra,raver1, raver2, <span class="st">"Stock"</span>,<span class="st">"Bond"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-tangency-and-preferences" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="ab734883-78fb-4b64-9836-81c3d6a9493a" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("ab734883-78fb-4b64-9836-81c3d6a9493a")) {                    Plotly.newPlot(                        "ab734883-78fb-4b64-9836-81c3d6a9493a",                        [{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"orange","size":10},"mode":"markers","name":"Stock","text":["Stock"],"x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":10},"mode":"markers","name":"Bond","text":["Bond"],"x":[0.035],"y":[0.035],"type":"scatter"},{"customdata":[100.0,99.0,98.0,97.0,96.0,95.0,94.0,93.0,92.0,91.0,90.0,89.0,88.0,87.0,86.0,85.0,84.0,83.0,82.0,81.0,80.0,79.0,78.0,77.0,76.0,75.0,74.0,73.0,72.0,71.0,70.0,69.0,68.0,67.0,65.99999999999999,64.99999999999999,64.0,63.0,62.0,61.0,60.0,59.0,58.00000000000001,57.00000000000001,56.00000000000001,55.00000000000001,54.0,53.0,52.0,51.0,50.0,49.0,48.0,47.0,46.0,44.99999999999999,43.99999999999999,42.99999999999999,42.00000000000001,41.0,40.0,39.0,38.0,37.0,36.0,35.0,34.0,32.99999999999999,31.999999999999996,30.999999999999993,29.999999999999993,29.000000000000004,28.000000000000004,27.0,26.0,25.0,24.0,23.0,21.999999999999996,20.999999999999996,19.999999999999996,18.999999999999993,17.999999999999993,16.999999999999993,16.000000000000004,15.000000000000002,14.000000000000002,13.0,12.0,10.999999999999998,9.999999999999998,8.999999999999996,7.9999999999999964,6.999999999999995,5.999999999999995,4.999999999999993,4.0000000000000036,3.0000000000000027,2.0000000000000018,1.0000000000000009,0.0],"hovertemplate":"Stock: %{text:.0f}%<br>Bond: %{customdata:.0f}%<extra></extra>","line":{"color":"black"},"mode":"lines","name":"Stock & Bond Frontier","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0],"x":[0.035,0.034607441396324,0.034281190177705326,0.03402315388085002,0.033834893231692045,0.03371757701852254,0.03367194678066595,0.03369829372535055,0.033796449517663835,0.033965791614505324,0.03420526275297414,0.03451340319354207,0.034888393485513196,0.035328104959083215,0.03583015489779524,0.03639196339853072,0.03701080923189873,0.03768388249636706,0.03840833242930498,0.039181309319623304,0.04,0.04086165684354955,0.04176362053270765,0.04270333710613258,0.04367836993295422,0.0446864073292987,0.04572526653831556,0.04679289475978164,0.0478873678541638,0.0490068872710765,0.05014977567247933,0.05131447164299756,0.052499523807364196,0.053703584610340485,0.05492540395845988,0.056163822875584246,0.057417767285048625,0.05868624199929656,0.05996832497243858,0.061263161851148364,0.06256996084384263,0.06388798791635249,0.06521656231357185,0.06655505240024982,0.06790287180966649,0.06925947588597534,0.07062435840416534,0.07199704855061768,0.07337710814688733,0.07476412909945516,0.07615773105863909,0.07755755927051858,0.07896328260653808,0.08037459175635046,0.08179119757039874,0.08321282953968097,0.0846392344010743,0.08607017485749636,0.08750542840304253,0.08894478624405142,0.09038805230781334,0.09183504233134539,0.09328558302331609,0.09473951129280751,0.09619667353916142,0.09765692499766722,0.0991201291363162,0.10058615709927485,0.10205488719311781,0.10352620441221633,0.10500000000000002,0.1064761710431024,0.10795462009566797,0.10943525483133851,0.11091798772065782,0.11240273573183172,0.1138894200529619,0.11537796583403609,0.11686830194710626,0.11836036076322173,0.11985407794480754,0.12134939225228943,0.1228462453638694,0.12434458170744715,0.1258443483037677,0.12734549461995112,0.12884797243263083,0.1303517356999898,0.13185674044204188,0.13336294462855863,0.1348703080740902,0.13637879233957162,0.13788836064004822,0.1393989777580883,0.1409106099624865,0.14242322493189094,0.14393679168301618,0.14545128050312928,0.14696666288651994,0.1484829114746879,0.15],"y":[0.035,0.03525,0.0355,0.035750000000000004,0.036,0.03625,0.0365,0.03675,0.037000000000000005,0.03725,0.0375,0.037750000000000006,0.038,0.03825,0.0385,0.03875,0.039,0.03925,0.0395,0.03975,0.04,0.04025,0.0405,0.04075,0.040999999999999995,0.04125,0.0415,0.041749999999999995,0.042,0.042249999999999996,0.0425,0.04275,0.043,0.04324999999999999,0.0435,0.04375,0.044000000000000004,0.04425,0.044500000000000005,0.04475,0.045,0.045250000000000005,0.045500000000000006,0.04575,0.046000000000000006,0.04625,0.04650000000000001,0.04675000000000001,0.047,0.04724999999999999,0.0475,0.04775,0.048,0.04825,0.048499999999999995,0.04875,0.049,0.04925000000000001,0.049499999999999995,0.049749999999999996,0.05,0.05025,0.050499999999999996,0.05075,0.051,0.05125,0.051500000000000004,0.051750000000000004,0.052000000000000005,0.052250000000000005,0.0525,0.052750000000000005,0.053000000000000005,0.05325,0.0535,0.05375,0.054000000000000006,0.05425,0.05449999999999999,0.05474999999999999,0.05500000000000001,0.05525,0.0555,0.05575,0.055999999999999994,0.05625,0.0565,0.056749999999999995,0.057,0.057249999999999995,0.0575,0.057749999999999996,0.05800000000000001,0.05825,0.0585,0.05875,0.059000000000000004,0.059250000000000004,0.059500000000000004,0.05975,0.06],"type":"scatter"},{"customdata":[[[0.13202804395829393],[0.8679719560417061],[0.5166]]],"hovertemplate":"tangency portfolio<br>asset 1: %{customdata[0]:.1%}<br>asset 2: %{customdata[1]:.1%}<br>Sharpe ratio: %{customdata[2]:.4f}<br><extra></extra>","marker":{"color":"blue","size":10},"mode":"markers","name":"tangency portfolio","x":[0.035424964724284705],"y":[0.03830070109895735],"type":"scatter"},{"hovertemplate":"wealth in tangency portfolio = %{text:.0f}%<br>Sharpe ratio: 0.5166<extra></extra>","line":{"color":"blue"},"mode":"lines","name":"CAL: tangency portfolio","text":[0.0,2.0,4.0,6.0,8.0,10.0,12.0,14.000000000000002,16.0,18.0,20.0,22.0,24.0,26.0,28.000000000000004,30.0,32.0,34.0,36.0,38.0,40.0,42.0,44.0,46.0,48.0,50.0,52.0,54.0,56.00000000000001,57.99999999999999,60.0,62.0,64.0,66.0,68.0,70.0,72.0,74.0,76.0,78.0,80.0,82.0,84.0,86.0,88.0,90.0,92.0,94.0,96.0,98.0,100.0,102.0,104.0,106.0,108.0,110.00000000000001,112.00000000000001,114.00000000000001,115.99999999999999,118.0,120.0,122.0,124.0,126.0,128.0,130.0,132.0,134.0,136.0,138.0,140.0,142.0,144.0,146.0,148.0,150.0,152.0,154.0,156.0,158.0,160.0,162.0,164.0,166.0,168.0,170.0,172.0,174.0,176.0,178.0,180.0,182.0,184.0,186.0,188.0,190.0,192.0,194.0,196.0,198.0,200.0,202.0,204.0,206.0,208.0,210.0,212.0,214.0,216.0,218.00000000000003,220.00000000000003,222.00000000000003,224.00000000000003,226.00000000000003,228.00000000000003,230.00000000000003,231.99999999999997,234.0,236.0,238.0,240.0,242.0,244.0,246.0,248.0,250.0,252.0,254.0,256.0,258.0,260.0,262.0,264.0,266.0,268.0,270.0,272.0,274.0,276.0,278.0,280.0,282.0,284.0,286.0,288.0,290.0,292.0,294.0,296.0,298.0,300.0,302.0,304.0,306.0,308.0,310.0,312.0,314.0,316.0,318.0,320.0,322.0,324.0,326.0,328.0,330.0,332.0,334.0,336.0,338.0,340.0,342.0,344.0,346.0,348.0,350.0,352.0,354.0,356.0,358.0,360.0,362.0,364.0,366.0,368.0,370.0,372.0,374.0,376.0,378.0,380.0,382.0,384.0,386.0,388.0,390.0,392.0,394.0,396.0,398.0,400.0],"x":[0.0,0.0007084992944856941,0.0014169985889713882,0.0021254978834570823,0.0028339971779427764,0.0035424964724284705,0.004250995766914165,0.0049594950613998596,0.005667994355885553,0.006376493650371247,0.007084992944856941,0.007793492239342635,0.00850199153382833,0.009210490828314023,0.009918990122799719,0.010627489417285411,0.011335988711771106,0.0120444880062568,0.012752987300742494,0.013461486595228188,0.014169985889713882,0.014878485184199576,0.01558698447868527,0.016295483773170964,0.01700398306765666,0.017712482362142352,0.018420981656628047,0.01912948095111374,0.019837980245599438,0.02054647954008513,0.021254978834570823,0.021963478129056517,0.02267197742354221,0.023380476718027905,0.0240889760125136,0.024797475306999297,0.025505974601484988,0.02621447389597068,0.026922973190456376,0.02763147248494207,0.028339971779427764,0.02904847107391346,0.029756970368399152,0.030465469662884846,0.03117396895737054,0.031882468251856234,0.03259096754634193,0.03329946684082762,0.03400796613531332,0.03471646542979901,0.035424964724284705,0.0361334640187704,0.03684196331325609,0.03755046260774179,0.03825896190222748,0.038967461196713175,0.039675960491198876,0.04038445978568457,0.04109295908017026,0.04180145837465595,0.042509957669141646,0.04321845696362734,0.043926956258113034,0.04463545555259873,0.04534395484708442,0.046052454141570116,0.04676095343605581,0.047469452730541505,0.0481779520250272,0.0488864513195129,0.049594950613998594,0.05030344990848428,0.051011949202969975,0.05172044849745567,0.05242894779194136,0.05313744708642706,0.05384594638091275,0.054554445675398446,0.05526294496988414,0.055971444264369834,0.05667994355885553,0.05738844285334123,0.05809694214782692,0.05880544144231262,0.059513940736798304,0.060222440031284,0.06093093932576969,0.061639438620255387,0.06234793791474108,0.06305643720922678,0.06376493650371247,0.06447343579819817,0.06518193509268386,0.06589043438716956,0.06659893368165525,0.06730743297614095,0.06801593227062663,0.06872443156511232,0.06943293085959802,0.07014143015408371,0.07084992944856941,0.07155842874305511,0.0722669280375408,0.0729754273320265,0.07368392662651219,0.07439242592099789,0.07510092521548357,0.07580942450996928,0.07651792380445496,0.07722642309894066,0.07793492239342635,0.07864342168791205,0.07935192098239775,0.08006042027688344,0.08076891957136914,0.08147741886585483,0.08218591816034052,0.0828944174548262,0.0836029167493119,0.08431141604379759,0.08501991533828329,0.08572841463276898,0.08643691392725468,0.08714541322174037,0.08785391251622607,0.08856241181071176,0.08927091110519746,0.08997941039968316,0.09068790969416884,0.09139640898865455,0.09210490828314023,0.09281340757762593,0.09352190687211162,0.09423040616659732,0.09493890546108301,0.09564740475556871,0.0963559040500544,0.0970644033445401,0.0977729026390258,0.09848140193351149,0.09918990122799719,0.09989840052248286,0.10060689981696856,0.10131539911145425,0.10202389840593995,0.10273239770042564,0.10344089699491134,0.10414939628939703,0.10485789558388273,0.10556639487836841,0.10627489417285411,0.10698339346733982,0.1076918927618255,0.1084003920563112,0.10910889135079689,0.10981739064528259,0.11052588993976828,0.11123438923425398,0.11194288852873967,0.11265138782322537,0.11335988711771106,0.11406838641219676,0.11477688570668246,0.11548538500116814,0.11619388429565385,0.11690238359013953,0.11761088288462523,0.11831938217911091,0.11902788147359661,0.1197363807680823,0.120444880062568,0.12115337935705368,0.12186187865153938,0.12257037794602507,0.12327887724051077,0.12398737653499647,0.12469587582948216,0.12540437512396785,0.12611287441845356,0.12682137371293925,0.12752987300742494,0.12823837230191062,0.12894687159639634,0.12965537089088203,0.13036387018536771,0.1310723694798534,0.13178086877433912,0.1324893680688248,0.1331978673633105,0.1339063666577962,0.1346148659522819,0.13532336524676758,0.13603186454125327,0.13674036383573895,0.13744886313022464,0.13815736242471036,0.13886586171919604,0.13957436101368173,0.14028286030816742,0.14099135960265313,0.14169985889713882],"y":[0.02,0.020366014021979146,0.020732028043958295,0.02109804206593744,0.02146405608791659,0.021830070109895735,0.022196084131874884,0.02256209815385403,0.022928112175833175,0.023294126197812324,0.02366014021979147,0.02402615424177062,0.024392168263749764,0.02475818228572891,0.02512419630770806,0.025490210329687204,0.025856224351666353,0.0262222383736455,0.026588252395624644,0.026954266417603793,0.027320280439582942,0.027686294461562087,0.028052308483541233,0.028418322505520382,0.028784336527499527,0.029150350549478676,0.029516364571457822,0.029882378593436967,0.030248392615416116,0.030614406637395262,0.03098042065937441,0.031346434681353556,0.0317124487033327,0.032078462725311854,0.032444476747291,0.032810490769270145,0.03317650479124929,0.033542518813228436,0.03390853283520759,0.034274546857186734,0.03464056087916588,0.035006574901145025,0.03537258892312417,0.03573860294510332,0.03610461696708247,0.036470630989061614,0.03683664501104077,0.037202659033019905,0.03756867305499906,0.037934687076978196,0.03830070109895735,0.0386667151209365,0.03903272914291564,0.03939874316489479,0.03976475718687394,0.04013077120885308,0.040496785230832236,0.04086279925281138,0.04122881327479053,0.041594827296769665,0.04196084131874882,0.04232685534072796,0.04269286936270711,0.04305888338468626,0.04342489740666541,0.04379091142864455,0.044156925450623705,0.04452293947260285,0.044888953494581996,0.04525496751656115,0.04562098153854029,0.04598699556051943,0.04635300958249858,0.04671902360447773,0.047085037626456876,0.04745105164843602,0.047817065670415174,0.04818307969239432,0.048549093714373465,0.04891510773635262,0.049281121758331756,0.04964713578031091,0.050013149802290054,0.0503791638242692,0.050745177846248345,0.05111119186822749,0.05147720589020664,0.05184321991218578,0.052209233934164934,0.052575247956144086,0.052941261978123225,0.05330727600010238,0.05367329002208153,0.05403930404406067,0.05440531806603982,0.05477133208801896,0.05513734610999811,0.05550336013197725,0.0558693741539564,0.056235388175935555,0.056601402197914694,0.056967416219893846,0.057333430241873,0.05769944426385214,0.05806545828583129,0.05843147230781043,0.05879748632978958,0.05916350035176873,0.05952951437374787,0.059895528395727024,0.060261542417706176,0.060627556439685315,0.06099357046166447,0.061359584483643606,0.06172559850562276,0.06209161252760191,0.06245762654958105,0.06282364057156019,0.06318965459353934,0.06355566861551849,0.06392168263749763,0.06428769665947678,0.06465371068145592,0.06501972470343508,0.06538573872541423,0.06575175274739337,0.06611776676937252,0.06648378079135167,0.06684979481333081,0.06721580883530996,0.06758182285728911,0.06794783687926825,0.0683138509012474,0.06867986492322654,0.0690458789452057,0.06941189296718485,0.06977790698916399,0.07014392101114314,0.07050993503312229,0.07087594905510143,0.07124196307708058,0.07160797709905972,0.07197399112103886,0.07234000514301801,0.07270601916499717,0.0730720331869763,0.07343804720895546,0.07380406123093461,0.07417007525291375,0.0745360892748929,0.07490210329687205,0.07526811731885119,0.07563413134083034,0.07600014536280948,0.07636615938478863,0.07673217340676779,0.07709818742874693,0.07746420145072608,0.07783021547270523,0.07819622949468437,0.07856224351666352,0.07892825753864266,0.07929427156062181,0.07966028558260096,0.0800262996045801,0.08039231362655926,0.08075832764853841,0.08112434167051755,0.08149035569249669,0.08185636971447584,0.08222238373645498,0.08258839775843413,0.08295441178041328,0.08332042580239243,0.08368643982437157,0.08405245384635072,0.08441846786832988,0.08478448189030902,0.08515049591228817,0.0855165099342673,0.08588252395624646,0.08624853797822561,0.08661455200020475,0.0869805660221839,0.08734658004416306,0.0877125940661422,0.08807860808812135,0.08844462211010048,0.08881063613207964,0.08917665015405879,0.08954266417603793,0.08990867819801708,0.09027469221999622,0.09064070624197537,0.09100672026395451,0.09137273428593366,0.0917387483079128,0.09210476232989195,0.0924707763518711,0.09283679037385024,0.0932028043958294],"type":"scatter"},{"hovertemplate":"indifference curve for <br> optimal utility for risk aversion of 6<extra></extra>","line":{"color":"purple","dash":"dot"},"mode":"lines","name":"Risk Aversion=6","x":[0.0,0.002121212121212121,0.004242424242424242,0.006363636363636363,0.008484848484848484,0.010606060606060605,0.012727272727272726,0.014848484848484847,0.016969696969696968,0.01909090909090909,0.02121212121212121,0.023333333333333334,0.025454545454545452,0.027575757575757573,0.029696969696969694,0.031818181818181815,0.033939393939393936,0.03606060606060606,0.03818181818181818,0.040303030303030306,0.04242424242424242,0.04454545454545454,0.04666666666666667,0.04878787878787878,0.050909090909090904,0.05303030303030303,0.055151515151515146,0.05727272727272727,0.05939393939393939,0.06151515151515151,0.06363636363636363,0.06575757575757575,0.06787878787878787,0.06999999999999999,0.07212121212121211,0.07424242424242423,0.07636363636363636,0.07848484848484848,0.08060606060606061,0.08272727272727272,0.08484848484848484,0.08696969696969696,0.08909090909090908,0.0912121212121212,0.09333333333333334,0.09545454545454544,0.09757575757575757,0.09969696969696969,0.10181818181818181,0.10393939393939393,0.10606060606060606,0.10818181818181817,0.11030303030303029,0.11242424242424241,0.11454545454545453,0.11666666666666664,0.11878787878787878,0.1209090909090909,0.12303030303030302,0.12515151515151512,0.12727272727272726,0.12939393939393937,0.1315151515151515,0.13363636363636364,0.13575757575757574,0.13787878787878785,0.13999999999999999,0.14212121212121212,0.14424242424242423,0.14636363636363636,0.14848484848484847,0.1506060606060606,0.1527272727272727,0.15484848484848485,0.15696969696969695,0.1590909090909091,0.16121212121212122,0.1633333333333333,0.16545454545454544,0.16757575757575754,0.16969696969696968,0.1718181818181818,0.17393939393939392,0.17606060606060606,0.17818181818181816,0.1803030303030303,0.1824242424242424,0.18454545454545454,0.18666666666666668,0.18878787878787875,0.1909090909090909,0.193030303030303,0.19515151515151513,0.19727272727272724,0.19939393939393937,0.2015151515151515,0.20363636363636362,0.20575757575757575,0.20787878787878786,0.21],"y":[0.042240029385618834,0.04225352800820836,0.04229402387597696,0.04236151698892462,0.04245600734705134,0.04257749495035713,0.042725979798841976,0.042901461892505884,0.04310394123134886,0.0433334178153709,0.043589891644572,0.04387336271895217,0.044183831038511395,0.04452129660324969,0.04488575941316704,0.04527721946826346,0.045695676768538945,0.046141131313993486,0.0466135831046271,0.04711303214043977,0.04763947842143151,0.0481929219476023,0.04877336271895217,0.04938080073548109,0.05001523599718908,0.050676668504076136,0.051365098256142244,0.052080525253387425,0.05282294949581167,0.053592370983414975,0.054388789716197344,0.05521220569415877,0.05606261891729927,0.05694002938561883,0.057844437099117456,0.05877584205779514,0.059734244261651886,0.0607196437106877,0.061732040404902586,0.06277143434429652,0.06383782552886952,0.06493121395862159,0.06605159963355271,0.06719898255366291,0.06837336271895217,0.06957474012942048,0.07080311478506786,0.0720584866858943,0.07334085583189982,0.0746502222230844,0.07598658585944804,0.07734994674099073,0.0787403048677125,0.08015766023961332,0.08160201285669322,0.08307336271895216,0.08457170982639017,0.08609705417900726,0.08764939577680339,0.0892287346197786,0.09083507070793287,0.09246840404126619,0.09412873461977861,0.09581606244347007,0.09753038751234058,0.09927170982639016,0.10104002938561882,0.10283534619002654,0.10465766023961331,0.10650697153437916,0.10838328007432405,0.11028658585944803,0.11221688888975107,0.11417418916523314,0.11615848668589429,0.11816978145173454,0.12020807346275383,0.12227336271895214,0.12436564922032955,0.126484932966886,0.12863121395862157,0.13080449219553617,0.13300476767762984,0.13523204040490258,0.13748631037735434,0.13976757759498523,0.1420758420577951,0.14441110376578412,0.14677336271895217,0.14916261891729923,0.15157887236082543,0.15402212304953064,0.15649237098341495,0.1589896161624783,0.16151385858672074,0.16406509825614224,0.16664333517074278,0.1692485693305224,0.17188080073548107,0.1745400293856188],"type":"scatter"},{"hovertemplate":"indifference curve for <br> optimal utility for risk aversion of 10<extra></extra>","line":{"color":"purple"},"mode":"lines","name":"Risk Aversion=10","x":[0.0,0.002121212121212121,0.004242424242424242,0.006363636363636363,0.008484848484848484,0.010606060606060605,0.012727272727272726,0.014848484848484847,0.016969696969696968,0.01909090909090909,0.02121212121212121,0.023333333333333334,0.025454545454545452,0.027575757575757573,0.029696969696969694,0.031818181818181815,0.033939393939393936,0.03606060606060606,0.03818181818181818,0.040303030303030306,0.04242424242424242,0.04454545454545454,0.04666666666666667,0.04878787878787878,0.050909090909090904,0.05303030303030303,0.055151515151515146,0.05727272727272727,0.05939393939393939,0.06151515151515151,0.06363636363636363,0.06575757575757575,0.06787878787878787,0.06999999999999999,0.07212121212121211,0.07424242424242423,0.07636363636363636,0.07848484848484848,0.08060606060606061,0.08272727272727272,0.08484848484848484,0.08696969696969696,0.08909090909090908,0.0912121212121212,0.09333333333333334,0.09545454545454544,0.09757575757575757,0.09969696969696969,0.10181818181818181,0.10393939393939393,0.10606060606060606,0.10818181818181817,0.11030303030303029,0.11242424242424241,0.11454545454545453,0.11666666666666664,0.11878787878787878,0.1209090909090909,0.12303030303030302,0.12515151515151512,0.12727272727272726,0.12939393939393937,0.1315151515151515,0.13363636363636364,0.13575757575757574,0.13787878787878785,0.13999999999999999,0.14212121212121212,0.14424242424242423,0.14636363636363636,0.14848484848484847,0.1506060606060606,0.1527272727272727,0.15484848484848485,0.15696969696969695,0.1590909090909091,0.16121212121212122,0.1633333333333333,0.16545454545454544,0.16757575757575754,0.16969696969696968,0.1718181818181818,0.17393939393939392,0.17606060606060606,0.17818181818181816,0.1803030303030303,0.1824242424242424,0.18454545454545454,0.18666666666666668,0.18878787878787875,0.1909090909090909,0.193030303030303,0.19515151515151513,0.19727272727272724,0.19939393939393937,0.2015151515151515,0.20363636363636362,0.20575757575757575,0.20787878787878786,0.21],"y":[0.033344017631371306,0.03336651533568719,0.03343400844863485,0.03354649697021428,0.033703980900425486,0.03390646023926846,0.034153934986743205,0.034446405142849724,0.03478387070758802,0.035166331680958084,0.035593788062959916,0.03606623985359353,0.03658368705285891,0.03714612966075606,0.03775356767728499,0.038406001102445686,0.03910342993623815,0.0398458541786624,0.04063327382971841,0.0414656888894062,0.04234309935772576,0.043265505234677086,0.0442329065202602,0.04524530321447506,0.046302695317321715,0.04740508282880014,0.048552465748910326,0.0497448440776523,0.05098221781502603,0.05226458696103154,0.05359195151566882,0.05496431147893788,0.0563816668508387,0.0578440176313713,0.05935136382053567,0.060903705418331816,0.06250104242475973,0.06414337483981941,0.06583070266351089,0.0675630258958341,0.06934034453678911,0.07116265858637588,0.07302996804459444,0.07494227291144476,0.07689957318692686,0.07890186887104073,0.08094915996378635,0.08304144646516376,0.08517872837517296,0.0873610056938139,0.08958827842108665,0.09186054655699114,0.0941778101015274,0.09654006905469545,0.09894732341649526,0.10139957318692683,0.1038968183659902,0.10643905895368534,0.10902629495001225,0.11165852635497091,0.11433575316856136,0.11705797539078357,0.11982519302163758,0.12263740606112337,0.12549461450924088,0.12839681836599018,0.13134401763137127,0.13433621230538417,0.13737340238802875,0.14045558787930518,0.14358276877921333,0.1467549450877533,0.149972116804925,0.15323428393072852,0.15654144646516377,0.1598936044082308,0.16329075775992963,0.16673290652026013,0.17022005068922252,0.1737521902668166,0.1773293252530425,0.18095145564790016,0.18461858145138965,0.18833070266351087,0.19208781928426383,0.19588993131364862,0.1997370387516651,0.20362914159831347,0.20756623985359357,0.21154833351750535,0.21557542259004897,0.21964750707122432,0.22376458696103146,0.2279266622594704,0.2321337329665411,0.2363857990822436,0.2406828606065779,0.24502491753954392,0.24941196988114167,0.25384401763137127],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"range":[0,0.1875],"tickformat":".0%"},"yaxis":{"title":{"text":"Expected Return"},"range":[0,0.075],"tickformat":".0%"},"legend":{"yanchor":"top","y":0.5,"xanchor":"left","x":0.6}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('ab734883-78fb-4b64-9836-81c3d6a9493a');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.13: Preferences and Efficient Portfolios</figcaption><p></p>
</figure>
</div>
</div>
<p><a href="#fig-tangency-cal-allocation-by-riskaversion">Figure&nbsp;<span>2.14</span></a> plots the tangency portfolio weight (<a href="#eq-opt-wgt-tangency">Equation&nbsp;<span>2.18</span></a>) as a function of risk aversion. For the assumed inputs, investors with risk aversions below about 15 would choose a levered position in the tangency portfolio. That is, they would find it optimal to borrow money and invest it and their initial investment wealth in the tangency portfolio.</p>
<div class="cell" data-execution_count="15">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>mn_stock <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>mn_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>sd_stock <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>sd_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>raver1 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>raver2 <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c, rs, extra):</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra   </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_s"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rs)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_b"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rb)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky(mn, sd, rs, rb, w_min, w_max):</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rs <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rs) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> rb <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rb)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>    srs <span class="op">=</span> (mn <span class="op">-</span> rs)<span class="op">/</span>sd</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>    srb <span class="op">=</span> (mn <span class="op">-</span> rb)<span class="op">/</span>sd</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds, srs, srb</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> opt_utility(mns, cov, Shorts, s, b, A):</span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># P is a portfolio object based on expected returns, covariance matrix, and shorts</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts) </span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> s<span class="op">==</span>b:</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">#tangency exp ret and sd</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>            portTang <span class="op">=</span> P.tangency(s)</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>            mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>                sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>                <span class="co">#optimal weight in tangency based on risk-aversion</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> (mnTang <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTang<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>                expret<span class="op">=</span> wgt<span class="op">*</span>mnTang <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> wgt<span class="op">*</span>sdTang </span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> wgt</span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient low-risk portfolio</span></span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>            portTangLowRisk <span class="op">=</span> P.tangency(s)</span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>            mnTangLowRisk <span class="op">=</span> portTangLowRisk <span class="op">@</span> mns</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangLowRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>                sdTangLowRisk <span class="op">=</span> np.sqrt(portTangLowRisk <span class="op">@</span> cov <span class="op">@</span> portTangLowRisk)</span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient high-risk portfolio</span></span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ((b<span class="op">&lt;</span>gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a>            portTangHighRisk <span class="op">=</span> P.tangency(b)</span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a>            mnTangHighRisk <span class="op">=</span> portTangHighRisk <span class="op">@</span> mns</span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangHighRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>                sdTangHighRisk <span class="op">=</span> np.sqrt(portTangHighRisk <span class="op">@</span> cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">#1st: efficient low risk CAL</span></span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTangLowRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a>        expret<span class="op">=</span> wgt<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a>        sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangLowRisk </span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>        wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a>        wgt_lo <span class="op">=</span> wgt</span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a>        wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print('Weight low risk CAL: ', wgt)</span></span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> wgt <span class="op">&gt;</span> <span class="fl">1.0</span>:</span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a>            <span class="co">#2nd: efficient high risk CAL</span></span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a>            wgt <span class="op">=</span> (mnTangHighRisk <span class="op">-</span> b) <span class="op">/</span> (A <span class="op">*</span> (sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a>            expret<span class="op">=</span> wgt<span class="op">*</span>mnTangHighRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>b</span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a>            sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangHighRisk </span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a>            wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a>            wgt_lo <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a>            wgt_hi <span class="op">=</span> wgt</span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a>            <span class="co"># print('Weight high risk CAL: ', wgt)</span></span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> wgt <span class="op">&lt;</span> <span class="fl">1.0</span>:</span>
<span id="cb18-106"><a href="#cb18-106" aria-hidden="true" tabindex="-1"></a>                <span class="co">#3rd: risky asset frontier</span></span>
<span id="cb18-107"><a href="#cb18-107" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> <span class="dv">1</span> <span class="co">#This is should be interpreted as total weight in risky assets.</span></span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Method 1: solve analytically for utility-maximizing mix of efficient low and high risk portfolios</span></span>
<span id="cb18-109"><a href="#cb18-109" aria-hidden="true" tabindex="-1"></a>                cov_hilo <span class="op">=</span> portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk</span>
<span id="cb18-110"><a href="#cb18-110" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> mnTangHighRisk <span class="op">-</span> A <span class="op">*</span>(cov_hilo  <span class="op">-</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))<span class="op">/</span>(A<span class="op">*</span>(sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">2</span><span class="op">*</span>cov_hilo))</span>
<span id="cb18-111"><a href="#cb18-111" aria-hidden="true" tabindex="-1"></a>                expret <span class="op">=</span> wgt_lo<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span> mnTangHighRisk</span>
<span id="cb18-112"><a href="#cb18-112" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> np.sqrt((wgt_lo<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span>sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> ((<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>wgt_lo<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span>portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb18-113"><a href="#cb18-113" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt_lo</span>
<span id="cb18-114"><a href="#cb18-114" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb18-115"><a href="#cb18-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-116"><a href="#cb18-116" aria-hidden="true" tabindex="-1"></a>                <span class="co"># #Method 2: calculate frontier manually and choose max utility</span></span>
<span id="cb18-117"><a href="#cb18-117" aria-hidden="true" tabindex="-1"></a>                <span class="co"># eret_grid = np.linspace(mnTangLowRisk, mnTangHighRisk, 100)</span></span>
<span id="cb18-118"><a href="#cb18-118" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df = pd.DataFrame(dtype='float', columns=['mn','sd','u'],index=np.arange(0,100))</span></span>
<span id="cb18-119"><a href="#cb18-119" aria-hidden="true" tabindex="-1"></a>                <span class="co"># for i,m in enumerate(eret_grid):</span></span>
<span id="cb18-120"><a href="#cb18-120" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     portFrontier = P.frontier(m)</span></span>
<span id="cb18-121"><a href="#cb18-121" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'mn'] = portFrontier @ mns</span></span>
<span id="cb18-122"><a href="#cb18-122" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'sd'] = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb18-123"><a href="#cb18-123" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df['u']  = df['mn'] - 0.5*A* df['sd']**2</span></span>
<span id="cb18-124"><a href="#cb18-124" aria-hidden="true" tabindex="-1"></a>                <span class="co"># opt_mn = df.loc[df['u'].idxmax(),'mn']</span></span>
<span id="cb18-125"><a href="#cb18-125" aria-hidden="true" tabindex="-1"></a>                <span class="co"># portFrontier = P.frontier(opt_mn)</span></span>
<span id="cb18-126"><a href="#cb18-126" aria-hidden="true" tabindex="-1"></a>                <span class="co"># expret = portFrontier @ mns</span></span>
<span id="cb18-127"><a href="#cb18-127" aria-hidden="true" tabindex="-1"></a>                <span class="co"># sdret  = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb18-128"><a href="#cb18-128" aria-hidden="true" tabindex="-1"></a>                <span class="co"># print('Weight frontier: ', wgt)</span></span>
<span id="cb18-129"><a href="#cb18-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-130"><a href="#cb18-130" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> expret <span class="op">-</span> <span class="fl">0.5</span><span class="op">*</span>A<span class="op">*</span>sdret<span class="op">**</span><span class="dv">2</span></span>
<span id="cb18-131"><a href="#cb18-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> u, wgt, wgt_rf, wgt_lo, wgt_hi</span>
<span id="cb18-132"><a href="#cb18-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-133"><a href="#cb18-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-134"><a href="#cb18-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-135"><a href="#cb18-135" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c, rs, extra, raver1, raver2, asset1_name, asset2_name):</span>
<span id="cb18-136"><a href="#cb18-136" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c, rs, extra)</span>
<span id="cb18-137"><a href="#cb18-137" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-138"><a href="#cb18-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Plot the portfolios of the two assets</span></span>
<span id="cb18-139"><a href="#cb18-139" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb18-140"><a href="#cb18-140" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb18-141"><a href="#cb18-141" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb18-142"><a href="#cb18-142" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb18-143"><a href="#cb18-143" aria-hidden="true" tabindex="-1"></a>        <span class="co"># line={'color': green},</span></span>
<span id="cb18-144"><a href="#cb18-144" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb18-145"><a href="#cb18-145" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb18-146"><a href="#cb18-146" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>asset1_name<span class="op">+</span><span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb18-147"><a href="#cb18-147" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb18-148"><a href="#cb18-148" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Stock &amp; Bond Frontier"</span></span>
<span id="cb18-149"><a href="#cb18-149" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-150"><a href="#cb18-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-151"><a href="#cb18-151" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb18-152"><a href="#cb18-152" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb18-153"><a href="#cb18-153" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb18-154"><a href="#cb18-154" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb18-155"><a href="#cb18-155" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb18-156"><a href="#cb18-156" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb18-157"><a href="#cb18-157" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb18-158"><a href="#cb18-158" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb18-159"><a href="#cb18-159" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb18-160"><a href="#cb18-160" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb18-161"><a href="#cb18-161" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb18-162"><a href="#cb18-162" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-163"><a href="#cb18-163" aria-hidden="true" tabindex="-1"></a>    trace2b <span class="op">=</span> go.Scatter(</span>
<span id="cb18-164"><a href="#cb18-164" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb18-165"><a href="#cb18-165" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb18-166"><a href="#cb18-166" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb18-167"><a href="#cb18-167" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb18-168"><a href="#cb18-168" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb18-169"><a href="#cb18-169" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb18-170"><a href="#cb18-170" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb18-171"><a href="#cb18-171" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-172"><a href="#cb18-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-173"><a href="#cb18-173" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb18-174"><a href="#cb18-174" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2a)</span>
<span id="cb18-175"><a href="#cb18-175" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2b)</span>
<span id="cb18-176"><a href="#cb18-176" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb18-177"><a href="#cb18-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-178"><a href="#cb18-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-179"><a href="#cb18-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-180"><a href="#cb18-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports,srTang,borrow_flag):</span>
<span id="cb18-181"><a href="#cb18-181" aria-hidden="true" tabindex="-1"></a>        <span class="co"># borrow_flag=1 adds statement about "relative to borrowing rate"</span></span>
<span id="cb18-182"><a href="#cb18-182" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N<span class="op">+</span><span class="dv">1</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb18-183"><a href="#cb18-183" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb18-184"><a href="#cb18-184" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb18-185"><a href="#cb18-185" aria-hidden="true" tabindex="-1"></a>        cd[:,N] <span class="op">=</span> np.<span class="bu">round</span>(srTang,<span class="dv">4</span>)</span>
<span id="cb18-186"><a href="#cb18-186" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(cd)</span></span>
<span id="cb18-187"><a href="#cb18-187" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb18-188"><a href="#cb18-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb18-189"><a href="#cb18-189" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"asset "</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb18-190"><a href="#cb18-190" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb18-191"><a href="#cb18-191" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb18-192"><a href="#cb18-192" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb18-193"><a href="#cb18-193" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> borrow_flag<span class="op">==</span><span class="dv">1</span>:</span>
<span id="cb18-194"><a href="#cb18-194" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio (relative to borrowing rate): %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span>    </span>
<span id="cb18-195"><a href="#cb18-195" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb18-196"><a href="#cb18-196" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio: %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span></span>
<span id="cb18-197"><a href="#cb18-197" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb18-198"><a href="#cb18-198" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd  </span>
<span id="cb18-199"><a href="#cb18-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-200"><a href="#cb18-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the tangency portfolios</span></span>
<span id="cb18-201"><a href="#cb18-201" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb18-202"><a href="#cb18-202" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra     </span>
<span id="cb18-203"><a href="#cb18-203" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb18-204"><a href="#cb18-204" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb18-205"><a href="#cb18-205" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb18-206"><a href="#cb18-206" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array(mns) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb18-207"><a href="#cb18-207" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb18-208"><a href="#cb18-208" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array(sds) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb18-209"><a href="#cb18-209" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb18-210"><a href="#cb18-210" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb18-211"><a href="#cb18-211" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb18-212"><a href="#cb18-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-213"><a href="#cb18-213" aria-hidden="true" tabindex="-1"></a>    Shorts <span class="op">=</span> <span class="fl">0.0</span>     </span>
<span id="cb18-214"><a href="#cb18-214" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="bu">len</span>(mns)</span>
<span id="cb18-215"><a href="#cb18-215" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts)    </span>
<span id="cb18-216"><a href="#cb18-216" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb18-217"><a href="#cb18-217" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('GMV return is: ',gmv)</span></span>
<span id="cb18-218"><a href="#cb18-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rs <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb18-219"><a href="#cb18-219" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rs)</span>
<span id="cb18-220"><a href="#cb18-220" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb18-221"><a href="#cb18-221" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb18-222"><a href="#cb18-222" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb18-223"><a href="#cb18-223" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rs)<span class="op">/</span>sdTang</span>
<span id="cb18-224"><a href="#cb18-224" aria-hidden="true" tabindex="-1"></a>            string0 <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb18-225"><a href="#cb18-225" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string0, [portTang], srTang,<span class="dv">0</span>)</span>
<span id="cb18-226"><a href="#cb18-226" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb18-227"><a href="#cb18-227" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb18-228"><a href="#cb18-228" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb18-229"><a href="#cb18-229" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb18-230"><a href="#cb18-230" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb18-231"><a href="#cb18-231" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb18-232"><a href="#cb18-232" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb18-233"><a href="#cb18-233" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>string0</span>
<span id="cb18-234"><a href="#cb18-234" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb18-235"><a href="#cb18-235" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb18-236"><a href="#cb18-236" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb18-237"><a href="#cb18-237" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (no leverage)</span></span>
<span id="cb18-238"><a href="#cb18-238" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> rb<span class="op">==</span>rs:</span>
<span id="cb18-239"><a href="#cb18-239" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">4.0</span></span>
<span id="cb18-240"><a href="#cb18-240" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb18-241"><a href="#cb18-241" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb18-242"><a href="#cb18-242" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>,<span class="dv">0</span>, max_wgt)</span>
<span id="cb18-243"><a href="#cb18-243" aria-hidden="true" tabindex="-1"></a>            portlabel <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb18-244"><a href="#cb18-244" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>portlabel <span class="op">+</span> <span class="st">" = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span>  <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb18-245"><a href="#cb18-245" aria-hidden="true" tabindex="-1"></a>            trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb18-246"><a href="#cb18-246" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb18-247"><a href="#cb18-247" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb18-248"><a href="#cb18-248" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb18-249"><a href="#cb18-249" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb18-250"><a href="#cb18-250" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb18-251"><a href="#cb18-251" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb18-252"><a href="#cb18-252" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span> <span class="op">+</span> portlabel</span>
<span id="cb18-253"><a href="#cb18-253" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb18-254"><a href="#cb18-254" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5)</span>
<span id="cb18-255"><a href="#cb18-255" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb18-256"><a href="#cb18-256" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb18-257"><a href="#cb18-257" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb18-258"><a href="#cb18-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-259"><a href="#cb18-259" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs) <span class="kw">and</span> ((gmv <span class="op">&gt;</span> rb) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb18-260"><a href="#cb18-260" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rb)</span>
<span id="cb18-261"><a href="#cb18-261" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb18-262"><a href="#cb18-262" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb18-263"><a href="#cb18-263" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb18-264"><a href="#cb18-264" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rb)<span class="op">/</span>sdTang</span>
<span id="cb18-265"><a href="#cb18-265" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">'efficient high mean portfolio'</span></span>
<span id="cb18-266"><a href="#cb18-266" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string, [portTang], srTang,<span class="dv">1</span>)</span>
<span id="cb18-267"><a href="#cb18-267" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb18-268"><a href="#cb18-268" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb18-269"><a href="#cb18-269" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb18-270"><a href="#cb18-270" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb18-271"><a href="#cb18-271" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb18-272"><a href="#cb18-272" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb18-273"><a href="#cb18-273" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb18-274"><a href="#cb18-274" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"efficient high mean portfolio"</span></span>
<span id="cb18-275"><a href="#cb18-275" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb18-276"><a href="#cb18-276" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb18-277"><a href="#cb18-277" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb18-278"><a href="#cb18-278" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)            </span></span>
<span id="cb18-279"><a href="#cb18-279" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb18-280"><a href="#cb18-280" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in efficient high mean portfolio = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio (relative to borrowing rate): "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb18-281"><a href="#cb18-281" aria-hidden="true" tabindex="-1"></a>            trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb18-282"><a href="#cb18-282" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb18-283"><a href="#cb18-283" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb18-284"><a href="#cb18-284" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb18-285"><a href="#cb18-285" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb18-286"><a href="#cb18-286" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb18-287"><a href="#cb18-287" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb18-288"><a href="#cb18-288" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean"</span></span>
<span id="cb18-289"><a href="#cb18-289" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb18-290"><a href="#cb18-290" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6)   </span>
<span id="cb18-291"><a href="#cb18-291" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb18-292"><a href="#cb18-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-293"><a href="#cb18-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-294"><a href="#cb18-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-295"><a href="#cb18-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-296"><a href="#cb18-296" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility plot info</span></span>
<span id="cb18-297"><a href="#cb18-297" aria-hidden="true" tabindex="-1"></a>    u1, wgt1, wgt_rf1, wgt_lo1, wgt_hi1 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver1)</span>
<span id="cb18-298"><a href="#cb18-298" aria-hidden="true" tabindex="-1"></a>    u2, wgt2, wgt_rf2, wgt_lo2, wgt_hi2 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver2)</span>
<span id="cb18-299"><a href="#cb18-299" aria-hidden="true" tabindex="-1"></a>    string1<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver1)</span>
<span id="cb18-300"><a href="#cb18-300" aria-hidden="true" tabindex="-1"></a>    string2<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver2)</span>
<span id="cb18-301"><a href="#cb18-301" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>,<span class="fl">1.4</span>,<span class="dv">100</span>)</span>
<span id="cb18-302"><a href="#cb18-302" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w<span class="op">*</span>np.<span class="bu">max</span>(sds) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb18-303"><a href="#cb18-303" aria-hidden="true" tabindex="-1"></a>    eret1 <span class="op">=</span> [u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver1<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds]</span>
<span id="cb18-304"><a href="#cb18-304" aria-hidden="true" tabindex="-1"></a>    eret2 <span class="op">=</span> [u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver2<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds] </span>
<span id="cb18-305"><a href="#cb18-305" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df = pd.DataFrame(data={'Standard Deviation': sds, string1: U1, string2: U2})</span></span>
<span id="cb18-306"><a href="#cb18-306" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver1,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb18-307"><a href="#cb18-307" aria-hidden="true" tabindex="-1"></a>    trace7 <span class="op">=</span> go.Scatter(</span>
<span id="cb18-308"><a href="#cb18-308" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret1, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string1, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>,dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb18-309"><a href="#cb18-309" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb18-310"><a href="#cb18-310" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver2,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb18-311"><a href="#cb18-311" aria-hidden="true" tabindex="-1"></a>    trace8 <span class="op">=</span> go.Scatter(</span>
<span id="cb18-312"><a href="#cb18-312" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret2, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string2, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>),</span>
<span id="cb18-313"><a href="#cb18-313" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb18-314"><a href="#cb18-314" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace7) </span>
<span id="cb18-315"><a href="#cb18-315" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace8) </span>
<span id="cb18-316"><a href="#cb18-316" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb18-317"><a href="#cb18-317" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-318"><a href="#cb18-318" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb18-319"><a href="#cb18-319" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb18-320"><a href="#cb18-320" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb18-321"><a href="#cb18-321" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb18-322"><a href="#cb18-322" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb18-323"><a href="#cb18-323" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb18-324"><a href="#cb18-324" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.74</span>))</span>
<span id="cb18-325"><a href="#cb18-325" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.show()</span></span>
<span id="cb18-326"><a href="#cb18-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-327"><a href="#cb18-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-328"><a href="#cb18-328" aria-hidden="true" tabindex="-1"></a>    <span class="co">#2nd plot of risky asset share as function of risk aversion:</span></span>
<span id="cb18-329"><a href="#cb18-329" aria-hidden="true" tabindex="-1"></a>    ravers <span class="op">=</span> np.arange(<span class="fl">0.2</span>,<span class="dv">20</span>,<span class="fl">0.1</span>)</span>
<span id="cb18-330"><a href="#cb18-330" aria-hidden="true" tabindex="-1"></a>    cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ravers),<span class="dv">5</span>,<span class="dv">1</span>),dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb18-331"><a href="#cb18-331" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> [opt_utility(mns, cov, Shorts, rs, rb, A) <span class="cf">for</span> A <span class="kw">in</span> ravers]</span>
<span id="cb18-332"><a href="#cb18-332" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(wgts, columns<span class="op">=</span>[<span class="st">'u'</span>,<span class="st">'wgt_risky'</span>,<span class="st">'wgt_rf'</span>,<span class="st">'wgt_lowrisk'</span>,<span class="st">'wgt_highrisk'</span>])</span>
<span id="cb18-333"><a href="#cb18-333" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs):</span>
<span id="cb18-334"><a href="#cb18-334" aria-hidden="true" tabindex="-1"></a>        custdat <span class="op">=</span> np.empty(shape<span class="op">=</span>(df.shape[<span class="dv">0</span>],<span class="dv">3</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb18-335"><a href="#cb18-335" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">0</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_rf).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb18-336"><a href="#cb18-336" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">1</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_lowrisk).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb18-337"><a href="#cb18-337" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">2</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_highrisk).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb18-338"><a href="#cb18-338" aria-hidden="true" tabindex="-1"></a>        string <span class="op">=</span> <span class="st">'risk-free: %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb18-339"><a href="#cb18-339" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'efficient low-risk: %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb18-340"><a href="#cb18-340" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'efficient high-risk: %</span><span class="sc">{customdata[2]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb18-341"><a href="#cb18-341" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb18-342"><a href="#cb18-342" aria-hidden="true" tabindex="-1"></a>        trace1 <span class="op">=</span> go.Scatter(x<span class="op">=</span>ravers,y<span class="op">=</span>df[<span class="st">'wgt_risky'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>custdat,hovertemplate<span class="op">=</span>string, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>))</span>
<span id="cb18-343"><a href="#cb18-343" aria-hidden="true" tabindex="-1"></a>        fig <span class="op">=</span> go.Figure()</span>
<span id="cb18-344"><a href="#cb18-344" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(trace1)</span>
<span id="cb18-345"><a href="#cb18-345" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-346"><a href="#cb18-346" aria-hidden="true" tabindex="-1"></a>        custdat <span class="op">=</span> np.empty(shape<span class="op">=</span>(df.shape[<span class="dv">0</span>],<span class="dv">2</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb18-347"><a href="#cb18-347" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">0</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_rf).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb18-348"><a href="#cb18-348" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">1</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_lowrisk).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb18-349"><a href="#cb18-349" aria-hidden="true" tabindex="-1"></a>        string <span class="op">=</span> <span class="st">'risk-free: %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb18-350"><a href="#cb18-350" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'tangency: %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb18-351"><a href="#cb18-351" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb18-352"><a href="#cb18-352" aria-hidden="true" tabindex="-1"></a>        trace1 <span class="op">=</span> go.Scatter(x<span class="op">=</span>ravers,y<span class="op">=</span>df[<span class="st">'wgt_risky'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>custdat,hovertemplate<span class="op">=</span>string, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>))</span>
<span id="cb18-353"><a href="#cb18-353" aria-hidden="true" tabindex="-1"></a>        fig <span class="op">=</span> go.Figure()</span>
<span id="cb18-354"><a href="#cb18-354" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(trace1)       </span>
<span id="cb18-355"><a href="#cb18-355" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Risk Aversion"</span></span>
<span id="cb18-356"><a href="#cb18-356" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Weight in Risky Assets"</span></span>
<span id="cb18-357"><a href="#cb18-357" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb18-358"><a href="#cb18-358" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".2"</span>)</span>
<span id="cb18-359"><a href="#cb18-359" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.74</span>))</span>
<span id="cb18-360"><a href="#cb18-360" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb18-361"><a href="#cb18-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-362"><a href="#cb18-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-363"><a href="#cb18-363" aria-hidden="true" tabindex="-1"></a>figtbl(mn_stock,mn_bond,sd_stock,sd_bond,corr,rs,extra,raver1, raver2, <span class="st">"Stock"</span>,<span class="st">"Bond"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-tangency-cal-allocation-by-riskaversion" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="dda355b1-c2a0-44ac-addd-fe1d0af00f6f" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("dda355b1-c2a0-44ac-addd-fe1d0af00f6f")) {                    Plotly.newPlot(                        "dda355b1-c2a0-44ac-addd-fe1d0af00f6f",                        [{"customdata":[[[-7191.533564324243],[7291.533564324243]],[[-4761.022376216161],[4861.022376216161]],[[-3545.7667821621208],[3645.7667821621208]],[[-2816.6134257296967],[2916.6134257296967]],[[-2330.5111881080807],[2430.5111881080807]],[[-1983.2953040926404],[2083.2953040926404]],[[-1722.8833910810604],[1822.8833910810604]],[[-1520.3407920720538],[1620.3407920720538]],[[-1358.3067128648484],[1458.3067128648484]],[[-1225.7333753316802],[1325.7333753316802]],[[-1115.2555940540399],[1215.2555940540399]],[[-1021.7743945114219],[1121.7743945114219]],[[-941.6476520463202],[1041.6476520463202]],[[-872.2044752432321],[972.2044752432321]],[[-811.4416955405302],[911.4416955405302]],[[-757.8274781557932],[857.8274781557932]],[[-710.1703960360267],[810.1703960360267]],[[-667.529848876236],[767.529848876236]],[[-629.153356432424],[729.153356432424]],[[-594.4317680308801],[694.4317680308801]],[[-562.8666876658399],[662.8666876658399]],[[-534.04639689776],[634.04639689776]],[[-507.62779702701994],[607.6277970270199]],[[-483.32268514593926],[583.3226851459392]],[[-460.88719725571076],[560.8871972557107]],[[-440.1135973573512],[540.1135973573512]],[[-420.82382602315994],[520.82382602316]],[[-402.8643837464993],[502.8643837464993]],[[-386.10223762161604],[486.10223762161604]],[[-370.4215202789833],[470.4215202789833]],[[-355.7208477702651],[455.7208477702651]],[[-341.91112511055996],[441.91112511055996]],[[-328.9137390778965],[428.9137390778965]],[[-316.659060818528],[416.659060818528]],[[-305.08519801801333],[405.08519801801333]],[[-294.1369494229319],[394.1369494229319]],[[-283.7649244381179],[383.7649244381179]],[[-273.9247981704739],[373.9247981704739]],[[-264.5766782162121],[364.5766782162121]],[[-255.68456411337758],[355.6845641133776]],[[-247.21588401543997],[347.21588401544]],[[-239.1410960150809],[339.1410960150809]],[[-231.43334383292006],[331.43334383292006]],[[-224.06815841441068],[324.0681584144107]],[[-217.02319844888],[317.02319844888]],[[-210.27802401379745],[310.27802401379745]],[[-203.81389851350997],[303.81389851350997]],[[-197.61361487037715],[297.61361487037715]],[[-191.66134257296963],[291.6613425729696]],[[-185.94249271859766],[285.9424927185977]],[[-180.44359862785538],[280.44359862785535]],[[-175.15220997449967],[275.15220997449967]],[[-170.0567986786756],[270.0567986786756]],[[-165.146675066336],[265.146675066336]],[[-160.41191301157997],[260.41191301158]],[[-155.84328295874528],[255.84328295874528]],[[-151.4321918732497],[251.4321918732497]],[[-147.1706292991268],[247.1706292991268]],[[-143.05111881080802],[243.05111881080802]],[[-139.066674240139],[239.066674240139]],[[-135.21076013949164],[235.21076013949164]],[[-131.4772560102933],[231.4772560102933]],[[-127.86042388513255],[227.86042388513255]],[[-124.35487890228427],[224.35487890228427]],[[-120.95556255527997],[220.95556255527998]],[[-117.65771833803704],[217.65771833803706]],[[-114.45686953894824],[214.45686953894824]],[[-111.34879896592],[211.34879896592]],[[-108.32953040926401],[208.329530409264]],[[-105.39531167110536],[205.39531167110536]],[[-102.54259900900666],[202.54259900900666]],[[-99.76804285819838],[199.76804285819838]],[[-97.06847471146594],[197.06847471146594]],[[-94.44089504864638],[194.44089504864638]],[[-91.88246221905898],[191.882462219059]],[[-89.39048219024],[189.39048219024]],[[-86.96239908523692],[186.96239908523694]],[[-84.59578643858836],[184.59578643858836]],[[-82.28833910810604],[182.28833910810604]],[[-80.03786578578371],[180.0378657857837]],[[-77.84228205668879],[177.8422820566888]],[[-75.69960395962025],[175.69960395962025]],[[-73.60794200772003],[173.60794200772003]],[[-71.56549563115861],[171.56549563115863]],[[-69.57054800754052],[169.5705480075405]],[[-67.6214612488331],[167.6214612488331]],[[-65.71667191646003],[165.71667191646003]],[[-63.854686838747],[163.854686838747]],[[-62.03407920720536],[162.03407920720537]],[[-60.25348493020311],[160.25348493020311]],[[-58.511599224440005],[158.51159922444]],[[-56.80717342632775],[156.80717342632775]],[[-55.139012006898746],[155.13901200689875]],[[-53.505969775247195],[153.5059697752472]],[[-51.906949256754984],[151.90694925675498]],[[-50.340898233489504],[150.3408982334895]],[[-48.806807435188595],[148.8068074351886]],[[-47.30370837018669],[147.30370837018668]],[[-45.83067128648484],[145.83067128648483]],[[-44.38680325394535],[144.38680325394535]],[[-42.97124635929883],[142.97124635929885]],[[-41.58317600629593],[141.58317600629593]],[[-40.22179931392773],[140.22179931392773]],[[-38.886353606176],[138.88635360617602]],[[-37.576104987249835],[137.57610498724983]],[[-36.29034699671478],[136.2903469967148]],[[-35.02839933933779],[135.0283993393378]],[[-33.78960668484845],[133.78960668484845]],[[-32.573337533168],[132.573337533168]],[[-31.37898314097731],[131.3789831409773]],[[-30.205956505790034],[130.20595650579003]],[[-29.053691403968873],[129.05369140396888]],[[-27.92164147937266],[127.92164147937267]],[[-26.80927937955202],[126.80927937955202]],[[-25.71609593662485],[125.71609593662485]],[[-24.641599390157953],[124.64159939015795]],[[-23.585314649563415],[123.58531464956341]],[[-22.5467825936847],[122.5467825936847]],[[-21.525559405404017],[121.52555940540401]],[[-20.521215939243653],[120.52121593924366]],[[-19.533337120069525],[119.53333712006953]],[[-18.561521371125878],[118.56152137112588]],[[-17.605380069745813],[117.60538006974582]],[[-16.66453702918784],[116.66453702918784]],[[-15.738628005146671],[115.73862800514667]],[[-14.827300225578588],[114.82730022557858]],[[-13.930211942566274],[113.93021194256627]],[[-13.047032005026992],[113.04703200502699]],[[-12.177439451142181],[112.17743945114218]],[[-11.321123119454057],[111.32112311945406]],[[-10.477781277640009],[110.47778127764]],[[-9.647121268033686],[109.64712126803369]],[[-8.828859169018521],[108.82885916901853]],[[-8.022719471470241],[108.02271947147024]],[[-7.228434769474146],[107.22843476947415]],[[-6.445745464587449],[106.44574546458745]],[[-5.674399482960002],[105.67439948296]],[[-4.9141520046653175],[104.91415200466531]],[[-4.164765204632004],[104.164765204632]],[[-3.426008004599179],[103.42600800459918]],[[-2.6976558355526814],[102.69765583555268]],[[-1.9794904101292365],[101.97949041012923]],[[-1.2712995045033315],[101.27129950450333]],[[-0.5728767492998665],[100.57287674929987]],[[0.11597857090080987],[99.88402142909919]],[[0.7954617098742789],[99.20453829012573]],[[1.4657626442670213],[98.53423735573298]],[[2.127066250681331],[97.87293374931866]],[[2.779552475676783],[97.22044752432322]],[[3.423396499016673],[96.57660350098332]],[[4.05876889047051],[95.9412311095295]],[[4.685835760467438],[95.31416423953256]],[[5.30475890487998],[94.69524109512002]],[[5.915695944203336],[94.08430405579666]],[[6.518800457381535],[93.48119954261847]],[[7.114222110519231],[92.88577788948076]],[[7.702106780705808],[92.2978932192942]],[[8.282596675166776],[91.71740332483323]],[[8.85583044594701],[91.144169554053]],[[9.42194330031999],[90.57805669968]],[[9.981067107108144],[90.01893289289185]],[[10.533330499089077],[89.46666950091092]],[[11.078858971655603],[88.9211410283444]],[[11.617774977887974],[88.38222502211202]],[[12.150198020189872],[87.84980197981012]],[[12.676244738631858],[87.32375526136813]],[[13.196028996139987],[86.80397100386001]],[[13.709661960659869],[86.29033803934013]],[[14.217252184420692],[85.78274781557931]],[[14.718905680418237],[85.28109431958177]],[[15.214725996229772],[84.78527400377023]],[[15.704814285268887],[84.29518571473112]],[[16.18926937558345],[83.81073062441655]],[[16.66818783629439],[83.3318121637056]],[[17.14166404176999],[82.85833595823001]],[[17.609790233624402],[82.3902097663756]],[[18.0726565806265],[81.9273434193735]],[[18.530351236600673],[81.46964876339933]],[[18.98296039639732],[81.01703960360268]],[[19.430568350008393],[80.56943164999161]],[[19.873257534898457],[80.12674246510154]],[[20.311108586620307],[79.6888914133797]],[[20.744200387779998],[79.25579961222]],[[21.172610115413626],[78.82738988458638]],[[21.596413286836125],[78.40358671316388]],[[22.015683804018813],[77.98431619598118]],[[22.430493996550627],[77.56950600344938]],[[22.840914663235544],[77.15908533676445]],[[23.247015112376424],[76.75298488762358]],[[23.64886320079329],[76.35113679920671]],[[24.046525371622508],[75.95347462837749]],[[24.440066690940508],[75.55993330905949]],[[24.829550883255248],[75.17044911674475]],[[25.215040365905228],[74.78495963409478]],[[25.596596282405702],[74.4034037175943]],[[25.974278534779284],[74.02572146522071]],[[26.348145814906655],[73.65185418509334]],[[26.718255634932262],[73.28174436506774]]],"hovertemplate":"risk-free: %{customdata[0]:.0f}%<br>tangency: %{customdata[1]:.0f}%<br><extra></extra>","line":{"color":"orange"},"mode":"lines","x":[0.2,0.30000000000000004,0.4000000000000001,0.5000000000000001,0.6000000000000001,0.7000000000000002,0.8000000000000003,0.9000000000000001,1.0000000000000002,1.1000000000000003,1.2000000000000004,1.3000000000000003,1.4000000000000004,1.5000000000000004,1.6000000000000003,1.7000000000000004,1.8000000000000005,1.9000000000000006,2.000000000000001,2.1000000000000005,2.200000000000001,2.3000000000000007,2.400000000000001,2.500000000000001,2.600000000000001,2.700000000000001,2.800000000000001,2.9000000000000012,3.000000000000001,3.100000000000001,3.200000000000001,3.300000000000001,3.4000000000000012,3.5000000000000013,3.6000000000000014,3.7000000000000015,3.8000000000000016,3.9000000000000012,4.000000000000001,4.100000000000001,4.200000000000002,4.300000000000002,4.400000000000001,4.500000000000002,4.600000000000001,4.700000000000002,4.800000000000002,4.900000000000002,5.000000000000002,5.100000000000001,5.200000000000002,5.300000000000002,5.400000000000002,5.500000000000002,5.600000000000002,5.700000000000002,5.800000000000002,5.900000000000002,6.000000000000002,6.100000000000002,6.200000000000002,6.3000000000000025,6.400000000000002,6.500000000000003,6.600000000000002,6.700000000000002,6.8000000000000025,6.900000000000002,7.000000000000003,7.100000000000002,7.200000000000003,7.3000000000000025,7.400000000000003,7.500000000000003,7.600000000000002,7.700000000000003,7.8000000000000025,7.900000000000003,8.000000000000002,8.100000000000003,8.200000000000003,8.300000000000002,8.400000000000002,8.500000000000002,8.600000000000001,8.700000000000003,8.800000000000002,8.900000000000002,9.000000000000002,9.100000000000001,9.200000000000003,9.300000000000002,9.400000000000002,9.500000000000002,9.600000000000003,9.700000000000003,9.800000000000002,9.900000000000002,10.000000000000002,10.100000000000003,10.200000000000003,10.300000000000002,10.400000000000002,10.500000000000004,10.600000000000003,10.700000000000003,10.800000000000002,10.900000000000002,11.000000000000004,11.100000000000003,11.200000000000003,11.300000000000002,11.400000000000002,11.500000000000004,11.600000000000003,11.700000000000003,11.800000000000002,11.900000000000004,12.000000000000004,12.100000000000003,12.200000000000003,12.300000000000002,12.400000000000004,12.500000000000004,12.600000000000003,12.700000000000003,12.800000000000004,12.900000000000004,13.000000000000004,13.100000000000003,13.200000000000003,13.300000000000004,13.400000000000004,13.500000000000004,13.600000000000003,13.700000000000005,13.800000000000004,13.900000000000004,14.000000000000004,14.100000000000003,14.200000000000005,14.300000000000004,14.400000000000004,14.500000000000004,14.600000000000005,14.700000000000005,14.800000000000004,14.900000000000004,15.000000000000004,15.100000000000005,15.200000000000005,15.300000000000004,15.400000000000004,15.500000000000004,15.600000000000005,15.700000000000005,15.800000000000004,15.900000000000004,16.000000000000007,16.100000000000005,16.200000000000006,16.300000000000004,16.400000000000006,16.500000000000004,16.600000000000005,16.700000000000006,16.800000000000004,16.900000000000006,17.000000000000004,17.100000000000005,17.200000000000006,17.300000000000004,17.400000000000006,17.500000000000004,17.600000000000005,17.700000000000006,17.800000000000004,17.900000000000006,18.000000000000004,18.100000000000005,18.200000000000006,18.300000000000004,18.400000000000006,18.500000000000007,18.600000000000005,18.700000000000006,18.800000000000004,18.900000000000006,19.000000000000007,19.100000000000005,19.200000000000006,19.300000000000004,19.400000000000006,19.500000000000007,19.600000000000005,19.700000000000006,19.800000000000004,19.900000000000006],"y":[72.91533564324243,48.61022376216161,36.45766782162121,29.166134257296967,24.305111881080805,20.832953040926405,18.228833910810604,16.203407920720537,14.583067128648484,13.257333753316802,12.152555940540399,11.217743945114218,10.416476520463203,9.722044752432321,9.114416955405302,8.578274781557932,8.101703960360267,7.675298488762359,7.291533564324239,6.944317680308801,6.628666876658399,6.3404639689776,6.0762779702701994,5.833226851459393,5.6088719725571075,5.401135973573512,5.2082382602315995,5.028643837464993,4.861022376216161,4.7042152027898325,4.557208477702651,4.419111251105599,4.289137390778965,4.16659060818528,4.050851980180133,3.9413694942293187,3.8376492443811787,3.7392479817047386,3.645766782162121,3.556845641133776,3.4721588401543997,3.391410960150809,3.3143334383292005,3.240681584144107,3.1702319844888,3.1027802401379745,3.0381389851350997,2.9761361487037714,2.9166134257296963,2.8594249271859766,2.8044359862785537,2.7515220997449967,2.700567986786756,2.65146675066336,2.6041191301157998,2.5584328295874528,2.514321918732497,2.471706292991268,2.4305111881080803,2.39066674240139,2.3521076013949163,2.314772560102933,2.2786042388513255,2.2435487890228427,2.2095556255527997,2.1765771833803704,2.1445686953894825,2.1134879896592,2.08329530409264,2.0539531167110536,2.0254259900900666,1.9976804285819838,1.9706847471146594,1.944408950486464,1.9188246221905898,1.8939048219024,1.8696239908523693,1.8459578643858836,1.8228833910810605,1.8003786578578371,1.778422820566888,1.7569960395962025,1.7360794200772003,1.7156549563115862,1.6957054800754052,1.676214612488331,1.6571667191646002,1.63854686838747,1.6203407920720536,1.602534849302031,1.5851159922444,1.5680717342632775,1.5513901200689875,1.535059697752472,1.5190694925675499,1.503408982334895,1.488068074351886,1.473037083701867,1.4583067128648484,1.4438680325394535,1.4297124635929883,1.4158317600629593,1.4022179931392773,1.38886353606176,1.3757610498724984,1.3629034699671478,1.350283993393378,1.3378960668484845,1.32573337533168,1.3137898314097731,1.3020595650579003,1.2905369140396887,1.2792164147937266,1.2680927937955202,1.2571609593662485,1.2464159939015795,1.2358531464956342,1.225467825936847,1.2152555940540402,1.2052121593924365,1.1953333712006953,1.1856152137112588,1.1760538006974581,1.1666453702918784,1.1573862800514667,1.1482730022557859,1.1393021194256627,1.13047032005027,1.1217743945114218,1.1132112311945406,1.1047778127764,1.0964712126803369,1.0882885916901852,1.0802271947147024,1.0722843476947415,1.0644574546458745,1.0567439948296,1.0491415200466532,1.04164765204632,1.0342600800459918,1.0269765583555268,1.0197949041012924,1.0127129950450333,1.0057287674929987,0.9988402142909919,0.9920453829012572,0.9853423735573298,0.9787293374931867,0.9722044752432322,0.9657660350098333,0.9594123110952949,0.9531416423953256,0.9469524109512002,0.9408430405579666,0.9348119954261846,0.9288577788948077,0.9229789321929419,0.9171740332483322,0.9114416955405299,0.9057805669968001,0.9001893289289186,0.8946666950091092,0.889211410283444,0.8838222502211203,0.8784980197981013,0.8732375526136814,0.8680397100386001,0.8629033803934013,0.8578274781557931,0.8528109431958176,0.8478527400377023,0.8429518571473111,0.8381073062441655,0.8333181216370561,0.8285833595823001,0.823902097663756,0.819273434193735,0.8146964876339933,0.8101703960360268,0.8056943164999161,0.8012674246510154,0.7968889141337969,0.7925579961222,0.7882738988458637,0.7840358671316388,0.7798431619598118,0.7756950600344937,0.7715908533676445,0.7675298488762358,0.7635113679920671,0.7595347462837749,0.7555993330905949,0.7517044911674475,0.7478495963409477,0.744034037175943,0.7402572146522072,0.7365185418509335,0.7328174436506774],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Risk Aversion"},"tickformat":".2"},"yaxis":{"title":{"text":"Weight in Risky Assets"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.74}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('dda355b1-c2a0-44ac-addd-fe1d0af00f6f');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.14: Preferences and Efficient Portfolios</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="capital-allocation-with-differential-borrowing-lending-rates" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="capital-allocation-with-differential-borrowing-lending-rates"><span class="header-section-number">2.4.3</span> Capital Allocation with Differential Borrowing &amp; Lending Rates</h3>
<p>Now we again allow for risk-free borrowing to occur at a higher rate than risk-free saving: <span class="math inline">\(r_f^{\text{borrow}}&gt;r_f^{\text{saving}}\)</span>. <a href="#sec-multiple-cals"><span>Section&nbsp;2.3.2</span></a> discussed how the set of efficient portfolios changes under this more realistic assumption. A portion of the efficient set was the risky asset frontier between an efficient low risk portfolio <span class="math inline">\(r_{\text{low}}\)</span> and an efficient high mean portfolio <span class="math inline">\(r_{\text{high}}\)</span>.</p>
<p>Where do investors with different risk aversions choose to invest when faced with this investment opportunity set? The utility-maximizing investment will invest <span class="math inline">\(w^*_{\text{low}}\)</span> in the efficient low risk portfolio, <span class="math inline">\(w^*_{\text{high}}\)</span> in the efficient high mean portfolio, and the remaining <span class="math inline">\(1-w^*_{\text{low}}-w^*_{\text{high}}\)</span> in risk-free saving or borrowing. The optimal weights in the two risky asset portfolios are:</p>
<p><span class="math display">\[\begin{equation}
w^*_{\text{low}} = \begin{cases}
    \frac{E[r_{\text{low}}-r_f^{\text{saving}}]}{A \cdot \text{var}_{\text{low}}} &amp; \text{if } A &gt; \frac{E[r_{\text{low}}-r_f^{\text{saving}}]}{\text{var}_{\text{risky}}} \\
    a^* &amp; \text{if } \frac{E[r_{\text{high}}-r_f^{\text{borrow}}]}{ \text{var}_{\text{high}}} \le A \le \frac{E[r_{\text{low}}-r_f^{\text{saving}}]}{\text{var}_{\text{low}}} \\
    0\% &amp; \text{if } A &lt; \frac{E[r_{\text{high}}-r_f^{\text{borrow}}]}{ \text{var}_{\text{high}}} \,. \\
\end{cases}
\end{equation}\]</span> <span class="math display">\[\begin{equation}
w^*_{\text{high}} = \begin{cases}
    0\% &amp; \text{if } A &gt; \frac{E[r_{\text{low}}-r_f^{\text{saving}}]}{\text{var}_{\text{risky}}} \\
    1-a^* &amp; \text{if } \frac{E[r_{\text{high}}-r_f^{\text{borrow}}]}{ \text{var}_{\text{high}}} \le A \le \frac{E[r_{\text{low}}-r_f^{\text{saving}}]}{\text{var}_{\text{low}}} \\
    \frac{E[r_{\text{high}}-r_f^{\text{borrow}}]}{A \cdot \text{var}_{\text{high}}} &amp; \text{if } A &lt; \frac{E[r_{\text{high}}-r_f^{\text{borrow}}]}{ \text{var}_{\text{high}}} \,. \\
\end{cases}
\end{equation}\]</span> where <span class="math inline">\(a^*\)</span> is defined as:<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<p><span id="eq-frontier-optimal"><span class="math display">\[ a^* = \frac{E[r_{\text{low}} - r_{\text{high}}] - A (\text{cov}[r_{\text{low}}, r_{\text{high}}]-\text{var}[r_{\text{high}}])}{A (\text{var}[r_{\text{low}}]+\text{var}[r_{\text{high}}]-2\text{cov}[r_{\text{low}}, r_{\text{high}}])}\,. \tag{2.19}\]</span></span></p>
<p><a href="#fig-diffsaveborrow-and-preferences">Figure&nbsp;<span>2.15</span></a> shows indifference curves at the highest possible utility level for investors with the indicated risk aversions. The portfolio where each indifference curve intersects the efficient frontier is that investor’s optimal portfolio.</p>
<div class="cell" data-execution_count="16">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>mn_stock <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>mn_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>sd_stock <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>sd_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>raver1 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>raver2 <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c, rs, extra):</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra   </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_s"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rs)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_b"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rb)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky(mn, sd, rs, rb, w_min, w_max):</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rs <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rs) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> rb <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rb)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>    srs <span class="op">=</span> (mn <span class="op">-</span> rs)<span class="op">/</span>sd</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>    srb <span class="op">=</span> (mn <span class="op">-</span> rb)<span class="op">/</span>sd</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds, srs, srb</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> opt_utility(mns, cov, Shorts, s, b, A):</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># P is a portfolio object based on expected returns, covariance matrix, and shorts</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts) </span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> s<span class="op">==</span>b:</span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">#tangency exp ret and sd</span></span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>            portTang <span class="op">=</span> P.tangency(s)</span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>            mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>                sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>                <span class="co">#optimal weight in tangency based on risk-aversion</span></span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> (mnTang <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTang<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>                expret<span class="op">=</span> wgt<span class="op">*</span>mnTang <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> wgt<span class="op">*</span>sdTang </span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> wgt</span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient low-risk portfolio</span></span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>            portTangLowRisk <span class="op">=</span> P.tangency(s)</span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a>            mnTangLowRisk <span class="op">=</span> portTangLowRisk <span class="op">@</span> mns</span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangLowRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a>                sdTangLowRisk <span class="op">=</span> np.sqrt(portTangLowRisk <span class="op">@</span> cov <span class="op">@</span> portTangLowRisk)</span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient high-risk portfolio</span></span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ((b<span class="op">&lt;</span>gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a>            portTangHighRisk <span class="op">=</span> P.tangency(b)</span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>            mnTangHighRisk <span class="op">=</span> portTangHighRisk <span class="op">@</span> mns</span>
<span id="cb19-85"><a href="#cb19-85" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangHighRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb19-86"><a href="#cb19-86" aria-hidden="true" tabindex="-1"></a>                sdTangHighRisk <span class="op">=</span> np.sqrt(portTangHighRisk <span class="op">@</span> cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb19-87"><a href="#cb19-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-88"><a href="#cb19-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">#1st: efficient low risk CAL</span></span>
<span id="cb19-89"><a href="#cb19-89" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTangLowRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb19-90"><a href="#cb19-90" aria-hidden="true" tabindex="-1"></a>        expret<span class="op">=</span> wgt<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb19-91"><a href="#cb19-91" aria-hidden="true" tabindex="-1"></a>        sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangLowRisk </span>
<span id="cb19-92"><a href="#cb19-92" aria-hidden="true" tabindex="-1"></a>        wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb19-93"><a href="#cb19-93" aria-hidden="true" tabindex="-1"></a>        wgt_lo <span class="op">=</span> wgt</span>
<span id="cb19-94"><a href="#cb19-94" aria-hidden="true" tabindex="-1"></a>        wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb19-95"><a href="#cb19-95" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print('Weight low risk CAL: ', wgt)</span></span>
<span id="cb19-96"><a href="#cb19-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> wgt <span class="op">&gt;</span> <span class="fl">1.0</span>:</span>
<span id="cb19-97"><a href="#cb19-97" aria-hidden="true" tabindex="-1"></a>            <span class="co">#2nd: efficient high risk CAL</span></span>
<span id="cb19-98"><a href="#cb19-98" aria-hidden="true" tabindex="-1"></a>            wgt <span class="op">=</span> (mnTangHighRisk <span class="op">-</span> b) <span class="op">/</span> (A <span class="op">*</span> (sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb19-99"><a href="#cb19-99" aria-hidden="true" tabindex="-1"></a>            expret<span class="op">=</span> wgt<span class="op">*</span>mnTangHighRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>b</span>
<span id="cb19-100"><a href="#cb19-100" aria-hidden="true" tabindex="-1"></a>            sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangHighRisk </span>
<span id="cb19-101"><a href="#cb19-101" aria-hidden="true" tabindex="-1"></a>            wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb19-102"><a href="#cb19-102" aria-hidden="true" tabindex="-1"></a>            wgt_lo <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb19-103"><a href="#cb19-103" aria-hidden="true" tabindex="-1"></a>            wgt_hi <span class="op">=</span> wgt</span>
<span id="cb19-104"><a href="#cb19-104" aria-hidden="true" tabindex="-1"></a>            <span class="co"># print('Weight high risk CAL: ', wgt)</span></span>
<span id="cb19-105"><a href="#cb19-105" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> wgt <span class="op">&lt;</span> <span class="fl">1.0</span>:</span>
<span id="cb19-106"><a href="#cb19-106" aria-hidden="true" tabindex="-1"></a>                <span class="co">#3rd: risky asset frontier</span></span>
<span id="cb19-107"><a href="#cb19-107" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> <span class="dv">1</span> <span class="co">#This is should be interpreted as total weight in risky assets.</span></span>
<span id="cb19-108"><a href="#cb19-108" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Method 1: solve analytically for utility-maximizing mix of efficient low and high risk portfolios</span></span>
<span id="cb19-109"><a href="#cb19-109" aria-hidden="true" tabindex="-1"></a>                cov_hilo <span class="op">=</span> portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk</span>
<span id="cb19-110"><a href="#cb19-110" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> mnTangHighRisk <span class="op">-</span> A <span class="op">*</span>(cov_hilo  <span class="op">-</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))<span class="op">/</span>(A<span class="op">*</span>(sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">2</span><span class="op">*</span>cov_hilo))</span>
<span id="cb19-111"><a href="#cb19-111" aria-hidden="true" tabindex="-1"></a>                expret <span class="op">=</span> wgt_lo<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span> mnTangHighRisk</span>
<span id="cb19-112"><a href="#cb19-112" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> np.sqrt((wgt_lo<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span>sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> ((<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>wgt_lo<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span>portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb19-113"><a href="#cb19-113" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt_lo</span>
<span id="cb19-114"><a href="#cb19-114" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb19-115"><a href="#cb19-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-116"><a href="#cb19-116" aria-hidden="true" tabindex="-1"></a>                <span class="co"># #Method 2: calculate frontier manually and choose max utility</span></span>
<span id="cb19-117"><a href="#cb19-117" aria-hidden="true" tabindex="-1"></a>                <span class="co"># eret_grid = np.linspace(mnTangLowRisk, mnTangHighRisk, 100)</span></span>
<span id="cb19-118"><a href="#cb19-118" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df = pd.DataFrame(dtype='float', columns=['mn','sd','u'],index=np.arange(0,100))</span></span>
<span id="cb19-119"><a href="#cb19-119" aria-hidden="true" tabindex="-1"></a>                <span class="co"># for i,m in enumerate(eret_grid):</span></span>
<span id="cb19-120"><a href="#cb19-120" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     portFrontier = P.frontier(m)</span></span>
<span id="cb19-121"><a href="#cb19-121" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'mn'] = portFrontier @ mns</span></span>
<span id="cb19-122"><a href="#cb19-122" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'sd'] = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb19-123"><a href="#cb19-123" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df['u']  = df['mn'] - 0.5*A* df['sd']**2</span></span>
<span id="cb19-124"><a href="#cb19-124" aria-hidden="true" tabindex="-1"></a>                <span class="co"># opt_mn = df.loc[df['u'].idxmax(),'mn']</span></span>
<span id="cb19-125"><a href="#cb19-125" aria-hidden="true" tabindex="-1"></a>                <span class="co"># portFrontier = P.frontier(opt_mn)</span></span>
<span id="cb19-126"><a href="#cb19-126" aria-hidden="true" tabindex="-1"></a>                <span class="co"># expret = portFrontier @ mns</span></span>
<span id="cb19-127"><a href="#cb19-127" aria-hidden="true" tabindex="-1"></a>                <span class="co"># sdret  = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb19-128"><a href="#cb19-128" aria-hidden="true" tabindex="-1"></a>                <span class="co"># print('Weight frontier: ', wgt)</span></span>
<span id="cb19-129"><a href="#cb19-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-130"><a href="#cb19-130" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> expret <span class="op">-</span> <span class="fl">0.5</span><span class="op">*</span>A<span class="op">*</span>sdret<span class="op">**</span><span class="dv">2</span></span>
<span id="cb19-131"><a href="#cb19-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> u, wgt, wgt_rf, wgt_lo, wgt_hi</span>
<span id="cb19-132"><a href="#cb19-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-133"><a href="#cb19-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-134"><a href="#cb19-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-135"><a href="#cb19-135" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c, rs, extra, raver1, raver2, asset1_name, asset2_name):</span>
<span id="cb19-136"><a href="#cb19-136" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c, rs, extra)</span>
<span id="cb19-137"><a href="#cb19-137" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-138"><a href="#cb19-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Plot the portfolios of the two assets</span></span>
<span id="cb19-139"><a href="#cb19-139" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb19-140"><a href="#cb19-140" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb19-141"><a href="#cb19-141" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb19-142"><a href="#cb19-142" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb19-143"><a href="#cb19-143" aria-hidden="true" tabindex="-1"></a>        <span class="co"># line={'color': green},</span></span>
<span id="cb19-144"><a href="#cb19-144" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb19-145"><a href="#cb19-145" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb19-146"><a href="#cb19-146" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>asset1_name<span class="op">+</span><span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb19-147"><a href="#cb19-147" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb19-148"><a href="#cb19-148" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Stock &amp; Bond Frontier"</span></span>
<span id="cb19-149"><a href="#cb19-149" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-150"><a href="#cb19-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-151"><a href="#cb19-151" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb19-152"><a href="#cb19-152" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb19-153"><a href="#cb19-153" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb19-154"><a href="#cb19-154" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb19-155"><a href="#cb19-155" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb19-156"><a href="#cb19-156" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb19-157"><a href="#cb19-157" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb19-158"><a href="#cb19-158" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb19-159"><a href="#cb19-159" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb19-160"><a href="#cb19-160" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb19-161"><a href="#cb19-161" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb19-162"><a href="#cb19-162" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-163"><a href="#cb19-163" aria-hidden="true" tabindex="-1"></a>    trace2b <span class="op">=</span> go.Scatter(</span>
<span id="cb19-164"><a href="#cb19-164" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb19-165"><a href="#cb19-165" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb19-166"><a href="#cb19-166" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb19-167"><a href="#cb19-167" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb19-168"><a href="#cb19-168" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb19-169"><a href="#cb19-169" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb19-170"><a href="#cb19-170" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb19-171"><a href="#cb19-171" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-172"><a href="#cb19-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-173"><a href="#cb19-173" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb19-174"><a href="#cb19-174" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2a)</span>
<span id="cb19-175"><a href="#cb19-175" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2b)</span>
<span id="cb19-176"><a href="#cb19-176" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb19-177"><a href="#cb19-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-178"><a href="#cb19-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-179"><a href="#cb19-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-180"><a href="#cb19-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports,srTang,borrow_flag):</span>
<span id="cb19-181"><a href="#cb19-181" aria-hidden="true" tabindex="-1"></a>        <span class="co"># borrow_flag=1 adds statement about "relative to borrowing rate"</span></span>
<span id="cb19-182"><a href="#cb19-182" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N<span class="op">+</span><span class="dv">1</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb19-183"><a href="#cb19-183" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb19-184"><a href="#cb19-184" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb19-185"><a href="#cb19-185" aria-hidden="true" tabindex="-1"></a>        cd[:,N] <span class="op">=</span> np.<span class="bu">round</span>(srTang,<span class="dv">4</span>)</span>
<span id="cb19-186"><a href="#cb19-186" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(cd)</span></span>
<span id="cb19-187"><a href="#cb19-187" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb19-188"><a href="#cb19-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb19-189"><a href="#cb19-189" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"asset "</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb19-190"><a href="#cb19-190" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb19-191"><a href="#cb19-191" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb19-192"><a href="#cb19-192" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb19-193"><a href="#cb19-193" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> borrow_flag<span class="op">==</span><span class="dv">1</span>:</span>
<span id="cb19-194"><a href="#cb19-194" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio (relative to borrowing rate): %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span>    </span>
<span id="cb19-195"><a href="#cb19-195" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb19-196"><a href="#cb19-196" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio: %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span></span>
<span id="cb19-197"><a href="#cb19-197" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb19-198"><a href="#cb19-198" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd  </span>
<span id="cb19-199"><a href="#cb19-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-200"><a href="#cb19-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the tangency portfolios</span></span>
<span id="cb19-201"><a href="#cb19-201" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb19-202"><a href="#cb19-202" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra     </span>
<span id="cb19-203"><a href="#cb19-203" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb19-204"><a href="#cb19-204" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb19-205"><a href="#cb19-205" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb19-206"><a href="#cb19-206" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array(mns) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb19-207"><a href="#cb19-207" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb19-208"><a href="#cb19-208" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array(sds) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb19-209"><a href="#cb19-209" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb19-210"><a href="#cb19-210" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb19-211"><a href="#cb19-211" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb19-212"><a href="#cb19-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-213"><a href="#cb19-213" aria-hidden="true" tabindex="-1"></a>    Shorts <span class="op">=</span> <span class="fl">0.0</span>     </span>
<span id="cb19-214"><a href="#cb19-214" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="bu">len</span>(mns)</span>
<span id="cb19-215"><a href="#cb19-215" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts)    </span>
<span id="cb19-216"><a href="#cb19-216" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb19-217"><a href="#cb19-217" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('GMV return is: ',gmv)</span></span>
<span id="cb19-218"><a href="#cb19-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rs <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb19-219"><a href="#cb19-219" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rs)</span>
<span id="cb19-220"><a href="#cb19-220" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb19-221"><a href="#cb19-221" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb19-222"><a href="#cb19-222" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb19-223"><a href="#cb19-223" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rs)<span class="op">/</span>sdTang</span>
<span id="cb19-224"><a href="#cb19-224" aria-hidden="true" tabindex="-1"></a>            string0 <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb19-225"><a href="#cb19-225" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string0, [portTang], srTang,<span class="dv">0</span>)</span>
<span id="cb19-226"><a href="#cb19-226" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb19-227"><a href="#cb19-227" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb19-228"><a href="#cb19-228" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb19-229"><a href="#cb19-229" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb19-230"><a href="#cb19-230" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb19-231"><a href="#cb19-231" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb19-232"><a href="#cb19-232" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb19-233"><a href="#cb19-233" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>string0</span>
<span id="cb19-234"><a href="#cb19-234" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb19-235"><a href="#cb19-235" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb19-236"><a href="#cb19-236" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb19-237"><a href="#cb19-237" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (no leverage)</span></span>
<span id="cb19-238"><a href="#cb19-238" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> rb<span class="op">==</span>rs:</span>
<span id="cb19-239"><a href="#cb19-239" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">4.0</span></span>
<span id="cb19-240"><a href="#cb19-240" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb19-241"><a href="#cb19-241" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb19-242"><a href="#cb19-242" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>,<span class="dv">0</span>, max_wgt)</span>
<span id="cb19-243"><a href="#cb19-243" aria-hidden="true" tabindex="-1"></a>            portlabel <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb19-244"><a href="#cb19-244" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>portlabel <span class="op">+</span> <span class="st">" = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span>  <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb19-245"><a href="#cb19-245" aria-hidden="true" tabindex="-1"></a>            trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb19-246"><a href="#cb19-246" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb19-247"><a href="#cb19-247" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb19-248"><a href="#cb19-248" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb19-249"><a href="#cb19-249" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb19-250"><a href="#cb19-250" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb19-251"><a href="#cb19-251" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb19-252"><a href="#cb19-252" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span> <span class="op">+</span> portlabel</span>
<span id="cb19-253"><a href="#cb19-253" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb19-254"><a href="#cb19-254" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5)</span>
<span id="cb19-255"><a href="#cb19-255" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb19-256"><a href="#cb19-256" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb19-257"><a href="#cb19-257" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb19-258"><a href="#cb19-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-259"><a href="#cb19-259" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs) <span class="kw">and</span> ((gmv <span class="op">&gt;</span> rb) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb19-260"><a href="#cb19-260" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rb)</span>
<span id="cb19-261"><a href="#cb19-261" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb19-262"><a href="#cb19-262" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb19-263"><a href="#cb19-263" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb19-264"><a href="#cb19-264" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rb)<span class="op">/</span>sdTang</span>
<span id="cb19-265"><a href="#cb19-265" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">'efficient high mean portfolio'</span></span>
<span id="cb19-266"><a href="#cb19-266" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string, [portTang], srTang,<span class="dv">1</span>)</span>
<span id="cb19-267"><a href="#cb19-267" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb19-268"><a href="#cb19-268" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb19-269"><a href="#cb19-269" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb19-270"><a href="#cb19-270" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb19-271"><a href="#cb19-271" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb19-272"><a href="#cb19-272" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb19-273"><a href="#cb19-273" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb19-274"><a href="#cb19-274" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"efficient high mean portfolio"</span></span>
<span id="cb19-275"><a href="#cb19-275" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb19-276"><a href="#cb19-276" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb19-277"><a href="#cb19-277" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb19-278"><a href="#cb19-278" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)            </span></span>
<span id="cb19-279"><a href="#cb19-279" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb19-280"><a href="#cb19-280" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in efficient high mean portfolio = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio (relative to borrowing rate): "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb19-281"><a href="#cb19-281" aria-hidden="true" tabindex="-1"></a>            trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb19-282"><a href="#cb19-282" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb19-283"><a href="#cb19-283" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb19-284"><a href="#cb19-284" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb19-285"><a href="#cb19-285" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb19-286"><a href="#cb19-286" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb19-287"><a href="#cb19-287" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb19-288"><a href="#cb19-288" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean"</span></span>
<span id="cb19-289"><a href="#cb19-289" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb19-290"><a href="#cb19-290" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6)   </span>
<span id="cb19-291"><a href="#cb19-291" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb19-292"><a href="#cb19-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-293"><a href="#cb19-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-294"><a href="#cb19-294" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility plot info</span></span>
<span id="cb19-295"><a href="#cb19-295" aria-hidden="true" tabindex="-1"></a>    u1, wgt1, wgt_rf1, wgt_lo1, wgt_hi1 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver1)</span>
<span id="cb19-296"><a href="#cb19-296" aria-hidden="true" tabindex="-1"></a>    u2, wgt2, wgt_rf2, wgt_lo2, wgt_hi2 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver2)</span>
<span id="cb19-297"><a href="#cb19-297" aria-hidden="true" tabindex="-1"></a>    string1<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver1)</span>
<span id="cb19-298"><a href="#cb19-298" aria-hidden="true" tabindex="-1"></a>    string2<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver2)</span>
<span id="cb19-299"><a href="#cb19-299" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>,<span class="fl">1.4</span>,<span class="dv">100</span>)</span>
<span id="cb19-300"><a href="#cb19-300" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w<span class="op">*</span>np.<span class="bu">max</span>(sds) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb19-301"><a href="#cb19-301" aria-hidden="true" tabindex="-1"></a>    eret1 <span class="op">=</span> [u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver1<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds]</span>
<span id="cb19-302"><a href="#cb19-302" aria-hidden="true" tabindex="-1"></a>    eret2 <span class="op">=</span> [u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver2<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds] </span>
<span id="cb19-303"><a href="#cb19-303" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df = pd.DataFrame(data={'Standard Deviation': sds, string1: U1, string2: U2})</span></span>
<span id="cb19-304"><a href="#cb19-304" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver1,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb19-305"><a href="#cb19-305" aria-hidden="true" tabindex="-1"></a>    trace7 <span class="op">=</span> go.Scatter(</span>
<span id="cb19-306"><a href="#cb19-306" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret1, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string1, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>,dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb19-307"><a href="#cb19-307" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb19-308"><a href="#cb19-308" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver2,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb19-309"><a href="#cb19-309" aria-hidden="true" tabindex="-1"></a>    trace8 <span class="op">=</span> go.Scatter(</span>
<span id="cb19-310"><a href="#cb19-310" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret2, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string2, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>),</span>
<span id="cb19-311"><a href="#cb19-311" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb19-312"><a href="#cb19-312" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace7) </span>
<span id="cb19-313"><a href="#cb19-313" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace8) </span>
<span id="cb19-314"><a href="#cb19-314" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb19-315"><a href="#cb19-315" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-316"><a href="#cb19-316" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb19-317"><a href="#cb19-317" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb19-318"><a href="#cb19-318" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb19-319"><a href="#cb19-319" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb19-320"><a href="#cb19-320" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb19-321"><a href="#cb19-321" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb19-322"><a href="#cb19-322" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.55</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.6</span>))</span>
<span id="cb19-323"><a href="#cb19-323" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb19-324"><a href="#cb19-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-325"><a href="#cb19-325" aria-hidden="true" tabindex="-1"></a>figtbl(mn_stock,mn_bond,sd_stock,sd_bond,corr,rs,extra,raver1, raver2, <span class="st">"Stock"</span>,<span class="st">"Bond"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-diffsaveborrow-and-preferences" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="f6477529-237a-4486-aca5-12235b7c22f6" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("f6477529-237a-4486-aca5-12235b7c22f6")) {                    Plotly.newPlot(                        "f6477529-237a-4486-aca5-12235b7c22f6",                        [{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"orange","size":10},"mode":"markers","name":"Stock","text":["Stock"],"x":[0.15],"y":[0.06],"type":"scatter"},{"hovertemplate":"%{text}<extra></extra>","marker":{"color":"red","size":10},"mode":"markers","name":"Bond","text":["Bond"],"x":[0.035],"y":[0.035],"type":"scatter"},{"customdata":[100.0,99.0,98.0,97.0,96.0,95.0,94.0,93.0,92.0,91.0,90.0,89.0,88.0,87.0,86.0,85.0,84.0,83.0,82.0,81.0,80.0,79.0,78.0,77.0,76.0,75.0,74.0,73.0,72.0,71.0,70.0,69.0,68.0,67.0,65.99999999999999,64.99999999999999,64.0,63.0,62.0,61.0,60.0,59.0,58.00000000000001,57.00000000000001,56.00000000000001,55.00000000000001,54.0,53.0,52.0,51.0,50.0,49.0,48.0,47.0,46.0,44.99999999999999,43.99999999999999,42.99999999999999,42.00000000000001,41.0,40.0,39.0,38.0,37.0,36.0,35.0,34.0,32.99999999999999,31.999999999999996,30.999999999999993,29.999999999999993,29.000000000000004,28.000000000000004,27.0,26.0,25.0,24.0,23.0,21.999999999999996,20.999999999999996,19.999999999999996,18.999999999999993,17.999999999999993,16.999999999999993,16.000000000000004,15.000000000000002,14.000000000000002,13.0,12.0,10.999999999999998,9.999999999999998,8.999999999999996,7.9999999999999964,6.999999999999995,5.999999999999995,4.999999999999993,4.0000000000000036,3.0000000000000027,2.0000000000000018,1.0000000000000009,0.0],"hovertemplate":"Stock: %{text:.0f}%<br>Bond: %{customdata:.0f}%<extra></extra>","line":{"color":"black"},"mode":"lines","name":"Stock & Bond Frontier","text":[0.0,1.0,2.0,3.0,4.0,5.0,6.0,7.000000000000001,8.0,9.0,10.0,11.0,12.0,13.0,14.000000000000002,15.0,16.0,17.0,18.0,19.0,20.0,21.0,22.0,23.0,24.0,25.0,26.0,27.0,28.000000000000004,28.999999999999996,30.0,31.0,32.0,33.0,34.0,35.0,36.0,37.0,38.0,39.0,40.0,41.0,42.0,43.0,44.0,45.0,46.0,47.0,48.0,49.0,50.0,51.0,52.0,53.0,54.0,55.00000000000001,56.00000000000001,57.00000000000001,57.99999999999999,59.0,60.0,61.0,62.0,63.0,64.0,65.0,66.0,67.0,68.0,69.0,70.0,71.0,72.0,73.0,74.0,75.0,76.0,77.0,78.0,79.0,80.0,81.0,82.0,83.0,84.0,85.0,86.0,87.0,88.0,89.0,90.0,91.0,92.0,93.0,94.0,95.0,96.0,97.0,98.0,99.0,100.0],"x":[0.035,0.034607441396324,0.034281190177705326,0.03402315388085002,0.033834893231692045,0.03371757701852254,0.03367194678066595,0.03369829372535055,0.033796449517663835,0.033965791614505324,0.03420526275297414,0.03451340319354207,0.034888393485513196,0.035328104959083215,0.03583015489779524,0.03639196339853072,0.03701080923189873,0.03768388249636706,0.03840833242930498,0.039181309319623304,0.04,0.04086165684354955,0.04176362053270765,0.04270333710613258,0.04367836993295422,0.0446864073292987,0.04572526653831556,0.04679289475978164,0.0478873678541638,0.0490068872710765,0.05014977567247933,0.05131447164299756,0.052499523807364196,0.053703584610340485,0.05492540395845988,0.056163822875584246,0.057417767285048625,0.05868624199929656,0.05996832497243858,0.061263161851148364,0.06256996084384263,0.06388798791635249,0.06521656231357185,0.06655505240024982,0.06790287180966649,0.06925947588597534,0.07062435840416534,0.07199704855061768,0.07337710814688733,0.07476412909945516,0.07615773105863909,0.07755755927051858,0.07896328260653808,0.08037459175635046,0.08179119757039874,0.08321282953968097,0.0846392344010743,0.08607017485749636,0.08750542840304253,0.08894478624405142,0.09038805230781334,0.09183504233134539,0.09328558302331609,0.09473951129280751,0.09619667353916142,0.09765692499766722,0.0991201291363162,0.10058615709927485,0.10205488719311781,0.10352620441221633,0.10500000000000002,0.1064761710431024,0.10795462009566797,0.10943525483133851,0.11091798772065782,0.11240273573183172,0.1138894200529619,0.11537796583403609,0.11686830194710626,0.11836036076322173,0.11985407794480754,0.12134939225228943,0.1228462453638694,0.12434458170744715,0.1258443483037677,0.12734549461995112,0.12884797243263083,0.1303517356999898,0.13185674044204188,0.13336294462855863,0.1348703080740902,0.13637879233957162,0.13788836064004822,0.1393989777580883,0.1409106099624865,0.14242322493189094,0.14393679168301618,0.14545128050312928,0.14696666288651994,0.1484829114746879,0.15],"y":[0.035,0.03525,0.0355,0.035750000000000004,0.036,0.03625,0.0365,0.03675,0.037000000000000005,0.03725,0.0375,0.037750000000000006,0.038,0.03825,0.0385,0.03875,0.039,0.03925,0.0395,0.03975,0.04,0.04025,0.0405,0.04075,0.040999999999999995,0.04125,0.0415,0.041749999999999995,0.042,0.042249999999999996,0.0425,0.04275,0.043,0.04324999999999999,0.0435,0.04375,0.044000000000000004,0.04425,0.044500000000000005,0.04475,0.045,0.045250000000000005,0.045500000000000006,0.04575,0.046000000000000006,0.04625,0.04650000000000001,0.04675000000000001,0.047,0.04724999999999999,0.0475,0.04775,0.048,0.04825,0.048499999999999995,0.04875,0.049,0.04925000000000001,0.049499999999999995,0.049749999999999996,0.05,0.05025,0.050499999999999996,0.05075,0.051,0.05125,0.051500000000000004,0.051750000000000004,0.052000000000000005,0.052250000000000005,0.0525,0.052750000000000005,0.053000000000000005,0.05325,0.0535,0.05375,0.054000000000000006,0.05425,0.05449999999999999,0.05474999999999999,0.05500000000000001,0.05525,0.0555,0.05575,0.055999999999999994,0.05625,0.0565,0.056749999999999995,0.057,0.057249999999999995,0.0575,0.057749999999999996,0.05800000000000001,0.05825,0.0585,0.05875,0.059000000000000004,0.059250000000000004,0.059500000000000004,0.05975,0.06],"type":"scatter"},{"customdata":[[[0.13202804395829393],[0.8679719560417061],[0.5166]]],"hovertemplate":"efficient low risk portfolio<br>asset 1: %{customdata[0]:.1%}<br>asset 2: %{customdata[1]:.1%}<br>Sharpe ratio: %{customdata[2]:.4f}<br><extra></extra>","marker":{"color":"blue","size":10},"mode":"markers","name":"efficient low risk portfolio","x":[0.035424964724284705],"y":[0.03830070109895735],"type":"scatter"},{"hovertemplate":"wealth in efficient low risk portfolio = %{text:.0f}%<br>Sharpe ratio: 0.5166<extra></extra>","line":{"color":"blue"},"mode":"lines","name":"CAL: efficient low risk portfolio","text":[0.0,0.5,1.0,1.5,2.0,2.5,3.0,3.5000000000000004,4.0,4.5,5.0,5.5,6.0,6.5,7.000000000000001,7.5,8.0,8.5,9.0,9.5,10.0,10.5,11.0,11.5,12.0,12.5,13.0,13.5,14.000000000000002,14.499999999999998,15.0,15.5,16.0,16.5,17.0,17.5,18.0,18.5,19.0,19.5,20.0,20.5,21.0,21.5,22.0,22.5,23.0,23.5,24.0,24.5,25.0,25.5,26.0,26.5,27.0,27.500000000000004,28.000000000000004,28.500000000000004,28.999999999999996,29.5,30.0,30.5,31.0,31.5,32.0,32.5,33.0,33.5,34.0,34.5,35.0,35.5,36.0,36.5,37.0,37.5,38.0,38.5,39.0,39.5,40.0,40.5,41.0,41.5,42.0,42.5,43.0,43.5,44.0,44.5,45.0,45.5,46.0,46.5,47.0,47.5,48.0,48.5,49.0,49.5,50.0,50.5,51.0,51.5,52.0,52.5,53.0,53.5,54.0,54.50000000000001,55.00000000000001,55.50000000000001,56.00000000000001,56.50000000000001,57.00000000000001,57.50000000000001,57.99999999999999,58.5,59.0,59.5,60.0,60.5,61.0,61.5,62.0,62.5,63.0,63.5,64.0,64.5,65.0,65.5,66.0,66.5,67.0,67.5,68.0,68.5,69.0,69.5,70.0,70.5,71.0,71.5,72.0,72.5,73.0,73.5,74.0,74.5,75.0,75.5,76.0,76.5,77.0,77.5,78.0,78.5,79.0,79.5,80.0,80.5,81.0,81.5,82.0,82.5,83.0,83.5,84.0,84.5,85.0,85.5,86.0,86.5,87.0,87.5,88.0,88.5,89.0,89.5,90.0,90.5,91.0,91.5,92.0,92.5,93.0,93.5,94.0,94.5,95.0,95.5,96.0,96.5,97.0,97.5,98.0,98.5,99.0,99.5,100.0],"x":[0.0,0.00017712482362142352,0.00035424964724284705,0.0005313744708642706,0.0007084992944856941,0.0008856241181071176,0.0010627489417285411,0.0012398737653499649,0.0014169985889713882,0.0015941234125928117,0.0017712482362142352,0.0019483730598356588,0.0021254978834570823,0.002302622707078506,0.0024797475306999298,0.002656872354321353,0.0028339971779427764,0.0030111220015642,0.0031882468251856234,0.003365371648807047,0.0035424964724284705,0.003719621296049894,0.0038967461196713175,0.004073870943292741,0.004250995766914165,0.004428120590535588,0.004605245414157012,0.004782370237778435,0.0049594950613998596,0.005136619885021282,0.005313744708642706,0.005490869532264129,0.005667994355885553,0.005845119179506976,0.0060222440031284,0.006199368826749824,0.006376493650371247,0.00655361847399267,0.006730743297614094,0.0069078681212355175,0.007084992944856941,0.007262117768478365,0.007439242592099788,0.0076163674157212116,0.007793492239342635,0.007970617062964059,0.008147741886585482,0.008324866710206906,0.00850199153382833,0.008679116357449753,0.008856241181071176,0.0090333660046926,0.009210490828314023,0.009387615651935447,0.00956474047555687,0.009741865299178294,0.009918990122799719,0.010096114946421143,0.010273239770042564,0.010450364593663988,0.010627489417285411,0.010804614240906835,0.010981739064528259,0.011158863888149682,0.011335988711771106,0.011513113535392529,0.011690238359013953,0.011867363182635376,0.0120444880062568,0.012221612829878225,0.012398737653499648,0.01257586247712107,0.012752987300742494,0.012930112124363917,0.01310723694798534,0.013284361771606764,0.013461486595228188,0.013638611418849611,0.013815736242471035,0.013992861066092458,0.014169985889713882,0.014347110713335307,0.01452423553695673,0.014701360360578154,0.014878485184199576,0.015055610007821,0.015232734831442423,0.015409859655063847,0.01558698447868527,0.015764109302306695,0.015941234125928117,0.016118358949549542,0.016295483773170964,0.01647260859679239,0.01664973342041381,0.016826858244035237,0.01700398306765666,0.01718110789127808,0.017358232714899505,0.017535357538520927,0.017712482362142352,0.017889607185763778,0.0180667320093852,0.018243856833006625,0.018420981656628047,0.018598106480249472,0.018775231303870894,0.01895235612749232,0.01912948095111374,0.019306605774735166,0.019483730598356588,0.019660855421978013,0.019837980245599438,0.02001510506922086,0.020192229892842285,0.020369354716463707,0.02054647954008513,0.02072360436370655,0.020900729187327976,0.021077854010949398,0.021254978834570823,0.021432103658192245,0.02160922848181367,0.021786353305435092,0.021963478129056517,0.02214060295267794,0.022317727776299364,0.02249485259992079,0.02267197742354221,0.022849102247163636,0.023026227070785058,0.023203351894406483,0.023380476718027905,0.02355760154164933,0.023734726365270752,0.023911851188892178,0.0240889760125136,0.024266100836135025,0.02444322565975645,0.02462035048337787,0.024797475306999297,0.024974600130620715,0.02515172495424214,0.025328849777863562,0.025505974601484988,0.02568309942510641,0.025860224248727835,0.026037349072349256,0.02621447389597068,0.026391598719592103,0.02656872354321353,0.026745848366834954,0.026922973190456376,0.0271000980140778,0.027277222837699223,0.027454347661320648,0.02763147248494207,0.027808597308563495,0.027985722132184917,0.028162846955806342,0.028339971779427764,0.02851709660304919,0.028694221426670614,0.028871346250292036,0.02904847107391346,0.029225595897534883,0.02940272072115631,0.029579845544777727,0.029756970368399152,0.029934095192020574,0.030111220015642,0.03028834483926342,0.030465469662884846,0.030642594486506268,0.030819719310127693,0.03099684413374912,0.03117396895737054,0.03135109378099196,0.03152821860461339,0.03170534342823481,0.031882468251856234,0.032059593075477656,0.032236717899099085,0.03241384272272051,0.03259096754634193,0.03276809236996335,0.03294521719358478,0.0331223420172062,0.03329946684082762,0.03347659166444905,0.03365371648807047,0.033830841311691895,0.03400796613531332,0.03418509095893474,0.03436221578255616,0.03453934060617759,0.03471646542979901,0.03489359025342043,0.035070715077041854,0.03524783990066328,0.035424964724284705],"y":[0.02,0.02009150350549479,0.020183007010989573,0.02027451051648436,0.020366014021979146,0.020457517527473934,0.020549021032968722,0.020640524538463507,0.020732028043958295,0.02082353154945308,0.020915035054947868,0.021006538560442656,0.02109804206593744,0.02118954557143223,0.021281049076927017,0.0213725525824218,0.02146405608791659,0.021555559593411374,0.021647063098906162,0.021738566604400947,0.021830070109895735,0.021921573615390523,0.022013077120885308,0.022104580626380096,0.022196084131874884,0.02228758763736967,0.022379091142864457,0.02247059464835924,0.02256209815385403,0.022653601659348814,0.022745105164843602,0.02283660867033839,0.022928112175833175,0.023019615681327963,0.02311111918682275,0.023202622692317536,0.023294126197812324,0.02338562970330711,0.023477133208801897,0.023568636714296685,0.02366014021979147,0.023751643725286258,0.023843147230781042,0.02393465073627583,0.02402615424177062,0.024117657747265403,0.02420916125276019,0.02430066475825498,0.024392168263749764,0.02448367176924455,0.024575175274739337,0.024666678780234125,0.02475818228572891,0.024849685791223698,0.024941189296718486,0.02503269280221327,0.02512419630770806,0.025215699813202846,0.02530720331869763,0.025398706824192416,0.025490210329687204,0.025581713835181992,0.025673217340676777,0.025764720846171565,0.025856224351666353,0.025947727857161137,0.026039231362655926,0.026130734868150714,0.0262222383736455,0.026313741879140286,0.026405245384635075,0.02649674889012986,0.026588252395624644,0.026679755901119432,0.02677125940661422,0.026862762912109005,0.026954266417603793,0.02704576992309858,0.027137273428593366,0.027228776934088154,0.027320280439582942,0.027411783945077726,0.027503287450572515,0.027594790956067303,0.027686294461562087,0.027777797967056872,0.02786930147255166,0.027960804978046448,0.028052308483541233,0.02814381198903602,0.02823531549453081,0.028326819000025594,0.028418322505520382,0.02850982601101517,0.028601329516509955,0.02869283302200474,0.028784336527499527,0.028875840032994315,0.0289673435384891,0.029058847043983888,0.029150350549478676,0.02924185405497346,0.02933335756046825,0.029424861065963037,0.029516364571457822,0.029607868076952606,0.029699371582447398,0.029790875087942183,0.029882378593436967,0.029973882098931755,0.030065385604426544,0.030156889109921328,0.030248392615416116,0.030339896120910904,0.03043139962640569,0.030522903131900477,0.030614406637395262,0.03070591014289005,0.030797413648384835,0.030888917153879623,0.03098042065937441,0.031071924164869195,0.03116342767036398,0.03125493117585877,0.031346434681353556,0.03143793818684834,0.03152944169234313,0.03162094519783792,0.0317124487033327,0.03180395220882749,0.03189545571432228,0.03198695921981706,0.032078462725311854,0.03216996623080664,0.032261469736301424,0.032352973241796215,0.032444476747291,0.032535980252785784,0.032627483758280576,0.03271898726377536,0.032810490769270145,0.03290199427476493,0.032993497780259715,0.033085001285754506,0.03317650479124929,0.033268008296744075,0.03335951180223887,0.03345101530773365,0.033542518813228436,0.03363402231872323,0.03372552582421801,0.0338170293297128,0.03390853283520759,0.03400003634070237,0.03409153984619716,0.03418304335169195,0.034274546857186734,0.03436605036268152,0.03445755386817631,0.034549057373671095,0.03464056087916588,0.034732064384660664,0.034823567890155456,0.03491507139565024,0.035006574901145025,0.03509807840663981,0.0351895819121346,0.035281085417629386,0.03537258892312417,0.03546409242861896,0.03555559593411375,0.03564709943960853,0.03573860294510332,0.03583010645059811,0.03592160995609289,0.036013113461587684,0.03610461696708247,0.03619612047257725,0.036287623978072045,0.03637912748356682,0.036470630989061614,0.036562134494556406,0.036653638000051184,0.036745141505545975,0.03683664501104077,0.036928148516535544,0.037019652022030336,0.03711115552752512,0.037202659033019905,0.0372941625385147,0.03738566604400948,0.037477169549504266,0.03756867305499906,0.03766017656049384,0.03775168006598863,0.03784318357148342,0.037934687076978196,0.03802619058247299,0.03811769408796778,0.03820919759346256,0.03830070109895735],"type":"scatter"},{"customdata":[[[0.9997759731343422],[0.00022402686565786706],[0.1333]]],"hovertemplate":"efficient high mean portfolio<br>asset 1: %{customdata[0]:.1%}<br>asset 2: %{customdata[1]:.1%}<br>Sharpe ratio (relative to borrowing rate): %{customdata[2]:.4f}<br><extra></extra>","marker":{"color":"blue","size":10},"mode":"markers","name":"efficient high mean portfolio","x":[0.1499660041276049],"y":[0.05999439932835855],"type":"scatter"},{"hovertemplate":"wealth in efficient high mean portfolio = %{text:.0f}%<br>Sharpe ratio (relative to borrowing rate): 0.1333<extra></extra>","line":{"color":"blue"},"mode":"lines","name":"CAL: efficient high mean","text":[100.0,100.25,100.49999999999999,100.75,101.0,101.25,101.49999999999999,101.75,102.0,102.25,102.49999999999999,102.75000000000001,103.0,103.25,103.49999999999999,103.75000000000001,104.0,104.25,104.5,104.75000000000001,105.0,105.25,105.5,105.75000000000001,106.0,106.25,106.5,106.74999999999999,107.0,107.25,107.5,107.74999999999999,108.0,108.25,108.5,108.74999999999999,109.00000000000001,109.25,109.5,109.74999999999999,110.00000000000001,110.25,110.5,110.75,111.00000000000001,111.25,111.5,111.75,112.00000000000001,112.25,112.5,112.75,112.99999999999999,113.25,113.5,113.75,114.00000000000001,114.25,114.5,114.75,114.99999999999999,115.25000000000001,115.5,115.75,115.99999999999999,116.25000000000001,116.5,116.75,117.0,117.25000000000001,117.5,117.75,118.0,118.25000000000001,118.5,118.75,119.0,119.24999999999999,119.5,119.75,120.0,120.25000000000001,120.5,120.75,121.0,121.24999999999999,121.50000000000001,121.75,122.0,122.24999999999999,122.50000000000001,122.75,123.0,123.25,123.50000000000001,123.75,124.0,124.25,124.50000000000001,124.75,125.0,125.25,125.49999999999999,125.75,126.0,126.25,126.50000000000001,126.75,127.0,127.25,127.49999999999999,127.75000000000001,128.0,128.25,128.5,128.75,129.0,129.25,129.5,129.75,130.0,130.25,130.5,130.75,131.0,131.25,131.5,131.75,132.0,132.25,132.5,132.75,133.0,133.25,133.5,133.75,134.0,134.25,134.5,134.75,135.0,135.25,135.5,135.75,136.0,136.25,136.5,136.75,137.0,137.25,137.5,137.75,138.0,138.25,138.5,138.75,139.0,139.25,139.5,139.75,140.0,140.25,140.5,140.75,141.0,141.25,141.5,141.75,142.0,142.25,142.5,142.75,143.0,143.25,143.5,143.75,144.0,144.25,144.5,144.75,145.0,145.25,145.5,145.75,146.0,146.25,146.5,146.75,147.0,147.25,147.5,147.75,148.0,148.25,148.5,148.75,149.0,149.25,149.5,149.75,150.0],"x":[0.1499660041276049,0.1503409191379239,0.1507158341482429,0.15109074915856197,0.15146566416888096,0.15184057917919996,0.15221549418951896,0.15259040919983802,0.15296532421015702,0.15334023922047602,0.15371515423079501,0.15409006924111407,0.15446498425143307,0.15483989926175207,0.15521481427207107,0.15558972928239012,0.15596464429270912,0.15633955930302812,0.15671447431334712,0.15708938932366617,0.15746430433398517,0.15783921934430417,0.15821413435462317,0.15858904936494223,0.15896396437526122,0.15933887938558022,0.15971379439589922,0.16008870940621822,0.16046362441653728,0.16083853942685628,0.16121345443717527,0.16158836944749427,0.16196328445781333,0.16233819946813233,0.16271311447845133,0.16308802948877033,0.16346294449908938,0.16383785950940838,0.16421277451972738,0.16458768953004638,0.1649626045403654,0.16533751955068443,0.16571243456100343,0.16608734957132243,0.16646226458164146,0.16683717959196048,0.16721209460227948,0.16758700961259848,0.1679619246229175,0.16833683963323653,0.16871175464355553,0.16908666965387453,0.16946158466419353,0.1698364996745126,0.17021141468483159,0.17058632969515058,0.1709612447054696,0.1713361597157886,0.17171107472610764,0.17208598973642664,0.17246090474674564,0.17283581975706466,0.1732107347673837,0.1735856497777027,0.1739605647880217,0.17433547979834071,0.17471039480865974,0.17508530981897874,0.17546022482929774,0.17583513983961677,0.17621005484993577,0.1765849698602548,0.1769598848705738,0.17733479988089282,0.17770971489121182,0.17808462990153084,0.17845954491184984,0.17883445992216884,0.17920937493248787,0.1795842899428069,0.1799592049531259,0.18033411996344492,0.18070903497376392,0.18108394998408295,0.18145886499440195,0.18183378000472095,0.18220869501503997,0.18258361002535897,0.182958525035678,0.183333440045997,0.18370835505631603,0.18408327006663502,0.18445818507695405,0.18483310008727305,0.18520801509759208,0.18558293010791108,0.1859578451182301,0.1863327601285491,0.18670767513886813,0.18708259014918713,0.18745750515950615,0.18783242016982515,0.18820733518014415,0.18858225019046318,0.18895716520078218,0.1893320802111012,0.18970699522142023,0.19008191023173923,0.19045682524205823,0.19083174025237726,0.19120665526269626,0.19158157027301528,0.19195648528333428,0.1923314002936533,0.19270631530397234,0.19308123031429134,0.19345614532461033,0.19383106033492933,0.19420597534524836,0.19458089035556736,0.1949558053658864,0.19533072037620539,0.1957056353865244,0.19608055039684344,0.19645546540716244,0.19683038041748144,0.19720529542780046,0.19758021043811946,0.1979551254484385,0.1983300404587575,0.19870495546907652,0.19907987047939554,0.19945478548971454,0.19982970050003354,0.20020461551035254,0.20057953052067157,0.2009544455309906,0.2013293605413096,0.2017042755516286,0.20207919056194765,0.20245410557226665,0.20282902058258565,0.20320393559290464,0.20357885060322367,0.20395376561354267,0.2043286806238617,0.2047035956341807,0.2050785106444997,0.20545342565481875,0.20582834066513775,0.20620325567545675,0.20657817068577575,0.20695308569609477,0.2073280007064138,0.2077029157167328,0.2080778307270518,0.20845274573737085,0.20882766074768985,0.20920257575800885,0.20957749076832785,0.20995240577864688,0.2103273207889659,0.2107022357992849,0.2110771508096039,0.21145206581992296,0.21182698083024196,0.21220189584056096,0.21257681085087995,0.21295172586119895,0.21332664087151798,0.213701555881837,0.214076470892156,0.214451385902475,0.21482630091279406,0.21520121592311306,0.21557613093343206,0.21595104594375106,0.21632596095407006,0.2167008759643891,0.2170757909747081,0.2174507059850271,0.21782562099534616,0.21820053600566516,0.21857545101598416,0.21895036602630316,0.21932528103662216,0.21970019604694122,0.22007511105726021,0.2204500260675792,0.22082494107789827,0.22119985608821727,0.22157477109853627,0.22194968610885527,0.22232460111917426,0.22269951612949326,0.22307443113981232,0.22344934615013132,0.22382426116045032,0.22419917617076937,0.22457409118108837,0.22494900619140737],"y":[0.05999439932835855,0.060044385326679446,0.06009437132500034,0.06014435732332124,0.06019434332164214,0.060244329319963034,0.06029431531828393,0.06034430131660483,0.06039428731492572,0.060444273313246616,0.060494259311567516,0.06054424530988842,0.06059423130820931,0.060644217306530204,0.060694203304851105,0.060744189303172,0.06079417530149289,0.06084416129981379,0.060894147298134686,0.06094413329645559,0.06099411929477648,0.06104410529309738,0.06109409129141827,0.06114407728973917,0.06119406328806007,0.06124404928638096,0.061294035284701856,0.06134402128302276,0.06139400728134366,0.061443993279664544,0.061493979277985444,0.06154396527630634,0.06159395127462724,0.06164393727294813,0.06169392327126903,0.06174390926958992,0.06179389526791082,0.06184388126623172,0.061893867264552614,0.06194385326287351,0.06199383926119441,0.06204382525951531,0.062093811257836196,0.062143797256157096,0.062193783254478,0.06224376925279889,0.062293755251119784,0.062343741249440685,0.062393727247761585,0.06244371324608247,0.06249369924440337,0.06254368524272427,0.06259367124104516,0.06264365723936606,0.06269364323768696,0.06274362923600785,0.06279361523432875,0.06284360123264965,0.06289358723097055,0.06294357322929144,0.06299355922761234,0.06304354522593324,0.06309353122425412,0.06314351722257502,0.06319350322089592,0.06324348921921683,0.06329347521753771,0.06334346121585861,0.0633934472141795,0.0634434332125004,0.0634934192108213,0.0635434052091422,0.06359339120746309,0.06364337720578399,0.06369336320410489,0.06374334920242578,0.06379333520074668,0.06384332119906758,0.06389330719738848,0.06394329319570936,0.06399327919403026,0.06404326519235116,0.06409325119067205,0.06414323718899295,0.06419322318731385,0.06424320918563474,0.06429319518395564,0.06434318118227654,0.06439316718059743,0.06444315317891833,0.06449313917723923,0.06454312517556013,0.06459311117388102,0.06464309717220192,0.06469308317052282,0.0647430691688437,0.0647930551671646,0.0648430411654855,0.0648930271638064,0.06494301316212729,0.06499299916044819,0.06504298515876908,0.06509297115708998,0.06514295715541088,0.06519294315373178,0.06524292915205267,0.06529291515037357,0.06534290114869447,0.06539288714701535,0.06544287314533626,0.06549285914365716,0.06554284514197806,0.06559283114029894,0.06564281713861984,0.06569280313694074,0.06574278913526163,0.06579277513358253,0.06584276113190343,0.06589274713022432,0.06594273312854522,0.06599271912686612,0.066042705125187,0.06609269112350791,0.06614267712182881,0.06619266312014971,0.0662426491184706,0.0662926351167915,0.06634262111511238,0.06639260711343328,0.06644259311175418,0.06649257911007508,0.06654256510839598,0.06659255110671687,0.06664253710503777,0.06669252310335866,0.06674250910167956,0.06679249510000046,0.06684248109832136,0.06689246709664226,0.06694245309496315,0.06699243909328405,0.06704242509160493,0.06709241108992584,0.06714239708824674,0.06719238308656764,0.06724236908488854,0.06729235508320942,0.06734234108153032,0.06739232707985121,0.06744231307817211,0.06749229907649301,0.06754228507481391,0.0675922710731348,0.0676422570714557,0.06769224306977659,0.06774222906809749,0.06779221506641839,0.06784220106473929,0.06789218706306019,0.06794217306138108,0.06799215905970198,0.06804214505802286,0.06809213105634376,0.06814211705466466,0.06819210305298556,0.06824208905130646,0.06829207504962735,0.06834206104794825,0.06839204704626914,0.06844203304459004,0.06849201904291094,0.06854200504123184,0.06859199103955273,0.06864197703787363,0.06869196303619453,0.06874194903451541,0.06879193503283632,0.06884192103115722,0.06889190702947812,0.068941893027799,0.0689918790261199,0.0690418650244408,0.06909185102276169,0.06914183702108259,0.06919182301940349,0.06924180901772438,0.06929179501604528,0.06934178101436618,0.06939176701268707,0.06944175301100797,0.06949173900932887,0.06954172500764977,0.06959171100597066,0.06964169700429156,0.06969168300261244,0.06974166900093334,0.06979165499925424,0.06984164099757514,0.06989162699589604,0.06994161299421693,0.06999159899253783],"type":"scatter"},{"hovertemplate":"indifference curve for <br> optimal utility for risk aversion of 2<extra></extra>","line":{"color":"purple","dash":"dot"},"mode":"lines","name":"Risk Aversion=2","x":[0.0,0.002121212121212121,0.004242424242424242,0.006363636363636363,0.008484848484848484,0.010606060606060605,0.012727272727272726,0.014848484848484847,0.016969696969696968,0.01909090909090909,0.02121212121212121,0.023333333333333334,0.025454545454545452,0.027575757575757573,0.029696969696969694,0.031818181818181815,0.033939393939393936,0.03606060606060606,0.03818181818181818,0.040303030303030306,0.04242424242424242,0.04454545454545454,0.04666666666666667,0.04878787878787878,0.050909090909090904,0.05303030303030303,0.055151515151515146,0.05727272727272727,0.05939393939393939,0.06151515151515151,0.06363636363636363,0.06575757575757575,0.06787878787878787,0.06999999999999999,0.07212121212121211,0.07424242424242423,0.07636363636363636,0.07848484848484848,0.08060606060606061,0.08272727272727272,0.08484848484848484,0.08696969696969696,0.08909090909090908,0.0912121212121212,0.09333333333333334,0.09545454545454544,0.09757575757575757,0.09969696969696969,0.10181818181818181,0.10393939393939393,0.10606060606060606,0.10818181818181817,0.11030303030303029,0.11242424242424241,0.11454545454545453,0.11666666666666664,0.11878787878787878,0.1209090909090909,0.12303030303030302,0.12515151515151512,0.12727272727272726,0.12939393939393937,0.1315151515151515,0.13363636363636364,0.13575757575757574,0.13787878787878785,0.13999999999999999,0.14212121212121212,0.14424242424242423,0.14636363636363636,0.14848484848484847,0.1506060606060606,0.1527272727272727,0.15484848484848485,0.15696969696969695,0.1590909090909091,0.16121212121212122,0.1633333333333333,0.16545454545454544,0.16757575757575754,0.16969696969696968,0.1718181818181818,0.17393939393939392,0.17606060606060606,0.17818181818181816,0.1803030303030303,0.1824242424242424,0.18454545454545454,0.18666666666666668,0.18878787878787875,0.1909090909090909,0.193030303030303,0.19515151515151513,0.19727272727272724,0.19939393939393937,0.2015151515151515,0.20363636363636362,0.20575757575757575,0.20787878787878786,0.21],"y":[0.04184304768041237,0.041847547221275545,0.041861045843865075,0.04188354354818096,0.041915040334223205,0.0419555362019918,0.042005031151486745,0.04206352518270805,0.04213101829565571,0.042207510490329725,0.042293001766730086,0.04238749212485681,0.04249098156470989,0.04260347008628932,0.042724957689595104,0.042855444374627245,0.04299493014138574,0.043143414989870586,0.043300898920081786,0.04346738193201934,0.04364286402568326,0.04382734520107352,0.044020825458190145,0.04422330479703312,0.04443478321760245,0.044655260719898136,0.044884737303920175,0.045123212969668564,0.04537068771714331,0.045627161546344414,0.04589263445727187,0.04616710644992568,0.04645057752430585,0.04674304768041237,0.04704451691824524,0.047354985237804466,0.04767445263909005,0.048002919122101986,0.04834038468684028,0.04868684933330493,0.04904231306149593,0.04940677587141328,0.04978023776305699,0.05016269873642706,0.05055415879152348,0.05095461792834625,0.05136407614689538,0.05178253344717086,0.052209989829172694,0.052646445292900884,0.05309189983835544,0.05354635346553633,0.054009806174443585,0.05448225796507719,0.05496370883743716,0.055454158791523475,0.055953607827336146,0.056462055944875175,0.056979503144140554,0.05750594942513229,0.05804139478785038,0.05858583923229482,0.059139282758465625,0.059701725366362784,0.06027316705598629,0.06085360782733614,0.061443047680412366,0.06204148661521494,0.06264892463174386,0.06326536172999914,0.06389079790998077,0.06452523317168876,0.06516866751512311,0.0658211009402838,0.06648253344717085,0.06715296503578427,0.06783239570612404,0.06852082545819013,0.06921825429198261,0.06992468220750142,0.07064010920474662,0.07136453528371814,0.07209796044441603,0.07284038468684029,0.07359180801099087,0.07435223041686784,0.07512165190447112,0.07590007247380079,0.07668749212485682,0.07748391085763917,0.0782893286721479,0.07910374556838297,0.07992716154634441,0.0807595766060322,0.08160099074744634,0.08245140397058684,0.08331081627545368,0.08417922766204688,0.08505663813036644,0.08594304768041236],"type":"scatter"},{"hovertemplate":"indifference curve for <br> optimal utility for risk aversion of 5<extra></extra>","line":{"color":"purple"},"mode":"lines","name":"Risk Aversion=5","x":[0.0,0.002121212121212121,0.004242424242424242,0.006363636363636363,0.008484848484848484,0.010606060606060605,0.012727272727272726,0.014848484848484847,0.016969696969696968,0.01909090909090909,0.02121212121212121,0.023333333333333334,0.025454545454545452,0.027575757575757573,0.029696969696969694,0.031818181818181815,0.033939393939393936,0.03606060606060606,0.03818181818181818,0.040303030303030306,0.04242424242424242,0.04454545454545454,0.04666666666666667,0.04878787878787878,0.050909090909090904,0.05303030303030303,0.055151515151515146,0.05727272727272727,0.05939393939393939,0.06151515151515151,0.06363636363636363,0.06575757575757575,0.06787878787878787,0.06999999999999999,0.07212121212121211,0.07424242424242423,0.07636363636363636,0.07848484848484848,0.08060606060606061,0.08272727272727272,0.08484848484848484,0.08696969696969696,0.08909090909090908,0.0912121212121212,0.09333333333333334,0.09545454545454544,0.09757575757575757,0.09969696969696969,0.10181818181818181,0.10393939393939393,0.10606060606060606,0.10818181818181817,0.11030303030303029,0.11242424242424241,0.11454545454545453,0.11666666666666664,0.11878787878787878,0.1209090909090909,0.12303030303030302,0.12515151515151512,0.12727272727272726,0.12939393939393937,0.1315151515151515,0.13363636363636364,0.13575757575757574,0.13787878787878785,0.13999999999999999,0.14212121212121212,0.14424242424242423,0.14636363636363636,0.14848484848484847,0.1506060606060606,0.1527272727272727,0.15484848484848485,0.15696969696969695,0.1590909090909091,0.16121212121212122,0.1633333333333333,0.16545454545454544,0.16757575757575754,0.16969696969696968,0.1718181818181818,0.17393939393939392,0.17606060606060606,0.17818181818181816,0.1803030303030303,0.1824242424242424,0.18454545454545454,0.18666666666666668,0.18878787878787875,0.1909090909090909,0.193030303030303,0.19515151515151513,0.19727272727272724,0.19939393939393937,0.2015151515151515,0.20363636363636362,0.20575757575757575,0.20787878787878786,0.21],"y":[0.03627643363402061,0.03628768248617855,0.036321429042652384,0.0363776733034421,0.0364564152685477,0.03655765493796919,0.036681392311706564,0.03682762738975982,0.03699636017212897,0.037187590658813996,0.037401318849814916,0.03763754474513172,0.037896268344764415,0.03817748964871299,0.03848120865697745,0.0388074253695578,0.03915613978645403,0.03952735190766615,0.039921061733194166,0.04033726926303806,0.04077597449719784,0.041237177435673504,0.04172087807846506,0.04222707642557249,0.042755772476995815,0.04330696623273503,0.04388065769279012,0.044476846857161106,0.04509553372584797,0.04573671829885073,0.04640040057616937,0.047086580557803896,0.04779525824375431,0.04852643363402061,0.04928010672860279,0.050056277527500866,0.050854946030714825,0.05167611223824467,0.0525197761500904,0.053385937766252015,0.05427459708672951,0.055185754111522906,0.05611940884063217,0.057075561274057336,0.058054211411798395,0.059055359253855313,0.06007900480022813,0.06112514805091684,0.06219378900592143,0.06328492766524191,0.06439856402887828,0.06553469809683052,0.06669332986909865,0.06787445934568268,0.0690780865265826,0.07030421141179838,0.07155283400133006,0.07282395429517763,0.07411757229334108,0.07543368799582041,0.07677230140261564,0.07813341251372674,0.07951702132915375,0.08092312784889664,0.0823517320729554,0.08380283400133004,0.0852764336340206,0.08677253097102704,0.08829112601234934,0.08983221875798755,0.09139580920794163,0.0929818973622116,0.09459048322079747,0.09622156678369921,0.09787514805091684,0.09955122702245037,0.10124980369829978,0.10297087807846503,0.10471445016294621,0.10648051995174326,0.10826908744485622,0.11008015264228505,0.11191371554402978,0.1137697761500904,0.11564833446046686,0.11754939047515928,0.11947294419416751,0.12141899561749168,0.12338754474513174,0.12537859157708764,0.12739213611335942,0.1294281783539471,0.1314867182988507,0.13356775594807016,0.13567129130160552,0.13779732435945677,0.13994585512162389,0.14211688358810692,0.1443104097589058,0.1465264336340206],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Standard Deviation"},"range":[0,0.1875],"tickformat":".0%"},"yaxis":{"title":{"text":"Expected Return"},"range":[0,0.075],"tickformat":".0%"},"legend":{"yanchor":"top","y":0.55,"xanchor":"left","x":0.6}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('f6477529-237a-4486-aca5-12235b7c22f6');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.15: Preferences and Efficient Portfolios</figcaption><p></p>
</figure>
</div>
</div>
<p><a href="#fig-diffsaveborrow-cal-allocation-by-riskaversion">Figure&nbsp;<span>2.16</span></a> plots the allocation to risky assets as a function of risk aversion. Investors with very low levels of risk aversion will hold levered portfolios in the efficient high mean portfolio, and investors with very high levels of risk aversion will hold save some capital at the risk-free rate and the remainder in the efficient low risk portfolio. Investors with intermediate risk aversion will invest 100% of their capital in risky assets, but at different locations along the risky-asset efficient frontier (see hover data in <a href="#fig-diffsaveborrow-cal-allocation-by-riskaversion">Figure&nbsp;<span>2.16</span></a>). These portfolios can be written as a combination of the efficient low risk portfolio and the efficient high mean portfolio (<a href="#eq-frontier-optimal">Equation&nbsp;<span>2.19</span></a>). A larger fraction is invested in the efficient high mean portfolio with lower risk aversion.</p>
<div class="cell" data-execution_count="17">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>mn_stock <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>mn_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>sd_stock <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>sd_bond  <span class="op">=</span> <span class="fl">3.5</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> <span class="op">-</span><span class="dv">5</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>extra <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>raver1 <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>raver2 <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> data(mn1, mn2, sd1, sd2, c, rs, extra):</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra   </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">101</span>)</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    ports <span class="op">=</span> [np.array([w, <span class="dv">1</span> <span class="op">-</span> w]) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> [p.T <span class="op">@</span> np.array(mns) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(means)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    df.columns <span class="op">=</span> [<span class="st">"mean"</span>]</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"stdev"</span>] <span class="op">=</span> [np.sqrt(p.T <span class="op">@</span> cov <span class="op">@</span> p) <span class="cf">for</span> p <span class="kw">in</span> ports]</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt1"</span>] <span class="op">=</span> grid</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"wt2"</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df.wt1</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> [<span class="st">"mean"</span>, <span class="st">"stdev"</span>]:</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>        df[col] <span class="op">=</span> df[col] <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_s"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rs)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"sr_b"</span>]<span class="op">=</span> (df[<span class="st">"mean"</span>] <span class="op">-</span> rb)<span class="op">/</span>df[<span class="st">"stdev"</span>]</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rf_plus_risky(mn, sd, rs, rb, w_min, w_max):</span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    mn <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">/=</span> <span class="dv">100</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(w_min, w_max, <span class="dv">201</span>)</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [(rs <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rs) <span class="cf">if</span> w <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">else</span> rb <span class="op">+</span> w <span class="op">*</span> (mn <span class="op">-</span> rb)) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w <span class="op">*</span> sd <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>    srs <span class="op">=</span> (mn <span class="op">-</span> rs)<span class="op">/</span>sd</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>    srb <span class="op">=</span> (mn <span class="op">-</span> rb)<span class="op">/</span>sd</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grid, mns, sds, srs, srb</span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> opt_utility(mns, cov, Shorts, s, b, A):</span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># P is a portfolio object based on expected returns, covariance matrix, and shorts</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts) </span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> s<span class="op">==</span>b:</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>        <span class="co">#tangency exp ret and sd</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>            portTang <span class="op">=</span> P.tangency(s)</span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>            mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a>                sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>                <span class="co">#optimal weight in tangency based on risk-aversion</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> (mnTang <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTang<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>                expret<span class="op">=</span> wgt<span class="op">*</span>mnTang <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> wgt<span class="op">*</span>sdTang </span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> wgt</span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient low-risk portfolio</span></span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (s <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a>            portTangLowRisk <span class="op">=</span> P.tangency(s)</span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a>            mnTangLowRisk <span class="op">=</span> portTangLowRisk <span class="op">@</span> mns</span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangLowRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a>                sdTangLowRisk <span class="op">=</span> np.sqrt(portTangLowRisk <span class="op">@</span> cov <span class="op">@</span> portTangLowRisk)</span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a>        <span class="co">#efficient high-risk portfolio</span></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> ((b<span class="op">&lt;</span>gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a>            portTangHighRisk <span class="op">=</span> P.tangency(b)</span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a>            mnTangHighRisk <span class="op">=</span> portTangHighRisk <span class="op">@</span> mns</span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> mnTangHighRisk <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a>                sdTangHighRisk <span class="op">=</span> np.sqrt(portTangHighRisk <span class="op">@</span> cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">#1st: efficient low risk CAL</span></span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a>        wgt <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> s) <span class="op">/</span> (A <span class="op">*</span> (sdTangLowRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a>        expret<span class="op">=</span> wgt<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>s</span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a>        sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangLowRisk </span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a>        wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a>        wgt_lo <span class="op">=</span> wgt</span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a>        wgt_hi <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print('Weight low risk CAL: ', wgt)</span></span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> wgt <span class="op">&gt;</span> <span class="fl">1.0</span>:</span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a>            <span class="co">#2nd: efficient high risk CAL</span></span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a>            wgt <span class="op">=</span> (mnTangHighRisk <span class="op">-</span> b) <span class="op">/</span> (A <span class="op">*</span> (sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a>            expret<span class="op">=</span> wgt<span class="op">*</span>mnTangHighRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt)<span class="op">*</span>b</span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a>            sdret <span class="op">=</span> wgt<span class="op">*</span>sdTangHighRisk </span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a>            wgt_rf <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt</span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a>            wgt_lo <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a>            wgt_hi <span class="op">=</span> wgt</span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a>            <span class="co"># print('Weight high risk CAL: ', wgt)</span></span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> wgt <span class="op">&lt;</span> <span class="fl">1.0</span>:</span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a>                <span class="co">#3rd: risky asset frontier</span></span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a>                wgt <span class="op">=</span> <span class="dv">1</span> <span class="co">#This is should be interpreted as total weight in risky assets.</span></span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Method 1: solve analytically for utility-maximizing mix of efficient low and high risk portfolios</span></span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a>                cov_hilo <span class="op">=</span> portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk</span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a>                wgt_lo <span class="op">=</span> (mnTangLowRisk <span class="op">-</span> mnTangHighRisk <span class="op">-</span> A <span class="op">*</span>(cov_hilo  <span class="op">-</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span>))<span class="op">/</span>(A<span class="op">*</span>(sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> <span class="dv">2</span><span class="op">*</span>cov_hilo))</span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a>                expret <span class="op">=</span> wgt_lo<span class="op">*</span>mnTangLowRisk <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span> mnTangHighRisk</span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a>                sdret <span class="op">=</span> np.sqrt((wgt_lo<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span>sdTangLowRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> ((<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> sdTangHighRisk<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>wgt_lo<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>wgt_lo)<span class="op">*</span>portTangLowRisk.T <span class="op">@</span>cov <span class="op">@</span> portTangHighRisk)</span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a>                wgt_hi <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>wgt_lo</span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a>                wgt_rf <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a>                <span class="co"># #Method 2: calculate frontier manually and choose max utility</span></span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a>                <span class="co"># eret_grid = np.linspace(mnTangLowRisk, mnTangHighRisk, 100)</span></span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df = pd.DataFrame(dtype='float', columns=['mn','sd','u'],index=np.arange(0,100))</span></span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a>                <span class="co"># for i,m in enumerate(eret_grid):</span></span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     portFrontier = P.frontier(m)</span></span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'mn'] = portFrontier @ mns</span></span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a>                <span class="co">#     df.loc[i,'sd'] = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a>                <span class="co"># df['u']  = df['mn'] - 0.5*A* df['sd']**2</span></span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a>                <span class="co"># opt_mn = df.loc[df['u'].idxmax(),'mn']</span></span>
<span id="cb20-125"><a href="#cb20-125" aria-hidden="true" tabindex="-1"></a>                <span class="co"># portFrontier = P.frontier(opt_mn)</span></span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a>                <span class="co"># expret = portFrontier @ mns</span></span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a>                <span class="co"># sdret  = np.sqrt(portFrontier @ cov @ portFrontier)</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a>                <span class="co"># print('Weight frontier: ', wgt)</span></span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a>    u <span class="op">=</span> expret <span class="op">-</span> <span class="fl">0.5</span><span class="op">*</span>A<span class="op">*</span>sdret<span class="op">**</span><span class="dv">2</span></span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> u, wgt, wgt_rf, wgt_lo, wgt_hi</span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figtbl(mn1, mn2, sd1, sd2, c, rs, extra, raver1, raver2, asset1_name, asset2_name):</span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> data(mn1, mn2, sd1, sd2, c, rs, extra)</span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Plot the portfolios of the two assets</span></span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a>    trace1 <span class="op">=</span> go.Scatter(</span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[<span class="st">"stdev"</span>],</span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[<span class="st">"mean"</span>],</span>
<span id="cb20-142"><a href="#cb20-142" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb20-143"><a href="#cb20-143" aria-hidden="true" tabindex="-1"></a>        <span class="co"># line={'color': green},</span></span>
<span id="cb20-144"><a href="#cb20-144" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt1"</span>],</span>
<span id="cb20-145"><a href="#cb20-145" aria-hidden="true" tabindex="-1"></a>        customdata<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> df[<span class="st">"wt2"</span>],</span>
<span id="cb20-146"><a href="#cb20-146" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span>asset1_name<span class="op">+</span><span class="st">": %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span><span class="op">+</span>asset2_name<span class="op">+</span><span class="st">": %</span><span class="sc">{customdata:.0f}</span><span class="st">%&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb20-147"><a href="#cb20-147" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"black"</span>),</span>
<span id="cb20-148"><a href="#cb20-148" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="st">"Stock &amp; Bond Frontier"</span></span>
<span id="cb20-149"><a href="#cb20-149" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-150"><a href="#cb20-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-151"><a href="#cb20-151" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the two assets</span></span>
<span id="cb20-152"><a href="#cb20-152" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[df.wt1.isin([<span class="dv">0</span>, <span class="dv">1</span>])]</span>
<span id="cb20-153"><a href="#cb20-153" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">"text"</span>] <span class="op">=</span> np.where(df.wt1 <span class="op">==</span> <span class="dv">1</span>, asset1_name, asset2_name)</span>
<span id="cb20-154"><a href="#cb20-154" aria-hidden="true" tabindex="-1"></a>    trace2a <span class="op">=</span> go.Scatter(</span>
<span id="cb20-155"><a href="#cb20-155" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"stdev"</span>],</span>
<span id="cb20-156"><a href="#cb20-156" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"mean"</span>],</span>
<span id="cb20-157"><a href="#cb20-157" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb20-158"><a href="#cb20-158" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">1</span>][<span class="st">"text"</span>],</span>
<span id="cb20-159"><a href="#cb20-159" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb20-160"><a href="#cb20-160" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"orange"</span>),</span>
<span id="cb20-161"><a href="#cb20-161" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset1_name</span>
<span id="cb20-162"><a href="#cb20-162" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-163"><a href="#cb20-163" aria-hidden="true" tabindex="-1"></a>    trace2b <span class="op">=</span> go.Scatter(</span>
<span id="cb20-164"><a href="#cb20-164" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"stdev"</span>],</span>
<span id="cb20-165"><a href="#cb20-165" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"mean"</span>],</span>
<span id="cb20-166"><a href="#cb20-166" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb20-167"><a href="#cb20-167" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>df[df.wt1<span class="op">==</span><span class="dv">0</span>][<span class="st">"text"</span>],</span>
<span id="cb20-168"><a href="#cb20-168" aria-hidden="true" tabindex="-1"></a>        hovertemplate<span class="op">=</span><span class="st">"%</span><span class="sc">{text}</span><span class="st">&lt;extra&gt;&lt;/extra&gt;"</span>,</span>
<span id="cb20-169"><a href="#cb20-169" aria-hidden="true" tabindex="-1"></a>        marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"red"</span>),</span>
<span id="cb20-170"><a href="#cb20-170" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span>asset2_name</span>
<span id="cb20-171"><a href="#cb20-171" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-172"><a href="#cb20-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-173"><a href="#cb20-173" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb20-174"><a href="#cb20-174" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2a)</span>
<span id="cb20-175"><a href="#cb20-175" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace2b)</span>
<span id="cb20-176"><a href="#cb20-176" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace1)</span>
<span id="cb20-177"><a href="#cb20-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-178"><a href="#cb20-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-179"><a href="#cb20-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-180"><a href="#cb20-180" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> custom(string, ports,srTang,borrow_flag):</span>
<span id="cb20-181"><a href="#cb20-181" aria-hidden="true" tabindex="-1"></a>        <span class="co"># borrow_flag=1 adds statement about "relative to borrowing rate"</span></span>
<span id="cb20-182"><a href="#cb20-182" aria-hidden="true" tabindex="-1"></a>        cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ports), N<span class="op">+</span><span class="dv">1</span>, <span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb20-183"><a href="#cb20-183" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb20-184"><a href="#cb20-184" aria-hidden="true" tabindex="-1"></a>            cd[:, i] <span class="op">=</span> np.array([w[i] <span class="cf">for</span> w <span class="kw">in</span> ports]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb20-185"><a href="#cb20-185" aria-hidden="true" tabindex="-1"></a>        cd[:,N] <span class="op">=</span> np.<span class="bu">round</span>(srTang,<span class="dv">4</span>)</span>
<span id="cb20-186"><a href="#cb20-186" aria-hidden="true" tabindex="-1"></a>        <span class="co"># print(cd)</span></span>
<span id="cb20-187"><a href="#cb20-187" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb20-188"><a href="#cb20-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb20-189"><a href="#cb20-189" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"asset "</span> <span class="op">+</span> <span class="bu">str</span>(i <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb20-190"><a href="#cb20-190" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">": %{customdata["</span></span>
<span id="cb20-191"><a href="#cb20-191" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="bu">str</span>(i)</span>
<span id="cb20-192"><a href="#cb20-192" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"]:.1%}&lt;br&gt;"</span></span>
<span id="cb20-193"><a href="#cb20-193" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> borrow_flag<span class="op">==</span><span class="dv">1</span>:</span>
<span id="cb20-194"><a href="#cb20-194" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio (relative to borrowing rate): %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span>    </span>
<span id="cb20-195"><a href="#cb20-195" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb20-196"><a href="#cb20-196" aria-hidden="true" tabindex="-1"></a>            string <span class="op">+=</span> <span class="st">"Sharpe ratio: %{customdata["</span> <span class="op">+</span>  <span class="bu">str</span>(N) <span class="op">+</span> <span class="st">"]:.4f}&lt;br&gt;"</span></span>
<span id="cb20-197"><a href="#cb20-197" aria-hidden="true" tabindex="-1"></a>        string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb20-198"><a href="#cb20-198" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> string, cd  </span>
<span id="cb20-199"><a href="#cb20-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-200"><a href="#cb20-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot the tangency portfolios</span></span>
<span id="cb20-201"><a href="#cb20-201" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> c <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb20-202"><a href="#cb20-202" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rs <span class="op">+</span> extra     </span>
<span id="cb20-203"><a href="#cb20-203" aria-hidden="true" tabindex="-1"></a>    rs <span class="op">=</span> rs<span class="op">/</span><span class="dv">100</span></span>
<span id="cb20-204"><a href="#cb20-204" aria-hidden="true" tabindex="-1"></a>    rb <span class="op">=</span> rb<span class="op">/</span><span class="dv">100</span></span>
<span id="cb20-205"><a href="#cb20-205" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> [mn1, mn2]</span>
<span id="cb20-206"><a href="#cb20-206" aria-hidden="true" tabindex="-1"></a>    mns <span class="op">=</span> np.array(mns) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb20-207"><a href="#cb20-207" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [sd1, sd2]</span>
<span id="cb20-208"><a href="#cb20-208" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> np.array(sds) <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb20-209"><a href="#cb20-209" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.array(</span>
<span id="cb20-210"><a href="#cb20-210" aria-hidden="true" tabindex="-1"></a>        [[sds[<span class="dv">0</span>] <span class="op">**</span> <span class="dv">2</span>, sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c], [sds[<span class="dv">0</span>] <span class="op">*</span> sds[<span class="dv">1</span>] <span class="op">*</span> c, sds[<span class="dv">1</span>] <span class="op">**</span> <span class="dv">2</span>]]</span>
<span id="cb20-211"><a href="#cb20-211" aria-hidden="true" tabindex="-1"></a>    ).reshape(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb20-212"><a href="#cb20-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-213"><a href="#cb20-213" aria-hidden="true" tabindex="-1"></a>    Shorts <span class="op">=</span> <span class="fl">0.0</span>     </span>
<span id="cb20-214"><a href="#cb20-214" aria-hidden="true" tabindex="-1"></a>    N <span class="op">=</span> <span class="bu">len</span>(mns)</span>
<span id="cb20-215"><a href="#cb20-215" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> portfolio(mns, cov, Shorts)    </span>
<span id="cb20-216"><a href="#cb20-216" aria-hidden="true" tabindex="-1"></a>    gmv <span class="op">=</span> P.GMV <span class="op">@</span> mns</span>
<span id="cb20-217"><a href="#cb20-217" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('GMV return is: ',gmv)</span></span>
<span id="cb20-218"><a href="#cb20-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rs <span class="op">&lt;</span> gmv) <span class="kw">or</span> (<span class="kw">not</span> Shorts):</span>
<span id="cb20-219"><a href="#cb20-219" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rs)</span>
<span id="cb20-220"><a href="#cb20-220" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb20-221"><a href="#cb20-221" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb20-222"><a href="#cb20-222" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb20-223"><a href="#cb20-223" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rs)<span class="op">/</span>sdTang</span>
<span id="cb20-224"><a href="#cb20-224" aria-hidden="true" tabindex="-1"></a>            string0 <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb20-225"><a href="#cb20-225" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string0, [portTang], srTang,<span class="dv">0</span>)</span>
<span id="cb20-226"><a href="#cb20-226" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb20-227"><a href="#cb20-227" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb20-228"><a href="#cb20-228" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb20-229"><a href="#cb20-229" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb20-230"><a href="#cb20-230" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb20-231"><a href="#cb20-231" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb20-232"><a href="#cb20-232" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb20-233"><a href="#cb20-233" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>string0</span>
<span id="cb20-234"><a href="#cb20-234" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb20-235"><a href="#cb20-235" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb20-236"><a href="#cb20-236" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb20-237"><a href="#cb20-237" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (no leverage)</span></span>
<span id="cb20-238"><a href="#cb20-238" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> rb<span class="op">==</span>rs:</span>
<span id="cb20-239"><a href="#cb20-239" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">4.0</span></span>
<span id="cb20-240"><a href="#cb20-240" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb20-241"><a href="#cb20-241" aria-hidden="true" tabindex="-1"></a>                max_wgt <span class="op">=</span> <span class="fl">1.0</span></span>
<span id="cb20-242"><a href="#cb20-242" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>,<span class="dv">0</span>, max_wgt)</span>
<span id="cb20-243"><a href="#cb20-243" aria-hidden="true" tabindex="-1"></a>            portlabel <span class="op">=</span> <span class="st">'tangency portfolio'</span> <span class="cf">if</span> rb <span class="op">==</span> rs <span class="cf">else</span> <span class="st">'efficient low risk portfolio'</span> <span class="cf">if</span> rb <span class="op">!=</span> rs <span class="cf">else</span> <span class="st">'tangency portfolio'</span></span>
<span id="cb20-244"><a href="#cb20-244" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in "</span><span class="op">+</span>portlabel <span class="op">+</span> <span class="st">" = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio: "</span> <span class="op">+</span>  <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb20-245"><a href="#cb20-245" aria-hidden="true" tabindex="-1"></a>            trace5 <span class="op">=</span> go.Scatter(</span>
<span id="cb20-246"><a href="#cb20-246" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb20-247"><a href="#cb20-247" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb20-248"><a href="#cb20-248" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb20-249"><a href="#cb20-249" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb20-250"><a href="#cb20-250" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string, </span>
<span id="cb20-251"><a href="#cb20-251" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb20-252"><a href="#cb20-252" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"CAL: "</span> <span class="op">+</span> portlabel</span>
<span id="cb20-253"><a href="#cb20-253" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb20-254"><a href="#cb20-254" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace5)</span>
<span id="cb20-255"><a href="#cb20-255" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb20-256"><a href="#cb20-256" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb20-257"><a href="#cb20-257" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb20-258"><a href="#cb20-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-259"><a href="#cb20-259" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs) <span class="kw">and</span> ((gmv <span class="op">&gt;</span> rb) <span class="kw">or</span> (<span class="kw">not</span> Shorts)):</span>
<span id="cb20-260"><a href="#cb20-260" aria-hidden="true" tabindex="-1"></a>        portTang <span class="op">=</span> P.tangency(rb)</span>
<span id="cb20-261"><a href="#cb20-261" aria-hidden="true" tabindex="-1"></a>        mnTang <span class="op">=</span> portTang <span class="op">@</span> mns</span>
<span id="cb20-262"><a href="#cb20-262" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> mnTang <span class="op">&lt;</span> np.<span class="bu">max</span>(mns):</span>
<span id="cb20-263"><a href="#cb20-263" aria-hidden="true" tabindex="-1"></a>            sdTang <span class="op">=</span> np.sqrt(portTang <span class="op">@</span> cov <span class="op">@</span> portTang)</span>
<span id="cb20-264"><a href="#cb20-264" aria-hidden="true" tabindex="-1"></a>            srTang <span class="op">=</span> (mnTang <span class="op">-</span> rb)<span class="op">/</span>sdTang</span>
<span id="cb20-265"><a href="#cb20-265" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">'efficient high mean portfolio'</span></span>
<span id="cb20-266"><a href="#cb20-266" aria-hidden="true" tabindex="-1"></a>            string, cd <span class="op">=</span> custom(string, [portTang], srTang,<span class="dv">1</span>)</span>
<span id="cb20-267"><a href="#cb20-267" aria-hidden="true" tabindex="-1"></a>            trace <span class="op">=</span> go.Scatter(</span>
<span id="cb20-268"><a href="#cb20-268" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>[sdTang],</span>
<span id="cb20-269"><a href="#cb20-269" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>[mnTang],</span>
<span id="cb20-270"><a href="#cb20-270" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb20-271"><a href="#cb20-271" aria-hidden="true" tabindex="-1"></a>                customdata<span class="op">=</span>cd,</span>
<span id="cb20-272"><a href="#cb20-272" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb20-273"><a href="#cb20-273" aria-hidden="true" tabindex="-1"></a>                marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb20-274"><a href="#cb20-274" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">"efficient high mean portfolio"</span></span>
<span id="cb20-275"><a href="#cb20-275" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb20-276"><a href="#cb20-276" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace)</span>
<span id="cb20-277"><a href="#cb20-277" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb20-278"><a href="#cb20-278" aria-hidden="true" tabindex="-1"></a>            <span class="co">#Plot CAL (with leverage)            </span></span>
<span id="cb20-279"><a href="#cb20-279" aria-hidden="true" tabindex="-1"></a>            grid, mns_cal, sds_cal, srs_cal, srb_cal <span class="op">=</span> rf_plus_risky(mnTang<span class="op">*</span><span class="dv">100</span>, sdTang<span class="op">*</span><span class="dv">100</span>, rs<span class="op">*</span><span class="dv">100</span>,rb<span class="op">*</span><span class="dv">100</span>, <span class="fl">1.0</span>, <span class="fl">1.5</span>)</span>
<span id="cb20-280"><a href="#cb20-280" aria-hidden="true" tabindex="-1"></a>            string <span class="op">=</span> <span class="st">"wealth in efficient high mean portfolio = %</span><span class="sc">{text:.0f}</span><span class="st">%&lt;br&gt;"</span> <span class="op">+</span> <span class="st">"Sharpe ratio (relative to borrowing rate): "</span> <span class="op">+</span> <span class="st">"</span><span class="sc">{:.4f}</span><span class="st">"</span>.<span class="bu">format</span>(srTang) <span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb20-281"><a href="#cb20-281" aria-hidden="true" tabindex="-1"></a>            trace6 <span class="op">=</span> go.Scatter(</span>
<span id="cb20-282"><a href="#cb20-282" aria-hidden="true" tabindex="-1"></a>                x<span class="op">=</span>sds_cal, </span>
<span id="cb20-283"><a href="#cb20-283" aria-hidden="true" tabindex="-1"></a>                y<span class="op">=</span>mns_cal, </span>
<span id="cb20-284"><a href="#cb20-284" aria-hidden="true" tabindex="-1"></a>                mode<span class="op">=</span><span class="st">"lines"</span>, </span>
<span id="cb20-285"><a href="#cb20-285" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span><span class="dv">100</span> <span class="op">*</span> grid, </span>
<span id="cb20-286"><a href="#cb20-286" aria-hidden="true" tabindex="-1"></a>                hovertemplate<span class="op">=</span>string,</span>
<span id="cb20-287"><a href="#cb20-287" aria-hidden="true" tabindex="-1"></a>                line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"blue"</span>),</span>
<span id="cb20-288"><a href="#cb20-288" aria-hidden="true" tabindex="-1"></a>                name <span class="op">=</span> <span class="st">"CAL: efficient high mean"</span></span>
<span id="cb20-289"><a href="#cb20-289" aria-hidden="true" tabindex="-1"></a>            )           </span>
<span id="cb20-290"><a href="#cb20-290" aria-hidden="true" tabindex="-1"></a>            fig.add_trace(trace6)   </span>
<span id="cb20-291"><a href="#cb20-291" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb20-292"><a href="#cb20-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-293"><a href="#cb20-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-294"><a href="#cb20-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-295"><a href="#cb20-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-296"><a href="#cb20-296" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Utility plot info</span></span>
<span id="cb20-297"><a href="#cb20-297" aria-hidden="true" tabindex="-1"></a>    u1, wgt1, wgt_rf1, wgt_lo1, wgt_hi1 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver1)</span>
<span id="cb20-298"><a href="#cb20-298" aria-hidden="true" tabindex="-1"></a>    u2, wgt2, wgt_rf2, wgt_lo2, wgt_hi2 <span class="op">=</span> opt_utility(mns, cov, Shorts, rs, rb, raver2)</span>
<span id="cb20-299"><a href="#cb20-299" aria-hidden="true" tabindex="-1"></a>    string1<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver1)</span>
<span id="cb20-300"><a href="#cb20-300" aria-hidden="true" tabindex="-1"></a>    string2<span class="op">=</span><span class="st">'Risk Aversion='</span><span class="op">+</span><span class="bu">str</span>(raver2)</span>
<span id="cb20-301"><a href="#cb20-301" aria-hidden="true" tabindex="-1"></a>    grid <span class="op">=</span> np.linspace(<span class="dv">0</span>,<span class="fl">1.4</span>,<span class="dv">100</span>)</span>
<span id="cb20-302"><a href="#cb20-302" aria-hidden="true" tabindex="-1"></a>    sds <span class="op">=</span> [w<span class="op">*</span>np.<span class="bu">max</span>(sds) <span class="cf">for</span> w <span class="kw">in</span> grid]</span>
<span id="cb20-303"><a href="#cb20-303" aria-hidden="true" tabindex="-1"></a>    eret1 <span class="op">=</span> [u1 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver1<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds]</span>
<span id="cb20-304"><a href="#cb20-304" aria-hidden="true" tabindex="-1"></a>    eret2 <span class="op">=</span> [u2 <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>raver2<span class="op">*</span> (sd<span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> sd <span class="kw">in</span> sds] </span>
<span id="cb20-305"><a href="#cb20-305" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df = pd.DataFrame(data={'Standard Deviation': sds, string1: U1, string2: U2})</span></span>
<span id="cb20-306"><a href="#cb20-306" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver1,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb20-307"><a href="#cb20-307" aria-hidden="true" tabindex="-1"></a>    trace7 <span class="op">=</span> go.Scatter(</span>
<span id="cb20-308"><a href="#cb20-308" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret1, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string1, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>,dash<span class="op">=</span><span class="st">'dot'</span>),</span>
<span id="cb20-309"><a href="#cb20-309" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb20-310"><a href="#cb20-310" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"indifference curve for &lt;br&gt; optimal utility for risk aversion of "</span><span class="op">+</span><span class="bu">str</span>(np.<span class="bu">round</span>(raver2,<span class="dv">1</span>))<span class="op">+</span><span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb20-311"><a href="#cb20-311" aria-hidden="true" tabindex="-1"></a>    trace8 <span class="op">=</span> go.Scatter(</span>
<span id="cb20-312"><a href="#cb20-312" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>sds, y<span class="op">=</span>eret2, mode<span class="op">=</span><span class="st">"lines"</span>, hovertemplate<span class="op">=</span>string, name<span class="op">=</span>string2, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"purple"</span>),</span>
<span id="cb20-313"><a href="#cb20-313" aria-hidden="true" tabindex="-1"></a>    )  </span>
<span id="cb20-314"><a href="#cb20-314" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace7) </span>
<span id="cb20-315"><a href="#cb20-315" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace8) </span>
<span id="cb20-316"><a href="#cb20-316" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb20-317"><a href="#cb20-317" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-318"><a href="#cb20-318" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Standard Deviation"</span></span>
<span id="cb20-319"><a href="#cb20-319" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Expected Return"</span></span>
<span id="cb20-320"><a href="#cb20-320" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"stdev"</span>].<span class="bu">max</span>()])</span>
<span id="cb20-321"><a href="#cb20-321" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.25</span> <span class="op">*</span> df[<span class="st">"mean"</span>].<span class="bu">max</span>()])</span>
<span id="cb20-322"><a href="#cb20-322" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb20-323"><a href="#cb20-323" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb20-324"><a href="#cb20-324" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.74</span>))</span>
<span id="cb20-325"><a href="#cb20-325" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.show()</span></span>
<span id="cb20-326"><a href="#cb20-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-327"><a href="#cb20-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-328"><a href="#cb20-328" aria-hidden="true" tabindex="-1"></a>    <span class="co">#2nd plot of risky asset share as function of risk aversion:</span></span>
<span id="cb20-329"><a href="#cb20-329" aria-hidden="true" tabindex="-1"></a>    ravers <span class="op">=</span> np.arange(<span class="fl">0.2</span>,<span class="dv">20</span>,<span class="fl">0.1</span>)</span>
<span id="cb20-330"><a href="#cb20-330" aria-hidden="true" tabindex="-1"></a>    cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(<span class="bu">len</span>(ravers),<span class="dv">5</span>,<span class="dv">1</span>),dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb20-331"><a href="#cb20-331" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> [opt_utility(mns, cov, Shorts, rs, rb, A) <span class="cf">for</span> A <span class="kw">in</span> ravers]</span>
<span id="cb20-332"><a href="#cb20-332" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(wgts, columns<span class="op">=</span>[<span class="st">'u'</span>,<span class="st">'wgt_risky'</span>,<span class="st">'wgt_rf'</span>,<span class="st">'wgt_lowrisk'</span>,<span class="st">'wgt_highrisk'</span>])</span>
<span id="cb20-333"><a href="#cb20-333" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rb <span class="op">!=</span> rs):</span>
<span id="cb20-334"><a href="#cb20-334" aria-hidden="true" tabindex="-1"></a>        custdat <span class="op">=</span> np.empty(shape<span class="op">=</span>(df.shape[<span class="dv">0</span>],<span class="dv">3</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb20-335"><a href="#cb20-335" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">0</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_rf).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb20-336"><a href="#cb20-336" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">1</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_lowrisk).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb20-337"><a href="#cb20-337" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">2</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_highrisk).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb20-338"><a href="#cb20-338" aria-hidden="true" tabindex="-1"></a>        string <span class="op">=</span> <span class="st">'risk-free: %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb20-339"><a href="#cb20-339" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'efficient low risk: %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb20-340"><a href="#cb20-340" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'efficient high mean: %</span><span class="sc">{customdata[2]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb20-341"><a href="#cb20-341" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb20-342"><a href="#cb20-342" aria-hidden="true" tabindex="-1"></a>        trace1 <span class="op">=</span> go.Scatter(x<span class="op">=</span>ravers,y<span class="op">=</span>df[<span class="st">'wgt_risky'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>custdat,hovertemplate<span class="op">=</span>string, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>))</span>
<span id="cb20-343"><a href="#cb20-343" aria-hidden="true" tabindex="-1"></a>        fig <span class="op">=</span> go.Figure()</span>
<span id="cb20-344"><a href="#cb20-344" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(trace1)</span>
<span id="cb20-345"><a href="#cb20-345" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb20-346"><a href="#cb20-346" aria-hidden="true" tabindex="-1"></a>        custdat <span class="op">=</span> np.empty(shape<span class="op">=</span>(df.shape[<span class="dv">0</span>],<span class="dv">2</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb20-347"><a href="#cb20-347" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">0</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_rf).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb20-348"><a href="#cb20-348" aria-hidden="true" tabindex="-1"></a>        custdat[:,<span class="dv">1</span>] <span class="op">=</span> np.array(<span class="dv">100</span><span class="op">*</span>df.wgt_lowrisk).reshape(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb20-349"><a href="#cb20-349" aria-hidden="true" tabindex="-1"></a>        string <span class="op">=</span> <span class="st">'risk-free: %</span><span class="sc">{customdata[0]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb20-350"><a href="#cb20-350" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'tangency: %</span><span class="sc">{customdata[1]:.0f}</span><span class="st">%&lt;br&gt;'</span></span>
<span id="cb20-351"><a href="#cb20-351" aria-hidden="true" tabindex="-1"></a>        string<span class="op">+=</span> <span class="st">'&lt;extra&gt;&lt;/extra&gt;'</span></span>
<span id="cb20-352"><a href="#cb20-352" aria-hidden="true" tabindex="-1"></a>        trace1 <span class="op">=</span> go.Scatter(x<span class="op">=</span>ravers,y<span class="op">=</span>df[<span class="st">'wgt_risky'</span>],mode<span class="op">=</span><span class="st">'lines'</span>,customdata<span class="op">=</span>custdat,hovertemplate<span class="op">=</span>string, line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">"orange"</span>))</span>
<span id="cb20-353"><a href="#cb20-353" aria-hidden="true" tabindex="-1"></a>        fig <span class="op">=</span> go.Figure()</span>
<span id="cb20-354"><a href="#cb20-354" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(trace1)       </span>
<span id="cb20-355"><a href="#cb20-355" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Risk Aversion"</span></span>
<span id="cb20-356"><a href="#cb20-356" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Weight in Risky Assets"</span></span>
<span id="cb20-357"><a href="#cb20-357" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb20-358"><a href="#cb20-358" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".2"</span>)</span>
<span id="cb20-359"><a href="#cb20-359" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.74</span>))</span>
<span id="cb20-360"><a href="#cb20-360" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb20-361"><a href="#cb20-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-362"><a href="#cb20-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-363"><a href="#cb20-363" aria-hidden="true" tabindex="-1"></a>figtbl(mn_stock,mn_bond,sd_stock,sd_bond,corr,rs,extra,raver1, raver2, <span class="st">"Stock"</span>,<span class="st">"Bond"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-diffsaveborrow-cal-allocation-by-riskaversion" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="b51fa2db-f00e-470e-b5bb-774336590918" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b51fa2db-f00e-470e-b5bb-774336590918")) {                    Plotly.newPlot(                        "b51fa2db-f00e-470e-b5bb-774336590918",                        [{"customdata":[[[-344.52145417009274],[0.0],[444.52145417009274]],[[-196.3476361133951],[0.0],[296.34763611339514]],[[-122.26072708504634],[0.0],[222.26072708504634]],[[-77.80858166803708],[0.0],[177.80858166803708]],[[-48.173818056697556],[0.0],[148.17381805669757]],[[-27.006129762883614],[0.0],[127.00612976288362]],[[-11.13036354252317],[0.0],[111.13036354252317]],[[0.0],[-23.859417967993366],[123.85941796799335]],[[0.0],[-10.658863593093757],[110.65886359309376]],[[0.0],[0.1415899863695731],[99.85841001363043]],[[0.0],[9.141967969255665],[90.85803203074434]],[[0.0],[16.757672416313113],[83.24232758368689]],[[0.0],[23.285419085219512],[76.71458091478048]],[[0.0],[28.94279953160507],[71.05720046839494]],[[0.0],[33.8930074221924],[66.1069925778076]],[[0.0],[38.260837913887116],[61.73916208611288]],[[0.0],[42.14335390650467],[57.85664609349532]],[[0.0],[45.61718400516246],[54.38281599483754]],[[0.0],[48.743631093954484],[51.256368906045516]],[[0.0],[51.57232131714723],[48.42767868285277]],[[0.0],[54.14385788368613],[45.85614211631387]],[[0.0],[56.4917825748738],[43.5082174251262]],[[0.0],[58.64404687512918],[41.35595312487082]],[[0.0],[60.62413003136411],[39.37586996863589]],[[0.0],[62.45189909865789],[37.54810090134211]],[[0.0],[64.14427786467066],[35.85572213532934]],[[0.0],[65.7157724331111],[34.2842275668889]],[[0.0],[67.17888806579701],[32.82111193420298]],[[0.0],[68.54446265630388],[31.45553734369613]],[[0.0],[69.82193566032642],[30.178064339673583]],[[0.0],[71.01956660159755],[28.98043339840245]],[[0.0],[72.14461384945831],[27.855386150541694]],[[0.0],[73.2034818474449],[26.796518152555095]],[[0.0],[74.2018431026894],[25.798156897310598]],[[0.0],[75.14473984375367],[24.855260156246327]],[[0.0],[76.03666919340905],[23.963330806590943]],[[0.0],[76.88165489308257],[23.118345106917438]],[[0.0],[77.68330799277282],[22.31669200722718]],[[0.0],[78.44487843747856],[21.55512156252144]],[[0.0],[79.16929910439379],[20.830700895606213]],[[0.0],[79.85922354907498],[20.140776450925024]],[[0.0],[80.51705848470118],[19.482941515298823]],[[0.0],[81.1449918323444],[18.855008167655598]],[[0.0],[81.74501703120346],[18.25498296879654]],[[0.0],[82.31895417793824],[17.68104582206176]],[[0.0],[82.86846846736513],[17.13153153263487]],[[0.0],[83.39508632806593],[16.604913671934074]],[[0.0],[83.90020958220751],[16.09979041779249]],[[0.0],[84.38512790618338],[15.614872093816611]],[[0.0],[84.85102982529749],[15.148970174702514]],[[0.0],[85.29901243983028],[14.70098756016972]],[[0.0],[85.7300900500411],[14.269909949958903]],[[0.0],[86.14520182283667],[13.85479817716333]],[[0.0],[86.54521862207606],[13.454781377923942]],[[0.0],[86.93094910705688],[13.069050892943125]],[[0.0],[87.30314518905594],[12.696854810944059]],[[0.0],[87.66250692339985],[12.33749307660016]],[[0.0],[88.00968690403718],[11.990313095962824]],[[0.0],[88.34529421865328],[11.654705781346719]],[[0.0],[88.66989801475735],[11.330101985242646]],[[0.0],[88.98403072066455],[11.015969279335447]],[[0.0],[89.28819095971753],[10.711809040282471]],[[0.0],[89.58284619130012],[10.417153808699886]],[[0.0],[89.86843510806476],[10.131564891935241]],[[0.0],[90.1453698152305],[9.854630184769508]],[[0.0],[90.41403781471963],[9.585962185280373]],[[0.0],[90.6748038142238],[9.325196185776207]],[[0.0],[90.92801137895972],[9.071988621040283]],[[0.0],[91.17398444184603],[8.826015558153966]],[[0.0],[91.41302868605952],[8.586971313940484]],[[0.0],[91.64543281237817],[8.35456718762182]],[[0.0],[91.87146970235932],[8.12853029764068]],[[0.0],[92.09139748720587],[7.908602512794138]],[[0.0],[92.30546053112315],[7.694539468876849]],[[0.0],[92.51389033704262],[7.486109662957374]],[[0.0],[92.71690638176938],[7.283093618230629]],[[0.0],[92.91471688688775],[7.085283113112251]],[[0.0],[93.10751953111705],[6.8924804688829555]],[[0.0],[93.29550210924063],[6.7044978907593755]],[[0.0],[93.47884314222533],[6.521156857774669]],[[0.0],[93.65771244269823],[6.342287557301773]],[[0.0],[93.83227163954528],[6.167728360454716]],[[0.0],[94.00267466503881],[5.9973253349611895]],[[0.0],[94.16906820757957],[5.830931792420435]],[[0.0],[94.33159213285194],[5.668407867148062]],[[0.0],[94.49037987593411],[5.509620124065884]],[[0.0],[94.64555880667355],[5.354441193326453]],[[0.0],[94.79725057043004],[5.202749429569964]],[[0.0],[94.94557140610308],[5.054428593896921]],[[0.0],[95.09063244318988],[4.909367556810118]],[[0.0],[95.23253997947046],[4.767460020529535]],[[0.0],[95.37139574077726],[4.628604259222746]],[[0.0],[95.5072971241839],[4.49270287581609]],[[0.0],[95.64033742583462],[4.359662574165379]],[[0.0],[95.7706060545343],[4.229393945465699]],[[0.0],[95.89818873212677],[4.101811267873234]],[[0.0],[96.02316768160509],[3.9768323183949184]],[[0.0],[96.14562180382123],[3.854378196178776]],[[0.0],[96.26562684359303],[3.734373156406967]],[[0.0],[96.38325554594363],[3.6167444540563753]],[[0.0],[96.49857780315007],[3.5014221968499237]],[[0.0],[96.61166079322633],[3.3883392067736717]],[[0.0],[96.72256911041647],[3.2774308895835214]],[[0.0],[96.83136488823159],[3.168635111768414]],[[0.0],[96.93810791552188],[3.061892084478113]],[[0.0],[97.04285574604039],[2.9571442539596093]],[[0.0],[97.14566380191967],[2.8543361980803317]],[[0.0],[97.24658547145253],[2.75341452854746]],[[0.0],[97.34567220153937],[2.6543277984606317]],[[0.0],[97.44297358513812],[2.5570264148618738]],[[0.0],[97.53853744402979],[2.4614625559702175]],[[0.0],[97.63240990718883],[2.367590092811167]],[[0.0],[97.72463548502931],[2.2753645149706903]],[[0.0],[97.81525713977692],[2.184742860223088]],[[0.0],[97.90431635220126],[2.0956836477987406]],[[0.0],[97.99185318492604],[2.0081468150739523]],[[0.0],[98.07790634251992],[1.9220936574800729]],[[0.0],[98.1625132285576],[1.8374867714423981]],[[0.0],[98.24570999982798],[1.7542900001720207]],[[0.0],[98.3275316178542],[1.6724683821457975]],[[0.0],[98.40801189788002],[1.59198810211999]],[[0.0],[98.48718355546639],[1.5128164445336156]],[[0.0],[98.56507825083362],[1.4349217491663846]],[[0.0],[98.64172663107496],[1.3582733689250337]],[[0.0],[98.7171583703601],[1.282841629639908]],[[0.0],[98.79140220823916],[1.2085977917608348]],[[0.0],[98.8644859861514],[1.1355140138486042]],[[0.0],[98.93643668223552],[1.063563317764482]],[[0.0],[99.00728044453372],[0.9927195554662815]],[[0.0],[99.0770426226747],[0.9229573773253064]],[[0.0],[99.14574779811657],[0.854252201883432]],[[0.0],[99.21341981302551],[0.7865801869744948]],[[0.0],[99.28008179786116],[0.7199182021388473]],[[0.0],[99.34575619773628],[0.6542438022637209]],[[0.0],[99.41046479761322],[0.5895352023867817]],[[0.0],[99.4742287463971],[0.5257712536029024]],[[0.0],[99.5370685799812],[0.4629314200188084]],[[0.0],[99.59900424329791],[0.40099575670209386]],[[0.0],[99.66005511142437],[0.3399448885756273]],[[0.0],[99.72024000979015],[0.2797599902098602]],[[0.0],[99.77957723353109],[0.22042276646890846]],[[0.0],[99.8380845660309],[0.16191543396909536]],[[0.0],[99.89577929669043],[0.10422070330956545]],[[0.0],[99.95267823796155],[0.04732176203845473]],[[0.11597857090080987],[99.88402142909919],[0.0]],[[0.7954617098742789],[99.20453829012573],[0.0]],[[1.4657626442670213],[98.53423735573298],[0.0]],[[2.127066250681331],[97.87293374931866],[0.0]],[[2.779552475676783],[97.22044752432322],[0.0]],[[3.423396499016673],[96.57660350098332],[0.0]],[[4.05876889047051],[95.9412311095295],[0.0]],[[4.685835760467438],[95.31416423953256],[0.0]],[[5.30475890487998],[94.69524109512002],[0.0]],[[5.915695944203336],[94.08430405579666],[0.0]],[[6.518800457381535],[93.48119954261847],[0.0]],[[7.114222110519231],[92.88577788948076],[0.0]],[[7.702106780705808],[92.2978932192942],[0.0]],[[8.282596675166776],[91.71740332483323],[0.0]],[[8.85583044594701],[91.144169554053],[0.0]],[[9.42194330031999],[90.57805669968],[0.0]],[[9.981067107108144],[90.01893289289185],[0.0]],[[10.533330499089077],[89.46666950091092],[0.0]],[[11.078858971655603],[88.9211410283444],[0.0]],[[11.617774977887974],[88.38222502211202],[0.0]],[[12.150198020189872],[87.84980197981012],[0.0]],[[12.676244738631858],[87.32375526136813],[0.0]],[[13.196028996139987],[86.80397100386001],[0.0]],[[13.709661960659869],[86.29033803934013],[0.0]],[[14.217252184420692],[85.78274781557931],[0.0]],[[14.718905680418237],[85.28109431958177],[0.0]],[[15.214725996229772],[84.78527400377023],[0.0]],[[15.704814285268887],[84.29518571473112],[0.0]],[[16.18926937558345],[83.81073062441655],[0.0]],[[16.66818783629439],[83.3318121637056],[0.0]],[[17.14166404176999],[82.85833595823001],[0.0]],[[17.609790233624402],[82.3902097663756],[0.0]],[[18.0726565806265],[81.9273434193735],[0.0]],[[18.530351236600673],[81.46964876339933],[0.0]],[[18.98296039639732],[81.01703960360268],[0.0]],[[19.430568350008393],[80.56943164999161],[0.0]],[[19.873257534898457],[80.12674246510154],[0.0]],[[20.311108586620307],[79.6888914133797],[0.0]],[[20.744200387779998],[79.25579961222],[0.0]],[[21.172610115413626],[78.82738988458638],[0.0]],[[21.596413286836125],[78.40358671316388],[0.0]],[[22.015683804018813],[77.98431619598118],[0.0]],[[22.430493996550627],[77.56950600344938],[0.0]],[[22.840914663235544],[77.15908533676445],[0.0]],[[23.247015112376424],[76.75298488762358],[0.0]],[[23.64886320079329],[76.35113679920671],[0.0]],[[24.046525371622508],[75.95347462837749],[0.0]],[[24.440066690940508],[75.55993330905949],[0.0]],[[24.829550883255248],[75.17044911674475],[0.0]],[[25.215040365905228],[74.78495963409478],[0.0]],[[25.596596282405702],[74.4034037175943],[0.0]],[[25.974278534779284],[74.02572146522071],[0.0]],[[26.348145814906655],[73.65185418509334],[0.0]],[[26.718255634932262],[73.28174436506774],[0.0]]],"hovertemplate":"risk-free: %{customdata[0]:.0f}%<br>efficient low risk: %{customdata[1]:.0f}%<br>efficient high mean: %{customdata[2]:.0f}%<br><extra></extra>","line":{"color":"orange"},"mode":"lines","x":[0.2,0.30000000000000004,0.4000000000000001,0.5000000000000001,0.6000000000000001,0.7000000000000002,0.8000000000000003,0.9000000000000001,1.0000000000000002,1.1000000000000003,1.2000000000000004,1.3000000000000003,1.4000000000000004,1.5000000000000004,1.6000000000000003,1.7000000000000004,1.8000000000000005,1.9000000000000006,2.000000000000001,2.1000000000000005,2.200000000000001,2.3000000000000007,2.400000000000001,2.500000000000001,2.600000000000001,2.700000000000001,2.800000000000001,2.9000000000000012,3.000000000000001,3.100000000000001,3.200000000000001,3.300000000000001,3.4000000000000012,3.5000000000000013,3.6000000000000014,3.7000000000000015,3.8000000000000016,3.9000000000000012,4.000000000000001,4.100000000000001,4.200000000000002,4.300000000000002,4.400000000000001,4.500000000000002,4.600000000000001,4.700000000000002,4.800000000000002,4.900000000000002,5.000000000000002,5.100000000000001,5.200000000000002,5.300000000000002,5.400000000000002,5.500000000000002,5.600000000000002,5.700000000000002,5.800000000000002,5.900000000000002,6.000000000000002,6.100000000000002,6.200000000000002,6.3000000000000025,6.400000000000002,6.500000000000003,6.600000000000002,6.700000000000002,6.8000000000000025,6.900000000000002,7.000000000000003,7.100000000000002,7.200000000000003,7.3000000000000025,7.400000000000003,7.500000000000003,7.600000000000002,7.700000000000003,7.8000000000000025,7.900000000000003,8.000000000000002,8.100000000000003,8.200000000000003,8.300000000000002,8.400000000000002,8.500000000000002,8.600000000000001,8.700000000000003,8.800000000000002,8.900000000000002,9.000000000000002,9.100000000000001,9.200000000000003,9.300000000000002,9.400000000000002,9.500000000000002,9.600000000000003,9.700000000000003,9.800000000000002,9.900000000000002,10.000000000000002,10.100000000000003,10.200000000000003,10.300000000000002,10.400000000000002,10.500000000000004,10.600000000000003,10.700000000000003,10.800000000000002,10.900000000000002,11.000000000000004,11.100000000000003,11.200000000000003,11.300000000000002,11.400000000000002,11.500000000000004,11.600000000000003,11.700000000000003,11.800000000000002,11.900000000000004,12.000000000000004,12.100000000000003,12.200000000000003,12.300000000000002,12.400000000000004,12.500000000000004,12.600000000000003,12.700000000000003,12.800000000000004,12.900000000000004,13.000000000000004,13.100000000000003,13.200000000000003,13.300000000000004,13.400000000000004,13.500000000000004,13.600000000000003,13.700000000000005,13.800000000000004,13.900000000000004,14.000000000000004,14.100000000000003,14.200000000000005,14.300000000000004,14.400000000000004,14.500000000000004,14.600000000000005,14.700000000000005,14.800000000000004,14.900000000000004,15.000000000000004,15.100000000000005,15.200000000000005,15.300000000000004,15.400000000000004,15.500000000000004,15.600000000000005,15.700000000000005,15.800000000000004,15.900000000000004,16.000000000000007,16.100000000000005,16.200000000000006,16.300000000000004,16.400000000000006,16.500000000000004,16.600000000000005,16.700000000000006,16.800000000000004,16.900000000000006,17.000000000000004,17.100000000000005,17.200000000000006,17.300000000000004,17.400000000000006,17.500000000000004,17.600000000000005,17.700000000000006,17.800000000000004,17.900000000000006,18.000000000000004,18.100000000000005,18.200000000000006,18.300000000000004,18.400000000000006,18.500000000000007,18.600000000000005,18.700000000000006,18.800000000000004,18.900000000000006,19.000000000000007,19.100000000000005,19.200000000000006,19.300000000000004,19.400000000000006,19.500000000000007,19.600000000000005,19.700000000000006,19.800000000000004,19.900000000000006],"y":[4.445214541700928,2.963476361133951,2.2226072708504634,1.7780858166803708,1.4817381805669756,1.2700612976288361,1.1113036354252317,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.9988402142909919,0.9920453829012572,0.9853423735573298,0.9787293374931867,0.9722044752432322,0.9657660350098333,0.9594123110952949,0.9531416423953256,0.9469524109512002,0.9408430405579666,0.9348119954261846,0.9288577788948077,0.9229789321929419,0.9171740332483322,0.9114416955405299,0.9057805669968001,0.9001893289289186,0.8946666950091092,0.889211410283444,0.8838222502211203,0.8784980197981013,0.8732375526136814,0.8680397100386001,0.8629033803934013,0.8578274781557931,0.8528109431958176,0.8478527400377023,0.8429518571473111,0.8381073062441655,0.8333181216370561,0.8285833595823001,0.823902097663756,0.819273434193735,0.8146964876339933,0.8101703960360268,0.8056943164999161,0.8012674246510154,0.7968889141337969,0.7925579961222,0.7882738988458637,0.7840358671316388,0.7798431619598118,0.7756950600344937,0.7715908533676445,0.7675298488762358,0.7635113679920671,0.7595347462837749,0.7555993330905949,0.7517044911674475,0.7478495963409477,0.744034037175943,0.7402572146522072,0.7365185418509335,0.7328174436506774],"type":"scatter"}],                        {"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"xaxis":{"title":{"text":"Risk Aversion"},"tickformat":".2"},"yaxis":{"title":{"text":"Weight in Risky Assets"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.74}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b51fa2db-f00e-470e-b5bb-774336590918');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 2.16: Preferences and Efficient Portfolios</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
<section id="sec-portfolio-class" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="sec-portfolio-class"><span class="header-section-number">2.5</span> Appendix: The Portfolio Class in Python</h2>
<p>A number of the examples in this chapter make use of the Portfolio class object defined below. The Portfolio class object implements the various quadratic programming problems encountered in mean-variance analysis using the CVXOPT package. The CVXOPT user guide is available <a href="https://cvxopt.org/userguide/index.html"> here </a>.</p>
<p>The function <code>cvxopt.solvers.qp</code> solves problems of the general form: <span class="math display">\[\begin{align}
    \underset{w}{\text{min  }}&amp; \frac{1}{2} w' Q w + p'x \\
     \text{subject to  } &amp; Gw \le h \\
                        &amp; Aw = b \\
\end{align}\]</span></p>
<p>For our purposes, the optimizer is usually solving for a <span class="math inline">\(N \times 1\)</span> vector of portfolio weights, <span class="math inline">\(w\)</span>. The objective function often takes <span class="math inline">\(Q\)</span> as the <span class="math inline">\(N \times N\)</span> covariance matrix of returns and <span class="math inline">\(p\)</span> as a <span class="math inline">\(N \times 1\)</span> vector of zeros.</p>
<p>The constraint <span class="math inline">\(Gw \le h\)</span> can be used to put position limits on the portfolio weights. The most common use of this is short-selling constraints. This is accomplished by setting <span class="math inline">\(G\)</span> equal to the negative of the <span class="math inline">\(N \times N\)</span> identity matrix (that is, a matrix with -1s on the diagonal and zero elsewhere), and <span class="math inline">\(h\)</span> equal to a <span class="math inline">\(N \times 1\)</span> vector of zeros. Additional position limits could be enforced by adding rows to <span class="math inline">\(G\)</span> and <span class="math inline">\(h\)</span>. For instance, many funds have maximum position limits in addition to short-sale constraints.</p>
<p>The constraint <span class="math inline">\(Aw=b\)</span> usually includes the constraint that the portfolio is fulling invested; that is, the portfolio weights sum to 100%. This is accomplished by setting <span class="math inline">\(A\)</span> equal to a <span class="math inline">\(N \times 1\)</span> vector of ones and setting <span class="math inline">\(b=1\)</span>. <span class="math inline">\(A\)</span> and <span class="math inline">\(b\)</span> can include additional rows for other constraints. For instance, setting a target expected return would be accomplished by adding a row to <span class="math inline">\(A\)</span> with the asset mean vector and adding a row to <span class="math inline">\(b\)</span> with the target expected return. This is done when solving for a point on the mean-variance frontier.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Defining the Portfolio Class in Python
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb21"><pre class="sourceCode p code-with-copy"><code class="sourceCode pascal"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> numpy <span class="kw">as</span> np</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>from cvxopt <span class="kw">import</span> matrix</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>from cvxopt.solvers <span class="kw">import</span> qp <span class="kw">as</span> Solver, options <span class="kw">as</span> SolverOptions</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>from scipy.optimize <span class="kw">import</span> minimize_scalar</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>SolverOptions["show_progress"] = <span class="kw">False</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> portfolio:</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    def __init__(<span class="kw">self</span>, means, cov, Shorts):</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span>.means = np.<span class="kw">array</span>(means)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span>.cov = np.<span class="kw">array</span>(cov)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span>.Shorts = Shorts</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">self</span>.n = len(means)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> Shorts:</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>            w = np.linalg.solve(cov, np.ones(<span class="kw">self</span>.n))</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">self</span>.GMV = w / np.sum(w)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>            w = np.linalg.solve(cov, means)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>            <span class="kw">self</span>.piMu = w / np.sum(w)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">else</span>:</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>            n = <span class="kw">self</span>.n</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>            Q = matrix(cov, tc="d")</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>            p = matrix(np.zeros(n), (n, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>            G = matrix(-np.identity(n), tc="d")</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>            h = matrix(np.zeros(n), (n, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>            A = matrix(np.ones(n), (<span class="dv">1</span>, n), tc="d")</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>            b = matrix([<span class="dv">1</span>], (<span class="dv">1</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>            sol = Solver(Q, p, G, h, A, b)</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>            <span class="kw">self</span>.GMV = np.<span class="kw">array</span>(sol["x"]).flatten() <span class="kw">if</span> sol["status"] == "optimal" <span class="kw">else</span> np.<span class="kw">array</span>(n * [np.nan])</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    def frontier(<span class="kw">self</span>, m):</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">self</span>.Shorts:</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>            gmv = <span class="kw">self</span>.GMV</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>            piMu = <span class="kw">self</span>.piMu</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>            m1 = gmv @ <span class="kw">self</span>.means</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>            m2 = piMu @ <span class="kw">self</span>.means</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>            a = (m - m2) / (m1 - m2)</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>            return a * gmv + (<span class="dv">1</span> - a) * piMu</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>        <span class="kw">else</span>:</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>            n = <span class="kw">self</span>.n</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>            Q = matrix(<span class="kw">self</span>.cov, tc="d")</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>            p = matrix(np.zeros(n), (n, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>            G = matrix(-np.identity(n), tc="d")</span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>            h = matrix(np.zeros(n), (n, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>            A = matrix(np.vstack((np.ones(n), <span class="kw">self</span>.means)), (<span class="dv">2</span>, n), tc="d")</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>            b = matrix([<span class="dv">1</span>, m], (<span class="dv">2</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>            sol = Solver(Q, p, G, h, A, b)</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>            return np.<span class="kw">array</span>(sol["x"]).flatten() <span class="kw">if</span> sol["status"] == "optimal" <span class="kw">else</span> np.<span class="kw">array</span>(n * [np.nan])</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    def tangency(<span class="kw">self</span>, r):</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">self</span>.Shorts:</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>            w = np.linalg.solve(<span class="kw">self</span>.cov, <span class="kw">self</span>.means - r)</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>            return w / np.sum(w)</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>        <span class="kw">else</span>:</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>            def f(m):</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>                w = <span class="kw">self</span>.frontier(m)</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>                mn = w @ <span class="kw">self</span>.means</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>                sd = np.sqrt(w.T @ <span class="kw">self</span>.cov @ w)</span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>                return - (mn - r) / sd</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>            m = minimize_scalar(f, bounds=[max(r, np.min(<span class="kw">self</span>.means)), max(r, np.max(<span class="kw">self</span>.means))], method="bounded").x</span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>            return <span class="kw">self</span>.frontier(m)</span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>    def optimal(<span class="kw">self</span>, raver, rs=None, rb=None):</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>        n = <span class="kw">self</span>.n</span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="kw">self</span>.Shorts:</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> (rs <span class="kw">or</span> rs==<span class="dv">0</span>) <span class="kw">and</span> (rb <span class="kw">or</span> rb==<span class="dv">0</span>):</span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>                Q = np.zeros((n + <span class="dv">2</span>, n + <span class="dv">2</span>))</span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>                Q[<span class="dv">2</span>:, <span class="dv">2</span>:] = raver * <span class="kw">self</span>.cov</span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>                Q = matrix(Q, tc="d")</span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>                p = np.<span class="kw">array</span>([-rs, rb] + list(-<span class="kw">self</span>.means))</span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>                p = matrix(p, (n + <span class="dv">2</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>                G = np.zeros((<span class="dv">2</span>, n + <span class="dv">2</span>))</span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>                G[<span class="dv">0</span>, <span class="dv">0</span>] = G[<span class="dv">1</span>, <span class="dv">1</span>] = -<span class="dv">1</span></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>                G = matrix(G, (<span class="dv">2</span>, n+<span class="dv">2</span>), tc="d")</span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>                h = matrix([<span class="dv">0</span>, <span class="dv">0</span>], (<span class="dv">2</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a>                A = matrix([<span class="dv">1</span>, -<span class="dv">1</span>] + n*[<span class="dv">1</span>], (<span class="dv">1</span>, n+<span class="dv">2</span>), tc="d")</span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>                b = matrix([<span class="dv">1</span>], (<span class="dv">1</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a>                sol = Solver(Q, p, G, h, A, b)</span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>                return np.<span class="kw">array</span>(sol["x"]).flatten()[<span class="dv">2</span>:] <span class="kw">if</span> sol["status"] == "optimal" <span class="kw">else</span> None</span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a>            <span class="kw">else</span>:</span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>                w = np.linalg.solve(<span class="kw">self</span>.cov, <span class="kw">self</span>.means)</span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a>                a = np.sum(w)</span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a>                return (a/raver)*<span class="kw">self</span>.piMu + (<span class="dv">1</span>-a/raver)*<span class="kw">self</span>.GMV</span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>        <span class="kw">else</span>:</span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>           <span class="kw">if</span> (rs <span class="kw">or</span> rs==<span class="dv">0</span>) <span class="kw">and</span> (rb <span class="kw">or</span> rb==<span class="dv">0</span>):</span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a>                Q = np.zeros((n + <span class="dv">2</span>, n + <span class="dv">2</span>))</span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a>                Q[<span class="dv">2</span>:, <span class="dv">2</span>:] = raver * <span class="kw">self</span>.cov</span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a>                Q = matrix(Q, tc="d")</span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a>                p = np.<span class="kw">array</span>([-rs, rb] + list(-<span class="kw">self</span>.means))</span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a>                p = matrix(p, (n+<span class="dv">2</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a>                G = matrix(-np.identity(n + <span class="dv">2</span>), tc="d")</span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a>                h = matrix(np.zeros(n+<span class="dv">2</span>), (n+<span class="dv">2</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a>                A = matrix([<span class="dv">1</span>, -<span class="dv">1</span>] + n * [<span class="dv">1</span>], (<span class="dv">1</span>, n+<span class="dv">2</span>), tc="d")</span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a>                b = matrix([<span class="dv">1</span>], (<span class="dv">1</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a>                sol = Solver(Q, p, G, h, A, b)</span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a>                return np.<span class="kw">array</span>(sol["x"]).flatten()[<span class="dv">2</span>:] <span class="kw">if</span> sol["status"] == "optimal" <span class="kw">else</span> None</span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a>           <span class="kw">else</span>:</span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a>                Q = matrix(raver * <span class="kw">self</span>.cov, tc="d")</span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a>                p = matrix(-<span class="kw">self</span>.means, (n, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>                G = matrix(-np.identity(n), tc="d")</span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>                h = matrix(np.zeros(n), (n, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a>                A = matrix(np.ones(n), (<span class="dv">1</span>, n), tc="d")</span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a>                b = matrix([<span class="dv">1</span>], (<span class="dv">1</span>, <span class="dv">1</span>), tc="d")</span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a>                sol = Solver(Q, p, G, h, A, b)</span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a>                return np.<span class="kw">array</span>(sol["x"]).flatten() <span class="kw">if</span> sol["status"] == "optimal" <span class="kw">else</span> None</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="sec-excel" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="sec-excel"><span class="header-section-number">2.6</span> Appendix: Portfolios in Excel</h2>
<p>MAYBE WE COLLECT ALL OF THE EXCEL TUTORIALS HERE AND DO PYTHON ONLY IN THE MAIN TEXT?</p>


</section>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p>In Excel, given arrays of expected returns and portfolio weights, the portfolio expected return can be calculated using the SUMPRODUCT command.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>In Excel, portfolio variance can be calculated with the command MMULT(TRANSPOSE(w),MMULT(V,w)) where w is a column of portfolio weights and V is the covariance matrix.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>These limits are calculated using <span class="math inline">\(\text{sd}[r_p]=\sqrt{\overline{\text{cov}}}=\sqrt{\overline{\text{corr}}\sigma^2_{\text{all}}}\)</span>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>This is true if the interest rates are lower than expected returns. If interest rates are set higher than expected returns, then the efficient portfolios may not exist.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>The blue dotted lines extend the blue solid lines, but the points on the blue dotted lines are infeasible, because they involve saving at the borrowing rate or borrowing at the savings rate.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>For intermediate risk aversion levels, the optimal weight in the efficient low-risk portfolio solves <span class="math display">\[ \underset{a}\max E[a\cdot r_{\text{low}} + (1-a)\cdot r_{\text{high}}] - 0.5\cdot A \cdot \text{var}[a\cdot r_{\text{low}} + (1-a)\cdot r_{\text{high}}]\,. \]</span> The covariance between the efficient low risk and high mean portfolios (<span class="math inline">\(\text{cov}[r_{\text{low}}, r_{\text{high}}\)</span>) can be calculated as <span class="math inline">\(w_{\text{low}}' V w_{\text{high}}\)</span>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./miracle.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Miracle of Compound Interest</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./input_sensitivity.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Portfolio Optimization Sensitivity to Inputs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>