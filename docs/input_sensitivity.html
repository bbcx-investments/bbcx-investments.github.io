<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Modern Investments: Theory, Data, and Practice - 6&nbsp; Optimal Portfolios: Sensitivity to Inputs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./fixed-income.html" rel="next">
<link href="./portfolios_frictions.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
        <script type="text/javascript">
        window.PlotlyConfig = {MathJaxConfig: 'local'};
        if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
        if (typeof require !== 'undefined') {
        require.undef("plotly");
        requirejs.config({
            paths: {
                'plotly': ['https://cdn.plot.ly/plotly-2.14.0.min']
            }
        });
        require(['plotly'], function(Plotly) {
            window._Plotly = Plotly;
        });
        }
        </script>
        

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Optimal Portfolios: Sensitivity to Inputs</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Modern Investments: Theory, Data, and Practice</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./miracle.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Miracle of Compound Interest</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./diversification.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Miracle of Diversification</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./portfolios.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Optimal Portfolios: Theory</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./portfolios_frictions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Optimal Portfolios: Practice</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./input_sensitivity.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Optimal Portfolios: Sensitivity to Inputs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fixed-income.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Fixed Income</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sensitivity-of-weights" id="toc-sensitivity-of-weights" class="nav-link active" data-scroll-target="#sensitivity-of-weights"> <span class="header-section-number">6.1</span> Sensitivity of weights</a>
  <ul class="collapse">
  <li><a href="#expected-returns" id="toc-expected-returns" class="nav-link" data-scroll-target="#expected-returns">Expected returns</a></li>
  <li><a href="#standard-deviations" id="toc-standard-deviations" class="nav-link" data-scroll-target="#standard-deviations">Standard Deviations</a></li>
  <li><a href="#correlations" id="toc-correlations" class="nav-link" data-scroll-target="#correlations">Correlations</a></li>
  <li><a href="#error-maximization" id="toc-error-maximization" class="nav-link" data-scroll-target="#error-maximization">Error Maximization</a></li>
  </ul></li>
  <li><a href="#managing-the-input-list" id="toc-managing-the-input-list" class="nav-link" data-scroll-target="#managing-the-input-list"> <span class="header-section-number">6.2</span> Managing the Input List</a>
  <ul class="collapse">
  <li><a href="#estimating-expected-returns-standard-deviations-and-correlations" id="toc-estimating-expected-returns-standard-deviations-and-correlations" class="nav-link" data-scroll-target="#estimating-expected-returns-standard-deviations-and-correlations">Estimating Expected Returns, Standard Deviations, and Correlations</a></li>
  <li><a href="#estimating-standard-deviations-and-correlations-only" id="toc-estimating-standard-deviations-and-correlations-only" class="nav-link" data-scroll-target="#estimating-standard-deviations-and-correlations-only">Estimating Standard Deviations and Correlations Only</a></li>
  <li><a href="#estimating-standard-deviations-only" id="toc-estimating-standard-deviations-only" class="nav-link" data-scroll-target="#estimating-standard-deviations-only">Estimating Standard Deviations Only</a></li>
  </ul></li>
  <li><a href="#empirical-performance" id="toc-empirical-performance" class="nav-link" data-scroll-target="#empirical-performance"> <span class="header-section-number">6.3</span> Empirical Performance</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Optimal Portfolios: Sensitivity to Inputs</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>Optimal risky portfolios can be quite sensitive to the inputs, which consist of expected returns, standard deviations, and correlations across assets. An example is provided in the first section below. In practice, one must estimate these inputs. Expected returns are notoriously hard to estimate using historical data, which we discuss in detail in SECTION LINK, so we often resort to models for inputs here or assume expected returns are equal across assets. Asset volatilities and correlations can be forecasted more sucessfully. Forecasting correlations in portfolios with many assets is complicated by the fact that the number of correlations we need to estimate rises quadratically with the number of assets.</p>
<section id="sensitivity-of-weights" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="sensitivity-of-weights"><span class="header-section-number">6.1</span> Sensitivity of weights</h2>
<p>Letâ€™s return to the example of investing in US equity, developed international, and emerging market funds from the portfolios chapter. We will fix the input parameters for all but the US equity portfolio and see what happens to the tangency portfolio weights as we vary our assumptions about the US equity portfolio.</p>
<section id="expected-returns" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="expected-returns">Expected returns</h3>
<p>Portfolio optimization is quite sensitive to expected returns. This is rather unfortunate because financial economists and practitioners are not particularly great at forecasting expected returns. <a href="#fig-sensitivity-expret">Figure&nbsp;<span>6.1</span></a> shows how the tangency portfolio weights changes as a function of different inputs for the US equity expected return. With a drop in the expected return input of only about 0.5%, the allocation to US equity in the optimal risky portfolio goes to zero! If the expected return input is 5%, the optimal portfolio has short exposure equal to about 50% of total capital. Higher expected returns inputs result in greater allocations to the US equity portfolio. If the expected return input is 7%, about 80% of the optimal portfolio is invested in US equities.</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cvxopt <span class="im">import</span> matrix</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cvxopt.solvers <span class="im">import</span> qp <span class="im">as</span> Solver, options <span class="im">as</span> SolverOptions</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize_scalar</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">##### Inputs</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk-free rate</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fl">0.02</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected returns</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>means <span class="op">=</span> np.array([<span class="fl">0.06</span>, <span class="fl">0.065</span>, <span class="fl">0.08</span>])</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard deviations</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>sds <span class="op">=</span> np.array([<span class="fl">0.15</span>, <span class="fl">0.165</span>, <span class="fl">0.21</span>])</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlations</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>corr12 <span class="op">=</span> <span class="fl">0.75</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>corr13 <span class="op">=</span> <span class="fl">0.75</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>corr23 <span class="op">=</span> <span class="fl">0.75</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Covariance matrix</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>C  <span class="op">=</span> np.identity(<span class="dv">3</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">1</span>] <span class="op">=</span> C[<span class="dv">1</span>, <span class="dv">0</span>] <span class="op">=</span> corr12</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">0</span>] <span class="op">=</span> corr13</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">=</span> corr23</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>cov <span class="op">=</span> np.diag(sds) <span class="op">@</span> C <span class="op">@</span> np.diag(sds)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tangency(means, cov, rf, Shorts):</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(means)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> f(w):</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        mn <span class="op">=</span> w <span class="op">@</span> means</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        sd <span class="op">=</span> np.sqrt(w.T <span class="op">@</span> cov <span class="op">@</span> w)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span>(mn <span class="op">-</span> rf) <span class="op">/</span> sd</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initial guess (equal-weighted)</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    w0 <span class="op">=</span> (<span class="dv">1</span><span class="op">/</span>n)<span class="op">*</span>np.ones(n)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Constraint: fully-invested portfolio</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    A <span class="op">=</span> np.ones(n)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    cons <span class="op">=</span> [{<span class="st">"type"</span>: <span class="st">"eq"</span>, <span class="st">"fun"</span>: <span class="kw">lambda</span> x: A <span class="op">@</span> x <span class="op">-</span> b}]</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> Shorts<span class="op">==</span><span class="va">True</span>:</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>        <span class="co"># No short-sale constraint</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        bnds <span class="op">=</span> [(<span class="va">None</span>, <span class="va">None</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)] </span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="co"># With short-sale constraint</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        bnds <span class="op">=</span> [(<span class="dv">0</span>, <span class="va">None</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)] </span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Optimization</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    wgts_tangency <span class="op">=</span> minimize(f, w0, bounds<span class="op">=</span>bnds, constraints<span class="op">=</span>cons).x</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wgts_tangency</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>wgts_true <span class="op">=</span> tangency(means,cov,r,Shorts<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Tangency portfolios for a range of assumed asset 1 expected returns</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">len</span>(means)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>num_grid<span class="op">=</span><span class="dv">100</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>asset1_means <span class="op">=</span> np.linspace(<span class="fl">0.04</span>,<span class="fl">0.10</span>,num_grid)</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>wgts <span class="op">=</span> np.zeros((num_grid,n))</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,m <span class="kw">in</span> <span class="bu">enumerate</span>(asset1_means):</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    wgts[i] <span class="op">=</span> tangency(np.array([m, means[<span class="dv">1</span>], means[<span class="dv">2</span>]]),cov,r,Shorts<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>wgt_asset1 <span class="op">=</span> wgts[:,<span class="dv">0</span>]</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(num_grid, n<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>cd[:, <span class="dv">0</span>] <span class="op">=</span> wgts[:,<span class="dv">1</span>].reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>cd[:, <span class="dv">1</span>] <span class="op">=</span> wgts[:,<span class="dv">2</span>].reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span> <span class="st">"Asset 1 Expected Return Input = %</span><span class="sc">{x:0.2%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span><span class="st">"Tangency Portfolio Weights:&lt;br&gt;"</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 1: %</span><span class="sc">{y:0.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 2: %</span><span class="sc">{customdata[0]:.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 3: %</span><span class="sc">{customdata[1]:.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>trace <span class="op">=</span> go.Scatter(x<span class="op">=</span>asset1_means,y<span class="op">=</span>wgt_asset1,mode<span class="op">=</span><span class="st">'lines'</span>, name<span class="op">=</span><span class="st">"Tangency Weight"</span>,</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    customdata<span class="op">=</span>cd, hovertemplate<span class="op">=</span>string,</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Tangency portfolio at assume input</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>trace_true <span class="op">=</span> go.Scatter(x<span class="op">=</span>[means[<span class="dv">0</span>]],y<span class="op">=</span>[wgts_true[<span class="dv">0</span>]],mode<span class="op">=</span><span class="st">'markers'</span>, name<span class="op">=</span><span class="st">"Tangency Weight at Assumed Input"</span>,</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    customdata <span class="op">=</span> np.array([[wgts_true[<span class="dv">1</span>],wgts_true[<span class="dv">2</span>]]]), hovertemplate<span class="op">=</span>string,</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>fig.add_trace(trace)</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>fig.add_trace(trace_true)</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Asset 1 Expected Return Input"</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Asset 1 Tangency Portfolio Weight"</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-sensitivity-expret" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="b8b6ef85-a193-4030-a41f-0d4bb91b69c5" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b8b6ef85-a193-4030-a41f-0d4bb91b69c5")) {                    Plotly.newPlot(                        "b8b6ef85-a193-4030-a41f-0d4bb91b69c5",                        [{"customdata":[[[1.453809658923003],[1.363073264002307]],[[1.3951547127577062],[1.3142929513084805]],[[1.3397901705420405],[1.2678509343191176]],[[1.2872167841204751],[1.2233182153335163]],[[1.2370497807176257],[1.1804402180482727]],[[1.1925570934579324],[1.1379214611301283]],[[1.144810894278349],[1.098010778750148]],[[1.0994192558343938],[1.0597311354607277]],[[1.05606317388671],[1.0228302436616368]],[[1.01896069075456],[0.9868867843708384]],[[0.9773967583223222],[0.9520069728685703]],[[0.9376733506411055],[0.9185968416377741]],[[0.8996570828382686],[0.8864386745005165]],[[0.8631895320126045],[0.8553646044291305]],[[0.8317274010006753],[0.8254497762075373]],[[0.796805193175739],[0.7958810885841793]],[[0.763254391671813],[0.767440982267723]],[[0.7309557669493805],[0.7399941463396222]],[[0.699821727582136],[0.7134391694342055]],[[0.672710339796108],[0.6884505490661809]],[[0.6428637596470098],[0.6629557662986711]],[[0.6141283754095395],[0.6384193634385199]],[[0.586414089152285],[0.6147034062415665]],[[0.5596191236872835],[0.5917142320607506]],[[0.5336566264573203],[0.5693933974596123]],[[0.5101787120912409],[0.5486771454148913]],[[0.4852978149512465],[0.5271546557024973]],[[0.46116134891032334],[0.5063467291966475]],[[0.43776714634038655],[0.4861997075771222]],[[0.41586642277140645],[0.46842101676460585]],[[0.39367244437820864],[0.4488413337665486]],[[0.3720730396214582],[0.42993471802270083]],[[0.3499061978700288],[0.414014688174475]],[[0.3298694205741139],[0.39497435575288836]],[[0.3098254961114706],[0.3754775756752781]],[[0.2947312481104176],[0.3629108716648304]],[[0.27190376755523327],[0.3494461692707438]],[[0.25167651833423643],[0.3303090117607161]],[[0.23700633289132395],[0.31076961253917496]],[[0.2224924567494582],[0.2922028820762748]],[[0.2035625402570393],[0.28032913482589705]],[[0.18499227011091263],[0.26705819721569163]],[[0.1686115485330944],[0.25281408565804514]],[[0.15260357591447],[0.23887890759356803]],[[0.13695886450585634],[0.22525013702115887]],[[0.1216617275187362],[0.21191859731165466]],[[0.10669735794982199],[0.19887404083707158]],[[0.09205310665062766],[0.18610660285028302]],[[0.07771743642637755],[0.17360787691615515]],[[0.06367999311924886],[0.16137012388706415]],[[0.049930959984506355],[0.14938699440279457]],[[0.03646122934085511],[0.1376543107286369]],[[0.023263696062503773],[0.12617113286604983]],[[0.010335427632179288],[0.11494284976014946]],[[-0.002317125557608466],[0.10398333934922593]],[[-0.014672671805666716],[0.09331692052016236]],[[-0.02668660996883007],[0.08297490114382637]],[[-0.03829269497387706],[0.0728542641286063]],[[-0.05117835141105071],[0.062129690518129305]],[[-0.06272831761380608],[0.052192874125581885]],[[-0.0740569782965369],[0.042464811146471076]],[[-0.08516661343279447],[0.03293659039108761]],[[-0.09606136278331061],[0.023597497348991883]],[[-0.10674681913002515],[0.014436284912344822]],[[-0.11723024828190622],[0.00544195479715842]],[[-0.12752044665951937],[-0.003395449923989234]],[[-0.13762635518519173],[-0.012084692986098107]],[[-0.14755661779230456],[-0.02063337230424517]],[[-0.15731994286986536],[-0.029048094368100904]],[[-0.16692379043836686],[-0.037334731557699036]],[[-0.17637517609569303],[-0.04549880690621028]],[[-0.185680095063908],[-0.05354547326382806]],[[-0.19484378659717647],[-0.061480000302715276]],[[-0.20387055567618834],[-0.0693076429174749]],[[-0.21276369340796655],[-0.07703392173731587]],[[-0.22152511687849702],[-0.08466402958492165]],[[-0.23015535884404936],[-0.09220271462016749]],[[-0.23865304041447324],[-0.09965371657313135]],[[-0.24701489651051436],[-0.10701830440935478]],[[-0.2552363250278903],[-0.11429474017618622]],[[-0.26331269490764225],[-0.12147645566435496]],[[-0.2712414523316927],[-0.12855227838142824]],[[-0.27902474822763534],[-0.13550755762415165]],[[-0.28667074263272696],[-0.142327937090093]],[[-0.29344424567799016],[-0.14801266827740536]],[[-0.301245023740752],[-0.15492676096229663]],[[-0.30876864585254155],[-0.16159777730205355]],[[-0.31607529083834723],[-0.16804262230789957]],[[-0.32317213378227483],[-0.17422458709369018]],[[-0.3301221441688749],[-0.18035377868219515]],[[-0.3348741063815758],[-0.18665490523799633]],[[-0.3422245135003801],[-0.1927168674794471]],[[-0.349857298921886],[-0.19877111881298576]],[[-0.35704638833280816],[-0.20525164963944226]],[[-0.3643714804428023],[-0.20983813651469047]],[[-0.3712660020764216],[-0.21551212496691077]],[[-0.3781316837540295],[-0.22114382460733076]],[[-0.38493819710789967],[-0.2267415146829046]],[[-0.3896230480333853],[-0.231435635787512]],[[-0.39586791548789935],[-0.2366952858292066]]],"hovertemplate":"Asset 1 Expected Return Input = %{x:0.2%}<br>Tangency Portfolio Weights:<br>  Asset 1: %{y:0.1%}<br>  Asset 2: %{customdata[0]:.1%}<br>  Asset 3: %{customdata[1]:.1%}<br><extra></extra>","mode":"lines","name":"Tangency Weight","x":[0.04,0.040606060606060604,0.041212121212121214,0.04181818181818182,0.04242424242424243,0.04303030303030303,0.04363636363636364,0.04424242424242424,0.044848484848484846,0.045454545454545456,0.04606060606060606,0.04666666666666667,0.04727272727272727,0.04787878787878788,0.048484848484848485,0.04909090909090909,0.0496969696969697,0.05030303030303031,0.05090909090909091,0.051515151515151514,0.052121212121212124,0.05272727272727273,0.05333333333333333,0.05393939393939394,0.05454545454545455,0.05515151515151515,0.055757575757575756,0.056363636363636366,0.05696969696969697,0.05757575757575757,0.05818181818181818,0.05878787878787879,0.059393939393939395,0.06,0.06060606060606061,0.06121212121212122,0.06181818181818182,0.062424242424242424,0.06303030303030303,0.06363636363636363,0.06424242424242424,0.06484848484848485,0.06545454545454546,0.06606060606060607,0.06666666666666667,0.06727272727272728,0.06787878787878787,0.06848484848484848,0.06909090909090909,0.0696969696969697,0.07030303030303031,0.07090909090909091,0.07151515151515152,0.07212121212121211,0.07272727272727272,0.07333333333333333,0.07393939393939394,0.07454545454545455,0.07515151515151515,0.07575757575757576,0.07636363636363636,0.07696969696969697,0.07757575757575758,0.07818181818181819,0.0787878787878788,0.07939393939393939,0.08,0.0806060606060606,0.08121212121212121,0.08181818181818182,0.08242424242424243,0.08303030303030304,0.08363636363636365,0.08424242424242424,0.08484848484848484,0.08545454545454545,0.08606060606060606,0.08666666666666667,0.08727272727272728,0.08787878787878789,0.08848484848484849,0.08909090909090908,0.08969696969696969,0.0903030303030303,0.09090909090909091,0.09151515151515152,0.09212121212121213,0.09272727272727273,0.09333333333333332,0.09393939393939393,0.09454545454545454,0.09515151515151515,0.09575757575757576,0.09636363636363637,0.09696969696969697,0.09757575757575758,0.09818181818181818,0.09878787878787879,0.0993939393939394,0.1],"y":[-1.8168829229253103,-1.7094476640661866,-1.607641104861158,-1.5105349994539914,-1.4174899987658984,-1.3304785545880606,-1.242821673028497,-1.1591503912951215,-1.078893417548347,-1.0058474751253983,-0.9294037311908923,-0.8562701922788797,-0.7860957573387851,-0.718554136441735,-0.6571771772082127,-0.5926862817599182,-0.5306953739395358,-0.47094991328900265,-0.4132608970163416,-0.3611608888622888,-0.30581952594568096,-0.2525477388480593,-0.20111749539385151,-0.1513333557480341,-0.10305002391693252,-0.05885585750613226,-0.012452470653743844,0.032491921893029165,0.07603314608249129,0.11571256046398773,0.15748622185524283,0.19799224235584095,0.23607911395549622,0.2751562236729977,0.31469692821325135,0.34235788022475194,0.3786500631740229,0.4180144699050475,0.4522240545695012,0.4853046611742672,0.5161083249170638,0.5479495326733959,0.5785743658088606,0.6085175164919621,0.6377909984729848,0.6664196751696091,0.6944286012131065,0.7218402904990893,0.7486746866574673,0.7749498829936871,0.8006820456126992,0.8258844599305081,0.8505651710714465,0.8747217226076713,0.8983337862083826,0.9213557512855044,0.9437117088250038,0.9654384308452709,0.9890486608929214,1.010535443488224,1.0315921671500659,1.0522300230417068,1.0724638654343186,1.0923105342176802,1.1117882934847478,1.1309158965835087,1.14971104817129,1.1681899900965496,1.1863680372379664,1.2042585219960658,1.2218739830019032,1.2392255683277362,1.2563237868998918,1.2731781985936634,1.2897976151452826,1.3061891464634185,1.3223580734642169,1.3383067569876046,1.354033200919869,1.3695310652040764,1.3847891505719971,1.399793730713121,1.414532305851787,1.42899867972282,1.4414569139553954,1.4561717847030486,1.470366423154595,1.4841179131462465,1.497396720875965,1.51047592285107,1.521529011619572,1.5349413809798271,1.5486284177348717,1.5622980379722502,1.574209616957493,1.5867781270433323,1.5992755083613603,1.6116797117908042,1.6210586838208974,1.6325632013171059],"type":"scatter"},{"customdata":[[0.3298694205741139,0.39497435575288836]],"hovertemplate":"Asset 1 Expected Return Input = %{x:0.2%}<br>Tangency Portfolio Weights:<br>  Asset 1: %{y:0.1%}<br>  Asset 2: %{customdata[0]:.1%}<br>  Asset 3: %{customdata[1]:.1%}<br><extra></extra>","mode":"markers","name":"Tangency Weight at Assumed Input","x":[0.06],"y":[0.2751562236729977],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"Asset 1 Expected Return Input"},"tickformat":".1%"},"yaxis":{"title":{"text":"Asset 1 Tangency Portfolio Weight"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b8b6ef85-a193-4030-a41f-0d4bb91b69c5');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.1: Sensitivity of tangency weights to expected return input</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="standard-deviations" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="standard-deviations">Standard Deviations</h3>
<p><a href="#fig-sensitivity-sd">Figure&nbsp;<span>6.2</span></a> shows the sensitivity of the US market allocation in the tangency portfolio for different standard deviation inputs. For values in the region of the historical average volatility of 15%, higher standard deviation inputs result in lower allocations to US equities.</p>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">##### Variance input of asset 1:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Tangency portfolios for a range of assumed asset 1 standard deviations</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>asset1_sds <span class="op">=</span> np.linspace(<span class="fl">0.05</span>,<span class="fl">0.25</span>,num_grid)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>wgts <span class="op">=</span> np.zeros((num_grid,n))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,s <span class="kw">in</span> <span class="bu">enumerate</span>(asset1_sds):</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    sds_new <span class="op">=</span> np.array([s, sds[<span class="dv">1</span>], sds[<span class="dv">2</span>]])</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    wgts[i] <span class="op">=</span> tangency(means,np.diag(sds_new) <span class="op">@</span> C <span class="op">@</span> np.diag(sds_new),r,Shorts<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>wgt_asset1 <span class="op">=</span> wgts[:,<span class="dv">0</span>]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(num_grid, n<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>cd[:, <span class="dv">0</span>] <span class="op">=</span> wgts[:,<span class="dv">1</span>].reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>cd[:, <span class="dv">1</span>] <span class="op">=</span> wgts[:,<span class="dv">2</span>].reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span> <span class="st">"Asset 1 Standard Deviation Input = %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span><span class="st">"Tangency Portfolio Weights:&lt;br&gt;"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 1: %</span><span class="sc">{y:0.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 2: %</span><span class="sc">{customdata[0]:.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 3: %</span><span class="sc">{customdata[1]:.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>trace <span class="op">=</span> go.Scatter(x<span class="op">=</span>asset1_sds,y<span class="op">=</span>wgt_asset1,mode<span class="op">=</span><span class="st">'lines'</span>, name<span class="op">=</span><span class="st">"Tangency Weight"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    customdata<span class="op">=</span>cd, hovertemplate<span class="op">=</span>string,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Tangency portfolio at assumed input</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>trace_true <span class="op">=</span> go.Scatter(x<span class="op">=</span>[sds[<span class="dv">0</span>]],y<span class="op">=</span>[wgts_true[<span class="dv">0</span>]],mode<span class="op">=</span><span class="st">'markers'</span>, name<span class="op">=</span><span class="st">"Tangency Weight at Assumed Input"</span>,</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    customdata <span class="op">=</span> np.array([[wgts_true[<span class="dv">1</span>],wgts_true[<span class="dv">2</span>]]]), hovertemplate<span class="op">=</span>string,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>fig.add_trace(trace)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>fig.add_trace(trace_true)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Asset 1 Standard Deviation Input"</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Asset 1 Tangency Portfolio Weight"</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.55</span>))</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-sensitivity-sd" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="ef183dd2-f963-4430-ace8-6126ddcb16a8" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("ef183dd2-f963-4430-ace8-6126ddcb16a8")) {                    Plotly.newPlot(                        "ef183dd2-f963-4430-ace8-6126ddcb16a8",                        [{"customdata":[[[-0.12662906713865124],[-0.08992123666174003]],[[-0.13056279507521631],[-0.0918083557789219]],[[-0.1341602495604313],[-0.0935201673233642]],[[-0.13703527623784809],[-0.09531226020972619]],[[-0.14031976286270276],[-0.09607802124893854]],[[-0.1434868247653713],[-0.09670619676033324]],[[-0.14573952605065452],[-0.09712725633298747]],[[-0.14752053511094596],[-0.09729530062832566]],[[-0.14889949217305648],[-0.09699903192666359]],[[-0.14957384174344057],[-0.09657508043728899]],[[-0.15056677769202464],[-0.09501799724769444]],[[-0.150983914907034],[-0.09294179639684301]],[[-0.15039841360230644],[-0.09096291439513027]],[[-0.1493811804919039],[-0.08831209376165237]],[[-0.14795954934312708],[-0.0847987652213271]],[[-0.1453240020511633],[-0.08104279763577082]],[[-0.14314352513139209],[-0.07642908413753721]],[[-0.1397411998083676],[-0.07127379046574991]],[[-0.13550151763010945],[-0.06543499972696995]],[[-0.13030758533805048],[-0.058635600443069]],[[-0.12447744246369669],[-0.05209096630164503]],[[-0.11859613478544997],[-0.04400875536625431]],[[-0.11138848712562864],[-0.035556641358224644]],[[-0.10339265689844254],[-0.026309470125742408]],[[-0.094531044286395],[-0.016656447223573356]],[[-0.08468774784841854],[-0.005606661088794292]],[[-0.07523786594730583],[0.0051266526619019506]],[[-0.06300836477083996],[0.016882649405739275]],[[-0.05117847278508737],[0.030351291375453775]],[[-0.038450513683969526],[0.04390433903880813]],[[-0.024807607663455272],[0.057987133850626094]],[[-0.0105356662726869],[0.07254752252559733]],[[0.005923703896125343],[0.08767969771325905]],[[0.02013983143268223],[0.10306061063189564]],[[0.03672069770929004],[0.11857573100188351]],[[0.05298609847676633],[0.13562529686689626]],[[0.07027339310941437],[0.15260420923348927]],[[0.08819339397129412],[0.1700173241543708]],[[0.10618353337043644],[0.1862297171676064]],[[0.12497006321459975],[0.20444444236729503]],[[0.14412435479293464],[0.22283670897616062]],[[0.1636210264610516],[0.24136312363317428]],[[0.18348005828835692],[0.25852464917215506]],[[0.20734293084263866],[0.2750865124699464]],[[0.2238345695933029],[0.2960807878675782]],[[0.24122154471323798],[0.3174110406824266]],[[0.25957605752652285],[0.3392641009261961]],[[0.2839756272467668],[0.35668387934467904]],[[0.30389322196732976],[0.3682015588660895]],[[0.3156252452971058],[0.38423188644310485]],[[0.33926411516158256],[0.40398586821926435]],[[0.35904645857104],[0.41900609357216556]],[[0.3776340965315741],[0.4353800304147319]],[[0.3958479091669532],[0.4513391755558943]],[[0.4136590747343534],[0.4668822697648641]],[[0.4310413769325038],[0.482004207672877]],[[0.44796837873863166],[0.49669155591216513]],[[0.4633582563823871],[0.5087056934403812]],[[0.47921886056934526],[0.5220774128942346]],[[0.49457613700963765],[0.534941099263632]],[[0.5094156675443585],[0.5472911154786163]],[[0.5237267776636032],[0.5591246151789993]],[[0.5375023017899421],[0.5704409498045887]],[[0.5507382340809657],[0.5812422038766691]],[[0.5634337738084209],[0.5915328439165208]],[[0.5755908310341881],[0.601319250362518]],[[0.5872136408431076],[0.6106101013189125]],[[0.5983085327257129],[0.6194160066503549]],[[0.6088837883263871],[0.6277486842278565]],[[0.6189492332528727],[0.6356215523210481]],[[0.6285156683393102],[0.6430491853449388]],[[0.6375954065486406],[0.650046501212461]],[[0.6462004871285113],[0.6566294574225339]],[[0.6543426484457368],[0.6628143667204198]],[[0.6620312903862001],[0.6686187448277692]],[[0.6692716544697509],[0.6740620125730413]],[[0.6760628682666546],[0.679169110134913]],[[0.6824029627602728],[0.6839745220752501]],[[0.688318143277985],[0.6885183952087282]],[[0.6950294001133646],[0.6926001805609029]],[[0.7004151202737233],[0.6975467034523775]],[[0.7060397260733365],[0.6984550113247571]],[[0.7093963825317164],[0.7009426553448483]],[[0.714146101890662],[0.7061025242617007]],[[0.7184044378042628],[0.7075394291209343]],[[0.7224886077383983],[0.7114337501174688]],[[0.7262894917086279],[0.7135372136144503]],[[0.7298050180424761],[0.7154953057194603]],[[0.7330644566581465],[0.7173043333225659]],[[0.7360889509580337],[0.7189552672593756]],[[0.7388938123145175],[0.7204456005286805]],[[0.7414914350828894],[0.7217780448927851]],[[0.7438926870266105],[0.72295871978455]],[[0.7461076343209576],[0.7239950776414686]],[[0.7481456709671316],[0.7248951097014603]],[[0.7500158498375494],[0.7256666553786766]],[[0.7517266977704387],[0.7263171107793234]],[[0.7532865060378829],[0.7268535155046603]],[[0.754702893896479],[0.7272826529264343]],[[0.7559832097588481],[0.7276111068387341]]],"hovertemplate":"Asset 1 Standard Deviation Input = %{x}<br>Tangency Portfolio Weights:<br>  Asset 1: %{y:0.1%}<br>  Asset 2: %{customdata[0]:.1%}<br>  Asset 3: %{customdata[1]:.1%}<br><extra></extra>","mode":"lines","name":"Tangency Weight","x":[0.05,0.05202020202020202,0.05404040404040404,0.05606060606060606,0.05808080808080808,0.0601010101010101,0.062121212121212126,0.06414141414141414,0.06616161616161617,0.06818181818181818,0.07020202020202021,0.07222222222222223,0.07424242424242425,0.07626262626262627,0.07828282828282829,0.0803030303030303,0.08232323232323233,0.08434343434343435,0.08636363636363636,0.08838383838383838,0.0904040404040404,0.09242424242424244,0.09444444444444444,0.09646464646464648,0.09848484848484848,0.10050505050505051,0.10252525252525252,0.10454545454545455,0.10656565656565657,0.10858585858585859,0.11060606060606061,0.11262626262626263,0.11464646464646465,0.11666666666666667,0.11868686868686869,0.12070707070707071,0.12272727272727273,0.12474747474747475,0.12676767676767675,0.12878787878787878,0.13080808080808082,0.13282828282828285,0.13484848484848486,0.13686868686868686,0.1388888888888889,0.14090909090909093,0.14292929292929293,0.14494949494949494,0.14696969696969697,0.148989898989899,0.151010101010101,0.15303030303030302,0.15505050505050505,0.15707070707070708,0.1590909090909091,0.1611111111111111,0.16313131313131313,0.16515151515151516,0.1671717171717172,0.1691919191919192,0.1712121212121212,0.17323232323232324,0.17525252525252527,0.17727272727272725,0.17929292929292928,0.18131313131313131,0.18333333333333335,0.18535353535353538,0.18737373737373736,0.1893939393939394,0.19141414141414143,0.19343434343434346,0.19545454545454544,0.19747474747474747,0.1994949494949495,0.20151515151515154,0.2035353535353535,0.20555555555555555,0.20757575757575758,0.2095959595959596,0.2116161616161616,0.21363636363636362,0.21565656565656566,0.2176767676767677,0.21969696969696972,0.2217171717171717,0.22373737373737373,0.22575757575757577,0.2277777777777778,0.22979797979797978,0.2318181818181818,0.23383838383838385,0.23585858585858588,0.23787878787878786,0.2398989898989899,0.24191919191919192,0.24393939393939396,0.245959595959596,0.24797979797979797,0.25],"y":[1.2165503038003913,1.2223711508541384,1.2276804168837954,1.2323475364475742,1.2363977841116414,1.2401930215257044,1.2428667823836421,1.2448158357392716,1.24589852409972,1.2461489221807296,1.245584774939719,1.243925711303877,1.2413613279974367,1.2376932742535565,1.2327583145644543,1.2263667996869343,1.2195726092689294,1.2110149902741176,1.2009365173570794,1.1889431857811195,1.1765684087653416,1.1626048901517043,1.1469451284838534,1.129702127024185,1.1111874915099684,1.0902944089372129,1.070111213285404,1.0461257153651007,1.0208271814096337,0.9945461746451613,0.9668204738128292,0.9379881437470895,0.9063965983906157,0.8767995579354222,0.8447035712888264,0.8113886046563373,0.7771223976570965,0.741789281874335,0.7075867494619572,0.6705854944181052,0.6330389362309048,0.5950158499057742,0.5579952925394881,0.5175705566874149,0.48008464253911887,0.4413674146043355,0.4011598415472811,0.35934049340855423,0.3279052191665808,0.3001428682597895,0.2567500166191532,0.22194744785679446,0.186985873053694,0.15281291527715246,0.11945865550078248,0.08695441539461925,0.055340065349203264,0.02793605017723184,-0.0012962734635798404,-0.029517236273269742,-0.05670678302297481,-0.08285139284260248,-0.1079432515945307,-0.1319804379576347,-0.15496661772494164,-0.176910081396706,-0.19782374216202003,-0.21772453937606773,-0.23663247255424352,-0.2545707855739208,-0.271564853684249,-0.28764190776110143,-0.3028299445510452,-0.3171570151661565,-0.3306500352139692,-0.34333366704279217,-0.35523197840156756,-0.36637748483552285,-0.3768365384867132,-0.38762958067426745,-0.3979618237261008,-0.4044947373980935,-0.41033903787656484,-0.42024862615236264,-0.4259438669251969,-0.433922357855867,-0.4398267053230782,-0.44530032376193646,-0.4503687899807124,-0.4550442182174094,-0.45933941284319796,-0.46326947997567447,-0.4668514068111604,-0.4701027119624262,-0.47304078066859173,-0.475682505216226,-0.478043808549762,-0.4801400215425432,-0.4819855468229134,-0.4835943165975821],"type":"scatter"},{"customdata":[[0.3298694205741139,0.39497435575288836]],"hovertemplate":"Asset 1 Standard Deviation Input = %{x}<br>Tangency Portfolio Weights:<br>  Asset 1: %{y:0.1%}<br>  Asset 2: %{customdata[0]:.1%}<br>  Asset 3: %{customdata[1]:.1%}<br><extra></extra>","mode":"markers","name":"Tangency Weight at Assumed Input","x":[0.15],"y":[0.2751562236729977],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"Asset 1 Standard Deviation Input"},"tickformat":".1%"},"yaxis":{"title":{"text":"Asset 1 Tangency Portfolio Weight"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.55}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('ef183dd2-f963-4430-ace8-6126ddcb16a8');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.2: Sensitivity of tangency weights to standard deviation input</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="correlations" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="correlations">Correlations</h3>
<p><a href="#fig-sensitivity-corr">Figure&nbsp;<span>6.3</span></a> shows the sensitivity of the US marketâ€™s weight in the tangency portfolio for different inputs of the correlation between the US equity fund and the developed international equity fund. Lower correlations imply greater diversification benefits, so more capital is allocated to US equities for lower correlation levels, all else equal.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">##### Correlation of assets 1 and 2:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Tangency portfolios for a range of assumed asset 1 standard deviations</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>corr12_grid <span class="op">=</span> np.linspace(<span class="fl">0.15</span>,<span class="fl">0.95</span>,num_grid)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>wgts <span class="op">=</span> np.empty((num_grid,n))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_pos_def(x):</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> np.<span class="bu">all</span>(np.linalg.eigvals(x) <span class="op">&gt;</span> <span class="dv">0</span>):</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'True'</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'False'</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,c <span class="kw">in</span> <span class="bu">enumerate</span>(corr12_grid):</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Covariance matrix</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    C  <span class="op">=</span> np.identity(<span class="dv">3</span>)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">0</span>, <span class="dv">1</span>] <span class="op">=</span> C[<span class="dv">1</span>, <span class="dv">0</span>] <span class="op">=</span> c</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">0</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">0</span>] <span class="op">=</span> corr13</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    C[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">=</span> corr23</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check feasible correlations</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> is_pos_def(C):</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        wgts[i] <span class="op">=</span> tangency(means,np.diag(sds) <span class="op">@</span> C <span class="op">@</span> np.diag(sds),r,Shorts<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"not positive definite"</span> <span class="op">+</span> <span class="bu">str</span>(c<span class="op">*</span><span class="dv">100</span>))</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>wgt_asset1 <span class="op">=</span> wgts[:,<span class="dv">0</span>]</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>cd <span class="op">=</span> np.empty(shape<span class="op">=</span>(num_grid, n<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>cd[:, <span class="dv">0</span>] <span class="op">=</span> wgts[:,<span class="dv">1</span>].reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>cd[:, <span class="dv">1</span>] <span class="op">=</span> wgts[:,<span class="dv">2</span>].reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span> <span class="st">"Input: Correlation of Assets 1 and 2 = %</span><span class="sc">{x}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span><span class="st">"Tangency Portfolio Weights:&lt;br&gt;"</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 1: %</span><span class="sc">{y:0.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 2: %</span><span class="sc">{customdata[0]:.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"  Asset 3: %</span><span class="sc">{customdata[1]:.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>trace <span class="op">=</span> go.Scatter(x<span class="op">=</span>corr12_grid,y<span class="op">=</span>wgt_asset1,mode<span class="op">=</span><span class="st">'lines'</span>, name<span class="op">=</span><span class="st">"Tangency Weight"</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    customdata<span class="op">=</span>cd, hovertemplate<span class="op">=</span>string,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Tangency portfolio at assumed input</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>trace_true <span class="op">=</span> go.Scatter(x<span class="op">=</span>[corr12],y<span class="op">=</span>[wgts_true[<span class="dv">0</span>]],mode<span class="op">=</span><span class="st">'markers'</span>, name<span class="op">=</span><span class="st">"Tangency Weight at Assumed Input"</span>,</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    customdata <span class="op">=</span> np.array([[wgts_true[<span class="dv">1</span>],wgts_true[<span class="dv">2</span>]]]), hovertemplate<span class="op">=</span>string,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>fig.add_trace(trace)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>fig.add_trace(trace_true)</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Correlation of Assets 1 and 2"</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Asset 1 Tangency Portfolio Weight"</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".1%"</span>)</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.55</span>))</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-sensitivity-corr" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="8001abdc-2024-467a-b0dc-14242b6ccdda" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("8001abdc-2024-467a-b0dc-14242b6ccdda")) {                    Plotly.newPlot(                        "8001abdc-2024-467a-b0dc-14242b6ccdda",                        [{"customdata":[[[0.9796151964799709],[-1.0538154665741912]],[[0.9496728109110827],[-0.9898554475245646]],[[0.9219125039816892],[-0.930480516404564]],[[0.8950945928901493],[-0.8732957087733682]],[[0.8698814704923756],[-0.8202002630882123]],[[0.846810270253242],[-0.7701101425760721]],[[0.8246466342857068],[-0.7227262549632997]],[[0.8036448915232624],[-0.6777754361268947]],[[0.7834761249319362],[-0.6353201643663289]],[[0.764050580275299],[-0.5930072513875412]],[[0.7466632900956272],[-0.5556978375529803]],[[0.7294377723394423],[-0.5185129635647252]],[[0.7132637556593268],[-0.4836029693086979]],[[0.6977850946425512],[-0.4501992126891445]],[[0.6828508230498365],[-0.4181096893057815]],[[0.6684036430588087],[-0.38742886184530384]],[[0.6546903045912301],[-0.3581829934929606]],[[0.6416151128523276],[-0.3300171817361207]],[[0.629896331939444],[-0.3039449776360262]],[[0.6172941072738514],[-0.2774142120340475]],[[0.605460091563218],[-0.252085819999394]],[[0.594314435641746],[-0.22799552452178715]],[[0.584393906729874],[-0.2057958457509277]],[[0.5737428508131193],[-0.18317918148988052]],[[0.5636719102748206],[-0.16149690372572964]],[[0.5541123796492899],[-0.14074651940692343]],[[0.5448985502520579],[-0.12067961854273716]],[[0.5359865997060825],[-0.10116850769713372]],[[0.5273911593910393],[-0.0822058019574891]],[[0.5191663304310579],[-0.06416041696626197]],[[0.5115256333138387],[-0.04673965821225261]],[[0.5037668337777214],[-0.030743591959328003]],[[0.49652448605719035],[-0.014767170161413662]],[[0.48973249936849794],[0.0005129564440867088]],[[0.48276702026019414],[0.015857683057248422]],[[0.47598894470017344],[0.030793682775565833]],[[0.46942913554345633],[0.045288584594779045]],[[0.463088143969311],[0.05934676915859146]],[[0.45694939574316956],[0.07299731540600538]],[[0.45274611255032293],[0.0848103199113468]],[[0.4468229240492657],[0.09779409096525353]],[[0.4409724973311953],[0.11052432923634344]],[[0.4351924724384875],[0.12303376867769451]],[[0.4295353838548466],[0.13530982069008354]],[[0.4253718163706835],[0.14632773885748965]],[[0.41952710568262724],[0.15820842915907737]],[[0.4144872759505628],[0.16974680731786312]],[[0.410045129597892],[0.1806653409117095]],[[0.405443932037604],[0.1910797545703886]],[[0.40058866653617653],[0.20132240579369545]],[[0.39627358176394656],[0.2117124393437862]],[[0.3921577806995463],[0.22185427661744334]],[[0.38822772995021704],[0.23163321894719968]],[[0.3844407936263277],[0.2410260302108858]],[[0.38076158386618025],[0.25005247493368526]],[[0.3771747138257045],[0.25874159350463466]],[[0.3736824778478886],[0.26712027965094126]],[[0.3752099969549092],[0.2740658996837586]],[[0.37112966431808614],[0.2826504092923795]],[[0.3671802838215381],[0.29092162151566925]],[[0.3633612224918088],[0.2988764113578413]],[[0.3596852577903157],[0.3064956576300642]],[[0.3561988997613114],[0.3137369003970584]],[[0.3530229426210598],[0.32054695371902303]],[[0.35036493845904937],[0.3269917879966114]],[[0.3481956631662521],[0.3335707560302529]],[[0.3458073512934706],[0.3408035253639351]],[[0.3428250481640201],[0.348238916698258]],[[0.3396006211732566],[0.35535303647557254]],[[0.33641035493077526],[0.3620827081612795]],[[0.3333330172315014],[0.36850544713257655]],[[0.33037383830962996],[0.3746899824935583]],[[0.32752137687352867],[0.3806803511388728]],[[0.32476295782255005],[0.3865036064085126]],[[0.32245750193774836],[0.3938048656379629]],[[0.32875192566195244],[0.3996063049746772]],[[0.3273421578237431],[0.40572965172812975]],[[0.3260258147882056],[0.41179699948028936]],[[0.3268439745281485],[0.41544721605469814]],[[0.3262372240231068],[0.4210779405095775]],[[0.3258134117578169],[0.42665634850273837]],[[0.3255862570438768],[0.43219068003359457]],[[0.32557128429977406],[0.4376903486650312]],[[0.3257867367167763],[0.4431657272999108]],[[0.3262528619292302],[0.44862865799879736]],[[0.3280213885275812],[0.45141605971057464]],[[0.32944294362463294],[0.4564406273995772]],[[0.33130950030240197],[0.4614409960463883]],[[0.33368964396150974],[0.46643225757926043]],[[0.3366693281915256],[0.47143381847823734]],[[0.340355881947855],[0.4764697186936371]],[[0.34488425959009794],[0.4815712478199905]],[[0.3496839819890481],[0.48440224341223537]],[[0.35655612242171386],[0.48913478044104935]],[[0.3651074991471642],[0.4939309251956601]],[[0.37584028767916894],[0.4988449382073715]],[[0.38947861503224335],[0.503960587436951]],[[0.4071035441254191],[0.5094119859512525]],[[0.42698421498473216],[0.5130519404850674]],[[0.4577744189860316],[0.5186513706194064]]],"hovertemplate":"Input: Correlation of Assets 1 and 2 = %{x}<br>Tangency Portfolio Weights:<br>  Asset 1: %{y:0.1%}<br>  Asset 2: %{customdata[0]:.1%}<br>  Asset 3: %{customdata[1]:.1%}<br><extra></extra>","mode":"lines","name":"Tangency Weight","x":[0.15,0.15808080808080807,0.16616161616161615,0.17424242424242423,0.18232323232323233,0.1904040404040404,0.1984848484848485,0.20656565656565656,0.21464646464646464,0.22272727272727272,0.2308080808080808,0.23888888888888887,0.24696969696969695,0.255050505050505,0.2631313131313131,0.27121212121212124,0.27929292929292926,0.2873737373737374,0.2954545454545454,0.30353535353535355,0.31161616161616157,0.3196969696969697,0.3277777777777778,0.33585858585858586,0.34393939393939393,0.352020202020202,0.3601010101010101,0.36818181818181817,0.3762626262626263,0.3843434343434343,0.39242424242424245,0.4005050505050505,0.4085858585858586,0.41666666666666663,0.42474747474747476,0.4328282828282828,0.4409090909090909,0.44898989898989894,0.45707070707070707,0.4651515151515151,0.4732323232323232,0.48131313131313136,0.4893939393939394,0.4974747474747475,0.5055555555555555,0.5136363636363637,0.5217171717171717,0.5297979797979798,0.5378787878787878,0.545959595959596,0.554040404040404,0.5621212121212121,0.5702020202020202,0.5782828282828283,0.5863636363636363,0.5944444444444444,0.6025252525252526,0.6106060606060606,0.6186868686868687,0.6267676767676768,0.6348484848484849,0.6429292929292929,0.651010101010101,0.6590909090909091,0.6671717171717172,0.6752525252525253,0.6833333333333333,0.6914141414141415,0.6994949494949495,0.7075757575757576,0.7156565656565657,0.7237373737373738,0.7318181818181818,0.73989898989899,0.747979797979798,0.7560606060606061,0.7641414141414141,0.7722222222222223,0.7803030303030303,0.7883838383838384,0.7964646464646464,0.8045454545454546,0.8126262626262627,0.8207070707070707,0.8287878787878789,0.8368686868686869,0.844949494949495,0.853030303030303,0.8611111111111112,0.8691919191919192,0.8772727272727273,0.8853535353535353,0.8934343434343435,0.9015151515151515,0.9095959595959596,0.9176767676767676,0.9257575757575758,0.9338383838383839,0.9419191919191919,0.95],"y":[1.0742002700942204,1.040182636613482,1.0085680124228746,0.9782011158832189,0.9503187925958365,0.9232998723228301,0.8980796206775928,0.8741305446036324,0.8518440394343927,0.8289566711122422,0.809034547457353,0.789075191225283,0.770339213649371,0.7524141180465932,0.7352588662559449,0.7190252187864951,0.7034926889017306,0.6884020688837931,0.6740486456965823,0.6601201047601961,0.6466257284361759,0.6336810888800412,0.6214019390210535,0.6094363306767613,0.5978249934509091,0.5866341397576336,0.5757810682906794,0.5651819079910513,0.5548146425664496,0.5449940865352042,0.535214024898414,0.5269767581816068,0.5182426841042235,0.5097545441874153,0.5013752966825574,0.4932173725242607,0.4852822798617645,0.47756508687209753,0.47005328885082515,0.4624435675383301,0.4553829849854808,0.44850317343246127,0.441773758883818,0.43515479545506996,0.4283004447718269,0.42226446515829524,0.4157659167315741,0.4092895294903986,0.4034763133920074,0.39808892767012805,0.39201397889226725,0.3859879426830104,0.38013905110258334,0.3745331761627865,0.3691859412001345,0.36408369266966095,0.35919724250117024,0.35072410336133225,0.3462199263895343,0.3418980946627926,0.3377623661503498,0.33381908457962006,0.3300641998416302,0.32643010365991715,0.3226432735443392,0.318233580803495,0.3133891233425943,0.30893603513772183,0.30504634235117073,0.3015069369079452,0.29816153563592207,0.29493617919681175,0.2917982719875986,0.28873343576893734,0.2837376324242887,0.2716417693633705,0.26692819044812716,0.26217718573150517,0.2577088094171534,0.2526848354673158,0.24753023973944469,0.24222306292252857,0.23673836703519474,0.23104753598331285,0.22511848007197255,0.22056255176184417,0.21411642897578992,0.20724950365120984,0.19987809845922985,0.19189685333023698,0.18317439935850785,0.17354449258991156,0.16591377459871653,0.15430909713723676,0.14096157565717563,0.12531477411345954,0.10656079753080558,0.08348446992332845,0.05996384453020043,0.023574210394562027],"type":"scatter"},{"customdata":[[0.3298694205741139,0.39497435575288836]],"hovertemplate":"Input: Correlation of Assets 1 and 2 = %{x}<br>Tangency Portfolio Weights:<br>  Asset 1: %{y:0.1%}<br>  Asset 2: %{customdata[0]:.1%}<br>  Asset 3: %{customdata[1]:.1%}<br><extra></extra>","mode":"markers","name":"Tangency Weight at Assumed Input","x":[0.75],"y":[0.2751562236729977],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"Correlation of Assets 1 and 2"},"tickformat":".1%"},"yaxis":{"title":{"text":"Asset 1 Tangency Portfolio Weight"},"tickformat":".1%"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.55}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('8001abdc-2024-467a-b0dc-14242b6ccdda');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.3: Sensitivity of tangency weights to standard deviation input</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="error-maximization" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="error-maximization">Error Maximization</h3>
<p>The sensitivity of the tangency portfolio to each of these inputs presents a practical problem for investors seeking to implement optimal portfolios in a quantitative sense. Portfolio optimization is sometimes referred to as error maximization because the tangency portfolio weights may reflect errors in the inputs rather than optimal diversification and risk-reward trade-offs.</p>
<p>When the estimated expected return for an asset is too high relative to its true (but unknown) value, the resulting tangency portfolio will put too much weight on that asset, relative to the unknown <em>true</em> tangency portfolio. Similarly, the tangency portfolio weight will be too low for an asset with an over-estimated variance relative to the tangency portfolio calculated using the true (but unknown) variance. Finally, optimal portfolios will overallocate capital to assets with underestimated correlations and underallocate capital to assets with overestimated correlations. The error maximization problem becomes more acute for portfolios with many assets simply because the increase in the number of correlations to be estimated increases the likelihood of substantial errors.</p>
</section>
</section>
<section id="managing-the-input-list" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="managing-the-input-list"><span class="header-section-number">6.2</span> Managing the Input List</h2>
<p>A simple way to estimate expected return, standard deviations, and correlations is to use historical data. Specifically, the historical arithmetic average return is an estimate of an assetâ€™s expected return. The historical standard deviation is an estimate of the volatility of the assetâ€™s return. Historical correlations across assets can be estimated using the historical return series of each pair of assets.</p>
<p>To understand the estimation issues that arise in practice, we can simulate the performance of various optimization strategies for choosing portfolios of US, developed international, and emerging market equity funds. We will simulate from an assumed distribution corresponding to the inputs we have been using so far and then use this simulated â€œhistoricalâ€ data to estimate inputs to our portfolio optimization problem each year. We assume an investment horizon of 50 years. Each year, weâ€™ll use the last 30 years of data to estimate the inputs and rebalance our portfolio to the optimal portfolio based on the new input estimates. As a benchmark, weâ€™ll use a simple equal-weighted portfolio of the three funds. For this example, an equal-weighted portfolio is fairly close to the â€œperfect informationâ€ tangency portfolio of 27.5% in US equities, 33% in developed international, and 39.5% in emerging markets. Note that an equal-weighted portfolio is the optimal risky portfolio if we assume that (i) all expected returns are the same (ii) all standard deviations are the same, and (iii) all correlations across assets are the same. Thus, the equal-weighted portfolio is the optimal portfolio if we â€œgive upâ€ on estimating differences in inputs across assets.</p>
<section id="estimating-expected-returns-standard-deviations-and-correlations" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="estimating-expected-returns-standard-deviations-and-correlations">Estimating Expected Returns, Standard Deviations, and Correlations</h3>
<p>We run 500 simulations of the exercise above. The empirical Sharpe ratios of the equal-weighted strategy and the full historical estimation strategy are plotted in <a href="#fig-input-est-1">Figure&nbsp;<span>6.4</span></a>, along with the 45-degree line. The equal-weighted strategy outperformed the full estimation strategy in terms of realized Sharpe ratios for any data point falling below the 45-degree line. This occurs in just over three-quarters of the simulations. Trying to estimate the nine inputs each period and find the optimal portfolio generally performed worse than simply equally-weighting the three funds. <a href="#fig-input-est-histogram1">Figure&nbsp;<span>6.5</span></a> plots the histogram of the difference in simulated Sharpe ratios of the equal-weighted portfolio minus that of the full historical estimation strategy. On average across the simulations, the Sharpe ratio of the EW strategy is 0.058 higher than the Sharpe ratio of the full historical estimation strategy.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cvxopt <span class="im">import</span> matrix</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cvxopt.solvers <span class="im">import</span> qp <span class="im">as</span> Solver, options <span class="im">as</span> SolverOptions</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize_scalar</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> multivariate_normal <span class="im">as</span> mvn</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">##### Inputs</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of simulations</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>num_sims <span class="op">=</span> <span class="dv">500</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk aversion</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>raver <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk-free rate</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fl">0.02</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected returns</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>means <span class="op">=</span> np.array([<span class="fl">0.06</span>, <span class="fl">0.065</span>, <span class="fl">0.08</span>])</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard deviations</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>sds <span class="op">=</span> np.array([<span class="fl">0.15</span>, <span class="fl">0.165</span>, <span class="fl">0.21</span>])</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlations</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>corr12 <span class="op">=</span> <span class="fl">0.75</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>corr13 <span class="op">=</span> <span class="fl">0.75</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>corr23 <span class="op">=</span> <span class="fl">0.75</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Covariance matrix</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>C  <span class="op">=</span> np.identity(<span class="dv">3</span>)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">1</span>] <span class="op">=</span> C[<span class="dv">1</span>, <span class="dv">0</span>] <span class="op">=</span> corr12</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">0</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">0</span>] <span class="op">=</span> corr13</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>C[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">=</span> corr23</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>cov <span class="op">=</span> np.diag(sds) <span class="op">@</span> C <span class="op">@</span> np.diag(sds)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Window length (and initial period)</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>window <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Length of out-of-sample period</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">len</span>(means)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> tangency(means, cov, rf, short_lb):</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co">    short_lb: lower bound on position weights</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="co">    examples: 0  = no short-selling</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co">              -1 = no more than -100% in a given asset</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co">              None=no restrictions on short-selling</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(means)</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> f(w):</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>        mn <span class="op">=</span> w <span class="op">@</span> means</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>        sd <span class="op">=</span> np.sqrt(w.T <span class="op">@</span> cov <span class="op">@</span> w)</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span>(mn <span class="op">-</span> rf) <span class="op">/</span> sd</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initial guess (equal-weighted)</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>    w0 <span class="op">=</span> (<span class="dv">1</span><span class="op">/</span>n)<span class="op">*</span>np.ones(n)</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Constraint: fully-invested portfolio</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>    A <span class="op">=</span> np.ones(n)</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    cons <span class="op">=</span> [{<span class="st">"type"</span>: <span class="st">"eq"</span>, <span class="st">"fun"</span>: <span class="kw">lambda</span> x: A <span class="op">@</span> x <span class="op">-</span> b}]</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    bnds <span class="op">=</span> [(short_lb, <span class="va">None</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)] </span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Optimization</span></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    wgts_tangency <span class="op">=</span> minimize(f, w0, bounds<span class="op">=</span>bnds, constraints<span class="op">=</span>cons).x</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wgts_tangency</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gmv(cov, short_lb): </span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a><span class="co">    short_lb: lower bound on position weights</span></span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a><span class="co">    examples: 0  = no short-selling</span></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a><span class="co">              -1 = no more than -100% in a given asset</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a><span class="co">              None=no restrictions on short-selling</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span>    </span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(cov)</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>    Q <span class="op">=</span> matrix(cov, tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> matrix(np.zeros(n), (n, <span class="dv">1</span>), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> short_lb<span class="op">==</span><span class="va">None</span>:</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>        <span class="co"># No position limits</span></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>        G <span class="op">=</span> matrix(np.zeros((n,n)), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>        h <span class="op">=</span> matrix(np.zeros(n), (n, <span class="dv">1</span>), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Constraint: short-sales not allowed</span></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>        G <span class="op">=</span> matrix(<span class="op">-</span>np.identity(n), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>        h <span class="op">=</span> matrix(<span class="op">-</span>short_lb <span class="op">*</span> np.ones(n), (n, <span class="dv">1</span>), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fully-invested constraint</span></span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>    A <span class="op">=</span> matrix(np.ones(n), (<span class="dv">1</span>, n), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> matrix([<span class="dv">1</span>], (<span class="dv">1</span>, <span class="dv">1</span>), tc<span class="op">=</span><span class="st">"d"</span>)</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>    sol <span class="op">=</span> Solver(Q, p, G, h, A, b, options<span class="op">=</span>{<span class="st">'show_progress'</span>: <span class="va">False</span>})</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    wgts_gmv <span class="op">=</span> np.array(sol[<span class="st">"x"</span>]).flatten() <span class="cf">if</span> sol[<span class="st">"status"</span>] <span class="op">==</span> <span class="st">"optimal"</span> <span class="cf">else</span> np.array(n <span class="op">*</span> [np.nan])</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wgts_gmv</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a><span class="co"># wgts_gmv = gmv(cov,short_lb=None)</span></span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate data</span></span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulation(means, cov, short_lb, seed):</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>    rets <span class="op">=</span> mvn.rvs(means, cov, size<span class="op">=</span>window<span class="op">+</span>T, random_state <span class="op">=</span> seed)</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.DataFrame(data<span class="op">=</span>rets, columns<span class="op">=</span>[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>])</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>    df.columns</span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'mn0'</span>]<span class="op">=</span>df[<span class="st">'r0'</span>].rolling(window).mean()</span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'mn1'</span>]<span class="op">=</span>df[<span class="st">'r1'</span>].rolling(window).mean()</span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'mn2'</span>]<span class="op">=</span>df[<span class="st">'r2'</span>].rolling(window).mean()</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'sd0'</span>]<span class="op">=</span>df[<span class="st">'r0'</span>].rolling(window).std()</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'sd1'</span>]<span class="op">=</span>df[<span class="st">'r1'</span>].rolling(window).std()</span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'sd2'</span>]<span class="op">=</span>df[<span class="st">'r2'</span>].rolling(window).std()</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>    corrs <span class="op">=</span> df[[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>]].rolling(window, min_periods<span class="op">=</span>window).corr()</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'c01'</span>]<span class="op">=</span>corrs.loc[(<span class="bu">slice</span>(<span class="va">None</span>),<span class="st">'r0'</span>),<span class="st">'r1'</span>].values</span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'c02'</span>]<span class="op">=</span>corrs.loc[(<span class="bu">slice</span>(<span class="va">None</span>),<span class="st">'r0'</span>),<span class="st">'r2'</span>].values</span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'c12'</span>]<span class="op">=</span>corrs.loc[(<span class="bu">slice</span>(<span class="va">None</span>),<span class="st">'r1'</span>),<span class="st">'r2'</span>].values</span>
<span id="cb4-112"><a href="#cb4-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-113"><a href="#cb4-113" aria-hidden="true" tabindex="-1"></a>    wgts_true <span class="op">=</span> tangency(means,cov,r,short_lb)</span>
<span id="cb4-114"><a href="#cb4-114" aria-hidden="true" tabindex="-1"></a>    wgt_cal_true <span class="op">=</span> (wgts_true <span class="op">@</span> means <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts_true <span class="op">@</span> cov <span class="op">@</span> wgts_true))</span>
<span id="cb4-115"><a href="#cb4-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-116"><a href="#cb4-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-117"><a href="#cb4-117" aria-hidden="true" tabindex="-1"></a>    model_list <span class="op">=</span> [<span class="st">'true'</span>, <span class="st">'ew'</span>, <span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>]</span>
<span id="cb4-118"><a href="#cb4-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> model <span class="kw">in</span> model_list:</span>
<span id="cb4-119"><a href="#cb4-119" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> np.nan  <span class="co"># portret is the realized portfolio return of the 100% risky asset portfolio</span></span>
<span id="cb4-120"><a href="#cb4-120" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> model <span class="kw">not</span> <span class="kw">in</span> [<span class="st">'true'</span>,<span class="st">'ew'</span>]:</span>
<span id="cb4-121"><a href="#cb4-121" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'wgt0_'</span><span class="op">+</span>model] <span class="op">=</span> np.nan</span>
<span id="cb4-122"><a href="#cb4-122" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'wgt1_'</span><span class="op">+</span>model] <span class="op">=</span> np.nan</span>
<span id="cb4-123"><a href="#cb4-123" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'wgt2_'</span><span class="op">+</span>model] <span class="op">=</span> np.nan</span>
<span id="cb4-124"><a href="#cb4-124" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span>np.nan</span>
<span id="cb4-125"><a href="#cb4-125" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span>np.nan <span class="co">#raver_portret_ is the realized return of the CAL choice of the raver investor</span></span>
<span id="cb4-126"><a href="#cb4-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-127"><a href="#cb4-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> np.arange(window,window<span class="op">+</span>T):</span>
<span id="cb4-128"><a href="#cb4-128" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Full estimation inputs at each point in time</span></span>
<span id="cb4-129"><a href="#cb4-129" aria-hidden="true" tabindex="-1"></a>        means <span class="op">=</span> df[[<span class="st">'mn0'</span>,<span class="st">'mn1'</span>,<span class="st">'mn2'</span>]].iloc[i<span class="op">-</span><span class="dv">1</span>].values</span>
<span id="cb4-130"><a href="#cb4-130" aria-hidden="true" tabindex="-1"></a>        sds   <span class="op">=</span> df[[<span class="st">'sd0'</span>,<span class="st">'sd1'</span>,<span class="st">'sd2'</span>]].iloc[i<span class="op">-</span><span class="dv">1</span>].values</span>
<span id="cb4-131"><a href="#cb4-131" aria-hidden="true" tabindex="-1"></a>        corr01 <span class="op">=</span> df.loc[i<span class="op">-</span><span class="dv">1</span>,<span class="st">'c01'</span>]</span>
<span id="cb4-132"><a href="#cb4-132" aria-hidden="true" tabindex="-1"></a>        corr02 <span class="op">=</span> df.loc[i<span class="op">-</span><span class="dv">1</span>,<span class="st">'c02'</span>]</span>
<span id="cb4-133"><a href="#cb4-133" aria-hidden="true" tabindex="-1"></a>        corr12 <span class="op">=</span> df.loc[i<span class="op">-</span><span class="dv">1</span>,<span class="st">'c12'</span>]</span>
<span id="cb4-134"><a href="#cb4-134" aria-hidden="true" tabindex="-1"></a>        C  <span class="op">=</span> np.identity(<span class="dv">3</span>)</span>
<span id="cb4-135"><a href="#cb4-135" aria-hidden="true" tabindex="-1"></a>        C[<span class="dv">0</span>, <span class="dv">1</span>] <span class="op">=</span> C[<span class="dv">1</span>, <span class="dv">0</span>] <span class="op">=</span> corr01</span>
<span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>        C[<span class="dv">0</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">0</span>] <span class="op">=</span> corr02</span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>        C[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">=</span> C[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">=</span> corr12</span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>        cov <span class="op">=</span> np.diag(sds) <span class="op">@</span> C <span class="op">@</span> np.diag(sds)</span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>        <span class="co">##### Note: all portfolio weights considered to be beginning of period weights</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>        <span class="co">##### (so multiply by contemporaneous realized returns)</span></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Theoretical optimal weights</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> <span class="st">'true'</span></span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model]<span class="op">=</span> df.loc[i,[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>]].values <span class="op">@</span> wgts_true</span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> wgt_cal_true <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)</span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Full estimation tangency portfolio</span></span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> <span class="st">'est_all'</span></span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>        w0, w1, w2 <span class="op">=</span> tangency(means,cov,r,short_lb)</span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt0_'</span> <span class="op">+</span> model] <span class="op">=</span> w0</span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt1_'</span> <span class="op">+</span> model] <span class="op">=</span> w1</span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt2_'</span> <span class="op">+</span> model] <span class="op">=</span> w2</span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>        <span class="co"># df.loc[i,'portret_'+model] = df.loc[i,['r0','r1','r2']].values @ df.loc[i,['wgt0_'+model,'wgt1_'+model,'wgt2_'+model]].values</span></span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>        wgts <span class="op">=</span> np.array([w0, w1, w2])</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>]].values <span class="op">@</span> wgts</span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (wgts <span class="op">@</span> means <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Estimate only covariance matrix</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> <span class="st">'est_cov'</span></span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>        w0, w1, w2 <span class="op">=</span> gmv(cov,short_lb)</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt0_'</span> <span class="op">+</span> model] <span class="op">=</span> w0</span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt1_'</span> <span class="op">+</span> model] <span class="op">=</span> w1</span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt2_'</span> <span class="op">+</span> model] <span class="op">=</span> w2</span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>        <span class="co"># df.loc[i,'portret_'+model] = df.loc[i,['r0','r1','r2']].values @ df.loc[i,['wgt0_'+model,'wgt1_'+model,'wgt2_'+model]].values</span></span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>        wgts <span class="op">=</span> np.array([w0, w1, w2])</span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>]].values <span class="op">@</span> wgts</span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (means.mean() <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))</span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)</span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Estimate only standard deviations in covariance matrix</span></span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> <span class="st">'est_sds'</span></span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a>        cov[<span class="dv">0</span>, <span class="dv">1</span>] <span class="op">=</span> cov[<span class="dv">1</span>, <span class="dv">0</span>] <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a>        cov[<span class="dv">0</span>, <span class="dv">2</span>] <span class="op">=</span> cov[<span class="dv">2</span>, <span class="dv">0</span>] <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>        cov[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">=</span> cov[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb4-179"><a href="#cb4-179" aria-hidden="true" tabindex="-1"></a>        w0, w1, w2 <span class="op">=</span> gmv(cov,short_lb)</span>
<span id="cb4-180"><a href="#cb4-180" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt0_'</span> <span class="op">+</span> model] <span class="op">=</span> w0</span>
<span id="cb4-181"><a href="#cb4-181" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt1_'</span> <span class="op">+</span> model] <span class="op">=</span> w1</span>
<span id="cb4-182"><a href="#cb4-182" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt2_'</span> <span class="op">+</span> model] <span class="op">=</span> w2</span>
<span id="cb4-183"><a href="#cb4-183" aria-hidden="true" tabindex="-1"></a>        <span class="co"># df.loc[i,'portret_'+model] = df.loc[i,['r0','r1','r2']].values @ df.loc[i,['wgt0_'+model,'wgt1_'+model,'wgt2_'+model]].values</span></span>
<span id="cb4-184"><a href="#cb4-184" aria-hidden="true" tabindex="-1"></a>        wgts <span class="op">=</span> np.array([w0, w1, w2])</span>
<span id="cb4-185"><a href="#cb4-185" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (means.mean() <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))     </span>
<span id="cb4-186"><a href="#cb4-186" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb4-187"><a href="#cb4-187" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>]].values <span class="op">@</span> wgts</span>
<span id="cb4-188"><a href="#cb4-188" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)    </span>
<span id="cb4-189"><a href="#cb4-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-190"><a href="#cb4-190" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Equal-weighted portfolio</span></span>
<span id="cb4-191"><a href="#cb4-191" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> <span class="st">'ew'</span></span>
<span id="cb4-192"><a href="#cb4-192" aria-hidden="true" tabindex="-1"></a>        cov[<span class="dv">0</span>, <span class="dv">0</span>] <span class="op">=</span> cov[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">=</span> cov[<span class="dv">2</span>, <span class="dv">2</span>] <span class="op">=</span> (sds.mean())<span class="op">**</span><span class="dv">2</span></span>
<span id="cb4-193"><a href="#cb4-193" aria-hidden="true" tabindex="-1"></a>        wgts <span class="op">=</span> (<span class="dv">1</span><span class="op">/</span>n)<span class="op">*</span>np.ones(n)</span>
<span id="cb4-194"><a href="#cb4-194" aria-hidden="true" tabindex="-1"></a>        <span class="co"># df.loc[i,'portret_'+model]= df.loc[i,['r0','r1','r2']].values @ wgts_ew</span></span>
<span id="cb4-195"><a href="#cb4-195" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,[<span class="st">'r0'</span>,<span class="st">'r1'</span>,<span class="st">'r2'</span>]].values <span class="op">@</span> wgts</span>
<span id="cb4-196"><a href="#cb4-196" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (means.mean() <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))</span>
<span id="cb4-197"><a href="#cb4-197" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb4-198"><a href="#cb4-198" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)   </span>
<span id="cb4-199"><a href="#cb4-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-200"><a href="#cb4-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-201"><a href="#cb4-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-202"><a href="#cb4-202" aria-hidden="true" tabindex="-1"></a>    portret_list <span class="op">=</span> [<span class="st">'raver_portret_'</span> <span class="op">+</span>  model <span class="cf">for</span> model <span class="kw">in</span> model_list]</span>
<span id="cb4-203"><a href="#cb4-203" aria-hidden="true" tabindex="-1"></a>    stats <span class="op">=</span> df[portret_list].describe()</span>
<span id="cb4-204"><a href="#cb4-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-205"><a href="#cb4-205" aria-hidden="true" tabindex="-1"></a>    sr_df <span class="op">=</span> pd.DataFrame(dtype<span class="op">=</span><span class="bu">float</span>, columns <span class="op">=</span> [<span class="st">'sr'</span>], index <span class="op">=</span> model_list)</span>
<span id="cb4-206"><a href="#cb4-206" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> model <span class="kw">in</span> model_list:</span>
<span id="cb4-207"><a href="#cb4-207" aria-hidden="true" tabindex="-1"></a>        sr_df.loc[model,<span class="st">'sr'</span>] <span class="op">=</span> (stats.loc[<span class="st">'mean'</span>,<span class="st">'raver_portret_'</span> <span class="op">+</span>  model] <span class="op">-</span> r)<span class="op">/</span>stats.loc[<span class="st">'std'</span>,<span class="st">'raver_portret_'</span> <span class="op">+</span>  model]</span>
<span id="cb4-208"><a href="#cb4-208" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb4-209"><a href="#cb4-209" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sr_df</span>
<span id="cb4-210"><a href="#cb4-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-211"><a href="#cb4-211" aria-hidden="true" tabindex="-1"></a>sim_results <span class="op">=</span> pd.DataFrame(dtype<span class="op">=</span><span class="bu">float</span>, columns<span class="op">=</span>[<span class="st">'true'</span>, <span class="st">'ew'</span>, <span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>], index<span class="op">=</span><span class="bu">range</span>(num_sims))</span>
<span id="cb4-212"><a href="#cb4-212" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> <span class="bu">range</span>(num_sims):</span>
<span id="cb4-213"><a href="#cb4-213" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print('Simulation number: ' + str(s))</span></span>
<span id="cb4-214"><a href="#cb4-214" aria-hidden="true" tabindex="-1"></a>    sim_results.iloc[s] <span class="op">=</span> simulation(means, cov, short_lb<span class="op">=</span><span class="va">None</span>, seed<span class="op">=</span>s).T</span>
<span id="cb4-215"><a href="#cb4-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-216"><a href="#cb4-216" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> figplot(xvar, yvar):</span>
<span id="cb4-217"><a href="#cb4-217" aria-hidden="true" tabindex="-1"></a>    label_dict <span class="op">=</span> {<span class="st">'true'</span>: <span class="st">'theoretical optimal weights'</span>, </span>
<span id="cb4-218"><a href="#cb4-218" aria-hidden="true" tabindex="-1"></a>                <span class="st">'ew'</span>: <span class="st">'equal weights'</span>,</span>
<span id="cb4-219"><a href="#cb4-219" aria-hidden="true" tabindex="-1"></a>                <span class="st">'est_all'</span>: <span class="st">'estimate all inputs'</span>,</span>
<span id="cb4-220"><a href="#cb4-220" aria-hidden="true" tabindex="-1"></a>                <span class="st">'est_cov'</span>: <span class="st">'estimate covariance matrix only'</span>,</span>
<span id="cb4-221"><a href="#cb4-221" aria-hidden="true" tabindex="-1"></a>                <span class="st">'est_sds'</span>: <span class="st">'estimate standard deviations only'</span>}</span>
<span id="cb4-222"><a href="#cb4-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-223"><a href="#cb4-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-224"><a href="#cb4-224" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot simulated Sharpe ratios</span></span>
<span id="cb4-225"><a href="#cb4-225" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span><span class="st">"Sharpe Ratios:&lt;br&gt;"</span></span>
<span id="cb4-226"><a href="#cb4-226" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"  "</span><span class="op">+</span> label_dict[xvar] <span class="op">+</span> <span class="st">": %</span><span class="sc">{x:0.3}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb4-227"><a href="#cb4-227" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"  "</span><span class="op">+</span> label_dict[yvar] <span class="op">+</span> <span class="st">": %</span><span class="sc">{y:0.3}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb4-228"><a href="#cb4-228" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb4-229"><a href="#cb4-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-230"><a href="#cb4-230" aria-hidden="true" tabindex="-1"></a>    trace <span class="op">=</span> go.Scatter(x<span class="op">=</span>sim_results[xvar],y<span class="op">=</span>sim_results[yvar],mode<span class="op">=</span><span class="st">'markers'</span>, name<span class="op">=</span><span class="st">'A simulated outcome'</span>, hovertemplate<span class="op">=</span>string)</span>
<span id="cb4-231"><a href="#cb4-231" aria-hidden="true" tabindex="-1"></a>    max_sr <span class="op">=</span> sim_results.<span class="bu">max</span>().<span class="bu">max</span>()</span>
<span id="cb4-232"><a href="#cb4-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-233"><a href="#cb4-233" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot 45 degree line</span></span>
<span id="cb4-234"><a href="#cb4-234" aria-hidden="true" tabindex="-1"></a>    frac_x_beats_y <span class="op">=</span> (sim_results[xvar] <span class="op">&gt;</span> sim_results[yvar]).mean()</span>
<span id="cb4-235"><a href="#cb4-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-236"><a href="#cb4-236" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span><span class="st">"Below this line: "</span> <span class="op">+</span> <span class="ss">f'(</span><span class="sc">{</span>frac_x_beats_y<span class="sc">:.0%}</span><span class="ss"> of simulations)&lt;br&gt;'</span> <span class="op">+</span> <span class="st">""</span></span>
<span id="cb4-237"><a href="#cb4-237" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span><span class="st">"   `"</span><span class="op">+</span>label_dict[xvar] <span class="op">+</span> <span class="st">"` outperformed `"</span> <span class="op">+</span>label_dict[yvar] <span class="op">+</span> <span class="st">"` "</span> <span class="op">+</span> <span class="st">"&lt;br&gt;"</span></span>
<span id="cb4-238"><a href="#cb4-238" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span><span class="st">"Above this line: "</span> <span class="op">+</span> <span class="ss">f'(</span><span class="sc">{</span><span class="dv">1</span><span class="op">-</span>frac_x_beats_y<span class="sc">:.0%}</span><span class="ss"> of simulations)&lt;br&gt;'</span> <span class="op">+</span> <span class="st">""</span> </span>
<span id="cb4-239"><a href="#cb4-239" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span><span class="st">"   `"</span><span class="op">+</span>label_dict[yvar] <span class="op">+</span> <span class="st">"` outperformed `"</span> <span class="op">+</span>label_dict[xvar] <span class="op">+</span> <span class="st">"`&lt;br&gt;"</span>    </span>
<span id="cb4-240"><a href="#cb4-240" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span>   </span>
<span id="cb4-241"><a href="#cb4-241" aria-hidden="true" tabindex="-1"></a>    trace_45 <span class="op">=</span> go.Scatter(x<span class="op">=</span>np.linspace(<span class="dv">0</span>,max_sr,<span class="dv">100</span>),y<span class="op">=</span>np.linspace(<span class="dv">0</span>,max_sr,<span class="dv">100</span>),mode<span class="op">=</span><span class="st">'lines'</span>, name<span class="op">=</span><span class="st">'45-degree line'</span>, hovertemplate<span class="op">=</span>string)</span>
<span id="cb4-242"><a href="#cb4-242" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb4-243"><a href="#cb4-243" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace)</span>
<span id="cb4-244"><a href="#cb4-244" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace_45)</span>
<span id="cb4-245"><a href="#cb4-245" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"SR: "</span> <span class="op">+</span> label_dict[xvar]</span>
<span id="cb4-246"><a href="#cb4-246" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"SR: "</span> <span class="op">+</span> label_dict[yvar]</span>
<span id="cb4-247"><a href="#cb4-247" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".2"</span>)</span>
<span id="cb4-248"><a href="#cb4-248" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(tickformat<span class="op">=</span><span class="st">".2"</span>)</span>
<span id="cb4-249"><a href="#cb4-249" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb4-250"><a href="#cb4-250" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.05</span> <span class="op">*</span> max_sr])</span>
<span id="cb4-251"><a href="#cb4-251" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(<span class="bu">range</span><span class="op">=</span>[<span class="dv">0</span>, <span class="fl">1.05</span> <span class="op">*</span> max_sr])</span>
<span id="cb4-252"><a href="#cb4-252" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb4-253"><a href="#cb4-253" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> histplot(xvar, yvar):</span>
<span id="cb4-254"><a href="#cb4-254" aria-hidden="true" tabindex="-1"></a>    label_dict <span class="op">=</span> {<span class="st">'true'</span>: <span class="st">'theoretical optimal weights'</span>, </span>
<span id="cb4-255"><a href="#cb4-255" aria-hidden="true" tabindex="-1"></a>                <span class="st">'ew'</span>: <span class="st">'equal weights'</span>,</span>
<span id="cb4-256"><a href="#cb4-256" aria-hidden="true" tabindex="-1"></a>                <span class="st">'est_all'</span>: <span class="st">'estimate all inputs'</span>,</span>
<span id="cb4-257"><a href="#cb4-257" aria-hidden="true" tabindex="-1"></a>                <span class="st">'est_cov'</span>: <span class="st">'estimate covariance matrix only'</span>,</span>
<span id="cb4-258"><a href="#cb4-258" aria-hidden="true" tabindex="-1"></a>                <span class="st">'est_sds'</span>: <span class="st">'estimate standard deviations only'</span>}</span>
<span id="cb4-259"><a href="#cb4-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-260"><a href="#cb4-260" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot differences in Sharpe ratios</span></span>
<span id="cb4-261"><a href="#cb4-261" aria-hidden="true" tabindex="-1"></a>    avg_diff <span class="op">=</span> (sim_results[xvar] <span class="op">-</span> sim_results[yvar]).mean()</span>
<span id="cb4-262"><a href="#cb4-262" aria-hidden="true" tabindex="-1"></a>    frac_x_beats_y <span class="op">=</span> (sim_results[xvar] <span class="op">&gt;</span> sim_results[yvar]).mean()</span>
<span id="cb4-263"><a href="#cb4-263" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span> <span class="st">"This bin contains %</span><span class="sc">{y:0.3}% o</span><span class="st">f simulations &lt;br&gt;"</span></span>
<span id="cb4-264"><a href="#cb4-264" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span><span class="st">"Average difference in SRs across all simulations: "</span> <span class="op">+</span> <span class="ss">f'</span><span class="sc">{</span>avg_diff<span class="sc">:.3f}</span><span class="ss"> &lt;br&gt;'</span></span>
<span id="cb4-265"><a href="#cb4-265" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span><span class="st">"'"</span> <span class="op">+</span> label_dict[xvar] <span class="op">+</span> <span class="st">"' outperforms '"</span> <span class="op">+</span> label_dict[yvar] <span class="op">+</span> <span class="st">"' in "</span> <span class="op">+</span>  <span class="ss">f'</span><span class="sc">{</span>frac_x_beats_y<span class="sc">:.0%}</span><span class="ss"> of all simulations&lt;br&gt;'</span> <span class="op">+</span> <span class="st">""</span> </span>
<span id="cb4-266"><a href="#cb4-266" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span>   </span>
<span id="cb4-267"><a href="#cb4-267" aria-hidden="true" tabindex="-1"></a>    trace<span class="op">=</span>go.Histogram(x<span class="op">=</span>(sim_results[xvar] <span class="op">-</span> sim_results[yvar]), hovertemplate <span class="op">=</span> string )</span>
<span id="cb4-268"><a href="#cb4-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-269"><a href="#cb4-269" aria-hidden="true" tabindex="-1"></a>    max_sr <span class="op">=</span> sim_results.<span class="bu">max</span>().<span class="bu">max</span>()</span>
<span id="cb4-270"><a href="#cb4-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-271"><a href="#cb4-271" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb4-272"><a href="#cb4-272" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace)</span>
<span id="cb4-273"><a href="#cb4-273" aria-hidden="true" tabindex="-1"></a>    fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Difference in SRs: '"</span> <span class="op">+</span> label_dict[xvar] <span class="op">+</span> <span class="st">"' minus '"</span> <span class="op">+</span> label_dict[yvar] <span class="op">+</span> <span class="st">"'"</span></span>
<span id="cb4-274"><a href="#cb4-274" aria-hidden="true" tabindex="-1"></a>    fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Percent of Simulations"</span></span>
<span id="cb4-275"><a href="#cb4-275" aria-hidden="true" tabindex="-1"></a>    fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".2"</span>)</span>
<span id="cb4-276"><a href="#cb4-276" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb4-277"><a href="#cb4-277" aria-hidden="true" tabindex="-1"></a>    fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[<span class="op">-</span><span class="fl">0.6</span><span class="op">*</span>max_sr, <span class="fl">0.6</span><span class="op">*</span>max_sr])</span>
<span id="cb4-278"><a href="#cb4-278" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fig.update_yaxes(range=[0, 1.05 * sim_results.max().max()])</span></span>
<span id="cb4-279"><a href="#cb4-279" aria-hidden="true" tabindex="-1"></a>    fig.update_traces(marker_line_width<span class="op">=</span><span class="dv">1</span>,marker_line_color<span class="op">=</span><span class="st">"black"</span>, histnorm<span class="op">=</span><span class="st">'percent'</span>)    </span>
<span id="cb4-280"><a href="#cb4-280" aria-hidden="true" tabindex="-1"></a>    fig.show()</span>
<span id="cb4-281"><a href="#cb4-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-282"><a href="#cb4-282" aria-hidden="true" tabindex="-1"></a>figplot(<span class="st">'ew'</span>,<span class="st">'est_all'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-input-est-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="5f0dfff8-1759-4c17-a44d-2dac296ee1dc" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("5f0dfff8-1759-4c17-a44d-2dac296ee1dc")) {                    Plotly.newPlot(                        "5f0dfff8-1759-4c17-a44d-2dac296ee1dc",                        [{"hovertemplate":"Sharpe Ratios:<br>  equal weights: %{x:0.3}<br>  estimate all inputs: %{y:0.3}<br><extra></extra>","mode":"markers","name":"A simulated outcome","x":[0.0626471901542217,0.008909585549357883,0.1086181524177272,0.1862716810834306,0.2535098120270528,0.16033264199844693,0.22012674781023434,0.13523185746615277,0.26885100557843206,0.24861720127850567,0.21540112270155112,0.26050712907951745,0.0316986314334547,0.45861749228447557,0.23104442275741974,0.24707217091988842,-0.0036034000032007293,-0.020976866140521865,0.33500359274115943,0.5351942091825582,0.2322462930547514,0.20483923126370493,-0.09980582943568672,0.4764814922277693,0.3665064746741546,0.3733665008342565,0.39682933447459995,0.11337536135283373,0.1964062375745924,0.33410331831516754,0.47020153363835065,0.4845642380454006,0.013635080433414534,0.2986212649229263,0.11491828527861105,0.3821296341990135,-0.033498697379613904,0.32236021172671603,-0.07238024183510873,0.08591515612965368,0.2599551767239067,0.2596645360238221,0.21778708829845275,0.12221564596951903,0.12081626862533014,0.35654120521006244,0.18847942428504216,-0.11116579074250144,0.4109129135291489,0.31422752597349385,0.24258468140288922,0.42446411576622467,0.34615383355595786,0.295853495858347,-0.021614886518000958,0.1500406669057268,0.35278117506092527,0.22897244065738603,0.3461905315323503,0.18643328489058605,0.36282133325444005,0.23239888547122062,0.22203782977262823,-0.13318746683427882,-0.06552385804546607,0.570244950990986,0.04712793322497612,0.25059342339064433,0.33694802912552724,0.15847040473021134,0.1321219500949433,0.25844632379127347,0.21150433918922676,0.3317100679548687,0.0714290427444476,-0.1389752233479748,0.24306387600186016,0.25684631651494344,0.12124914706053531,-0.052528499475231,0.1894276284073758,0.3969172870639482,0.5348351347741318,0.20869344898285092,0.24813867527617417,0.37671398682187235,0.0705234637994647,0.13204021147381537,0.48271665682746,0.39885693008410983,0.33925105572056163,0.35360742815716534,-0.0806335416181581,0.2187599690554244,0.34471749561207093,0.30115445366978594,0.19400209326168907,0.20600593416358265,-0.010724105769151546,0.21223925851840683,0.2797612386403197,0.39162223794702017,0.3921624956369624,0.2365698238871028,0.291336563891638,0.13324065099163868,0.21794905375675852,-0.06339463777832638,0.18742255260469767,0.2584611494745786,-0.08090557536474653,0.392023123044147,0.33156778966918166,-0.3188369608589909,0.35795466839581525,0.11266360230870724,0.30517821006568147,-0.11501730677483839,0.33962886999659697,0.13890056007979482,-0.029453694677623318,0.10113497899643123,0.5499317634178427,0.3307226335743434,-0.02194820288964286,0.14126110790082216,0.40129029670009514,0.2665026545839843,0.34865576739818743,0.5865652267154126,0.2171087102458226,-0.07808976570271847,0.24343827256326597,0.26390406177851267,0.017754074625787576,0.17967428622944376,0.16844883410145936,0.3717408433921145,0.31094890476775044,-0.12333093194196076,0.2680116028741568,0.09554603791623853,0.2603901393066892,0.1993455313422637,-0.027848297470543636,0.2946337704152134,0.26209366919103827,0.43768111791553793,0.27310071341168607,0.18930797637643224,0.0009540612174049662,0.3158493549371664,0.6482739997714978,-0.06452837288324476,0.3782390593670678,0.28549970814372905,0.20237431642550469,-0.053687054215419173,0.6724962847274232,0.15966376199118995,0.41524205254565527,0.23468895601228412,0.4531892835227003,0.1574609052347755,-0.1586284047697101,0.12253606986220958,0.0064327289058707555,0.1042402354535218,0.22964249981217771,0.2330858578827386,0.33096583724066075,0.41163894423418323,0.44094967277709496,0.24839640733258203,0.1148479805389592,0.19091350829791676,-0.07791604450884042,0.2837981335105853,0.1866873895506743,0.2811498327988744,-0.06399904610507642,0.45381419557078906,0.18361140730172767,0.24191128753306212,0.032006369004195845,0.13732080969942076,0.23229900864180736,0.4576800777884571,0.19078835690162085,0.16034977632543468,0.1552074556516379,0.1093994030585743,0.23942162991890525,0.05570079122142345,0.2533139667895533,0.11869219963495284,0.04671366056302944,0.27950833515325674,0.4395338723338147,0.46079902256638894,0.00012745577463995524,0.5376750261420874,0.4650213772777048,-0.15588338172274885,0.10337277653480773,0.22713470781487374,0.37441733863693166,0.12122075846308034,0.14141052460556228,-0.042887981571061676,0.1168773091029583,0.024485289972970902,0.13802332561498556,0.5433629998286003,0.40131544360967486,0.4571163676078334,0.21102824504842876,0.3910799302381987,0.08982792603037207,0.28959632654075396,0.1352313824880451,0.18828351550533043,0.23897880229233903,0.4416538037656013,0.07460295910443147,0.4499740240277216,-0.13438422259229657,0.25986620767123636,0.28468372751180615,-0.024498402376896326,0.14283457139086472,0.482421003563215,0.37190248851841223,0.3563190966707303,0.08117532293748028,0.3149882623398836,0.2673042192199818,0.06658371799885153,0.17612466170886557,0.5337898981479647,-0.048255611757606315,0.29503047933538246,0.06681531865380336,0.16548535576203607,0.727557322521528,0.13606673197717892,0.10905909606176536,0.20590967194317222,-0.009200561360774613,0.31780070017597617,0.10647559228651544,0.07837550754821342,0.20245788628882502,0.09949522711782179,0.35226298797656685,0.45808495620359,0.373088461833578,0.13368223306686736,0.2066748732774996,0.16763727557736946,0.09615720901411308,0.12423681055645726,0.21454871152704744,0.14102888551617296,0.2820774142393306,0.415699747882908,0.24579132280758548,0.5808878780057466,0.17426543826427654,0.365837776249236,0.16344599686154257,0.08991521404086579,-0.30725998222024237,-0.003911517754263104,0.39133311937376375,0.002193767281174503,-0.026891394867033933,0.06150069101232447,0.24147101665980006,0.3849915108313951,0.0635462597172756,0.35677770261187036,0.24437463617413563,0.3177245508985057,0.3076313611278928,0.40586734469792873,0.17684333029261395,0.6157552123788831,0.48757530841913443,0.06349573614472642,0.14644140670971012,0.3410914414177241,0.31334499454729053,0.2604657504065564,0.07747832112241584,0.06052000216878468,0.6557824909846864,0.1756580899405434,0.13675541885310688,0.43527473648923165,0.017979823553889523,0.22604749501565738,0.37842584221682435,0.27125411640862657,0.3846887069631077,0.41334746555524243,0.10728805864552117,0.2326637109194551,0.27962672639507385,0.11877312266995385,0.15720983820152915,0.3907174355895296,0.074163894015722,0.3561187229002319,0.052164117371507494,0.4167495846683737,0.5656624806903525,0.35948682909537155,0.378303922483556,0.2564535376625782,0.35238154664686167,0.22073785042769298,0.45612246761105296,0.04905897906210361,0.38795951330306916,0.08439115205126119,0.04311974808004769,0.26619756976778397,0.26570604038193674,0.15667434257492033,0.16327926890117153,0.0611910861428194,-0.11946512440827088,-0.07049302735287287,0.5929110744181576,0.4701444405714459,0.11324880465845881,-0.07195544561318523,0.5896542053415849,0.47359473800756613,0.45272367272887526,0.20736989467522812,0.27629418956673935,0.04957340923717569,0.3070903804493298,0.0012617471292279254,-0.23651017185561138,0.017653577969582283,0.09957581276194756,0.24105209035396247,0.15608865409325307,0.4768348140272766,0.050930387201609265,0.1880354598522489,-0.016580077060359386,-0.08733535373168723,0.06469880318412533,0.23200501762188006,0.024097659677819377,-0.15567613986816187,0.27820600473740553,0.3791360121535676,-0.008154576965326055,-0.2959032826453654,0.3290431973506097,0.27365032265203854,0.38034566032943345,0.42866778766417085,0.26957589245404395,0.249298170994376,0.28686158504659814,0.18892788370721283,0.3701146242817865,0.2351467258983821,0.009068222905445216,0.213578414378604,0.09768392547823856,0.018704310329750368,0.06974360180800208,0.2501776757635613,0.020969497426605897,0.20876195522087268,0.38188804001064264,0.36996373636095375,0.11320859522274668,0.37454728024534034,0.24699447166190613,0.24928652416967187,0.16528189986320035,0.22614063665761655,0.04594750045662115,0.23140072139470977,0.34040552794254125,0.08850946320888395,0.4597518143844677,0.3352469039167731,0.7051013484329286,0.5487505120416859,0.22554089107196298,0.42299620507578417,0.22202256912138632,0.22742722699037568,0.00937411778848442,0.3324841774767771,0.2473859324310365,0.25727203328419546,0.28284290387143207,0.16538608206593683,0.33798657366185425,0.2160031186186262,-0.02889085924372888,0.3741525329227677,0.3801212313492504,0.24564976998746682,0.2567591043759097,0.4745692611418223,0.041600911849133275,0.19243227843676616,0.253467049466619,0.11293118082843767,0.18972937155896327,-0.19645273410814917,0.15491710839622738,0.38866343082185034,0.05180596975392672,0.46035137946119464,-0.0725927449347261,0.20616437500139217,0.5388502790323693,0.18770839154664073,0.42594093918955217,0.1161965900559085,0.23496363384388014,0.2558122185481463,0.16876057910950992,0.3135570416906516,0.11443074495893836,0.3724076943541553,0.3189672306404036,-0.023129184651459207,0.274650719098086,0.12135071339507353,0.2467387762953273,0.11916073121656234,0.1526766391011677,0.23699679988509337,0.30675578421077476,0.43921394663595986,0.1926381518475999,0.2974644251598553,0.14590118249548137,0.021176926492556404,0.37652902293199697,0.31618358239114286,0.33642233250670145,0.37497215606502365,0.25500207025749266,0.16719474606568402,0.48217923477045327,0.04237861488755976,0.38151281039049123,0.1578265406357745,0.2845550256351552,0.20016458474890853,0.01677728532182482,0.12545978752377915,0.2384877469703205,0.09022823407123835,0.12258904777097493,0.2585319376039759,0.176169595256442,0.47654812520380957,0.46468783886747805,0.2214013662920181,0.18913530190962977,0.3060659315616357,0.24216323858874744,0.10237669808823079,0.003724233096610603,0.28646206559075205,0.3517958623270846,0.31031376412569617,0.23132447875427084,0.38950579458339224,0.3579981933448156,0.269653170524519,0.0009883217211718858,0.5024268486313567,0.21675823732882762,0.37934908825432556,0.49568125175271444,0.10828606263887798,0.4258392893858008,0.3903765633247666,0.26251161060974637,0.44459979023869045,0.06703587926883878,0.4930569371483911,-0.018365104320683747,0.14462684501373982],"y":[-0.030816480586814948,-0.0028694748443831865,0.10729000276337768,0.12367066167475464,0.20854000492248725,0.04699197359706283,0.0972436159654535,0.034388423225725086,0.19567281931427208,0.16870648025361787,-0.005292046866769812,0.25418226581766945,0.3045205755027255,0.3666082335120681,0.3381563628592843,0.12344829958047518,0.15071513094337124,0.03963344101749724,0.10112638098011462,0.41636497057084854,0.00550240315506425,0.013431114968509386,-0.002905197022502387,0.34945640751852547,0.34716262625076366,0.3031952659101367,0.29425538537136653,0.06738801088449113,0.09500235950911344,0.2738950855604766,0.26356024262597005,0.422444765475558,-0.007182778152043597,0.1323636629294241,0.05115553914859601,0.3040717257023826,-0.09782314273138376,0.33613018731511246,0.0938192871152929,0.11361934049552058,0.23682341684388847,0.11059398512509047,0.23064731634302663,-0.06445302797104147,0.1086525768158196,0.4748149586030218,0.0724049089982368,-0.06264847414818502,0.3322858474296959,0.19178218497784452,0.1633203592435248,0.2747409068922606,0.3020580351362283,0.21861728072658163,-0.11448452184492801,0.04672086386680349,0.32899357844349064,0.19558438337181092,0.2940028271272191,0.09815992216992007,0.2830108862243242,0.023416801782676726,0.22286769649667507,-0.19931109565146027,0.24287618632929672,0.4951187108185527,0.071854932796572,0.18652321505866193,0.18878937052825664,0.15098722736334189,0.14980657454196383,0.0070586732082206245,0.15577629028982237,0.3016786307400481,0.024058075039863288,-0.21139281738383595,0.04254182339035892,0.2163751149491766,0.09731880043693811,0.03905387923947879,0.17931018292621653,0.3290366815353782,0.45725231578820436,0.1588608604697933,0.16649569973743492,0.3682027211910056,0.1134174289033438,0.04019792153141277,0.33561893130829895,0.19220528337205348,0.32758734488217567,0.3711413910892391,-0.11618545084886654,0.16172315882438285,0.2923838277343898,0.3654530362182468,0.14760960793053757,0.12784720386105766,-0.11442437319668208,0.12490330830671167,0.1834686978620555,0.26260436486551225,0.24472940640243207,0.21529087493133617,0.30691295054424805,0.11566295493020129,0.2581194603529345,0.11908889452820916,0.14677672196358393,0.2704017422035215,-0.20523486177807188,0.35038008281321525,0.20871613539308465,-0.3251156620882619,0.31928908629294805,0.07064602217168982,0.23360924172218067,-0.2158298409816899,0.34521095844086774,-0.032694064989462326,-0.308394704430915,-0.01655951129146796,0.4446359802680392,0.27663534250587596,-0.08736441933869143,0.051374452355719843,0.23342988980383417,0.2433419497451867,0.33149137686017216,0.5924843233973495,0.1674000033024645,-0.191109967264024,0.11225797082354318,0.4373552303778581,0.02458808335070472,-0.05263446447287828,0.14473634977189526,0.30666889820560933,0.12496995203905396,-0.005739449843520016,0.2664744151444466,-0.0032954332421915367,0.1820198105864206,0.16676936297015363,-0.03813389627530035,0.310861614650266,0.1456431182774256,0.3980983403418311,0.24337229867098814,0.29099963298275683,0.03316337519084846,0.2114817957631841,0.553072076103426,0.061014660098525436,0.2961209603138523,0.28927397826859436,0.05381906626177726,-0.17862611757118677,0.5520939046848911,-0.05554023139471175,0.29703485440104405,0.21121233520762123,0.4602898808331422,0.08923457425678008,-0.1783410767763631,0.17884377438085114,-0.14860939739009682,0.12155837046812187,0.16112169788419398,0.19712989716972973,0.19242332380672322,0.367784087457723,0.3872896363408322,0.13517780566835033,0.1033819163537129,0.2371513612350995,-0.23577635466030075,0.25694251866745993,0.3048695458208965,0.12063761737277356,-0.03154721088771738,0.26042174561441706,0.2430642002597662,0.1347384537329074,0.00033075887571408177,0.1513737233070777,-0.0437936560978556,0.3324029011196487,0.2329098000152464,0.2343132158912288,0.04082061766453775,0.24072570990574657,0.36284337526486105,0.005145120709099633,0.24589717154144713,0.10416034579257683,0.20659185664078142,0.27195971196868524,0.35344370198099223,0.3799214424744959,0.19734253163202026,0.5586127222155536,0.4153421277540357,-0.10950515910160809,0.11238389051769763,0.4417675844749938,0.32786472625097013,0.09387200676051015,0.09381544934083627,-0.035912363738583614,0.00306794015565529,0.09683582942148498,-0.009628604819672279,0.4240703075791762,0.2633174304016732,0.4679806326075598,0.20180849214054755,0.27931512302126893,0.023075202998380947,0.2102891743077211,0.06417375804356762,0.07640664823148333,0.18071150182345966,0.471495258251231,0.24056411149269832,0.355526944035334,0.09392497472660491,0.09572929930783497,0.24951531459550144,-0.023136346982869906,0.13249073362888703,0.46257584461951246,0.2883161955024377,0.199889218239706,0.08996020028253605,0.1591792428247294,0.19158384794721148,0.06009349110632007,0.19303853696193732,0.5627925749832178,0.020770209177341573,0.07524602272547276,0.1788864460358671,0.11480265572367361,0.6842816160297873,0.11924286186206226,-0.09569013307813867,0.06081561907544774,0.2285467435238034,0.27746821458691573,0.09491349762030105,0.32253098712309425,0.3774581169429109,-0.1552392825950518,0.30144357685399487,0.465608755192825,0.3148662262641338,0.10866853332746715,0.1893310841946325,0.05247011187123687,0.022698743521233432,0.2340231523162214,0.27689532102481834,0.11550278382180171,0.17839324876139362,0.34286642916870785,0.07950117443119659,0.5223755058758754,0.12641382841944648,0.2876839853207272,0.0036135827007978153,0.0018444951181597557,-0.30262795752255195,0.19373504334143266,0.304109598880802,-0.00833449425989679,-0.0669787241016928,-0.05206925177607152,-0.04227207212519795,0.3190079390513058,0.043342299074357334,0.2353851996304849,0.13708320604586785,0.27023451392005365,0.1596644703196027,0.3648147909185075,0.2152518528300671,0.5947601842896904,0.3240981541398766,0.03354421878446894,0.25171619098096504,0.2633208862667283,0.24331239821758616,0.11511727312257998,0.1978245661060167,0.0035231138299545535,0.559576432541154,0.21654514300931596,0.05143370661472805,0.3164098535512684,0.01099678087754782,0.16042877082939766,0.2952711847450965,0.32926118217205363,0.3142824780935241,0.38906367403224895,0.38009985366102056,0.03807655229424684,0.11855242418856729,0.18119967980898286,0.08328114833684432,0.24796424592879618,0.12548605574027766,0.2801818864462159,0.058567638327989134,0.3232218382551695,0.42675565287844175,0.21944415724806554,0.2876469402341247,0.2369101034565539,0.1586456058075135,0.18128253101422498,0.42305659190769407,-0.0973296833651682,0.23961760128514561,0.07895220221168943,-0.16383552816270994,0.13272707405003126,0.29742504728893265,0.23651137566440153,0.0994676863994635,0.014485124626023561,0.008941843563250026,0.03384084644432599,0.339467521763808,0.4349217441598425,-0.025175938291707754,0.030567586365587446,0.41009678190370696,0.44655462845546406,0.4360466945138418,0.22964424756797633,0.256172064683905,0.08022081790773877,0.23744729701225628,0.08394341692264617,-0.3913267456517756,-0.12151745539447452,0.05917376746475395,0.15651110513438832,0.084306231976825,0.41917724659414574,-0.08431877111196324,0.040158267115052715,-0.0958446705963999,-0.14560434386530402,0.04105455533229448,0.05627177864316115,-0.0729937220465035,-0.04356776665065667,0.27308963688346793,0.37089375691018633,-0.1427825873969485,-0.19732698224928213,0.26082683023444003,0.17241205639570148,0.1466726520086409,0.31180283807066195,0.25566443035699876,0.3289910268283181,0.2636195010001408,0.14113471181081141,0.27265393246548875,0.24845226854478406,0.23507128065667168,0.10328907778775594,0.30280524191527464,-0.039662383199007945,0.17619334044936086,0.20936827453311888,-0.04626511875683577,0.18360921511808723,0.28226673267106567,0.32567585601812266,-0.013134610502124075,0.28790266682874105,0.22556650605810769,0.2802617106430441,0.22026896212288025,0.1297625622536923,-0.09237289939405731,0.15770162892505377,0.20983120977457023,-0.022066560963923506,0.3542438804198122,0.2821235232034078,0.6223754677970436,0.4670606321064248,0.31923151846088604,0.04671221054069967,0.1290693438979155,0.18021632513034677,-0.039212410987899016,0.26047683846794,0.31743977154901953,0.20600315325662766,0.06663592930753293,0.05925824916056262,0.24663767506801335,0.1761876524539024,-0.024881098031225304,0.3059489724818301,0.2914340582336565,0.12093447454141643,0.18953464160924244,0.403041754780949,0.09122281661331977,0.10354634680029458,0.16638726447265348,0.15785226661436302,0.1547719595991773,-0.27616226467788335,0.14833173194833543,0.2769238637377982,-0.05349638955545843,0.42622822928953774,-0.24685007077817625,0.12989609076969644,0.6071153084426684,0.379275547939154,0.2226394693701772,0.10217357766141087,0.18155649820096828,0.2613766714897463,0.14878604948110566,0.0689620464065984,0.021633678500538954,0.34932741184648336,0.18109666541360395,0.001981137409304213,0.0367126337692507,0.12677672509859547,0.1922843746196485,-0.0717953736730822,0.06943231887153352,0.28084033107227163,0.30337640036089353,0.3796673312913,0.23754782826410473,0.25771294441171316,0.13763420106551905,0.11473470097927478,0.18097474499846236,0.22288332045734063,0.2168136055158896,0.3115704616319651,0.140362474173322,0.1637324097598745,0.42958592605075663,-0.041265619361578666,0.33641450047081606,0.14283656886752746,0.27853223773641456,0.22110484954618925,-0.050108196193358816,0.10083980294495812,0.12238096511680066,0.15962340892445254,-0.03148403982128494,0.18154545796342195,0.009509719938665815,0.3857035967159402,0.37997095976244755,0.34673981548657057,0.09857253873414795,0.21467006843785705,0.10858310610488778,-0.014865402865476796,-0.005240850162996441,0.22122766733907767,0.357344991203096,0.2037433097233644,0.0702609068061603,0.280697553114756,0.3862386644442107,0.16935052086705057,-0.06901690699848678,0.3866496960063379,0.09836279355811443,0.36041084756390007,0.5377451390048098,0.11047522218032031,0.38669660867137495,0.3652193076199211,0.07339632046515401,0.4256036331636848,0.08346463797640465,0.41247523334411174,-0.1658795519540565,0.038053174570516025],"type":"scatter"},{"hovertemplate":"Below this line: (76% of simulations)<br>   `equal weights` outperformed `estimate all inputs` <br>Above this line: (24% of simulations)<br>   `estimate all inputs` outperformed `equal weights`<br><extra></extra>","mode":"lines","name":"45-degree line","x":[0.0,0.008279143880533996,0.01655828776106799,0.024837431641601987,0.03311657552213598,0.04139571940266998,0.049674863283203974,0.05795400716373797,0.06623315104427197,0.07451229492480596,0.08279143880533996,0.09107058268587395,0.09934972656640795,0.10762887044694194,0.11590801432747594,0.12418715820800993,0.13246630208854393,0.14074544596907793,0.14902458984961192,0.15730373373014592,0.1655828776106799,0.1738620214912139,0.1821411653717479,0.1904203092522819,0.1986994531328159,0.2069785970133499,0.2152577408938839,0.22353688477441788,0.23181602865495188,0.24009517253548587,0.24837431641601987,0.2566534602965539,0.26493260417708786,0.27321174805762183,0.28149089193815585,0.2897700358186899,0.29804917969922384,0.3063283235797578,0.31460746746029183,0.32288661134082586,0.3311657552213598,0.3394448991018938,0.3477240429824278,0.35600318686296184,0.3642823307434958,0.3725614746240298,0.3808406185045638,0.3891197623850978,0.3973989062656318,0.40567805014616576,0.4139571940266998,0.4222363379072338,0.4305154817877678,0.43879462566830174,0.44707376954883576,0.4553529134293698,0.46363205730990376,0.4719112011904377,0.48019034507097175,0.48846948895150577,0.49674863283203974,0.5050277767125737,0.5133069205931078,0.5215860644736418,0.5298652083541757,0.5381443522347097,0.5464234961152437,0.5547026399957777,0.5629817838763117,0.5712609277568457,0.5795400716373798,0.5878192155179137,0.5960983593984477,0.6043775032789817,0.6126566471595156,0.6209357910400497,0.6292149349205837,0.6374940788011176,0.6457732226816517,0.6540523665621857,0.6623315104427197,0.6706106543232536,0.6788897982037876,0.6871689420843217,0.6954480859648556,0.7037272298453896,0.7120063737259237,0.7202855176064576,0.7285646614869916,0.7368438053675256,0.7451229492480596,0.7534020931285936,0.7616812370091276,0.7699603808896616,0.7782395247701956,0.7865186686507296,0.7947978125312636,0.8030769564117975,0.8113561002923315,0.8196352441728656],"y":[0.0,0.008279143880533996,0.01655828776106799,0.024837431641601987,0.03311657552213598,0.04139571940266998,0.049674863283203974,0.05795400716373797,0.06623315104427197,0.07451229492480596,0.08279143880533996,0.09107058268587395,0.09934972656640795,0.10762887044694194,0.11590801432747594,0.12418715820800993,0.13246630208854393,0.14074544596907793,0.14902458984961192,0.15730373373014592,0.1655828776106799,0.1738620214912139,0.1821411653717479,0.1904203092522819,0.1986994531328159,0.2069785970133499,0.2152577408938839,0.22353688477441788,0.23181602865495188,0.24009517253548587,0.24837431641601987,0.2566534602965539,0.26493260417708786,0.27321174805762183,0.28149089193815585,0.2897700358186899,0.29804917969922384,0.3063283235797578,0.31460746746029183,0.32288661134082586,0.3311657552213598,0.3394448991018938,0.3477240429824278,0.35600318686296184,0.3642823307434958,0.3725614746240298,0.3808406185045638,0.3891197623850978,0.3973989062656318,0.40567805014616576,0.4139571940266998,0.4222363379072338,0.4305154817877678,0.43879462566830174,0.44707376954883576,0.4553529134293698,0.46363205730990376,0.4719112011904377,0.48019034507097175,0.48846948895150577,0.49674863283203974,0.5050277767125737,0.5133069205931078,0.5215860644736418,0.5298652083541757,0.5381443522347097,0.5464234961152437,0.5547026399957777,0.5629817838763117,0.5712609277568457,0.5795400716373798,0.5878192155179137,0.5960983593984477,0.6043775032789817,0.6126566471595156,0.6209357910400497,0.6292149349205837,0.6374940788011176,0.6457732226816517,0.6540523665621857,0.6623315104427197,0.6706106543232536,0.6788897982037876,0.6871689420843217,0.6954480859648556,0.7037272298453896,0.7120063737259237,0.7202855176064576,0.7285646614869916,0.7368438053675256,0.7451229492480596,0.7534020931285936,0.7616812370091276,0.7699603808896616,0.7782395247701956,0.7865186686507296,0.7947978125312636,0.8030769564117975,0.8113561002923315,0.8196352441728656],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"SR: equal weights"},"tickformat":".2","range":[0,0.860617006381509]},"yaxis":{"title":{"text":"SR: estimate all inputs"},"tickformat":".2","range":[0,0.860617006381509]},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('5f0dfff8-1759-4c17-a44d-2dac296ee1dc');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.4: Simulated performance of estimated tangency portfolio versus equal-weighted portfolio</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell" data-execution_count="5">
<div id="fig-input-est-histogram1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="a9f66ac0-ccc6-4948-88e8-1cd5a2d754c8" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("a9f66ac0-ccc6-4948-88e8-1cd5a2d754c8")) {                    Plotly.newPlot(                        "a9f66ac0-ccc6-4948-88e8-1cd5a2d754c8",                        [{"hovertemplate":"This bin contains %{y:0.3}% of simulations <br>Average difference in SRs across all simulations: 0.050 <br>'equal weights' outperforms 'estimate all inputs' in 76% of all simulations<br><extra></extra>","x":[0.09346367074103665,0.01177906039374107,0.0013281496543495197,0.06260101940867595,0.04496980710456555,0.1133406684013841,0.12288313184478084,0.10084343424042769,0.07317818626415998,0.0799107210248878,0.22069316956832094,0.006324863261848002,-0.2728219440692708,0.09200925877240745,-0.10711194010186456,0.12362387133941324,-0.15431853094657197,-0.0606103071580191,0.2338772117610448,0.11882923861170969,0.22674388989968713,0.19140811629519555,-0.09690063241318433,0.12702508470924384,0.01934384842339093,0.07017123492411981,0.10257394910323342,0.0459873504683426,0.10140387806547897,0.06020823275469095,0.2066412910123806,0.062119472569842626,0.02081785858545813,0.1662576019935022,0.06376274613001504,0.07805790849663091,0.06432444535176986,-0.013769975588396433,-0.16619952895040163,-0.0277041843658669,0.023131759880018254,0.14907055089873164,-0.012860228044573874,0.1866686739405605,0.012163691809510546,-0.11827375339295937,0.11607451528680536,-0.04851731659431642,0.07862706609945297,0.12244534099564933,0.07926432215936441,0.14972320887396406,0.04409579841972955,0.0772362151317654,0.09286963532692705,0.1033198030389233,0.023787596617434625,0.03338805728557512,0.05218770440513121,0.08827336272066598,0.07981044703011586,0.2089820836885439,-0.0008298667240468349,0.06612362881718145,-0.30840004437476276,0.07512624017243336,-0.02472699957159588,0.0640702083319824,0.1481586585972706,0.007483177366869459,-0.01768462444702054,0.25138765058305285,0.05572804889940439,0.0300314372148206,0.04737096770458431,0.07241759403586115,0.20052205261150124,0.040471201565766834,0.023930346623597207,-0.09158237871470978,0.010117445481159254,0.06788060552857,0.07758281898592745,0.04983258851305761,0.08164297553873925,0.008511265630866738,-0.042893965103879106,0.0918422899424026,0.14709772551916106,0.20665164671205635,0.011663710838385966,-0.017533962932073766,0.035551909230708445,0.05703681023104157,0.05233366787768112,-0.06429858254846088,0.046392485331151506,0.07815873030252499,0.10370026742753054,0.08733595021169516,0.09629254077826421,0.12901787308150792,0.14743308923453036,0.021278948955766624,-0.015576386652610075,0.017577696061437387,-0.04017040659617596,-0.18248353230653552,0.04064583064111374,-0.011940592728942878,0.12432928641332534,0.04164304023093174,0.12285165427609701,0.006278701229271044,0.03866558210286719,0.042017580137017424,0.0715689683435008,0.1008125342068515,-0.005582088444270772,0.17159462506925716,0.27894100975329167,0.11769449028789919,0.10529578314980348,0.054087291068467436,0.06541621644904858,0.08988665554510232,0.16786040689626097,0.02316070483879762,0.017164390538015273,-0.005919096681936908,0.049708706943358105,0.11302020156130552,0.13118030173972278,-0.17345116859934545,-0.006834008724917143,0.23230875070232204,0.023712484329564104,0.06507194518650516,0.18597895272869647,-0.11759148209844075,0.001537187729710232,0.09884147115843006,0.07837032872026858,0.03257616837211008,0.010285598804756716,-0.016227844235052635,0.11645055091361267,0.03958277757370682,0.029728414740697928,-0.10169165660632459,-0.03220931397344349,0.10436755917398233,0.09520192366807179,-0.1255430329817702,0.08211809905321549,-0.0037742701248653088,0.14855525016372742,0.1249390633557676,0.12040238004253212,0.2152039933859017,0.11820719814461123,0.023476620804662895,-0.007100597310441881,0.06822633097799541,0.019712672006652998,-0.05630770451864156,0.15504212629596759,-0.01731813501460007,0.06852080192798374,0.03595596071300888,0.13854251343393753,0.04385485677646023,0.05366003643626277,0.1132186016642317,0.011466064185246302,-0.046237852937182744,0.15786031015146035,0.026855614843125375,-0.11818215627022219,0.16051221542610083,-0.032451835217359046,0.193392449956372,-0.059452792958038514,0.10717283380015472,0.03167561012848176,-0.014052913607656953,0.276092664739663,0.1252771766688084,-0.042121443113625534,-0.07396343956579413,0.11438683798710016,-0.13132630684717228,-0.12342174534595579,0.05055567051232382,0.007416795248106178,0.014531853842376014,-0.15987819607775197,0.007548623184571501,0.08609017035282246,0.08087758009189305,-0.1972150758573803,-0.020937696073466183,0.049679249523669144,-0.04637822262114076,-0.00901111398288991,-0.21463287666012007,0.046552612385961534,0.027348751702570187,0.047595075264726006,-0.006975617832478062,0.11380936894730301,-0.07235053944851408,0.14765193043465785,0.11929269224942407,0.13799801320800165,-0.01086426499972637,0.009219752907881212,0.11176480721692977,0.06675272303199112,0.07930715223303286,0.07105762444447747,0.1118768672738471,0.058267300468879374,-0.029841454485629693,-0.16596115238826686,0.09444707999238755,-0.22830919731890148,0.1641369083634014,0.03516841291630471,-0.00136205539402642,0.010343837761977698,0.019845158943702534,0.08358629301597453,0.1564298784310243,-0.008784877345055772,0.1558090195151542,0.07572037127277034,0.00649022689253146,-0.016913875253071753,-0.02900267683525304,-0.06902582093494788,0.2197844566099097,-0.11207112738206373,0.05068270003836246,0.04327570649174073,0.016823870115116657,0.20474922913990404,0.14509405286772448,-0.237747304884578,0.04033248558906044,0.011562094666214398,-0.24415547957488082,-0.1750002306540859,0.2547345097128736,0.05081941112257199,-0.007523798989234998,0.058222235569444225,0.025013699739400208,0.0173437890828671,0.11516716370613259,0.07345846549287965,-0.10978634175976414,-0.062346609497770905,0.02552610169437125,0.10368416547793696,0.07283331871420012,0.1662901483763889,0.05851237212987115,0.047851609844830056,0.07815379092850883,0.15983241416074476,0.08807071892270603,-0.004632024697690418,-0.19764656109569576,0.08722352049296173,0.010528261541071293,0.04008732923465887,0.113569942788396,0.283743088784998,0.06598357178008929,0.02020396064291826,0.12139250298138546,0.10729143012826778,0.047490036978452055,0.1479668908082901,0.04105255377942124,-0.03840852253745314,0.020995028089192735,0.16347715427925785,0.02995151736025748,-0.10527478427125492,0.07777055515099579,0.07003259632970438,0.14534847728397643,-0.12034624498360086,0.056996888338830126,0.09620605844353247,-0.04088705306877255,0.08532171223837884,0.11886488293796327,0.006983042676341703,0.06561872418625972,0.08315465747172784,-0.05800706576342707,0.07040622886958359,0.02428379152299348,-0.2728117950154994,0.19458715862520826,0.16107430220650656,-0.062426557139029004,0.07392868986468483,0.14275318966073341,-0.05132216172455566,0.075936836454016,-0.00640352095648164,0.09352774641320422,0.13890682781191077,0.140042671847306,0.0906569822494313,0.019543434206024335,0.19373594083934817,0.039455319413468,0.033065875703358893,0.1463886624272718,0.14834191201792354,0.005438949839571758,0.2069552762427576,0.1334704957177527,-0.03171900690699592,-0.0798370330894812,0.06381158250170803,0.04670596151679584,-0.1284069679715209,-0.10433387379719886,0.2534435526543496,0.03522269641160336,0.13842474295016657,-0.10252303197877267,0.1795574234378779,0.027040109552102065,0.016676978215033444,-0.022274352892748206,0.020122124882834325,-0.030647408670563085,0.06964308343707351,-0.08268166979341825,0.15481657379616423,0.1391710333640568,0.04040204529719361,0.08454098521957415,0.07178242211642806,0.057657567433130885,0.1352491583135725,0.14787719273719618,0.07926459353604051,0.05826899013361679,0.023644247851830842,0.1757332389787189,0.09709138172432288,-0.11210837321750519,0.005116367853937598,0.008242255243381291,0.13462801043162242,-0.09857630039608328,0.06821636711616968,0.10123826625633706,0.23367300832079255,0.1168649495935089,0.01391146209704519,-0.07969285583394209,0.023242084046457334,0.04779317189640142,0.09746069181629774,-0.013305542646401963,-0.22600305775122648,0.11028933659084807,-0.20512131643703607,0.05836669352875831,-0.10644973864135877,0.04080940123044244,0.06723461618344166,0.025152740102785454,0.09962130733957697,0.0442878803428311,0.12634320572487076,0.08664461341659929,0.02142796560379845,-0.030975186473372246,-0.05498706225967989,0.09637807440392426,0.13832039985067845,0.073699092469656,0.13057431816797102,0.11057602417280746,0.10550793396465552,0.05312338071336531,0.08272588063588504,0.08168987993526111,-0.09369062738892306,0.3762839945350845,0.09295322522347083,0.04721090186002891,0.048586528776383434,0.0720073390088371,-0.07005383911798305,0.0512688800275678,0.21620697456389915,0.10612783290537421,0.0913488985938409,0.03981546616472381,-0.004009761212503574,0.06820356044093756,0.08868717311559393,0.1247152954460504,0.06722446276666727,0.0715275063608733,-0.04962190476418649,0.08888593163647159,0.08707978499396554,-0.04492108578592535,0.03495741195978597,0.07970953056973418,0.00658537644789195,0.11173956708405214,0.10530235930938514,0.0341231501716569,0.17425732584345016,0.07626828423169574,-0.0682650294102991,-0.1915671563925133,0.20330146981937497,0.01402301239449763,0.05340713564291186,-0.005564452941600018,0.019974529628404264,0.24459499528405315,0.09279706645839941,0.023080282507671968,0.13787056522679966,-0.02511032206076342,0.2379380853288353,-0.0054260117035219435,0.054454401675678804,0.19095610488964454,0.08324432022963417,-0.043843531187178264,0.0033793838498812345,0.05954661534465988,-0.04490967641650484,0.03975148074814211,0.008266981429962322,-0.09355777448671837,0.1955542779335346,0.09330026193380223,0.11960872699081185,0.06340169443305854,0.11463959608417065,0.003462336305809527,0.05259330871969664,0.08364423424913842,0.04509830991967517,0.01498997176824704,0.006022787898740667,-0.020940264797280728,0.06688548151518364,0.02461998457882103,0.11610678185351983,-0.06939517485321418,0.15407308759225988,0.07698647964055397,0.16665987531777618,0.09084452848786939,0.08471687910503051,-0.12533844919455248,0.09056276317548181,0.09139586312377865,0.13358013248385966,0.11724210095370759,0.008965083259607045,0.06523439825167437,-0.005549128876011389,0.10657045440233176,0.16106357194811055,0.10880824146863621,-0.028240471099395092,0.1003026496574684,0.07000522871965867,0.11577715262501875,0.11839544377071319,0.01893824069042549,-0.04206388725209537,-0.0021891595414423315,0.03914268071442584,0.025157255704845505,0.18911529014459236,0.018996157075005626,-0.01642875870756587,0.08058170380427937,0.14751444763337274,0.1065736704432238],"type":"histogram","marker":{"line":{"color":"black","width":1}},"histnorm":"percent"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"Difference in SRs: 'equal weights' minus 'estimate all inputs'"},"range":[-0.49178114650371935,0.49178114650371935]},"yaxis":{"title":{"text":"Percent of Simulations"},"tickformat":".2"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('a9f66ac0-ccc6-4948-88e8-1cd5a2d754c8');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.5: Differences in Sharpe Ratios of estimated tangency portfolio and equal-weighted portfolio</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="estimating-standard-deviations-and-correlations-only" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="estimating-standard-deviations-and-correlations-only">Estimating Standard Deviations and Correlations Only</h3>
<p>One option is to just give up on using historical data to estimate expected returns and assume the expected returns are the same across all the assets. Under this assumption, the optimal risky asset is the global minimum variance portfolio. <a href="#fig-input-est-2">Figure&nbsp;<span>6.6</span></a> shows the Sharpe ratios of following a GMV strategy each year calculated using historical estimates of standard deviations and correlations. The benchmark along the horizontal axis is again the equal-weighted strategy. Portfolio optimization fares better if we do not try to estimate expected returns. The fraction of simulations in which the equal-weighted strategy beats the GMV strategy using the full covariance matrix estimate is again about three-quarters of the simulations. <a href="#fig-input-est-histogram2">Figure&nbsp;<span>6.7</span></a> plots the histogram of the difference in simulated Sharpe ratios of the equal-weighted portfolio minus that of the GMV strategy. On average across the simulations, the Sharpe ratio of the EW strategy is 0.048 higher than the Sharpe ratio of the GMV strategy. Thus, the GMV portfolio performs a bit better relative to an equal-weighted portfolio than trying to estimate the covariance matrix <strong>and</strong> expected returns.</p>
<div class="cell" data-execution_count="6">
<div id="fig-input-est-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="65255ed8-ddce-4694-bec1-640a456624e0" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("65255ed8-ddce-4694-bec1-640a456624e0")) {                    Plotly.newPlot(                        "65255ed8-ddce-4694-bec1-640a456624e0",                        [{"hovertemplate":"Sharpe Ratios:<br>  equal weights: %{x:0.3}<br>  estimate covariance matrix only: %{y:0.3}<br><extra></extra>","mode":"markers","name":"A simulated outcome","x":[0.0626471901542217,0.008909585549357883,0.1086181524177272,0.1862716810834306,0.2535098120270528,0.16033264199844693,0.22012674781023434,0.13523185746615277,0.26885100557843206,0.24861720127850567,0.21540112270155112,0.26050712907951745,0.0316986314334547,0.45861749228447557,0.23104442275741974,0.24707217091988842,-0.0036034000032007293,-0.020976866140521865,0.33500359274115943,0.5351942091825582,0.2322462930547514,0.20483923126370493,-0.09980582943568672,0.4764814922277693,0.3665064746741546,0.3733665008342565,0.39682933447459995,0.11337536135283373,0.1964062375745924,0.33410331831516754,0.47020153363835065,0.4845642380454006,0.013635080433414534,0.2986212649229263,0.11491828527861105,0.3821296341990135,-0.033498697379613904,0.32236021172671603,-0.07238024183510873,0.08591515612965368,0.2599551767239067,0.2596645360238221,0.21778708829845275,0.12221564596951903,0.12081626862533014,0.35654120521006244,0.18847942428504216,-0.11116579074250144,0.4109129135291489,0.31422752597349385,0.24258468140288922,0.42446411576622467,0.34615383355595786,0.295853495858347,-0.021614886518000958,0.1500406669057268,0.35278117506092527,0.22897244065738603,0.3461905315323503,0.18643328489058605,0.36282133325444005,0.23239888547122062,0.22203782977262823,-0.13318746683427882,-0.06552385804546607,0.570244950990986,0.04712793322497612,0.25059342339064433,0.33694802912552724,0.15847040473021134,0.1321219500949433,0.25844632379127347,0.21150433918922676,0.3317100679548687,0.0714290427444476,-0.1389752233479748,0.24306387600186016,0.25684631651494344,0.12124914706053531,-0.052528499475231,0.1894276284073758,0.3969172870639482,0.5348351347741318,0.20869344898285092,0.24813867527617417,0.37671398682187235,0.0705234637994647,0.13204021147381537,0.48271665682746,0.39885693008410983,0.33925105572056163,0.35360742815716534,-0.0806335416181581,0.2187599690554244,0.34471749561207093,0.30115445366978594,0.19400209326168907,0.20600593416358265,-0.010724105769151546,0.21223925851840683,0.2797612386403197,0.39162223794702017,0.3921624956369624,0.2365698238871028,0.291336563891638,0.13324065099163868,0.21794905375675852,-0.06339463777832638,0.18742255260469767,0.2584611494745786,-0.08090557536474653,0.392023123044147,0.33156778966918166,-0.3188369608589909,0.35795466839581525,0.11266360230870724,0.30517821006568147,-0.11501730677483839,0.33962886999659697,0.13890056007979482,-0.029453694677623318,0.10113497899643123,0.5499317634178427,0.3307226335743434,-0.02194820288964286,0.14126110790082216,0.40129029670009514,0.2665026545839843,0.34865576739818743,0.5865652267154126,0.2171087102458226,-0.07808976570271847,0.24343827256326597,0.26390406177851267,0.017754074625787576,0.17967428622944376,0.16844883410145936,0.3717408433921145,0.31094890476775044,-0.12333093194196076,0.2680116028741568,0.09554603791623853,0.2603901393066892,0.1993455313422637,-0.027848297470543636,0.2946337704152134,0.26209366919103827,0.43768111791553793,0.27310071341168607,0.18930797637643224,0.0009540612174049662,0.3158493549371664,0.6482739997714978,-0.06452837288324476,0.3782390593670678,0.28549970814372905,0.20237431642550469,-0.053687054215419173,0.6724962847274232,0.15966376199118995,0.41524205254565527,0.23468895601228412,0.4531892835227003,0.1574609052347755,-0.1586284047697101,0.12253606986220958,0.0064327289058707555,0.1042402354535218,0.22964249981217771,0.2330858578827386,0.33096583724066075,0.41163894423418323,0.44094967277709496,0.24839640733258203,0.1148479805389592,0.19091350829791676,-0.07791604450884042,0.2837981335105853,0.1866873895506743,0.2811498327988744,-0.06399904610507642,0.45381419557078906,0.18361140730172767,0.24191128753306212,0.032006369004195845,0.13732080969942076,0.23229900864180736,0.4576800777884571,0.19078835690162085,0.16034977632543468,0.1552074556516379,0.1093994030585743,0.23942162991890525,0.05570079122142345,0.2533139667895533,0.11869219963495284,0.04671366056302944,0.27950833515325674,0.4395338723338147,0.46079902256638894,0.00012745577463995524,0.5376750261420874,0.4650213772777048,-0.15588338172274885,0.10337277653480773,0.22713470781487374,0.37441733863693166,0.12122075846308034,0.14141052460556228,-0.042887981571061676,0.1168773091029583,0.024485289972970902,0.13802332561498556,0.5433629998286003,0.40131544360967486,0.4571163676078334,0.21102824504842876,0.3910799302381987,0.08982792603037207,0.28959632654075396,0.1352313824880451,0.18828351550533043,0.23897880229233903,0.4416538037656013,0.07460295910443147,0.4499740240277216,-0.13438422259229657,0.25986620767123636,0.28468372751180615,-0.024498402376896326,0.14283457139086472,0.482421003563215,0.37190248851841223,0.3563190966707303,0.08117532293748028,0.3149882623398836,0.2673042192199818,0.06658371799885153,0.17612466170886557,0.5337898981479647,-0.048255611757606315,0.29503047933538246,0.06681531865380336,0.16548535576203607,0.727557322521528,0.13606673197717892,0.10905909606176536,0.20590967194317222,-0.009200561360774613,0.31780070017597617,0.10647559228651544,0.07837550754821342,0.20245788628882502,0.09949522711782179,0.35226298797656685,0.45808495620359,0.373088461833578,0.13368223306686736,0.2066748732774996,0.16763727557736946,0.09615720901411308,0.12423681055645726,0.21454871152704744,0.14102888551617296,0.2820774142393306,0.415699747882908,0.24579132280758548,0.5808878780057466,0.17426543826427654,0.365837776249236,0.16344599686154257,0.08991521404086579,-0.30725998222024237,-0.003911517754263104,0.39133311937376375,0.002193767281174503,-0.026891394867033933,0.06150069101232447,0.24147101665980006,0.3849915108313951,0.0635462597172756,0.35677770261187036,0.24437463617413563,0.3177245508985057,0.3076313611278928,0.40586734469792873,0.17684333029261395,0.6157552123788831,0.48757530841913443,0.06349573614472642,0.14644140670971012,0.3410914414177241,0.31334499454729053,0.2604657504065564,0.07747832112241584,0.06052000216878468,0.6557824909846864,0.1756580899405434,0.13675541885310688,0.43527473648923165,0.017979823553889523,0.22604749501565738,0.37842584221682435,0.27125411640862657,0.3846887069631077,0.41334746555524243,0.10728805864552117,0.2326637109194551,0.27962672639507385,0.11877312266995385,0.15720983820152915,0.3907174355895296,0.074163894015722,0.3561187229002319,0.052164117371507494,0.4167495846683737,0.5656624806903525,0.35948682909537155,0.378303922483556,0.2564535376625782,0.35238154664686167,0.22073785042769298,0.45612246761105296,0.04905897906210361,0.38795951330306916,0.08439115205126119,0.04311974808004769,0.26619756976778397,0.26570604038193674,0.15667434257492033,0.16327926890117153,0.0611910861428194,-0.11946512440827088,-0.07049302735287287,0.5929110744181576,0.4701444405714459,0.11324880465845881,-0.07195544561318523,0.5896542053415849,0.47359473800756613,0.45272367272887526,0.20736989467522812,0.27629418956673935,0.04957340923717569,0.3070903804493298,0.0012617471292279254,-0.23651017185561138,0.017653577969582283,0.09957581276194756,0.24105209035396247,0.15608865409325307,0.4768348140272766,0.050930387201609265,0.1880354598522489,-0.016580077060359386,-0.08733535373168723,0.06469880318412533,0.23200501762188006,0.024097659677819377,-0.15567613986816187,0.27820600473740553,0.3791360121535676,-0.008154576965326055,-0.2959032826453654,0.3290431973506097,0.27365032265203854,0.38034566032943345,0.42866778766417085,0.26957589245404395,0.249298170994376,0.28686158504659814,0.18892788370721283,0.3701146242817865,0.2351467258983821,0.009068222905445216,0.213578414378604,0.09768392547823856,0.018704310329750368,0.06974360180800208,0.2501776757635613,0.020969497426605897,0.20876195522087268,0.38188804001064264,0.36996373636095375,0.11320859522274668,0.37454728024534034,0.24699447166190613,0.24928652416967187,0.16528189986320035,0.22614063665761655,0.04594750045662115,0.23140072139470977,0.34040552794254125,0.08850946320888395,0.4597518143844677,0.3352469039167731,0.7051013484329286,0.5487505120416859,0.22554089107196298,0.42299620507578417,0.22202256912138632,0.22742722699037568,0.00937411778848442,0.3324841774767771,0.2473859324310365,0.25727203328419546,0.28284290387143207,0.16538608206593683,0.33798657366185425,0.2160031186186262,-0.02889085924372888,0.3741525329227677,0.3801212313492504,0.24564976998746682,0.2567591043759097,0.4745692611418223,0.041600911849133275,0.19243227843676616,0.253467049466619,0.11293118082843767,0.18972937155896327,-0.19645273410814917,0.15491710839622738,0.38866343082185034,0.05180596975392672,0.46035137946119464,-0.0725927449347261,0.20616437500139217,0.5388502790323693,0.18770839154664073,0.42594093918955217,0.1161965900559085,0.23496363384388014,0.2558122185481463,0.16876057910950992,0.3135570416906516,0.11443074495893836,0.3724076943541553,0.3189672306404036,-0.023129184651459207,0.274650719098086,0.12135071339507353,0.2467387762953273,0.11916073121656234,0.1526766391011677,0.23699679988509337,0.30675578421077476,0.43921394663595986,0.1926381518475999,0.2974644251598553,0.14590118249548137,0.021176926492556404,0.37652902293199697,0.31618358239114286,0.33642233250670145,0.37497215606502365,0.25500207025749266,0.16719474606568402,0.48217923477045327,0.04237861488755976,0.38151281039049123,0.1578265406357745,0.2845550256351552,0.20016458474890853,0.01677728532182482,0.12545978752377915,0.2384877469703205,0.09022823407123835,0.12258904777097493,0.2585319376039759,0.176169595256442,0.47654812520380957,0.46468783886747805,0.2214013662920181,0.18913530190962977,0.3060659315616357,0.24216323858874744,0.10237669808823079,0.003724233096610603,0.28646206559075205,0.3517958623270846,0.31031376412569617,0.23132447875427084,0.38950579458339224,0.3579981933448156,0.269653170524519,0.0009883217211718858,0.5024268486313567,0.21675823732882762,0.37934908825432556,0.49568125175271444,0.10828606263887798,0.4258392893858008,0.3903765633247666,0.26251161060974637,0.44459979023869045,0.06703587926883878,0.4930569371483911,-0.018365104320683747,0.14462684501373982],"y":[0.12403387110819052,0.020711803454812085,0.0993920435721481,0.16641022471396202,0.2510275919694209,0.053767653092902074,0.14504484116241234,0.031158513776160544,0.17993656384123283,0.2956551760619202,0.188255789367714,0.16340254598474602,-0.040745305812322864,0.1465509039827207,0.12012362065783817,0.108174776244341,0.1934559852150133,-0.008000374208495507,0.3386992128310783,0.3850635669243441,0.10221636134598111,0.13507547841836978,-0.08045413814936447,0.3811824852906993,0.33613647305371885,0.3111982164018191,0.47872471491266566,0.10904245349798496,0.20021472627612322,0.27379725868242377,0.4793669947213308,0.4402317249343903,0.017998283942610434,0.23235562718783995,0.08078185761099554,0.36919751641270016,-0.07259579100971776,0.37605408781308713,-0.07750762051011306,-0.028661517959648462,0.20158264807923001,0.25816199866970924,0.22858011442608067,-0.03364172493877156,0.0514645205487708,0.3887347244936944,0.2161827366639398,-0.1287466239845075,0.37899129020866734,0.24471484486536996,0.0752099071370496,0.30901959146471547,0.31000835753768535,0.17410721911032456,-0.057601474193633075,0.1603164302704847,0.4485019543219684,0.1072299197066771,0.30401386546954534,0.17765589173221824,0.2646626940103268,0.06597052157032272,0.2903871705096718,-0.0811841568263486,-0.2013236565598252,0.49586765829760715,0.09517805754951023,0.18538384912503808,0.24684783940700197,0.1299100965372377,0.10794796721136941,0.11453636250214957,0.24104551751111372,0.28823596725383654,0.20182330164546572,-0.1463328725201677,0.17043459633174227,0.22579551364379435,0.029003138025331002,-0.16960070662574855,0.30671747117846904,0.3299275647488872,0.47907186964962,0.21225144937354737,0.07237065130614379,0.26704011598922567,0.10067042470656139,0.16376210936096716,0.4127333655077719,0.33356515242996904,0.37568043720972566,0.44570824644088963,-0.11209432573924198,0.20342366021698746,0.3148527326378419,0.3000937679001723,0.20909952577152321,0.06471032137007846,-0.042386474175329675,0.2079370815384745,0.15859249800885264,0.269811454123075,0.3600370845271248,0.15321029477073964,0.27094898849500154,0.13888247073031648,0.31981137343478677,-0.0925920689555588,0.16025098538497903,0.3496158709098314,-0.0924957374392778,0.3447019313443671,0.32487767889436353,-0.2748500677355389,0.26893205607106596,0.11710588119958129,0.2984860951264293,-0.012594382423756418,0.25005633827775847,-0.003915870821606577,-0.03984202721082828,0.020259432792716487,0.45553272873148554,0.26741128538178227,0.006556141661162462,0.09341896378690016,0.3330885569175977,0.22936833476348029,0.4357971749189043,0.33513355995982563,0.21810390744997693,-0.23295213712782117,0.21630860629628465,0.4409409951586232,0.07997378436241272,0.11713760207663873,0.29805980599370896,0.3669747631990372,0.2971230020021527,-0.09089555439383541,0.30321699811067354,-0.002821200614746967,0.2761616929914123,0.20573553347710952,-0.04208562636906834,0.2259406343662074,0.22189870478958057,0.33585779868369314,0.3230619768371526,0.17646937251120312,-0.016134365926381133,0.24884881876047757,0.5161156696693295,-0.09999460765655928,0.3261889378885094,0.1685585399936744,0.20228029341969553,0.022000647154591237,0.5967916241937287,0.1789940495655431,0.384105212642631,0.2071672243841074,0.5556488609782454,0.1312060957238437,-0.05782342222825602,0.03402670959185128,0.004065333754493978,0.062355223286825974,0.2572717534400703,0.2503972150074384,0.35136318174979536,0.3340994275154001,0.4946604687962471,0.2143923561057407,0.032515953294790005,0.0650014747620142,-0.09722506719738412,0.23118411697266697,0.2051423382447248,0.2175834974387866,0.03604139987781753,0.22813233502269237,0.18539440980191468,0.14151068470173206,-0.021501542707695345,0.17441931535684735,0.11229264876102733,0.3166892773237805,0.20073202684483868,0.13775354513279106,0.175541329222545,0.09970028417148154,0.16839380496774928,0.056113666508379074,0.3346226779976689,-0.015550789118269648,0.0490088702682022,0.36644340547566395,0.34346570176571845,0.432310598063253,0.10988926794333326,0.33951262578007485,0.32161716073786584,-0.11539383955550413,0.11414412528116158,0.33772884987490154,0.3248513320904731,0.11379091872165972,0.1143335997447679,-0.05155386260114523,0.12163897914618912,0.061515139715910785,0.09924007127570607,0.4393273357738663,0.3287346866764785,0.2696450798691762,0.1450465103813289,0.40601148035018464,0.09199011608366205,0.22923643285232614,0.20312031605213568,0.17061412125356992,0.23286343182887018,0.4477566369719351,0.2543216894216119,0.2557490707679128,-0.2516109852097827,0.2928186646161867,0.306278985507872,0.07266419834875215,0.09217887168651016,0.1871909920921129,0.24042949380029738,0.05449750415141681,-0.034429207136651846,0.20936192549629937,0.17356503816694005,0.008194881959929007,0.15563450569064963,0.5527259803837141,-0.06721677164855622,0.1676360526116519,-0.13683918575363954,0.13711571055238508,0.6473986342370621,0.06722539633516915,0.07126115714507465,0.09073609997392654,-0.15059051798175935,0.33292760040488817,0.04031829857159716,0.18324295586286132,0.326600185561789,0.047531631627492466,0.2829729623984345,0.4829286074927941,0.13946830110657174,0.13977426596444384,0.06371645292081826,0.1351540392346929,0.10382267043154114,0.06338442871884294,0.09571135978955146,0.20699837011155225,0.23008304811964372,0.40610227290125,0.27581560399437327,0.5170833050541903,0.014581128281240712,0.32820141749683107,0.16580955005735745,0.03593039900627824,-0.27557776553295893,-0.05451439543092613,0.2211999823194142,-0.0551061688644852,-0.01480621592942908,0.03240723123819923,0.1889398124043725,0.3527843548855542,0.10284679601257056,0.25514560917969564,0.14835469241353103,0.2922146515552552,0.2549058530305828,0.28238316084794485,0.07443389461870692,0.5987251571522607,0.4028225416445921,0.034692253396080376,0.042753510925815905,0.22337812980156863,0.27124950327077724,0.24816487759902284,0.03547248818057623,-0.0572683636502966,0.4901637894475705,0.12245616720541426,-0.0030890478880946353,0.4238697944062615,-0.13496236510294643,0.1212359090817986,0.18092007640947008,0.200936165440686,0.32232168789873905,0.4060756887153908,-0.12383100129352247,0.12107667120437181,0.16571918699416938,0.0550231041535166,0.12423966868106251,0.28970091835331857,0.1556821290663152,0.24173873457891354,0.11935646685809813,0.3242103967353828,0.4150392174343933,0.20490906358945968,0.3208971563526338,0.3400100578283492,0.28080480221469867,0.23774876109044282,0.4785878760215361,0.04427382389308106,0.3501623037530749,0.31875448379938026,0.04702065805203002,0.30389630494970016,0.23659652426745256,0.14351919043910089,0.09116913216163117,0.057779441508559716,0.05558125698517612,0.05506088284781248,0.5069224997332866,0.3674628941622788,0.10105953308906829,-0.04685213092746324,0.5886515718876616,0.3233316924649156,0.40065466666324673,0.09510139334269134,0.3142737723465687,-0.004407641914877111,0.16275540337409636,-0.05772934118568979,-0.21291962000198258,0.05910173746702482,0.10116433729183258,0.02978814639448842,0.11684986220786793,0.5134932117067783,-0.04737201151536839,0.22313313960903441,-0.045686110315589445,-0.02892723415043121,0.013838551938959642,0.11802071691018232,0.037236601294488594,-0.22293930194186332,0.330759567108186,0.26577744625418004,-0.1217855028912747,-0.3626923602781929,0.2973426715874122,0.26804731213889427,0.2999196914002443,0.39133289377836317,0.2942691843133302,0.17387790275924328,0.04499502557198457,0.14809102059589976,0.3791882979910435,0.03414387594344474,-0.02339555133673904,0.18141132851895428,-0.1684604222345209,0.07635681983500099,-0.015461298438762846,0.06024082105830798,0.09510046043298628,0.1472968019443666,0.329346249260332,0.31557465403410784,0.0355204858244085,0.27261010007834857,0.23713093092751528,0.02180804060871683,0.2177357140283294,0.2834413879591243,-0.04452321183867888,0.1883214474746794,0.30998574876302293,0.013520491202033351,0.40525615524873504,0.24064676477031172,0.7227074299654521,0.572238026089524,0.22518806659032525,0.28747545622157683,0.11940351974883837,0.19388827150763333,0.028960893107112976,0.21923622031585088,0.3235838782014351,0.25683744587473323,0.21246570121946834,0.14319375679669671,0.24014808218992367,0.17645975652422166,-0.0144675728470191,0.42584650529338003,0.3318571409067949,0.24395650021416151,0.11293383408470002,0.46953041521853944,0.1623420561008537,0.2656787260827793,0.10144405496965656,-0.044754614757899026,0.1756311746002309,-0.2229592850551074,0.038892114583252625,0.33470588826864633,0.20192171073003745,0.4413943218918766,-0.12569593191337927,0.22260330701539646,0.4995030881332003,0.38431978478371726,0.4378416396787083,0.1594786170278079,0.3085425124020344,0.2600113397981515,0.19304724620564034,0.23463512167747255,0.07035678880465258,0.15240192238835001,0.28576705775788785,-0.019320979010114384,0.200984344652679,0.1441691107270868,0.16178918617794383,-0.00597977687109216,0.16348161993605964,0.10271661073366646,0.16403416709560015,0.3836816268028234,0.14570326199056863,0.20818570169221873,0.2512098549540421,0.004501981600549776,0.29732109727186673,0.2053741747002151,0.22787401615295605,0.32238770613684464,0.256628320616595,0.19657541238619977,0.3634624421744816,-0.12990548245015668,0.33304608638389943,0.13882419679399252,0.2614326973047563,0.22573173921865622,-0.012202635319379124,0.033473162910197696,0.12781345824298393,0.021706692888553186,0.034441405150466835,0.07961715990500005,0.14843121682976101,0.33703809345301844,0.329715626567987,0.2217102557721552,0.1503385152611549,0.17886126180801967,0.19519813183257514,0.016479616113823238,0.15979668808386568,0.3182487004768763,0.36692526544773324,0.3571585057007622,0.19444409407388136,0.34474044791364034,0.3336133480491891,0.15543201888970518,0.0674185800521481,0.4621377564969622,0.16514918911753287,0.24697890492189234,0.5713949790828631,0.167649258769825,0.33357967182982295,0.3098343722318589,0.10154835176334755,0.4418926616981078,-0.023557252530280667,0.35656607271670965,0.07075572972582254,0.11698314387878372],"type":"scatter"},{"hovertemplate":"Below this line: (70% of simulations)<br>   `equal weights` outperformed `estimate covariance matrix only` <br>Above this line: (30% of simulations)<br>   `estimate covariance matrix only` outperformed `equal weights`<br><extra></extra>","mode":"lines","name":"45-degree line","x":[0.0,0.008279143880533996,0.01655828776106799,0.024837431641601987,0.03311657552213598,0.04139571940266998,0.049674863283203974,0.05795400716373797,0.06623315104427197,0.07451229492480596,0.08279143880533996,0.09107058268587395,0.09934972656640795,0.10762887044694194,0.11590801432747594,0.12418715820800993,0.13246630208854393,0.14074544596907793,0.14902458984961192,0.15730373373014592,0.1655828776106799,0.1738620214912139,0.1821411653717479,0.1904203092522819,0.1986994531328159,0.2069785970133499,0.2152577408938839,0.22353688477441788,0.23181602865495188,0.24009517253548587,0.24837431641601987,0.2566534602965539,0.26493260417708786,0.27321174805762183,0.28149089193815585,0.2897700358186899,0.29804917969922384,0.3063283235797578,0.31460746746029183,0.32288661134082586,0.3311657552213598,0.3394448991018938,0.3477240429824278,0.35600318686296184,0.3642823307434958,0.3725614746240298,0.3808406185045638,0.3891197623850978,0.3973989062656318,0.40567805014616576,0.4139571940266998,0.4222363379072338,0.4305154817877678,0.43879462566830174,0.44707376954883576,0.4553529134293698,0.46363205730990376,0.4719112011904377,0.48019034507097175,0.48846948895150577,0.49674863283203974,0.5050277767125737,0.5133069205931078,0.5215860644736418,0.5298652083541757,0.5381443522347097,0.5464234961152437,0.5547026399957777,0.5629817838763117,0.5712609277568457,0.5795400716373798,0.5878192155179137,0.5960983593984477,0.6043775032789817,0.6126566471595156,0.6209357910400497,0.6292149349205837,0.6374940788011176,0.6457732226816517,0.6540523665621857,0.6623315104427197,0.6706106543232536,0.6788897982037876,0.6871689420843217,0.6954480859648556,0.7037272298453896,0.7120063737259237,0.7202855176064576,0.7285646614869916,0.7368438053675256,0.7451229492480596,0.7534020931285936,0.7616812370091276,0.7699603808896616,0.7782395247701956,0.7865186686507296,0.7947978125312636,0.8030769564117975,0.8113561002923315,0.8196352441728656],"y":[0.0,0.008279143880533996,0.01655828776106799,0.024837431641601987,0.03311657552213598,0.04139571940266998,0.049674863283203974,0.05795400716373797,0.06623315104427197,0.07451229492480596,0.08279143880533996,0.09107058268587395,0.09934972656640795,0.10762887044694194,0.11590801432747594,0.12418715820800993,0.13246630208854393,0.14074544596907793,0.14902458984961192,0.15730373373014592,0.1655828776106799,0.1738620214912139,0.1821411653717479,0.1904203092522819,0.1986994531328159,0.2069785970133499,0.2152577408938839,0.22353688477441788,0.23181602865495188,0.24009517253548587,0.24837431641601987,0.2566534602965539,0.26493260417708786,0.27321174805762183,0.28149089193815585,0.2897700358186899,0.29804917969922384,0.3063283235797578,0.31460746746029183,0.32288661134082586,0.3311657552213598,0.3394448991018938,0.3477240429824278,0.35600318686296184,0.3642823307434958,0.3725614746240298,0.3808406185045638,0.3891197623850978,0.3973989062656318,0.40567805014616576,0.4139571940266998,0.4222363379072338,0.4305154817877678,0.43879462566830174,0.44707376954883576,0.4553529134293698,0.46363205730990376,0.4719112011904377,0.48019034507097175,0.48846948895150577,0.49674863283203974,0.5050277767125737,0.5133069205931078,0.5215860644736418,0.5298652083541757,0.5381443522347097,0.5464234961152437,0.5547026399957777,0.5629817838763117,0.5712609277568457,0.5795400716373798,0.5878192155179137,0.5960983593984477,0.6043775032789817,0.6126566471595156,0.6209357910400497,0.6292149349205837,0.6374940788011176,0.6457732226816517,0.6540523665621857,0.6623315104427197,0.6706106543232536,0.6788897982037876,0.6871689420843217,0.6954480859648556,0.7037272298453896,0.7120063737259237,0.7202855176064576,0.7285646614869916,0.7368438053675256,0.7451229492480596,0.7534020931285936,0.7616812370091276,0.7699603808896616,0.7782395247701956,0.7865186686507296,0.7947978125312636,0.8030769564117975,0.8113561002923315,0.8196352441728656],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"SR: equal weights"},"tickformat":".2","range":[0,0.860617006381509]},"yaxis":{"title":{"text":"SR: estimate covariance matrix only"},"tickformat":".2","range":[0,0.860617006381509]},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('65255ed8-ddce-4694-bec1-640a456624e0');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.6: Simulated performance of estimated GMV portfolio versus equal-weighted portfolio</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell" data-execution_count="7">
<div id="fig-input-est-histogram2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="732b59f0-406f-4d5f-a34a-4005a45b6f8b" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("732b59f0-406f-4d5f-a34a-4005a45b6f8b")) {                    Plotly.newPlot(                        "732b59f0-406f-4d5f-a34a-4005a45b6f8b",                        [{"hovertemplate":"This bin contains %{y:0.3}% of simulations <br>Average difference in SRs across all simulations: 0.040 <br>'equal weights' outperforms 'estimate covariance matrix only' in 70% of all simulations<br><extra></extra>","x":[-0.06138668095396882,-0.011802217905454201,0.00922610884557909,0.019861456369468566,0.0024822200576318787,0.10656498890554486,0.075081906647822,0.10407334368999221,0.08891444173719923,-0.04703797478341454,0.02714533333383712,0.09710458309477144,0.07244393724577756,0.3120665883017549,0.11092080209958156,0.1388973946755474,-0.19705938521821403,-0.012976491932026359,-0.0036956200899188607,0.1501306422582141,0.13002993170877028,0.06976375284533515,-0.019351691286322248,0.09529900693707,0.030370001620435738,0.06216828443243738,-0.08189538043806571,0.004332907854848772,-0.0038084887015308044,0.06030605963274377,-0.009165461082980164,0.04433251311101033,-0.0043632035091959,0.06626563773508634,0.0341364276676155,0.012932117786313369,0.03909709363010386,-0.053693876086371106,0.005127378675004332,0.11457667408930214,0.05837252864467671,0.0015025373541128761,-0.01079302612762792,0.1558573709082906,0.06935174807655933,-0.032193519283631955,-0.027703312378897643,0.017580833242006072,0.03192162332048154,0.06951268110812389,0.16737477426583963,0.1154445243015092,0.036145476018272504,0.12174627674802246,0.03598658767563212,-0.010275763364757912,-0.09572077926104311,0.12174252095070894,0.04217666606280496,0.008777393158367813,0.09815863924411322,0.16642836390089788,-0.06834934073704355,-0.05200331000793022,0.13579979851435914,0.0743772926933789,-0.04805012432453411,0.06520957426560625,0.09010018971852526,0.028560308192973644,0.024173982883573877,0.1439099612891239,-0.029541178321886963,0.04347410070103214,-0.13039425890101813,0.007357649172192893,0.0726292796701179,0.031050802871149086,0.09224600903520432,0.11707220715051755,-0.11728984277109325,0.066989722315061,0.055763265124511796,-0.003558000390696453,0.17576802397003038,0.10967387083264668,-0.03014696090709669,-0.031721897887151795,0.06998329131968811,0.06529177765414079,-0.036429381489164026,-0.0921008182837243,0.031460784121083885,0.015336308838436952,0.02986476297422902,0.0010606857696136562,-0.015097432509834141,0.1412956127935042,0.03166236840617813,0.004302176979932321,0.12116874063146707,0.12181078382394517,0.03212541110983763,0.08335952911636316,0.020387575396636437,-0.005641819738677806,-0.10186231967802825,0.02919743117723242,0.02717156721971864,-0.09115472143525283,0.011590162074531271,0.047321191699779885,0.0066901107748181254,-0.043986893123452,0.08902261232474928,-0.004442278890874049,0.006692114939252147,-0.10242292435108197,0.0895725317188385,0.1428164309014014,0.010388332533204963,0.08087554620371475,0.09439903468635713,0.06331134819256112,-0.028504344550805322,0.047842144113922,0.06820173978249744,0.037134319820504025,-0.08714140752071686,0.2514316667555869,-0.0009951972041543355,0.1548623714251027,0.027129666266981323,-0.1770369333801105,-0.06221970973662514,0.06253668415280503,-0.1296109718922496,0.004766080193077282,0.013825902765597753,-0.03243537754812535,-0.03520539523651672,0.0983672385309855,-0.015771553684723105,-0.006390002134845807,0.014237328898524703,0.06869313604900598,0.0401949644014577,0.10182331923184479,-0.04996126342546653,0.012838603865229115,0.017088427143786097,0.06700053617668886,0.13215833010216826,0.03546623477331452,0.05205012147855842,0.11694116815005465,9.402300580915735e-05,-0.07568770137001041,0.07570466053369451,-0.01933028757435315,0.031136839903024294,0.027521731628176727,-0.10245957745554507,0.026254809510931787,-0.10080498254145409,0.0885093602703583,0.002367395151376778,0.04188501216669583,-0.02762925362789259,-0.017311357124699778,-0.020397344509134607,0.07753951671878312,-0.05371079601915213,0.03400405122684133,0.08233202724416919,0.12591203353590255,0.019309022688543703,0.052614016537918334,-0.01845494869405051,0.0635663353600878,-0.10004044598289395,0.2256818605480967,-0.0017830025001870087,0.10040060283133007,0.05350791171189119,-0.03709850565742659,0.12000635988078003,0.1409908004646766,-0.009943669943217825,0.022596231192643618,-0.0203338735709071,0.009699118887092767,0.07102782495115598,-0.000412875286955626,-0.08130871120811561,0.1342429887532225,-0.00229520970517276,-0.08693507032240722,0.09606817056809624,0.028488424503135934,-0.1097618121686933,0.19816240036201255,0.14340421653983898,-0.04048954216724472,-0.010771348746353854,-0.1105941420600278,0.04956600654645854,0.007429839741420613,0.027076924860794382,0.008665881030083554,-0.004761670043230831,-0.03702984974293988,0.038783254339279497,0.10403566405473397,0.07258075693319638,0.18747128773865723,0.06598173466709986,-0.014931550111985936,-0.002162190053289978,0.06035989368842781,-0.06788893356409059,0.017669394251760506,0.0061153704634688555,-0.006102833206333758,-0.1797187303171804,0.19422495325980876,0.11722676261748613,-0.03295245694495036,-0.021595257996065875,-0.09716260072564847,0.05065569970435456,0.29523001147110206,0.13147299471811486,0.3018215925193135,0.11560453007413213,0.10562633684358422,0.09373918105304177,0.058388836038922524,0.020490156018215938,-0.018936082235749385,0.018961159890949902,0.12739442672373055,0.2036545044074429,0.02836964520965099,0.08015868828446593,0.06884133564200977,0.03779793891669071,0.11517357196924569,0.14138995662098475,-0.015126900228912,0.06615729371491828,-0.10486744831464791,-0.12414229927296397,0.05196359549032932,0.06929002557813235,-0.02484365128920407,0.23362016072700628,-0.006092032897576483,0.14295842035668133,0.03248323634267655,-0.007665461417428063,0.06085238183761432,0.11883735173749597,-0.0659694845953793,0.05199436611968686,0.009597474981657972,-0.030024281186787793,0.06380457295155628,0.15968430998303582,0.03763635875240495,-0.0023635531958148825,0.053984815034587554,-0.03168221668728344,0.05060287767666302,0.17013313705434954,0.0572999361456597,-0.012085178937604853,0.029093459774125238,0.052531204255427566,0.03220715594584089,-0.039300536295294966,0.10163209343217472,0.0960199437606046,0.025509899343250486,0.052725508097310025,0.12348418384998389,0.10240943567390703,0.017030055226622376,0.08475276677454235,0.028803482748646046,0.10368789578389422,0.11771331161615545,0.0420954912765133,0.012300872807533558,0.04200583294183961,0.11778836581908128,0.16561870153711594,0.05320192273512915,0.13984446674120152,0.01140494208297016,0.15294218865683595,0.10481158593385878,0.19750576580735427,0.07031795096794058,0.062367019064368645,0.00727177683985164,0.23111905993904364,0.11158703971508328,0.11390753940090448,0.06375001851643725,0.032970169520466636,0.10101651723621102,-0.0815182350505932,0.11437998832131835,-0.06719234948659064,0.09253918793299087,0.1506232632559592,0.15457776550591187,0.057406766130922215,-0.08355652016577098,0.071576744432163,-0.017010910662749845,-0.022465408410483112,0.004785155169022552,0.03779720954999427,-0.23436333174811907,-0.003900909971982329,-0.03769873518191619,0.029109516114484174,0.013155152135819442,0.07211013673954036,0.003411644634259685,-0.175046381393447,-0.12555391020068535,0.08598857468487098,0.1026815464091671,0.012189271569390522,-0.025103314685721995,0.0010026334539232629,0.15026304554265052,0.05206900606562853,0.11226850133253678,-0.03797958277982938,0.053981051152052796,0.14433497707523343,0.05899108831491772,-0.023590551853628794,-0.041448159497442544,-0.0015885245298850187,0.21126394395947404,0.039238791885385135,-0.036658397679501686,0.09830239871697766,-0.035097679756785516,0.02910603325523006,-0.058408119581256024,0.05086025124516568,0.11398430071169774,-0.013138941616669217,0.06726316207370145,-0.05255356237078046,0.11335856589938759,0.11363092592594864,0.06678907763282749,0.03170052576319754,0.005603010513144269,0.08042596892918913,0.037334893885807685,-0.02469329185928626,0.07542026823513273,0.24186655947461358,0.04083686311131307,-0.00907367370925699,0.20100284995493733,0.03246377424218426,0.032167085859649724,0.26614434771275947,-0.057652509505250624,0.08520490024676493,0.18993685470525334,-0.07413096300638039,0.06146515327650609,0.052541790750310624,0.05438908232684592,0.07768810939833817,0.10193718016699177,0.009863540734390858,0.22747848356095504,-0.05245381416512904,-0.057300751301507774,0.09047071229530004,0.04307927392003036,0.030419779179518325,0.07498897200685059,0.05449565913573268,0.09460013914646137,-0.01760608153252352,-0.02348751404783811,0.0003528244816377313,0.13552074885420734,0.10261904937254795,0.033538955482742355,-0.019586775318628555,0.11324795716092623,-0.0761979457703986,0.0004345874094622282,0.07037720265196373,0.022192325269240115,0.09783849147193058,0.03954336209440454,-0.014423286396709778,-0.05169397237061235,0.0482640904424555,0.001693269773305306,0.14382527029120967,0.005038845923282853,-0.12074114425172042,-0.07324644764601315,0.15202299449696247,0.1576857955863367,0.014098196958732379,0.026506550946958224,0.11602499381297476,0.05395754255320401,-0.15011574097611075,0.018957057569318037,0.05310318697865317,-0.016438932014004287,0.03934719089916894,-0.19661139323707652,-0.011900700489156146,-0.04328202697189941,-0.07357887855815426,-0.004199121250005211,-0.02428666709613042,0.07892192001317902,0.044073956154285776,0.2200057719658053,0.033200172882515755,-0.003808205641344823,0.07366637444540702,-0.022818397332013268,0.08494959011738348,0.1251405080876545,-0.010804980834891953,0.13428018915142692,0.14272161711517461,0.055532319833136445,0.04693488985703126,0.08927872346763654,-0.10530867245856071,0.01667494489200663,0.07920792566013024,0.11080940769092776,0.1085483163537454,0.05258444992817901,-0.0016262503591023547,-0.029380666320515753,0.11871679259597168,0.17228409733771644,0.0484667240065918,0.019002343841781982,0.0231223283303989,-0.025567154469747694,0.028979920641203943,0.09198662461358145,0.11067428872733656,0.06852154118268516,0.08814764262050809,0.17891477769897585,0.027738378426680976,0.13951003175079113,0.13497221229949108,-0.0003088894801371034,0.03879678664847486,0.12720466975361602,0.0469651067561723,0.08589708197440754,-0.15607245498725508,-0.031786634886124265,-0.015129403120648643,-0.04684474157506602,0.03688038468038948,0.044765346669751904,0.02438484529562651,0.1142211516348138,-0.06643025833097621,0.040289092134394466,0.05160904821129475,0.13237018333243322,-0.07571372733014864,-0.059363196130947024,0.09225961755597784,0.08054219109290772,0.16096325884639884,0.0027071285405826373,0.09059313179911944,0.13649086443168146,-0.0891208340465063,0.027643701134956095],"type":"histogram","marker":{"line":{"color":"black","width":1}},"histnorm":"percent"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"Difference in SRs: 'equal weights' minus 'estimate covariance matrix only'"},"range":[-0.49178114650371935,0.49178114650371935]},"yaxis":{"title":{"text":"Percent of Simulations"},"tickformat":".2"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('732b59f0-406f-4d5f-a34a-4005a45b6f8b');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.7: Differences in Sharpe Ratios of estimated GMV portfolio and equal-weighted portfolio</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="estimating-standard-deviations-only" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="estimating-standard-deviations-only">Estimating Standard Deviations Only</h3>
<p>The advantage of the equal-weighted strategy falls further if we also give up on trying to estimate correlations. <a href="#fig-input-est-3">Figure&nbsp;<span>6.8</span></a> shows the Sharpe ratios of following a GMV strategy using a covariance matrix with historical estimates of variances but covariances set equal to zero. This strategy is known as risk parity. The equal-weighted strategy outperforms this strategy in almost two-thirds of the simulations, but the average difference in Sharpe ratios is economically small. On average across the simulations, the Sharpe ratio of the EW strategy is only 0.003 higher than the Sharpe ratio of the risk parity strategy. <a href="#fig-input-est-histogram3">Figure&nbsp;<span>6.9</span></a> plots the histogram of the difference in simulated Sharpe ratios of the equal-weighted portfolio minus that of the risk parity strategy. Note that there is much less variation in the differences in these strategies than in the GMV or tangency portfolio cases above.</p>
<div class="cell" data-execution_count="8">
<div id="fig-input-est-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="92a2be22-22fb-42fe-9f21-79457a1c3639" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("92a2be22-22fb-42fe-9f21-79457a1c3639")) {                    Plotly.newPlot(                        "92a2be22-22fb-42fe-9f21-79457a1c3639",                        [{"hovertemplate":"Sharpe Ratios:<br>  equal weights: %{x:0.3}<br>  estimate standard deviations only: %{y:0.3}<br><extra></extra>","mode":"markers","name":"A simulated outcome","x":[0.0626471901542217,0.008909585549357883,0.1086181524177272,0.1862716810834306,0.2535098120270528,0.16033264199844693,0.22012674781023434,0.13523185746615277,0.26885100557843206,0.24861720127850567,0.21540112270155112,0.26050712907951745,0.0316986314334547,0.45861749228447557,0.23104442275741974,0.24707217091988842,-0.0036034000032007293,-0.020976866140521865,0.33500359274115943,0.5351942091825582,0.2322462930547514,0.20483923126370493,-0.09980582943568672,0.4764814922277693,0.3665064746741546,0.3733665008342565,0.39682933447459995,0.11337536135283373,0.1964062375745924,0.33410331831516754,0.47020153363835065,0.4845642380454006,0.013635080433414534,0.2986212649229263,0.11491828527861105,0.3821296341990135,-0.033498697379613904,0.32236021172671603,-0.07238024183510873,0.08591515612965368,0.2599551767239067,0.2596645360238221,0.21778708829845275,0.12221564596951903,0.12081626862533014,0.35654120521006244,0.18847942428504216,-0.11116579074250144,0.4109129135291489,0.31422752597349385,0.24258468140288922,0.42446411576622467,0.34615383355595786,0.295853495858347,-0.021614886518000958,0.1500406669057268,0.35278117506092527,0.22897244065738603,0.3461905315323503,0.18643328489058605,0.36282133325444005,0.23239888547122062,0.22203782977262823,-0.13318746683427882,-0.06552385804546607,0.570244950990986,0.04712793322497612,0.25059342339064433,0.33694802912552724,0.15847040473021134,0.1321219500949433,0.25844632379127347,0.21150433918922676,0.3317100679548687,0.0714290427444476,-0.1389752233479748,0.24306387600186016,0.25684631651494344,0.12124914706053531,-0.052528499475231,0.1894276284073758,0.3969172870639482,0.5348351347741318,0.20869344898285092,0.24813867527617417,0.37671398682187235,0.0705234637994647,0.13204021147381537,0.48271665682746,0.39885693008410983,0.33925105572056163,0.35360742815716534,-0.0806335416181581,0.2187599690554244,0.34471749561207093,0.30115445366978594,0.19400209326168907,0.20600593416358265,-0.010724105769151546,0.21223925851840683,0.2797612386403197,0.39162223794702017,0.3921624956369624,0.2365698238871028,0.291336563891638,0.13324065099163868,0.21794905375675852,-0.06339463777832638,0.18742255260469767,0.2584611494745786,-0.08090557536474653,0.392023123044147,0.33156778966918166,-0.3188369608589909,0.35795466839581525,0.11266360230870724,0.30517821006568147,-0.11501730677483839,0.33962886999659697,0.13890056007979482,-0.029453694677623318,0.10113497899643123,0.5499317634178427,0.3307226335743434,-0.02194820288964286,0.14126110790082216,0.40129029670009514,0.2665026545839843,0.34865576739818743,0.5865652267154126,0.2171087102458226,-0.07808976570271847,0.24343827256326597,0.26390406177851267,0.017754074625787576,0.17967428622944376,0.16844883410145936,0.3717408433921145,0.31094890476775044,-0.12333093194196076,0.2680116028741568,0.09554603791623853,0.2603901393066892,0.1993455313422637,-0.027848297470543636,0.2946337704152134,0.26209366919103827,0.43768111791553793,0.27310071341168607,0.18930797637643224,0.0009540612174049662,0.3158493549371664,0.6482739997714978,-0.06452837288324476,0.3782390593670678,0.28549970814372905,0.20237431642550469,-0.053687054215419173,0.6724962847274232,0.15966376199118995,0.41524205254565527,0.23468895601228412,0.4531892835227003,0.1574609052347755,-0.1586284047697101,0.12253606986220958,0.0064327289058707555,0.1042402354535218,0.22964249981217771,0.2330858578827386,0.33096583724066075,0.41163894423418323,0.44094967277709496,0.24839640733258203,0.1148479805389592,0.19091350829791676,-0.07791604450884042,0.2837981335105853,0.1866873895506743,0.2811498327988744,-0.06399904610507642,0.45381419557078906,0.18361140730172767,0.24191128753306212,0.032006369004195845,0.13732080969942076,0.23229900864180736,0.4576800777884571,0.19078835690162085,0.16034977632543468,0.1552074556516379,0.1093994030585743,0.23942162991890525,0.05570079122142345,0.2533139667895533,0.11869219963495284,0.04671366056302944,0.27950833515325674,0.4395338723338147,0.46079902256638894,0.00012745577463995524,0.5376750261420874,0.4650213772777048,-0.15588338172274885,0.10337277653480773,0.22713470781487374,0.37441733863693166,0.12122075846308034,0.14141052460556228,-0.042887981571061676,0.1168773091029583,0.024485289972970902,0.13802332561498556,0.5433629998286003,0.40131544360967486,0.4571163676078334,0.21102824504842876,0.3910799302381987,0.08982792603037207,0.28959632654075396,0.1352313824880451,0.18828351550533043,0.23897880229233903,0.4416538037656013,0.07460295910443147,0.4499740240277216,-0.13438422259229657,0.25986620767123636,0.28468372751180615,-0.024498402376896326,0.14283457139086472,0.482421003563215,0.37190248851841223,0.3563190966707303,0.08117532293748028,0.3149882623398836,0.2673042192199818,0.06658371799885153,0.17612466170886557,0.5337898981479647,-0.048255611757606315,0.29503047933538246,0.06681531865380336,0.16548535576203607,0.727557322521528,0.13606673197717892,0.10905909606176536,0.20590967194317222,-0.009200561360774613,0.31780070017597617,0.10647559228651544,0.07837550754821342,0.20245788628882502,0.09949522711782179,0.35226298797656685,0.45808495620359,0.373088461833578,0.13368223306686736,0.2066748732774996,0.16763727557736946,0.09615720901411308,0.12423681055645726,0.21454871152704744,0.14102888551617296,0.2820774142393306,0.415699747882908,0.24579132280758548,0.5808878780057466,0.17426543826427654,0.365837776249236,0.16344599686154257,0.08991521404086579,-0.30725998222024237,-0.003911517754263104,0.39133311937376375,0.002193767281174503,-0.026891394867033933,0.06150069101232447,0.24147101665980006,0.3849915108313951,0.0635462597172756,0.35677770261187036,0.24437463617413563,0.3177245508985057,0.3076313611278928,0.40586734469792873,0.17684333029261395,0.6157552123788831,0.48757530841913443,0.06349573614472642,0.14644140670971012,0.3410914414177241,0.31334499454729053,0.2604657504065564,0.07747832112241584,0.06052000216878468,0.6557824909846864,0.1756580899405434,0.13675541885310688,0.43527473648923165,0.017979823553889523,0.22604749501565738,0.37842584221682435,0.27125411640862657,0.3846887069631077,0.41334746555524243,0.10728805864552117,0.2326637109194551,0.27962672639507385,0.11877312266995385,0.15720983820152915,0.3907174355895296,0.074163894015722,0.3561187229002319,0.052164117371507494,0.4167495846683737,0.5656624806903525,0.35948682909537155,0.378303922483556,0.2564535376625782,0.35238154664686167,0.22073785042769298,0.45612246761105296,0.04905897906210361,0.38795951330306916,0.08439115205126119,0.04311974808004769,0.26619756976778397,0.26570604038193674,0.15667434257492033,0.16327926890117153,0.0611910861428194,-0.11946512440827088,-0.07049302735287287,0.5929110744181576,0.4701444405714459,0.11324880465845881,-0.07195544561318523,0.5896542053415849,0.47359473800756613,0.45272367272887526,0.20736989467522812,0.27629418956673935,0.04957340923717569,0.3070903804493298,0.0012617471292279254,-0.23651017185561138,0.017653577969582283,0.09957581276194756,0.24105209035396247,0.15608865409325307,0.4768348140272766,0.050930387201609265,0.1880354598522489,-0.016580077060359386,-0.08733535373168723,0.06469880318412533,0.23200501762188006,0.024097659677819377,-0.15567613986816187,0.27820600473740553,0.3791360121535676,-0.008154576965326055,-0.2959032826453654,0.3290431973506097,0.27365032265203854,0.38034566032943345,0.42866778766417085,0.26957589245404395,0.249298170994376,0.28686158504659814,0.18892788370721283,0.3701146242817865,0.2351467258983821,0.009068222905445216,0.213578414378604,0.09768392547823856,0.018704310329750368,0.06974360180800208,0.2501776757635613,0.020969497426605897,0.20876195522087268,0.38188804001064264,0.36996373636095375,0.11320859522274668,0.37454728024534034,0.24699447166190613,0.24928652416967187,0.16528189986320035,0.22614063665761655,0.04594750045662115,0.23140072139470977,0.34040552794254125,0.08850946320888395,0.4597518143844677,0.3352469039167731,0.7051013484329286,0.5487505120416859,0.22554089107196298,0.42299620507578417,0.22202256912138632,0.22742722699037568,0.00937411778848442,0.3324841774767771,0.2473859324310365,0.25727203328419546,0.28284290387143207,0.16538608206593683,0.33798657366185425,0.2160031186186262,-0.02889085924372888,0.3741525329227677,0.3801212313492504,0.24564976998746682,0.2567591043759097,0.4745692611418223,0.041600911849133275,0.19243227843676616,0.253467049466619,0.11293118082843767,0.18972937155896327,-0.19645273410814917,0.15491710839622738,0.38866343082185034,0.05180596975392672,0.46035137946119464,-0.0725927449347261,0.20616437500139217,0.5388502790323693,0.18770839154664073,0.42594093918955217,0.1161965900559085,0.23496363384388014,0.2558122185481463,0.16876057910950992,0.3135570416906516,0.11443074495893836,0.3724076943541553,0.3189672306404036,-0.023129184651459207,0.274650719098086,0.12135071339507353,0.2467387762953273,0.11916073121656234,0.1526766391011677,0.23699679988509337,0.30675578421077476,0.43921394663595986,0.1926381518475999,0.2974644251598553,0.14590118249548137,0.021176926492556404,0.37652902293199697,0.31618358239114286,0.33642233250670145,0.37497215606502365,0.25500207025749266,0.16719474606568402,0.48217923477045327,0.04237861488755976,0.38151281039049123,0.1578265406357745,0.2845550256351552,0.20016458474890853,0.01677728532182482,0.12545978752377915,0.2384877469703205,0.09022823407123835,0.12258904777097493,0.2585319376039759,0.176169595256442,0.47654812520380957,0.46468783886747805,0.2214013662920181,0.18913530190962977,0.3060659315616357,0.24216323858874744,0.10237669808823079,0.003724233096610603,0.28646206559075205,0.3517958623270846,0.31031376412569617,0.23132447875427084,0.38950579458339224,0.3579981933448156,0.269653170524519,0.0009883217211718858,0.5024268486313567,0.21675823732882762,0.37934908825432556,0.49568125175271444,0.10828606263887798,0.4258392893858008,0.3903765633247666,0.26251161060974637,0.44459979023869045,0.06703587926883878,0.4930569371483911,-0.018365104320683747,0.14462684501373982],"y":[0.0765685728948265,0.009052849170895685,0.10850498994796083,0.18686265305199284,0.25820858197783214,0.14982677657840285,0.202747155286418,0.11997711610733802,0.2624518512427321,0.2626765774364681,0.21488114927650506,0.24700866756694984,0.02259279736915732,0.41452627843874845,0.2138342719591875,0.2296406031115394,0.04153619405886876,-0.01821021430750866,0.33998045228355045,0.5160759021326848,0.21797167431465567,0.19621452647953344,-0.09434909207412585,0.47275758498643433,0.3704019918196074,0.362105015824496,0.4256640352402095,0.11585549096082484,0.19704438993755014,0.31553828528663985,0.47557439658697936,0.4855140307305127,0.01740470563959847,0.29932615601420237,0.12246499681314363,0.3916708171002601,-0.046358232339525254,0.3361921596747908,-0.0763395480507979,0.05503410684082786,0.24231064679791137,0.2651762969886913,0.21230456300839518,0.09828945419183635,0.11213610829921389,0.373533067034742,0.20125359935757361,-0.12145867916267546,0.4396921288927812,0.30108879607807093,0.2124230199709881,0.41445382937993813,0.35161757450195896,0.2852902893999166,-0.0277939297896248,0.15403315540762202,0.36996324781839923,0.2176592090329411,0.3356410815221057,0.18803917860777383,0.3458529360935882,0.2114380664133986,0.23662971242369263,-0.12506960363166467,-0.08749457893438645,0.5785562009764175,0.051130838285416334,0.23305470379297616,0.31364657144700836,0.1522752465743165,0.12153379410754139,0.24623006776704887,0.2253468749658144,0.33137621809755896,0.09499865315879406,-0.138821976844362,0.2414243925003501,0.2525297543105304,0.10539757036934344,-0.06180687517577095,0.21260468808601865,0.3775989721482865,0.5350958295634612,0.208616325382748,0.21276225813962893,0.363482772190448,0.07714709894579257,0.1369883395256576,0.4812766026186997,0.39321381100464,0.3512981098335584,0.38864724028897313,-0.08085573285789766,0.21611158565314584,0.33721950933625383,0.30096526466364265,0.21332530206272834,0.19030638252247856,-0.015460576680996933,0.22074547735866187,0.26158610690980433,0.3726864722529337,0.39291812405620014,0.22529360768552412,0.2924912820193419,0.13760547999824105,0.23407542828960737,-0.07516925162410096,0.1873419954407077,0.295369276114913,-0.08387041742484072,0.3872053804297643,0.3289705900093825,-0.31884477493759367,0.3527200405706093,0.12383774014348892,0.3098436846091534,-0.0909262376981971,0.3152707262785981,0.11456290048505632,-0.0328522309985129,0.09482668367505359,0.5324252135171498,0.3234789905953202,-0.016984562353050833,0.1402029649772243,0.3826597421139473,0.2637617144880453,0.36790840551148624,0.5481731459339308,0.2155144665627702,-0.12298504037072652,0.24073272643745014,0.3037899775786167,0.03370258072029415,0.1851185376554175,0.20999977506426704,0.37413413737352774,0.31946402780627764,-0.11110439653593085,0.2914485906219501,0.08843737758103118,0.2786781162425508,0.20108439348892015,-0.0348710584305259,0.28040752130702645,0.2608867601259211,0.4291242497486348,0.28418200431416296,0.19947424780148684,-0.012047154600437166,0.30738757943310197,0.6423172316738925,-0.07179356515145716,0.36806339317913356,0.2734977389105311,0.2032311930867967,-0.0394667428284291,0.6748780445878799,0.1652209935405856,0.4191929442657131,0.23342046960987933,0.49294767689556657,0.15162578948637975,-0.14578979751825616,0.10695921340386161,0.006951416235221216,0.0909509583183501,0.23843053275294224,0.236069511447816,0.3360467423931902,0.404979775295123,0.46490698572515654,0.24196595432206267,0.10374452429150169,0.17576340657263986,-0.08181031116924273,0.2773521799744669,0.19514333480079574,0.27441138825929445,-0.048424263407475666,0.4223033732749088,0.1859012430021031,0.23060741174216595,0.0240736887523692,0.14400508791282424,0.20255024887962766,0.4326309727539865,0.19199526218706758,0.15050764062507171,0.16865112847292216,0.09956354951446997,0.22699349969878863,0.05830768385855152,0.26271593502858903,0.10139371387600372,0.04468939483120729,0.30540083776061816,0.42141090640912593,0.4704261115822175,0.019131825379232477,0.5082543844490474,0.4373820328460881,-0.15632908318041236,0.11040812882264901,0.2500167961008732,0.37407741126277877,0.12610486674415156,0.1310271726422588,-0.045435372119132164,0.11807662855784835,0.03369410642161471,0.13547931143878458,0.5527427022828767,0.40098771418461127,0.4306511798670827,0.19990406654940088,0.39353357037225084,0.09678839864899678,0.29233971728926794,0.15334408125067311,0.18987703061019373,0.2366511701998085,0.46418945494495284,0.11511040803340888,0.42113862943359465,-0.1539164222830395,0.27126933340384163,0.2916137328362115,-0.011277850835510368,0.1345911159618043,0.4514653915233875,0.3584480332569513,0.3324389940070933,0.06425513824661122,0.30586198223501365,0.2521133924642381,0.057232002219821984,0.17678226802222036,0.5486238290901332,-0.052729967438315824,0.281606514249988,0.029780792948407117,0.1622955288053318,0.7102287532848527,0.12435662496684714,0.1109981941097829,0.18805780505739125,-0.027238050804909607,0.32869140935149405,0.08741937000280292,0.10673395303034577,0.22258343608618014,0.10238079659313942,0.3460369750097839,0.47279301853815386,0.34687965173208096,0.1420027668868203,0.17959670217561607,0.17229573607389914,0.09994772222695607,0.12007370139125009,0.20563487812276854,0.15494591730420498,0.2669338329870932,0.4195970546962765,0.2474553025652618,0.5769957703735998,0.1576562610844133,0.3607832690331238,0.16251888243817514,0.08359757081090974,-0.3098612812476338,-0.01620064117864114,0.37450397006653335,-0.004888464676595001,-0.02070018471396077,0.05637384481911777,0.2408434467008121,0.38955022769961484,0.07939196695331965,0.35770277540714296,0.23521131810370333,0.31503464551152177,0.3002115489914117,0.384620177629043,0.16633075196536568,0.6185482357385668,0.4840609720546707,0.06372636935509285,0.1299926996522549,0.3286042901113831,0.3047840844271747,0.2577054639210638,0.0629309688819135,0.0402506941456482,0.6325738397301637,0.16617849273058094,0.10744906180258176,0.4459925717286093,-0.005558636048041845,0.2105668325635177,0.35204838892462814,0.2564123921343999,0.38366116020318763,0.4402958899950587,0.06553806190951036,0.21492905951797084,0.26320148392591197,0.11310912740585778,0.15638060409488086,0.3959932421678884,0.09478245791009386,0.34208012477739513,0.0677519687833725,0.41430726168057164,0.56421490717529,0.3369813558575873,0.3775167707364767,0.2733864115186906,0.35437061338736275,0.231322040667952,0.4704960330976756,0.047726195129656215,0.381968795497804,0.11190281180082061,0.0439606917306671,0.27885721276263403,0.25816831824126374,0.15589999277568906,0.1626470393565438,0.06157743052467717,-0.0674267942771978,-0.05601083559335868,0.5826281692207586,0.45688459361875516,0.10850904246552598,-0.061371934740245,0.6097018605106692,0.45206325334990116,0.444299855729569,0.1966111431013784,0.2944181571973441,0.04122879153454581,0.2909556294452451,-0.012868615742932661,-0.23382641523998332,0.0312621736980322,0.10022193776510686,0.21124271026873587,0.14214083207934036,0.4957913197938458,0.03153400103729835,0.19789501714024305,-0.022443387903537084,-0.0737257899777563,0.06072993400429976,0.22429306384701075,0.03304035874268823,-0.17238549915264037,0.30814258372177944,0.3637507420902371,-0.033321135478572995,-0.32141906659213115,0.32661133685161203,0.2843968530043426,0.3579756071563533,0.437974558730576,0.2842002063969483,0.2503037417943439,0.2620709474385764,0.18638869047476472,0.38794364382965774,0.19589882179617416,-0.006873247915312914,0.2177760203654902,0.04936370076120576,0.03753732199955942,0.0456925338857001,0.21379109317310507,0.041017836224328356,0.20175100538906654,0.38514160441827827,0.36588847060971774,0.09856871755256333,0.36465059311417464,0.2417869028150442,0.21424301510109814,0.18045854277610404,0.23749081622671486,0.04058172757159189,0.2214250168908113,0.3403918917372433,0.07925110488505811,0.4539565493775122,0.32348892571306376,0.7279910105827735,0.5991743981402715,0.23728665618274553,0.39813867799793984,0.2044167804838429,0.23831905757092714,0.013706711927734561,0.32243788291541997,0.2704011488249257,0.2596382275497791,0.2801744579975349,0.1676458975398645,0.3314343315310309,0.21516378638364098,-0.02935251759515827,0.38580573767627485,0.3793535725834531,0.23819133052633581,0.2418118766722466,0.48074060136498253,0.07170294633832115,0.20798325571650012,0.24725441359147757,0.09844341368300041,0.18937341906259453,-0.20977443380337743,0.13696793137017846,0.39042902581984223,0.08892388623213589,0.4576575445890148,-0.0853283237536029,0.21755823355475293,0.5454362689680945,0.22495166041561562,0.4362872455333719,0.12585601143229708,0.26564936461994776,0.25922552796887943,0.17323168235573402,0.3099752580485922,0.11128740777388738,0.3327036910695061,0.3174449044240471,-0.020102581954063503,0.26518523913369035,0.12252348687063788,0.22962026577034172,0.10198289946075258,0.16198789914912615,0.21883577932204643,0.2827024951637461,0.43799531403065184,0.1903511965804889,0.28197647989972674,0.16675504118064347,0.021110971360511186,0.3717035657895634,0.30493200354500327,0.33194934678232707,0.36929714991093826,0.27063824966244865,0.17715047338846596,0.46134923044007015,0.009623139904319223,0.3735132719889549,0.15740372030307628,0.2866374639748844,0.20899030619039716,0.009856331724565714,0.12272733114245882,0.22275921513077002,0.08649579389251283,0.11671601809977465,0.20772706673999675,0.1719618536608144,0.4676699852214595,0.4506145116516633,0.21649349764952824,0.18695054781678389,0.2980997631465687,0.2420066893504142,0.09448660688423581,0.02935232614692146,0.296929218620255,0.36070518262902723,0.3242973659034779,0.22945977209080007,0.37489806317832935,0.36457382770534097,0.2554118116406333,0.021824312678893367,0.50173616000841,0.2024342109501623,0.35480637309621427,0.5361679162973797,0.1255400614373576,0.409694278060973,0.379876437674693,0.23902261844614478,0.45250025217954454,0.05451128298915647,0.48030416639948087,-0.003993304696850765,0.14085939349907314],"type":"scatter"},{"hovertemplate":"Below this line: (60% of simulations)<br>   `equal weights` outperformed `estimate standard deviations only` <br>Above this line: (40% of simulations)<br>   `estimate standard deviations only` outperformed `equal weights`<br><extra></extra>","mode":"lines","name":"45-degree line","x":[0.0,0.008279143880533996,0.01655828776106799,0.024837431641601987,0.03311657552213598,0.04139571940266998,0.049674863283203974,0.05795400716373797,0.06623315104427197,0.07451229492480596,0.08279143880533996,0.09107058268587395,0.09934972656640795,0.10762887044694194,0.11590801432747594,0.12418715820800993,0.13246630208854393,0.14074544596907793,0.14902458984961192,0.15730373373014592,0.1655828776106799,0.1738620214912139,0.1821411653717479,0.1904203092522819,0.1986994531328159,0.2069785970133499,0.2152577408938839,0.22353688477441788,0.23181602865495188,0.24009517253548587,0.24837431641601987,0.2566534602965539,0.26493260417708786,0.27321174805762183,0.28149089193815585,0.2897700358186899,0.29804917969922384,0.3063283235797578,0.31460746746029183,0.32288661134082586,0.3311657552213598,0.3394448991018938,0.3477240429824278,0.35600318686296184,0.3642823307434958,0.3725614746240298,0.3808406185045638,0.3891197623850978,0.3973989062656318,0.40567805014616576,0.4139571940266998,0.4222363379072338,0.4305154817877678,0.43879462566830174,0.44707376954883576,0.4553529134293698,0.46363205730990376,0.4719112011904377,0.48019034507097175,0.48846948895150577,0.49674863283203974,0.5050277767125737,0.5133069205931078,0.5215860644736418,0.5298652083541757,0.5381443522347097,0.5464234961152437,0.5547026399957777,0.5629817838763117,0.5712609277568457,0.5795400716373798,0.5878192155179137,0.5960983593984477,0.6043775032789817,0.6126566471595156,0.6209357910400497,0.6292149349205837,0.6374940788011176,0.6457732226816517,0.6540523665621857,0.6623315104427197,0.6706106543232536,0.6788897982037876,0.6871689420843217,0.6954480859648556,0.7037272298453896,0.7120063737259237,0.7202855176064576,0.7285646614869916,0.7368438053675256,0.7451229492480596,0.7534020931285936,0.7616812370091276,0.7699603808896616,0.7782395247701956,0.7865186686507296,0.7947978125312636,0.8030769564117975,0.8113561002923315,0.8196352441728656],"y":[0.0,0.008279143880533996,0.01655828776106799,0.024837431641601987,0.03311657552213598,0.04139571940266998,0.049674863283203974,0.05795400716373797,0.06623315104427197,0.07451229492480596,0.08279143880533996,0.09107058268587395,0.09934972656640795,0.10762887044694194,0.11590801432747594,0.12418715820800993,0.13246630208854393,0.14074544596907793,0.14902458984961192,0.15730373373014592,0.1655828776106799,0.1738620214912139,0.1821411653717479,0.1904203092522819,0.1986994531328159,0.2069785970133499,0.2152577408938839,0.22353688477441788,0.23181602865495188,0.24009517253548587,0.24837431641601987,0.2566534602965539,0.26493260417708786,0.27321174805762183,0.28149089193815585,0.2897700358186899,0.29804917969922384,0.3063283235797578,0.31460746746029183,0.32288661134082586,0.3311657552213598,0.3394448991018938,0.3477240429824278,0.35600318686296184,0.3642823307434958,0.3725614746240298,0.3808406185045638,0.3891197623850978,0.3973989062656318,0.40567805014616576,0.4139571940266998,0.4222363379072338,0.4305154817877678,0.43879462566830174,0.44707376954883576,0.4553529134293698,0.46363205730990376,0.4719112011904377,0.48019034507097175,0.48846948895150577,0.49674863283203974,0.5050277767125737,0.5133069205931078,0.5215860644736418,0.5298652083541757,0.5381443522347097,0.5464234961152437,0.5547026399957777,0.5629817838763117,0.5712609277568457,0.5795400716373798,0.5878192155179137,0.5960983593984477,0.6043775032789817,0.6126566471595156,0.6209357910400497,0.6292149349205837,0.6374940788011176,0.6457732226816517,0.6540523665621857,0.6623315104427197,0.6706106543232536,0.6788897982037876,0.6871689420843217,0.6954480859648556,0.7037272298453896,0.7120063737259237,0.7202855176064576,0.7285646614869916,0.7368438053675256,0.7451229492480596,0.7534020931285936,0.7616812370091276,0.7699603808896616,0.7782395247701956,0.7865186686507296,0.7947978125312636,0.8030769564117975,0.8113561002923315,0.8196352441728656],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"SR: equal weights"},"tickformat":".2","range":[0,0.860617006381509]},"yaxis":{"title":{"text":"SR: estimate standard deviations only"},"tickformat":".2","range":[0,0.860617006381509]},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('92a2be22-22fb-42fe-9f21-79457a1c3639');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.8: Simulated performance of risk parity portfolio versus equal-weighted portfolio</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell" data-execution_count="9">
<div id="fig-input-est-histogram3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="4e76c22e-e202-4490-91df-dc54e01689fe" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("4e76c22e-e202-4490-91df-dc54e01689fe")) {                    Plotly.newPlot(                        "4e76c22e-e202-4490-91df-dc54e01689fe",                        [{"hovertemplate":"This bin contains %{y:0.3}% of simulations <br>Average difference in SRs across all simulations: 0.002 <br>'equal weights' outperforms 'estimate standard deviations only' in 60% of all simulations<br><extra></extra>","x":[-0.01392138274060481,-0.0001432636215378015,0.00011316246976636468,-0.0005909719685622539,-0.004698769950779336,0.010505865420044086,0.017379592523816323,0.015254741358814744,0.00639915433569993,-0.014059376157962433,0.0005199734250460608,0.013498461512567617,0.00910583406429738,0.04409121384572712,0.017210150798232238,0.017431567808349036,-0.045139594062069494,-0.0027666518330132055,-0.004976859542391021,0.019118307049873384,0.014274618740095724,0.008624704784171489,-0.005456737361560868,0.0037239072413349783,-0.0038955171454528315,0.011261485009760486,-0.028834700765609567,-0.0024801296079911134,-0.0006381523629577224,0.01856503302852769,-0.005372862948628709,-0.000949792685112083,-0.0037696252061839366,-0.0007048910912760831,-0.0075467115345325825,-0.009541182901246559,0.01285953495991135,-0.013831947948074796,0.003959306215689171,0.030881049288825825,0.017644529925995356,-0.005511760964869161,0.005482525290057577,0.02392619177768268,0.008680160326116251,-0.016991861824679544,-0.012774175072531452,0.01029288842017402,-0.028779215363632316,0.013138729895422918,0.030161661431901132,0.010010286386286538,-0.0054637409460011055,0.010563206458430452,0.006179043271623844,-0.003992488501895236,-0.017182072757473965,0.011313231624444947,0.010549450010244599,-0.0016058937171877785,0.016968397160851856,0.020960819057822017,-0.014591882651064397,-0.00811786320261415,0.02197072088892038,-0.008311249985431424,-0.004002905060440216,0.017538719597668173,0.023301457678518878,0.006195158155894859,0.010588155987401898,0.012216256024224603,-0.013842535776587644,0.0003338498573097204,-0.023569610414346465,-0.00015324650361278613,0.0016394835015100528,0.004316562204413066,0.015851576691191874,0.00927837570053995,-0.023177059678642864,0.01931831491566166,-0.0002606947893294409,7.712360010292407e-05,0.03537641713654524,0.013231214631424348,-0.006623635146327869,-0.004948128051842221,0.0014400542087603108,0.005643119079469849,-0.01204705411299678,-0.03503981213180779,0.00022219123973955812,0.0026483834022785757,0.007497986275817103,0.0001891890061432866,-0.01932320880103927,0.015699551641104093,0.004736470911845387,-0.008506218840255042,0.01817513173051538,0.01893576569408645,-0.0007556284192377083,0.011276216201578676,-0.001154718127703902,-0.004364829006602372,-0.016126374532848847,0.011774613845774579,8.055716398996937e-05,-0.03690812664033438,0.002964842060094189,0.00481774261438267,0.0025971996597991542,7.814078602785823e-06,0.005234627825205951,-0.011174137834781675,-0.004665474543471937,-0.024091069076641283,0.02435814371799888,0.024337659594738492,0.003398536320889583,0.006308295321377638,0.01750654990069289,0.00724364297902319,-0.004963640536592026,0.0010581429235978768,0.01863055458614782,0.002740940095939004,-0.019252638113298803,0.03839208078148171,0.0015942436830523876,0.04489527466800805,0.002705546125815833,-0.03988591580010403,-0.01594850609450657,-0.00544425142597374,-0.041550940962807675,-0.002393293981413247,-0.008515123038527195,-0.012226535406029915,-0.023436987747793292,0.007108660335207351,-0.018287976935861594,-0.0017388621466564447,0.007022760959982267,0.014226249108186928,0.0012069090651171677,0.008556868166903153,-0.011081290902476892,-0.010166271425054607,0.013001215817842133,0.008461775504064462,0.005956768097605258,0.0072651922682124,0.010175666187934251,0.012001969233197962,-0.0008568766612920276,-0.014220311386990071,-0.0023817598604567447,-0.005557231549395636,-0.003950891720057803,0.0012684864024047893,-0.03975839337286624,0.005835115748395736,-0.012838607251453943,0.01557685645834797,-0.0005186873293504604,0.01328927713517171,-0.008788032940764523,-0.0029836535650773766,-0.005080905152529458,0.006659168939060212,-0.023957312948061582,0.006430453010519366,0.01110345624745751,0.015150101725276893,0.0038942666604023096,0.006445953536118432,-0.008455945250121444,0.006738444539579946,-0.015574782697600757,0.03151082229588026,-0.0022898357003754144,0.011303875790896173,0.007932680251826644,-0.006684278213403477,0.029748759762179694,0.02504910503447061,-0.00120690528544673,0.009842135700362964,-0.013443672821284253,0.009835853544104337,0.012428130220116629,-0.002606892637128072,-0.009401968239035718,0.017298485758949114,0.002024265731822149,-0.025892502607361423,0.01812296592468876,-0.009627089015828538,-0.019004369604592522,0.02942064169304004,0.027639344431616697,0.000445701457663511,-0.007035352287841287,-0.02288208828599944,0.000339927374152893,-0.00488410828107122,0.010383351963303478,0.0025473905480704884,-0.0011993194548900604,-0.009208816448643808,0.0025440141762009816,-0.00937970245427644,0.00032772942506359426,0.02646518774075074,0.011124178499027887,-0.0024536401340521374,-0.006960472618624716,-0.0027433907485139852,-0.018112698762628027,-0.0015935151048633023,0.002327632092530535,-0.022535651179351524,-0.04050744892897741,0.02883539459412693,0.019532199690742935,-0.011403125732605268,-0.006930005324405353,-0.013220551541385957,0.008243455429060437,0.030955612039827496,0.01345445526146094,0.023880102663636993,0.01692018469086906,0.009126280104869933,0.015190826755743736,0.009351715779029546,-0.0006576063133547916,-0.01483393094216845,0.004474355680709509,0.013423965085394451,0.03703452570539624,0.003189826956704278,0.017328569236675362,0.011710107010331774,-0.0019390980480175346,0.01785186688578097,0.018037489444134996,-0.010890709175517876,0.019056222283712523,-0.028358445482132358,-0.02012554979735512,-0.002885569475317637,0.0062260129667829345,-0.014708062334563843,0.02620881010149706,-0.00832053381995293,0.027078171101883514,-0.004658460496529682,-0.0037905132128429886,0.0041631091652071656,0.008913833404278898,-0.013917031788032025,0.01514358125223736,-0.0038973068133685285,-0.0016639797576763204,0.0038921076321467574,0.016609177179863238,0.005054507216112225,0.0009271144233674311,0.006317643229956052,0.002601299027391424,0.012289123424378035,0.016829149307230395,0.007082231957769504,-0.006191210153073164,0.005126846193206698,0.0006275699589879669,-0.0045587168682197365,-0.01584570723604406,-0.0009250727952725968,0.009163318070432303,0.0026899053869839373,0.007419812136481074,0.02124716706888574,0.010512578327248279,-0.0027930233596836773,0.0035143363644637438,-0.0002306332103664266,0.016448707057455214,0.012487151306340982,0.008560910120115839,0.0027602864854925913,0.01454735224050234,0.02026930802313648,0.02320865125452276,0.00947959720996247,0.029306357050525117,-0.010717835239377638,0.02353845960193137,0.015480662452139693,0.026377453292196207,0.014841724274226642,0.0010275467599200616,-0.026948424439816265,0.041749996736010805,0.017734651401484253,0.016425242469161883,0.0056639952640960695,0.0008292341066482856,-0.005275806578358799,-0.02061856389437186,0.014038598122836754,-0.015587851411865007,0.002442322987802059,0.001447573515062528,0.022505473237784235,0.0007871517470792733,-0.016932873856112363,-0.0019890667405010887,-0.010584190240259028,-0.014373565486622664,0.0013327839324473942,0.005990717805265167,-0.027511659749559422,-0.0008409436506194093,-0.012659642994850062,0.007537722140672998,0.000774349799231272,0.0006322295446277437,-0.00038634438185777137,-0.05203833013107308,-0.014482191759514193,0.01028290519739905,0.013259846952690724,0.004739762192932831,-0.010583510872940231,-0.020047655169084355,0.021531484657664968,0.008423816999306277,0.010758751573849729,-0.018123967630604754,0.008344617702629877,0.01613475100408468,0.014130362872160587,-0.002683756615628058,-0.013608595728449916,-0.0006461250031593035,0.0298093800852266,0.013947822013912703,-0.018956505766569154,0.019396386164310914,-0.009859557287994147,0.005863310843177698,-0.013609563753930923,0.003968869179825564,0.007711953774869301,-0.008942699064868852,0.016709359284478503,-0.029936578984373907,0.015385270063330514,0.02516655851324694,0.025515783946765735,0.0024318604989976844,-0.010746530352304051,0.022370053173080162,-0.00930677106640515,-0.014624313942904366,-0.001005570799967881,0.02479063760802175,0.0025391932324481115,-0.01782901954787125,0.03924790410220794,0.01594147082075813,-0.004197605986886205,0.0483202247170328,-0.018833011669809052,0.024051067922301987,0.03638658259045624,-0.02004833879772246,0.00701094983180614,-0.003253564407635634,0.004075265751236012,0.014639877670183349,0.009896687131165705,0.0052075688468619374,0.03504350906857373,-0.015176642912903687,-0.011350179569098312,0.005365772885029263,0.00997570450389848,1.363620529792886e-05,0.009258358323825835,0.005795265006955541,0.01175797820370933,-0.02288966214984489,-0.05042388609858561,-0.011745765110782541,0.024857527077844332,0.017605788637543418,-0.01089183058055146,-0.004332594139250141,0.010046294561357139,-0.023015216393889232,-0.0023661942655836543,0.002668445873897196,-0.0022598154739276732,0.006552242130823338,0.0008393322349852239,0.00046165835142939274,-0.011653204753507174,0.0007676587657973188,0.007458439461131006,0.014947227703663107,-0.006171340223160238,-0.030102034489187877,-0.015550977279733952,0.0062126358751414534,0.014487767145437258,0.0003559524963687444,0.013321699695228256,0.017949177026048924,-0.0017655949979918928,-0.03711791647820917,0.0026938348721798344,0.012735578818876797,-0.011393858553360753,-0.006585989935725234,-0.03724326886897489,-0.010346306343819722,-0.009659421376388574,-0.03068573077606762,-0.003413309420733146,-0.004471103246224101,0.003581783642059355,0.0031433371850509845,0.039704003284649236,0.0015223262163565066,-0.0030266026973957035,0.009465479964395673,-0.0011727734755643537,0.017118510524985586,0.017177831755809767,-0.009311260047958458,0.018161020563046942,0.024053289047028636,0.0012186326053080232,0.0022869552671109794,0.015487945260128533,-0.020853858685162097,6.5955132045218e-05,0.004825457142433598,0.011251578846139587,0.004472985724374379,0.0056750061540853936,-0.015636179404955985,-0.009955727322781938,0.020830004330383123,0.03275547498324054,0.007999538401536332,0.0004228203326982205,-0.0020824383397291535,-0.008825721441488632,0.0069209535972591055,0.0027324563813203306,0.015728531839550475,0.003732440178725524,0.005873029671200278,0.05080487086397917,0.00420774159562759,0.008878139982350042,0.01407332721581478,0.004907868642489849,0.002184754092845881,0.007966168415066976,0.00015654923833324785,0.007890091203994976,-0.025628093050310857,-0.010467153029502962,-0.008909320301942636,-0.01398360177778174,0.001864706663470772,0.014607731405062885,-0.006575634360525384,0.014241358883885669,-0.02083599095772148,0.0006906886229466336,0.014324026378665311,0.024542715158111295,-0.04048666454466526,-0.017253998798479622,0.016145011324827763,0.010500125650073633,0.02348899216360159,-0.007900461940854087,0.012524596279682304,0.012752770748910236,-0.014371799623832983,0.0037674515146666754],"type":"histogram","marker":{"line":{"color":"black","width":1}},"histnorm":"percent"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"title":{"text":"Difference in SRs: 'equal weights' minus 'estimate standard deviations only'"},"range":[-0.49178114650371935,0.49178114650371935]},"yaxis":{"title":{"text":"Percent of Simulations"},"tickformat":".2"},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('4e76c22e-e202-4490-91df-dc54e01689fe');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.9: Differences in Sharpe Ratios of risk parity portfolio and equal-weighted portfolio</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
<section id="empirical-performance" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="empirical-performance"><span class="header-section-number">6.3</span> Empirical Performance</h2>
<p>We now examine how well we would have done forming optimal portfolios historically with the S&amp;P 500, Treasury bonds, corporate bonds, and gold. As in the previous section, we consider strategies differing in the extent to which they rely on estimates of expected returns, standard deviations, and correlations. We use rolling windows of 20 years to estimate each input using historical data. The data starts in 1968, so our first out-of-sample return is in 1988. We rebalance the portfolio annually. We optimally locate along the capital allocation line for each strategyâ€™s optimal portfolio, assuming a risk aversion of 5.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p><a href="#fig-stockbondsgold-sharpe">Figure&nbsp;<span>6.10</span></a> shows the realized Sharpe ratio for each strategy. The tangency portfolio strategy underperformed each of the other strategies, including the equal-weighted <span class="math inline">\(1/N\)</span> strategy. The noisiness in estimating expected returns does not lead to better investment results compared to any of the strategies that assume expected returns are equal across the assets.</p>
<p>The risk parity strategy performs the best in terms of Sharpe ratio in the thirty or so years of implementing each strategy, followed by the equal-weighted and GMV strategies. For this set of assets and sample, estimating differences in volatility across assets was beneficial to performance. However, estimating correlations in addition to volatilities led to worse outcomes in terms of Sharpe ratios. In fact, the GMV strategy underperformed both risk parity and the equal-weighted <span class="math inline">\(1/N\)</span> strategies.</p>
<div class="cell" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cvxopt <span class="im">import</span> matrix</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> cvxopt.solvers <span class="im">import</span> qp <span class="im">as</span> Solver, options <span class="im">as</span> SolverOptions</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize_scalar</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> multivariate_normal <span class="im">as</span> mvn</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull the data (from sbb.py and gold.py from website codebase)</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Stocks, bonds, bills</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>nominal <span class="op">=</span> pd.read_csv(<span class="st">'https://www.dropbox.com/s/hgwte6swx57jqcv/nominal_sbb.csv?dl=1'</span>, index_col<span class="op">=</span>[<span class="st">'Year'</span>])</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Gold</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> quandl.get(<span class="st">"LBMA/GOLD"</span>)[<span class="st">'USD (AM)'</span>]</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>gold <span class="op">=</span> d.resample(<span class="st">'Y'</span>).last().iloc[:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>gold.index <span class="op">=</span> [x.year <span class="cf">for</span> x <span class="kw">in</span> gold.index]</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>gold.loc[<span class="dv">1967</span>] <span class="op">=</span> d.iloc[<span class="dv">0</span>]</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>gold <span class="op">=</span> gold.sort_index().pct_change().dropna()</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>gold.name <span class="op">=</span> <span class="st">'Gold'</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat((nominal, gold), axis<span class="op">=</span><span class="dv">1</span>).dropna()</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>assets <span class="op">=</span> [<span class="st">'TBills'</span>,<span class="st">'S&amp;P 500'</span>, <span class="st">'Gold'</span>, <span class="st">'Corporates'</span>, <span class="st">'Treasuries'</span>]</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df[assets]</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">##### Inputs</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Window length (and initial period)</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>window <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="bu">len</span>(assets)<span class="op">-</span><span class="dv">1</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>raver <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>short_lb <span class="op">=</span> <span class="va">None</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="bu">len</span>(df)<span class="op">-</span>window</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Rolling input estimation</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>risky <span class="op">=</span> assets[<span class="dv">1</span>:]</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>df.columns <span class="op">=</span> [<span class="st">'rf'</span>]<span class="op">+</span>[<span class="st">'r'</span><span class="op">+</span><span class="bu">str</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>asset_list <span class="op">=</span> [<span class="bu">str</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n)]</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> asset <span class="kw">in</span> asset_list:</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'mn'</span> <span class="op">+</span> asset]<span class="op">=</span>df[<span class="st">'r'</span><span class="op">+</span>asset].rolling(window).mean()</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'sd'</span> <span class="op">+</span> asset]<span class="op">=</span>df[<span class="st">'r'</span><span class="op">+</span>asset].rolling(window).std()</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>ret_list <span class="op">=</span> [<span class="st">'r'</span> <span class="op">+</span> asset <span class="cf">for</span> asset <span class="kw">in</span> asset_list]</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>corrs <span class="op">=</span> df[ret_list].rolling(window, min_periods<span class="op">=</span>window).corr()</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>corr_list <span class="op">=</span> []</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(j<span class="op">+</span><span class="dv">1</span>,n):</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'c'</span><span class="op">+</span>asset<span class="op">+</span><span class="bu">str</span>(k)]<span class="op">=</span>corrs.loc[(<span class="bu">slice</span>(<span class="va">None</span>),<span class="st">'r'</span><span class="op">+</span>asset),<span class="st">'r'</span><span class="op">+</span><span class="bu">str</span>(k)].values</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'year'</span>] <span class="op">=</span> df.index</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.reset_index()</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare columns for the rolling optimization output</span></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>model_list <span class="op">=</span> [<span class="st">'ew'</span>, <span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>]</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> model <span class="kw">in</span> model_list:</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> np.nan      <span class="co">#portret is the realized portfolio return of the 100% risky asset portfolio</span></span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> model <span class="kw">not</span> <span class="kw">in</span> [<span class="st">'ew'</span>]:</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> asset <span class="kw">in</span> asset_list:</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>            df[<span class="st">'wgt'</span> <span class="op">+</span> asset <span class="op">+</span> <span class="st">'_'</span> <span class="op">+</span>model] <span class="op">=</span> np.nan</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span>np.nan</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span>np.nan <span class="co">#raver_portret_ is the realized return of the CAL choice of the raver investor</span></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>mn_list <span class="op">=</span> [<span class="st">'mn'</span><span class="op">+</span>asset <span class="cf">for</span> asset <span class="kw">in</span> asset_list]</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>sd_list <span class="op">=</span> [<span class="st">'sd'</span><span class="op">+</span>asset <span class="cf">for</span> asset <span class="kw">in</span> asset_list] </span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose optimal portfolios each time period</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> np.arange(window,window<span class="op">+</span>T):</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Full estimation inputs at each point in time</span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>    means <span class="op">=</span> df[mn_list].iloc[i<span class="op">-</span><span class="dv">1</span>].values</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    sds   <span class="op">=</span> df[sd_list].iloc[i<span class="op">-</span><span class="dv">1</span>].values</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>    C  <span class="op">=</span> np.identity(n)</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(j<span class="op">+</span><span class="dv">1</span>,n):</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>            C[j, k] <span class="op">=</span> C[k, j] <span class="op">=</span>    df.loc[i<span class="op">-</span><span class="dv">1</span>,<span class="st">'c'</span><span class="op">+</span>asset<span class="op">+</span><span class="bu">str</span>(k)]  </span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>    cov <span class="op">=</span> np.diag(sds) <span class="op">@</span> C <span class="op">@</span> np.diag(sds)</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> df.loc[i,<span class="st">'rf'</span>]</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>    <span class="co">##### Note: all portfolio weights considered to be beginning of period weights</span></span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>    <span class="co">##### (so multiply by contemporaneous realized returns)</span></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Full estimation tangency portfolio</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> <span class="st">'est_all'</span></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> tangency(means,cov,r,short_lb)</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt'</span><span class="op">+</span>asset<span class="op">+</span><span class="st">'_'</span> <span class="op">+</span> model] <span class="op">=</span> wgts[j]</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,ret_list].values <span class="op">@</span> wgts</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (wgts <span class="op">@</span> means <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)</span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Estimate only covariance matrix</span></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> <span class="st">'est_cov'</span></span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> gmv(cov,short_lb)</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt'</span><span class="op">+</span>asset<span class="op">+</span><span class="st">'_'</span> <span class="op">+</span> model] <span class="op">=</span> wgts[j]</span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,ret_list].values <span class="op">@</span> wgts</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (means.mean() <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))</span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)</span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Estimate only standard deviations in covariance matrix</span></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> <span class="st">'est_sds'</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(j<span class="op">+</span><span class="dv">1</span>,n):</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>            cov[j, k] <span class="op">=</span> cov[k, j] <span class="op">=</span> <span class="fl">0.0</span></span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> gmv(cov,short_lb)</span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a>        df.loc[i,<span class="st">'wgt'</span><span class="op">+</span>asset<span class="op">+</span><span class="st">'_'</span> <span class="op">+</span> model] <span class="op">=</span> wgts[j]</span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,ret_list].values <span class="op">@</span> wgts</span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (means.mean() <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))     </span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)    </span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Equal-weighted portfolio</span></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> <span class="st">'ew'</span></span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, asset <span class="kw">in</span> <span class="bu">enumerate</span>(asset_list):</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a>        cov[j,j] <span class="op">=</span> (sds.mean())<span class="op">**</span><span class="dv">2</span></span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>    wgts <span class="op">=</span> (<span class="dv">1</span><span class="op">/</span>n)<span class="op">*</span>np.ones(n)</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">=</span> df.loc[i,ret_list].values <span class="op">@</span> wgts</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> (means.mean() <span class="op">-</span> r) <span class="op">/</span> (raver <span class="op">*</span> (wgts <span class="op">@</span> cov <span class="op">@</span> wgts))</span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model] <span class="op">=</span> <span class="bu">max</span>(<span class="dv">0</span>,df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model])</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>    df.loc[i,<span class="st">'raver_portret_'</span><span class="op">+</span>model] <span class="op">=</span> r <span class="op">+</span> df.loc[i,<span class="st">'wgt_cal_'</span><span class="op">+</span>model]  <span class="op">*</span> (df.loc[i,<span class="st">'portret_'</span><span class="op">+</span>model] <span class="op">-</span>r)   </span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize sharpe ratio, avg ret, sd(ret) for each model</span></span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>portret_list <span class="op">=</span> [<span class="st">'raver_portret_'</span> <span class="op">+</span>  model <span class="cf">for</span> model <span class="kw">in</span> [<span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>,<span class="st">'ew'</span>]]</span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> df[portret_list].describe()</span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a>sr_df <span class="op">=</span> pd.DataFrame(dtype<span class="op">=</span><span class="bu">float</span>, columns <span class="op">=</span> [<span class="st">'sr'</span>,<span class="st">'avg_ret'</span>,<span class="st">'sd_ret'</span>], index <span class="op">=</span> [<span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>,<span class="st">'ew'</span>])</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> df[np.isnan(df[<span class="st">'raver_portret_ew'</span>])<span class="op">==</span><span class="va">False</span>].rf.mean()</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> model <span class="kw">in</span> [<span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>,<span class="st">'ew'</span>]:</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a>    sr_df.loc[model,<span class="st">'sr'</span>] <span class="op">=</span> (stats.loc[<span class="st">'mean'</span>,<span class="st">'raver_portret_'</span> <span class="op">+</span>  model] <span class="op">-</span> r)<span class="op">/</span>stats.loc[<span class="st">'std'</span>,<span class="st">'raver_portret_'</span> <span class="op">+</span>  model]</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>    sr_df.loc[model,<span class="st">'avg_ret'</span>] <span class="op">=</span> stats.loc[<span class="st">'mean'</span>,<span class="st">'raver_portret_'</span> <span class="op">+</span>  model]</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>    sr_df.loc[model,<span class="st">'sd_ret'</span>] <span class="op">=</span> stats.loc[<span class="st">'std'</span>,<span class="st">'raver_portret_'</span> <span class="op">+</span>  model]</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>label_dict <span class="op">=</span> {<span class="st">'true'</span>: <span class="st">'theoretical optimal weights'</span>, </span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>            <span class="st">'ew'</span>: <span class="st">'equal weights'</span>,</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>            <span class="st">'est_all'</span>: <span class="st">'estimate all inputs'</span>,</span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>            <span class="st">'est_cov'</span>: <span class="st">'estimate covariance matrix only'</span>,</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>            <span class="st">'est_sds'</span>: <span class="st">'estimate standard deviations only'</span>}</span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>xaxis_label_dict <span class="op">=</span> {<span class="st">'true'</span>: <span class="st">'theoretical optimal weights'</span>, </span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>            <span class="st">'ew'</span>: <span class="st">'Equal Weights'</span>,</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a>            <span class="st">'est_all'</span>: <span class="st">'Tangency'</span>,</span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>            <span class="st">'est_cov'</span>: <span class="st">'GMV'</span>,</span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a>            <span class="st">'est_sds'</span>: <span class="st">'Risk Parity'</span>}</span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>sr_df <span class="op">=</span> sr_df.reset_index()</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>sr_df[<span class="st">'label'</span>] <span class="op">=</span> sr_df[<span class="st">'index'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: label_dict[x])</span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a>sr_df[<span class="st">'xaxis_label'</span>] <span class="op">=</span> sr_df[<span class="st">'index'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: xaxis_label_dict[x])</span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot sharpe ratios</span></span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span><span class="st">"Strategy: %</span><span class="sc">{customdata[0]}</span><span class="st"> &lt;br&gt;"</span></span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"Sharpe ratio: %</span><span class="sc">{y:0.3f}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"Average return: %</span><span class="sc">{customdata[1]:0.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"SD(return): %</span><span class="sc">{customdata[2]:0.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a>string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Bar(x<span class="op">=</span>sr_df[<span class="st">'xaxis_label'</span>], y<span class="op">=</span>sr_df[<span class="st">'sr'</span>], customdata<span class="op">=</span>sr_df[[<span class="st">'label'</span>,<span class="st">'avg_ret'</span>,<span class="st">'sd_ret'</span>]], hovertemplate<span class="op">=</span>string))</span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a>fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Sharpe ratio"</span></span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Strategy"</span></span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-stockbondsgold-sharpe" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="b2e01d14-8f15-4f4f-a263-170c64b4759d" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b2e01d14-8f15-4f4f-a263-170c64b4759d")) {                    Plotly.newPlot(                        "b2e01d14-8f15-4f4f-a263-170c64b4759d",                        [{"customdata":[["estimate all inputs",0.2986056897337747,0.40601706852870584],["estimate covariance matrix only",0.3057456065086051,0.3712662027901908],["estimate standard deviations only",0.31768865674773056,0.3314475555795044],["equal weights",0.21224155968855304,0.24259706910894152]],"hovertemplate":"Strategy: %{customdata[0]} <br>Sharpe ratio: %{y:0.3f}<br>Average return: %{customdata[1]:0.1%}<br>SD(return): %{customdata[2]:0.1%}<br><extra></extra>","x":["Tangency","GMV","Risk Parity","Equal Weights"],"y":[0.6662475954431519,0.7478402566792806,0.8737154875792087,0.759051897235468],"type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"yaxis":{"title":{"text":"Sharpe ratio"}},"xaxis":{"title":{"text":"Strategy"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b2e01d14-8f15-4f4f-a263-170c64b4759d');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.10: Sharpe ratios of various strategies historically</figcaption><p></p>
</figure>
</div>
</div>
<p><a href="#fig-stockbondsgold-timeseries">Figure&nbsp;<span>6.11</span></a> plots the realized returns for each strategy. The hoverdata contains the optimal risky portfolio weights as well as the fraction of capital allocated to the risky portfolio. The tangency and GMV strategies produce the most volatile return series. However, as seen in <a href="#fig-stockbondsgold-sharpe">Figure&nbsp;<span>6.10</span></a>, they do not produce average returns high enough to make up for this additional risk to generate Sharpe ratios as high as the risk parity or equal-weighted <span class="math inline">\(1/N\)</span> strategies. Attempting to estimate expected returns and correlations for these assets would not have paid off.</p>
<div class="cell" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the time-series of returns and portfolio weights.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> asset <span class="kw">in</span> asset_list:</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'wgt'</span><span class="op">+</span>asset <span class="op">+</span> <span class="st">'_ew'</span>] <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>n</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> model <span class="kw">in</span> [<span class="st">'est_all'</span>, <span class="st">'est_cov'</span>, <span class="st">'est_sds'</span>, <span class="st">'ew'</span>]:</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    string <span class="op">=</span>  <span class="st">"Strategy: "</span> <span class="op">+</span> label_dict[model] <span class="op">+</span><span class="st">" &lt;br&gt;"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"Year: %</span><span class="sc">{x:4.0f}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"Return: %</span><span class="sc">{y:0.1%}</span><span class="st">&lt;br&gt;"</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"Weight in Risky Portfolio: %</span><span class="sc">{customdata[0]: 0.1%}</span><span class="st"> &lt;br&gt;"</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"Risky Portfolio Weights:&lt;br&gt;"</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"  "</span><span class="op">+</span> risky[<span class="dv">0</span>] <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[1]: 0.1%}</span><span class="st"> &lt;br&gt;"</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"  "</span><span class="op">+</span> risky[<span class="dv">1</span>] <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[2]: 0.1%}</span><span class="st"> &lt;br&gt;"</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"  "</span><span class="op">+</span> risky[<span class="dv">2</span>] <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[3]: 0.1%}</span><span class="st"> &lt;br&gt;"</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"  "</span><span class="op">+</span> risky[<span class="dv">3</span>] <span class="op">+</span><span class="st">": %</span><span class="sc">{customdata[4]: 0.1%}</span><span class="st"> &lt;br&gt;"</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    string <span class="op">+=</span> <span class="st">"&lt;extra&gt;&lt;/extra&gt;"</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    wgt_list <span class="op">=</span> [<span class="st">'wgt_cal_'</span><span class="op">+</span> model] <span class="op">+</span> [<span class="st">'wgt'</span><span class="op">+</span>asset <span class="op">+</span> <span class="st">"_"</span> <span class="op">+</span> model <span class="cf">for</span> asset <span class="kw">in</span> asset_list]</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    trace<span class="op">=</span>go.Scatter(x<span class="op">=</span>df[<span class="st">'year'</span>], y<span class="op">=</span>df[<span class="st">'raver_portret_'</span><span class="op">+</span>model], customdata<span class="op">=</span>df[wgt_list], hovertemplate<span class="op">=</span>string, name <span class="op">=</span> xaxis_label_dict[model])</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(trace)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>fig.layout.yaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Return"</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>fig.layout.xaxis[<span class="st">"title"</span>] <span class="op">=</span> <span class="st">"Year"</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>fig.update_yaxes(tickformat<span class="op">=</span><span class="st">".0%"</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(legend<span class="op">=</span><span class="bu">dict</span>(yanchor<span class="op">=</span><span class="st">"top"</span>, y <span class="op">=</span><span class="fl">0.99</span>, xanchor<span class="op">=</span><span class="st">"left"</span>, x<span class="op">=</span><span class="fl">0.01</span>))</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>fig.update_xaxes(<span class="bu">range</span><span class="op">=</span>[df[<span class="st">'year'</span>].iloc[window], df.year.<span class="bu">max</span>()])</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-stockbondsgold-timeseries" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="0efd46e7-8ccc-4d16-8851-1f9d4f4d6bc8" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("0efd46e7-8ccc-4d16-8851-1f9d4f4d6bc8")) {                    Plotly.newPlot(                        "0efd46e7-8ccc-4d16-8851-1f9d4f4d6bc8",                        [{"customdata":[[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[1.4099718946339632,0.046503324706342275,0.2307975353239346,1.7355685657825664,-1.0128694258128434],[1.0128649364584557,0.00818337750954963,0.2548449399897437,2.2506333970325167,-1.5136617145318103],[2.0073249132676727,0.1254139061502365,0.19428905726700993,1.3299926555540527,-0.649695618971299],[3.1009399783984954,0.05775711841112625,0.1873868468839886,1.6813424142802538,-0.9264863795753687],[3.9677782050770904,0.0639595913477354,0.17479824365905156,1.524465892438983,-0.7632237274457697],[4.341457987031772,0.055045593755470315,0.17890132194466843,1.6156280908474356,-0.8495750065475742],[3.7472080485583676,0.06896086958958683,0.17755330665599592,1.6625833732614226,-0.9090975495070054],[3.7616806704227126,0.2403331575700928,0.12945062331973847,2.021249980978559,-1.3910337618683903],[4.045771613880989,0.2697414631550358,0.12130156843870415,1.9425414626564277,-1.3335844942501678],[3.9479837465272904,0.3164084091231852,0.11296398515792203,1.9680198028190388,-1.3973921971001457],[4.030574423007365,0.34871085588330225,0.10440730313249454,1.886627201505782,-1.3397453605215786],[3.6928843069203094,0.44808332841185755,0.07025445033506499,1.4919611148791325,-1.0102988936260549],[2.589805084429004,0.6353237682969518,-0.26726856794871817,1.9448054995980717,-1.3128606999463057],[3.151426795029339,0.19590767833218437,-0.24583394000142914,1.9060243778054633,-0.8560981161362183],[4.241781230927811,0.10753946894808465,-0.04960088601965017,1.7550519462739662,-0.8129905292024008],[5.480125765992198,0.008202385989693592,0.04369678663516207,1.5781575098896155,-0.6300566825144711],[5.090805303831811,-0.03065681974481924,-0.04884643261985901,1.8362383188984293,-0.7567350665337509],[4.104577835804166,-0.061920199490582084,-0.12690094554589787,2.1049029108489483,-0.9160817658124686],[3.271179513010651,-0.05188856881425161,-0.1195704731926806,2.1267593794985444,-0.9553003374916119],[3.7413901954405215,-0.01775940975337412,-0.03172465061835204,1.878284032190479,-0.8287999718187528],[6.18960419717981,0.03935933644954507,0.11567017717373122,1.1028984071589802,-0.2579279207822567],[5.290689261304344,0.013873082553645178,0.13851180889371495,0.6292990169331913,0.2183160916194484],[5.270785347196905,0.037509175048543085,0.13116005260213456,0.5304745488653566,0.3008562234839658],[5.633103802311216,0.05928027320066043,0.15164079480764353,0.47777220397020775,0.3113067280214883],[5.651090733144575,0.06302050669643128,0.1420883333818187,0.4841146778195763,0.3107764821021738],[5.632448609892551,0.07304474668830083,0.15588082416510893,0.46265692770916717,0.3084175014374231],[4.367782427917457,0.1339848794125373,0.08445342035177983,0.48613313693701843,0.29542856329866435],[5.861715973553728,0.13792476315598243,0.08506126476429673,0.42962699514791375,0.3473869769318072],[7.06631075602894,0.16291055521953385,0.0249853922289326,0.3906707426058881,0.42143330994564554],[6.467194856823764,0.14660459239731627,0.026299611718165847,0.42968283299085686,0.39741296289366107],[5.855102637973744,0.15849221188887988,-0.002216702432242932,0.4432676427620743,0.40045684778128876],[5.49964840976955,0.19585692815071465,-0.010658278081535594,0.3455466436901309,0.4692547062406901],[7.4358184642816765,0.1405005839804109,-0.032988481215749786,0.41123507399699033,0.4812528232383486],[7.515303450189821,0.1250898156561468,-0.056534429716908925,0.4518380940838179,0.47960651997694426]],"hovertemplate":"Strategy: estimate all inputs <br>Year: %{x:4.0f}<br>Return: %{y:0.1%}<br>Weight in Risky Portfolio: %{customdata[0]: 0.1%} <br>Risky Portfolio Weights:<br>  S&P 500: %{customdata[1]: 0.1%} <br>  Gold: %{customdata[2]: 0.1%} <br>  Corporates: %{customdata[3]: 0.1%} <br>  Treasuries: %{customdata[4]: 0.1%} <br><extra></extra>","name":"Tangency","x":[1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.18487677556251875,0.08447866776303078,-0.010318298489596409,0.38510551530262205,0.3297108495406967,0.6867763192943952,0.06446895257527402,0.49387230365918433,0.3728643656970166,0.5385685727259957,0.04942327546303798,0.5781709865394712,-0.29414987763416817,0.1623428028142936,0.18273272581633312,1.1768664552955101,0.6661389719359501,0.11787071821521877,0.2016734962041475,-0.25568418764684675,-0.8022160578344992,0.8634152048965147,0.5828444039823135,0.7239547714630565,0.4274183861856617,-0.30015884487609185,0.43653233976849487,-0.03977804122347577,0.43906931788432957,0.5163375620772992,-0.2053167398108136,0.7954009252850208,0.84710026737487,0.15220056514157532],"type":"scatter"},{"customdata":[[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[1.7030509317179467,0.05856624456178874,0.12708502805960378,0.8641389537355074,-0.04979022635689982],[1.173960842443053,0.05356320808988643,0.1272039113435949,0.8684828013540786,-0.0492499207875601],[2.2743966505776707,0.07280789410325551,0.13800337947925323,0.8416290371403787,-0.05244031072288751],[3.0701874912768443,0.04998140363748383,0.1418932848391265,1.0369178724401713,-0.2287925609167815],[3.916602964700225,0.04151924839557936,0.14451975534658895,1.0618362708610385,-0.2478752746032067],[4.022873059783721,0.04212121096568993,0.1544677806240235,1.187787557838237,-0.3843765494279504],[3.3194681368657792,0.0401804630249202,0.15887911156400117,1.1918051492774655,-0.3908647238663868],[2.5462528526956008,0.12491953892927744,0.13657731089994876,1.420770980840327,-0.682267830669553],[3.051980989347988,0.11515043516861391,0.14006205855091752,1.4905520021677072,-0.7457644958872386],[2.8981418000975827,0.1535599132930584,0.13069127583395207,1.5139432384674938,-0.7981944275945045],[3.090061901978041,0.14091071424002583,0.1334942251834398,1.5742852717536981,-0.8486902111771636],[2.97041781899074,0.1832406247177754,0.11972713759243728,1.3422942967874787,-0.6452620590976912],[1.8213365202655312,0.1725642430799847,0.21739687908456554,1.2601726407341058,-0.6501337628986559],[2.6056579607402766,0.02940000524915427,0.19161233781333253,1.2916200044583295,-0.5126323475208162],[4.078546117427235,0.0644749913009344,0.272192678151008,1.1843176880393613,-0.5209853574913036],[4.992652994475882,0.04826564503868957,0.2440020845903347,1.1253566844118967,-0.41762441404092093],[4.4192353731796645,0.011062216153726954,0.17005146496634227,1.1540426021174912,-0.3351562832375603],[3.525295219985533,0.013236939146349718,0.1727277123276939,1.1432913867486643,-0.32925603822270805],[2.627359399767094,0.030034601566260005,0.17359605365654793,1.0405082419937002,-0.2441388972165081],[3.2635750570950828,0.02794433682748224,0.18704731009495015,0.9009473935729738,-0.1159390404954061],[5.974573369756079,0.030841741336634584,0.18719471839887114,0.8624104687591327,-0.0804469284946385],[5.3961113763953525,0.01197673508399624,0.20276271215854574,0.5739628463238389,0.21129770643361917],[5.412510562551164,0.060130869101387374,0.18749113484147412,0.37799570385965114,0.37438229219748737],[5.9104297660644125,0.05822063973619069,0.17328534492407952,0.40227853376401457,0.3662154815757153],[5.810377843146658,0.07186169525465405,0.14899953480404815,0.4170966279545712,0.3620421419867265],[5.914386142740125,0.07265882992977427,0.1491152031540571,0.4181012725497665,0.36012469436640215],[4.648275440725613,0.10953010073596443,0.09046873411632818,0.4451079891316223,0.3548931760160851],[6.148034169331344,0.11909690735309916,0.09656262302648283,0.40276265073907785,0.3815778188813402],[7.442121500451067,0.15476654165022294,0.03320169083601828,0.3557919010042106,0.45623986650954823],[6.916310557416255,0.14947534523365777,0.033994481765242675,0.3661454759149722,0.45038469708612733],[6.971816472853758,0.16499887247264422,-0.02710032551647451,0.3916663294291672,0.4704351236146631],[7.328349195625178,0.2348335863827562,-0.0481587741389042,0.23273059543575927,0.5805945923203888],[8.949810207581693,0.16977047222684824,-0.06308723572871933,0.33281718763406376,0.5604995758678073],[10.201207746678728,0.12900891753595875,-0.12469613090557205,0.43672451621019037,0.5589626971594229]],"hovertemplate":"Strategy: estimate covariance matrix only <br>Year: %{x:4.0f}<br>Return: %{y:0.1%}<br>Weight in Risky Portfolio: %{customdata[0]: 0.1%} <br>Risky Portfolio Weights:<br>  S&P 500: %{customdata[1]: 0.1%} <br>  Gold: %{customdata[2]: 0.1%} <br>  Corporates: %{customdata[3]: 0.1%} <br>  Treasuries: %{customdata[4]: 0.1%} <br><extra></extra>","name":"GMV","x":[1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.15112332145873442,0.15310523883543142,0.0016994104515668934,0.3562052669413815,0.29459696700269067,0.5994832819934985,-0.05565159705270031,0.3585040704440989,0.1435384810226999,0.2582594373382151,0.016260896936744304,0.21831799537312468,-0.08402030840246928,0.13229237198625543,0.42592197390948217,1.045234831644844,0.4335290988744236,0.19197404927337847,0.22460034761583336,0.1532822511096625,-0.4547784869339255,0.9082787609373482,0.6659888921237398,0.7702265993633464,0.41931355254134467,-0.3298854121018834,0.4590187311080746,-0.04756892407629655,0.4355749684065381,0.5296803164696425,-0.23824734859124297,1.044011268521292,1.0087997946156486,0.20668052215205043],"type":"scatter"},{"customdata":[[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[2.452078192158818,0.15264509241867735,0.027162089491821646,0.45503272222856594,0.36516009586093506],[1.6684190155777439,0.15160064353211283,0.026109404309477162,0.4536262075238827,0.36866374463452734],[2.675576047598323,0.144024855214343,0.02538922995326411,0.4639929190661241,0.3665929957662688],[3.621458200032525,0.13861435963044338,0.024968591880176867,0.4620796055446029,0.37433744294477683],[4.4932022034655725,0.13468075965267814,0.025027664823997226,0.46337026883662036,0.3769213066867043],[4.380046722836678,0.13377312899051685,0.025393827122593075,0.4595833594855748,0.38124968440131524],[3.814789640610835,0.1493085521064945,0.02808716751497279,0.4517863582317293,0.3708179221468034],[2.9975781053572135,0.20244526186711406,0.03045245047626193,0.4545133950110937,0.3125888926455303],[3.507235498472902,0.209805954018741,0.03319465988996413,0.4533283408896904,0.3036710452016045],[3.2722662637560944,0.21100677395627596,0.033189280763728346,0.45608484698790175,0.299719098292094],[3.5488621976591914,0.22198508094417946,0.031448913377033594,0.4455346602000768,0.3010313454787102],[3.7879964373698867,0.2156862024000193,0.03164332345193927,0.4482823219647623,0.30438815218327925],[2.45360243877224,0.19100217987361898,0.14890095983975035,0.4175941458985024,0.2425027143881284],[4.072979234598706,0.15304010855474887,0.14515283832332312,0.46267473193111547,0.23913232119081246],[5.632867385649752,0.13603161312241702,0.18473056864948748,0.4485075846163594,0.23073023361173617],[6.222270187944018,0.08983092951891597,0.14109487408957327,0.5149328573400431,0.2541413390514676],[6.2551525390410925,0.08827376940980455,0.13346957945175486,0.5283644211135048,0.24989223002493585],[5.116325030378397,0.08694774958811066,0.14771516861781145,0.5232231540911442,0.24211392770293377],[3.6527199248979882,0.08110861740882133,0.12436467252566684,0.5473972274647392,0.24712948260077267],[4.080080010898266,0.07172274414226522,0.1044634104472581,0.5714770212485801,0.2523368241618966],[7.674378870422305,0.06950046426298569,0.09220915004675213,0.5648562491072411,0.2734341365830211],[7.081282112984538,0.05709205155089359,0.12169450387546178,0.5275999790984193,0.2936134654752255],[6.09355772064298,0.06867318548684274,0.12650557138417498,0.5150525406539365,0.2897687024750458],[6.632034110324937,0.0705406492946058,0.11671217880452596,0.5218397098738078,0.2909074620270604],[6.807294414733575,0.07073204211619791,0.11997407626222445,0.5341637540070061,0.27513012761457156],[7.009460690560994,0.06971356341639469,0.12537844816366422,0.5345010396721939,0.2704069487477473],[5.901899617876236,0.07057899238857931,0.10284579675366286,0.5616130286581664,0.26496218219959145],[6.871483021138969,0.06557286702128769,0.09489652186411075,0.5703065797819867,0.26922403133261485],[6.317420016845127,0.06507942957208125,0.08119214086301327,0.5645765993444078,0.2891518302204977],[5.873000655455195,0.06656854094684535,0.08283991337688423,0.5637313869548628,0.2868601587214076],[5.2862685588676825,0.06896943413810919,0.09651909221154921,0.5546869945162823,0.27982447913405933],[4.715636520646068,0.07611370748438157,0.10141133787445361,0.5120310284783156,0.31044392616284927],[6.823959961836973,0.06956272277029837,0.09837021701503346,0.4909527879830848,0.34111427223158336],[7.670188790890233,0.06991429141082474,0.0976140911261165,0.4745588250376494,0.3579127924254093]],"hovertemplate":"Strategy: estimate standard deviations only <br>Year: %{x:4.0f}<br>Return: %{y:0.1%}<br>Weight in Risky Portfolio: %{customdata[0]: 0.1%} <br>Risky Portfolio Weights:<br>  S&P 500: %{customdata[1]: 0.1%} <br>  Gold: %{customdata[2]: 0.1%} <br>  Corporates: %{customdata[3]: 0.1%} <br>  Treasuries: %{customdata[4]: 0.1%} <br><extra></extra>","name":"Risk Parity","x":[1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.196912899233048,0.2527528862919845,-0.001674153266550335,0.5043448105920989,0.3309253484350017,0.5444517567038389,-0.25063989816675336,0.6116861035660841,0.12763835708199744,0.36406848214810633,0.38585614727689593,-0.038116754079083624,0.044952910374899485,0.03198352635256438,0.5108884078308829,0.7360412191161869,0.4257669778266251,0.18855263147215345,0.18815613321270758,0.19516823901545577,-0.05973761777354133,0.9743092213460128,0.6803282269489316,0.8419146122063244,0.5417604390612498,-0.30282337873713083,0.5658693075422898,-0.07493739354620016,0.4605890560414576,0.46592050448778,-0.1856261348625542,0.6556860540610533,0.8551463439318437,0.03329905769717553],"type":"scatter"},{"customdata":[[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[null,0.25,0.25,0.25,0.25],[1.1338931630718665,0.25,0.25,0.25,0.25],[0.7554608701997606,0.25,0.25,0.25,0.25],[1.1831100671973414,0.25,0.25,0.25,0.25],[1.577821442228201,0.25,0.25,0.25,0.25],[1.9499608994532858,0.25,0.25,0.25,0.25],[1.9133566691420252,0.25,0.25,0.25,0.25],[1.7881787030584746,0.25,0.25,0.25,0.25],[1.5226079862398592,0.25,0.25,0.25,0.25],[1.8646337306326424,0.25,0.25,0.25,0.25],[1.7391873806376843,0.25,0.25,0.25,0.25],[1.849353444429517,0.25,0.25,0.25,0.25],[1.9744166671411867,0.25,0.25,0.25,0.25],[2.1951843358388485,0.25,0.25,0.25,0.25],[3.447051386141792,0.25,0.25,0.25,0.25],[4.859606257538297,0.25,0.25,0.25,0.25],[4.5300626834806135,0.25,0.25,0.25,0.25],[4.455327740133759,0.25,0.25,0.25,0.25],[3.699503447178843,0.25,0.25,0.25,0.25],[2.479406003823069,0.25,0.25,0.25,0.25],[2.5388940226432504,0.25,0.25,0.25,0.25],[4.603436108994639,0.25,0.25,0.25,0.25],[4.2935446638469825,0.25,0.25,0.25,0.25],[3.996304067201761,0.25,0.25,0.25,0.25],[4.304016665588516,0.25,0.25,0.25,0.25],[4.425601813872425,0.25,0.25,0.25,0.25],[4.574904118432369,0.25,0.25,0.25,0.25],[3.659598809413478,0.25,0.25,0.25,0.25],[4.063779967146082,0.25,0.25,0.25,0.25],[3.5848717920947024,0.25,0.25,0.25,0.25],[3.3775408198615375,0.25,0.25,0.25,0.25],[3.214116344227616,0.25,0.25,0.25,0.25],[3.044047945188719,0.25,0.25,0.25,0.25],[4.265016820265045,0.25,0.25,0.25,0.25],[4.806675676226254,0.25,0.25,0.25,0.25]],"hovertemplate":"Strategy: equal weights <br>Year: %{x:4.0f}<br>Return: %{y:0.1%}<br>Weight in Risky Portfolio: %{customdata[0]: 0.1%} <br>Risky Portfolio Weights:<br>  S&P 500: %{customdata[1]: 0.1%} <br>  Gold: %{customdata[2]: 0.1%} <br>  Corporates: %{customdata[3]: 0.1%} <br>  Treasuries: %{customdata[4]: 0.1%} <br><extra></extra>","name":"Equal Weights","x":[1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.05962254735151154,0.1383068289767706,0.0064427593477521805,0.17988290797906914,0.08062902868166319,0.24985353863476095,-0.0786952767576075,0.2831779022039328,0.07077384254778213,0.1066609395037861,0.19337115073185235,0.027151432721199843,-0.010822785586834402,-0.057460889505357195,0.29397549038484816,0.6891166719144247,0.2878135432384095,0.19013993694752296,0.23094985833091572,0.25311228572981986,-0.257604314946275,0.7011126963951182,0.5890755122516041,0.45411558130972857,0.38066177712684574,-0.06853418805030463,0.314485492203302,-0.097697919123813,0.27810040013374454,0.36616064382748137,-0.10843573310885042,0.5391368418817006,0.678782190597929,0.2528523355363683],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"yaxis":{"title":{"text":"Return"},"tickformat":".0%"},"xaxis":{"title":{"text":"Year"},"range":[1988,2021]},"legend":{"yanchor":"top","y":0.99,"xanchor":"left","x":0.01}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('0efd46e7-8ccc-4d16-8851-1f9d4f4d6bc8');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<p></p><figcaption class="figure-caption">Figure 6.11: Returns and weights of various strategies historically</figcaption><p></p>
</figure>
</div>
</div>


</section>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1" role="doc-endnote"><p>This is a somewhat high risk aversion. With lower risk aversion choices, some strategies have single year return realizations below -100%.<a href="#fnref1" class="footnote-back" role="doc-backlink">â†©ï¸Ž</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./portfolios_frictions.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Optimal Portfolios: Practice</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./fixed-income.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Fixed Income</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>